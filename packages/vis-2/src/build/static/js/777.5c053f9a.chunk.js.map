{"version":3,"file":"static/js/777.5c053f9a.chunk.js","mappings":"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","sources":["Components/MaterialIconSelector.jsx","Components/UploadFile.jsx","Vis/Widgets/Basic/BasicBar.tsx","Vis/Widgets/Basic/BasicBulb.tsx","Vis/Widgets/Basic/BasicRedNumber.tsx","Vis/Widgets/Utils/DangerousHtmlWithScript.tsx","Vis/Widgets/Basic/BasicHtml.jsx","Vis/Widgets/Basic/BasicValueString.jsx","Vis/Widgets/Basic/BasicViewInWidget.jsx","Vis/Widgets/Basic/BasicViewInWidget8.jsx","Vis/Widgets/Basic/BasicGroup.jsx","Vis/Widgets/Basic/BasicSvgBool.jsx","Vis/Widgets/Basic/BasicSvgShape.tsx","Vis/Widgets/Basic/BasicScreenResolution.tsx","Vis/Widgets/Basic/BasicSpeechToText.tsx","Vis/Widgets/Basic/BasicIFrame.tsx","Vis/Widgets/Basic/BasicImage.tsx","Vis/Widgets/Basic/BasicHtmlNav.tsx","Vis/Widgets/Basic/FiltersEditorDialog.tsx","Vis/Widgets/Basic/BasicFilterDropdown.tsx","Vis/Widgets/Basic/BasicLink.tsx","Vis/Widgets/Basic/BasicImage8.tsx","Vis/Widgets/JQui/JQuiButton.jsx","Vis/Widgets/JQui/JQuiButtonBlank.jsx","Vis/Widgets/JQui/JQuiIconLink.jsx","Vis/Widgets/JQui/JQuiWriteState.jsx","Vis/Widgets/JQui/JQuiIconInc.jsx","Vis/Widgets/JQui/JQuiIconHttpGet.jsx","Vis/Widgets/JQui/JQuiDialog.jsx","Vis/Widgets/JQui/JQuiIconDialog.jsx","Vis/Widgets/JQui/JQuiContainerDialog.jsx","Vis/Widgets/JQui/JQuiButtonNavigation.jsx","Vis/Widgets/JQui/JQuiIconNavigation.jsx","Vis/Widgets/JQui/JQuiButtonPasswordNavigation.jsx","Vis/Widgets/JQui/JQuiDialogExternal.jsx","Vis/Widgets/JQui/JQuiButtonDialogClose.jsx","Vis/Widgets/JQui/JQuiContainerButtonDialog.jsx","Vis/Widgets/JQui/JQuiContainerIconDialog.jsx","Vis/Widgets/JQui/JQuiInput.jsx","Vis/Widgets/JQui/JQuiInputSet.jsx","Vis/Widgets/JQui/JQuiBinaryState.jsx","Vis/Widgets/JQui/JQuiRadio.jsx","Vis/Widgets/JQui/BulkEditor.tsx","Vis/Widgets/JQui/JQuiState.jsx","Vis/Widgets/JQui/JQuiRadioList.jsx","Vis/Widgets/JQui/JQuiSelectList.jsx","Vis/Widgets/JQui/JQuiIconStatePushButton.jsx","Vis/Widgets/JQui/JQuiIconStateBool.jsx","Vis/Widgets/JQui/JQuiRadioSteps.jsx","Vis/Widgets/JQui/JQuiSlider.jsx","Vis/Widgets/JQui/JQuiSliderVertical.jsx","Vis/Widgets/JQui/JQuiInputDate.tsx","Vis/Widgets/JQui/JQuiInputDateTime.tsx","Vis/Widgets/JQui/JQuiToggle.jsx","Vis/Widgets/Tabs/TabsSliderTabs.jsx","Vis/Widgets/index.jsx","Vis/visOrderMenu.tsx","Vis/visBaseWidget.tsx","Vis/visRxWidget.tsx","Vis/visCanWidget.jsx","Vis/visNavigation.tsx","Vis/visView.tsx"],"sourcesContent":["import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@mui/styles';\n\nimport {\n    Button,\n    Dialog,\n    DialogActions,\n    DialogContent,\n    DialogTitle,\n    FormControl,\n    FormControlLabel,\n    InputAdornment,\n    Grid,\n    Radio,\n    RadioGroup, TextField, LinearProgress, Pagination,\n} from '@mui/material';\n\nimport {\n    Search as SearchIcon,\n    Close as ClearIcon,\n    Check as CheckIcon,\n    Delete as EraseIcon,\n} from '@mui/icons-material';\n\nimport { I18n, Utils, Icon } from '@iobroker/adapter-react-v5';\n\nimport UploadFile from './UploadFile';\n\nconst MAX_ICONS = 250;\n\nconst styles = theme => ({\n    dialog: {\n        height: '100%',\n    },\n    iconName: {\n        fontSize: 10,\n        width: 50,\n        overflow: 'hidden',\n        textOverflow: 'ellipsis',\n    },\n    iconDiv: {\n        margin: 0,\n        textAlign: 'center',\n        cursor: 'pointer',\n        padding: 2,\n        borderRadius: 2,\n        '&:hover': {\n            backgroundColor: theme.palette.secondary.main,\n        },\n    },\n    icon: {\n        width: 48,\n        height: 48,\n        color: theme.palette.text.primary,\n    },\n    iconSelected: {\n        backgroundColor: theme.palette.primary.main,\n        '&:hover': {\n            backgroundColor: theme.palette.primary.light,\n        },\n    },\n    typeName: {\n        whiteSpace: 'nowrap',\n    },\n});\n\nconst ICON_TYPES = ['baseline', 'outline', 'round', 'sharp', 'twotone', 'knx-uf', 'upload'];\n\nclass MaterialIconSelector extends Component {\n    constructor(props) {\n        super(props);\n        this.list = {};\n        this.index = null;\n        const iconType = this.props.iconType || window.localStorage.getItem('vis.icon.type') || ICON_TYPES[0];\n        this.state = {\n            listLoaded: false,\n            selectedIcon: '',\n            filter: this.props.filter || window.localStorage.getItem('vis.icon.filter') || '',\n            iconType,\n            iconTypeLoaded: {},\n            filtered: [],\n            loading: iconType !== 'upload',\n            page: 1,\n            maxPages: 0,\n        };\n    }\n\n    setStateAsync(state) {\n        return new Promise(resolve => {\n            this.setState(state, resolve);\n        });\n    }\n\n    async loadIconSet(type) {\n        if (!this.list[type]) {\n            await this.setStateAsync({ loading: true });\n            this.list[type] = true;\n            if (type === 'customIcons') {\n                try {\n                    this.list[type] = await fetch(this.props.customIcons)\n                        .then(res => res.json());\n                } catch (e) {\n                    this.list[type] = {};\n                    console.error(`Cannot load custom icons from ${this.props.customIcons}: ${e}`);\n                }\n            } else {\n                this.list[type] = await fetch(`./material-icons/${type}.json`)\n                    .then(res => res.json());\n            }\n            const icons = Object.keys(this.list[type]);\n            for (let i = 0; i < icons.length; i++) {\n                const icon = icons[i];\n                this.list[type][icon] = `data:image/svg+xml;base64,${this.list[type][icon]}`;\n            }\n            this.setState({\n                iconTypeLoaded: { ...this.state.iconTypeLoaded, [type]: true },\n                filtered: [],\n                loading: false,\n            }, () =>\n                this.applyFilter(true));\n        }\n    }\n\n    loadList() {\n        if (!this.state.listLoaded) {\n            fetch('./material-icons/index.json')\n                .then(res => res.json())\n                .then(async index => {\n                    this.index = index;\n                    await this.loadIconSet(this.state.iconType);\n                    this.setState({ listLoaded: true }, () =>\n                        this.applyFilter(true));\n                });\n        }\n    }\n\n    componentWillUnmount() {\n        this.filterTimer && clearTimeout(this.filterTimer);\n    }\n\n    applyFilter(filter) {\n        let timeout = 200;\n        if (filter === true) {\n            timeout = 0;\n            filter = undefined;\n        }\n        this.filterTimer && clearTimeout(this.filterTimer);\n        this.filterTimer = setTimeout(() => {\n            this.filterTimer = null;\n            let filtered;\n            filter = filter === undefined ? this.state.filter : filter;\n            if (filter) {\n                filter = filter.toLowerCase();\n                if (this.state.iconType === 'knx-uf') {\n                    filtered = Object.keys(this.list['knx-uf']).filter(icon => icon.includes(filter));\n                } else if (this.state.iconType === 'customIcons') {\n                    filtered = Object.keys(this.list.customIcons).filter(icon => icon.includes(filter));\n                } else {\n                    filtered = this.index\n                        .filter(icon =>\n                            !icon.unsupported_families?.includes(this.state.iconType) &&\n                            (icon.name.includes(filter) || icon.tags?.find(tag => tag.includes(filter))))\n                        .map(icon => icon.name);\n                }\n            } else if (this.state.iconType === 'knx-uf') {\n                filtered = Object.keys(this.list['knx-uf']);\n            } else if (this.state.iconType === 'customIcons') {\n                filtered = Object.keys(this.list.customIcons);\n            } else {\n                filtered = this.index\n                    .filter(icon => !icon.unsupported_families || !icon.unsupported_families.includes(this.state.iconType))\n                    .map(icon => icon.name);\n            }\n\n            this.setState({\n                filtered,\n                page: 1,\n                maxPages: Math.ceil(filtered.length / MAX_ICONS),\n            });\n        }, timeout);\n    }\n\n    componentDidMount() {\n        this.loadList();\n    }\n\n    onSelect() {\n        if (this.state.selectedIcon && this.state.selectedIcon.startsWith('data:')) {\n            this.props.onClose(this.state.selectedIcon);\n        } else if (this.list[this.state.iconType] && this.list[this.state.iconType] !== true) {\n            this.props.onClose(this.list[this.state.iconType][this.state.selectedIcon]);\n        }\n    }\n\n    renderIcons() {\n        const iconStyle = this.props.customColor && this.state.iconType === 'customIcons' ? { color: this.props.customColor } : {};\n        const icons = [];\n\n        for (let i = (this.state.page - 1) * MAX_ICONS; i < this.state.page * MAX_ICONS && i < this.state.filtered.length; i++) {\n            const icon = this.state.filtered[i];\n            icons.push(<div\n                key={icon}\n                className={Utils.clsx(this.props.classes.iconDiv, this.state.selectedIcon === icon && this.props.classes.iconSelected)}\n                onClick={() => this.setState({ selectedIcon: icon })}\n                onDoubleClick={() => this.setState({ selectedIcon: icon }, () => this.onSelect())}\n            >\n                <Icon\n                    src={this.list[this.state.iconType][icon]}\n                    className={this.props.classes.icon}\n                    style={iconStyle}\n                />\n                <div className={this.props.classes.iconName}>{icon.replace(/_/g, ' ')}</div>\n            </div>);\n        }\n\n        return icons;\n    }\n\n    render() {\n        return <Dialog\n            open={!0}\n            maxWidth=\"lg\"\n            fullWidth\n            classes={{ paper: this.props.classes.dialog }}\n        >\n            <DialogTitle>\n                <span style={{ marginRight: 20 }}>\n                    {this.state.iconType === 'knx-uf' ? 'KNX UF' : (this.state.iconType !== 'upload' ? 'Material' : '')}\n                    &nbsp;Icon Selector\n                </span>\n                {this.state.iconType !== 'upload' ? <TextField\n                    value={this.state.filter}\n                    InputProps={{\n                        startAdornment:\n                            <InputAdornment position=\"start\">\n                                <SearchIcon />\n                            </InputAdornment>,\n                        endAdornment:\n                            this.state.filter ? <InputAdornment position=\"start\">\n                                <ClearIcon\n                                    style={{ cursor: 'pointer' }}\n                                    onClick={() => {\n                                        window.localStorage.removeItem('vis.icon.filter');\n                                        this.setState({ filter: '' }, () => this.applyFilter(true));\n                                    }}\n                                />\n                            </InputAdornment> : null,\n                    }}\n                    variant=\"standard\"\n                    onChange={e => {\n                        window.localStorage.setItem('vis.icon.filter', e.target.value);\n                        this.setState({ filter: e.target.value }, () =>\n                            this.applyFilter());\n                    }}\n                    helperText={I18n.t('material_icons_result', this.state.filtered.length)}\n                /> : null}\n            </DialogTitle>\n            <DialogContent style={{ overflowY: 'hidden', height: '100%' }}>\n                {!this.props.iconType ? <div style={{ width: 140, display: 'inline-block', verticalAlign: 'top' }}>\n                    <FormControl>\n                        <RadioGroup\n                            value={this.state.iconType}\n                            onChange={e => this.setState({ iconType: e.target.value })}\n                        >\n                            {ICON_TYPES.map(type => <FormControlLabel\n                                onClick={async () => {\n                                    window.localStorage.setItem('vis.icon.type', type);\n                                    const newState = { iconType: type };\n                                    if (type !== 'upload') {\n                                        await this.loadIconSet(type);\n                                        if (this.state.selectedIcon && !this.list[type][this.state.selectedIcon]) {\n                                            newState.selectedIcon = '';\n                                        }\n                                    } else {\n                                        newState.selectedIcon = '';\n                                        newState.maxPages = 0;\n                                    }\n\n                                    this.setState(newState, () => this.applyFilter(true));\n                                }}\n                                key={type}\n                                value={type}\n                                control={<Radio />}\n                                label={I18n.t(`material_icons_${type}`)}\n                                classes={{ label: this.props.classes.typeName }}\n                            />)}\n                            {this.props.customIcons ? <FormControlLabel\n                                onClick={async () => {\n                                    window.localStorage.setItem('vis.icon.type', 'customIcons');\n                                    await this.loadIconSet('customIcons');\n                                    const newState = { iconType: 'customIcons' };\n                                    if (this.state.selectedIcon && !this.list.customIcons[this.state.selectedIcon]) {\n                                        newState.selectedIcon = '';\n                                    }\n                                    this.setState(newState);\n                                }}\n                                key=\"customIcons\"\n                                value=\"customIcons\"\n                                control={<Radio />}\n                                label={I18n.t('custom_icons')}\n                                classes={{ label: this.props.classes.typeName }}\n                            /> : null}\n                        </RadioGroup>\n                    </FormControl>\n                </div> : null}\n                <div\n                    style={{\n                        width: 'calc(100% - 150px)',\n                        display: 'inline-block',\n                        height: '100%',\n                        overflowY: 'auto',\n                        paddingLeft: 10,\n                    }}\n                >\n                    {this.state.iconType === 'knx-uf' ? <div style={{ paddingBottom: 20 }}>\n                        {I18n.t('Source:')}\n                        &nbsp;\n                        <a\n                            style={{ textDecoration: 'none' }}\n                            href=\"https://github.com/OpenAutomationProject/knx-uf-iconset\"\n                            target=\"_blank\"\n                            rel=\"noreferrer\"\n                        >\n                            https://github.com/OpenAutomationProject/knx-uf-iconset\n                        </a>\n                    </div> : null}\n                    {this.state.iconType !== 'upload' && !this.state.loading && this.list[this.state.iconType] && this.list[this.state.iconType] !== true ? <div style={{ width: '100%' }}>\n                        <Grid\n                            container\n                            spacing={2}\n                            style={{\n                                width: '100%',\n                                paddingTop: 20,\n                            }}\n                        >\n                            {this.renderIcons()}\n                        </Grid>\n                    </div> : (this.state.iconType !== 'upload' ? <LinearProgress /> : null)}\n                    {this.state.iconType === 'upload' ? <div>\n                        <div\n                            style={{\n                                width: '100%',\n                                textAlign: 'center',\n                                marginBottom: 10,\n                                marginTop: 10,\n                            }}\n                        >\n                            {I18n.t('icon_upload_hint')}\n                            <br />\n                            <Button\n                                variant=\"outlined\"\n                                onClick={() => window.open('https://github.com/ioBroker/ioBroker.vis-2#svg-and-currentcolor', '_blank')}\n                            >\n                                {I18n.t('Read about currentColor in SVG')}\n                            </Button>\n                        </div>\n                        <UploadFile\n                            themeType={this.props.themeType}\n                            onUpload={(name, data) => this.setState({ selectedIcon: data })}\n                            maxSize={15_000}\n                            accept={{\n                                'image/png': ['.png'],\n                                'image/jpeg': ['.jpg'],\n                                'image/svg+xml': ['.svg'],\n                                'image/gif': ['.gif'],\n                                'image/apng': ['.apng'],\n                                'image/avif': ['.avif'],\n                                'image/webp': ['.webp'],\n                            }}\n                        />\n                    </div> : null}\n                </div>\n            </DialogContent>\n            <DialogActions>\n                {this.state.maxPages > 1 && !this.state.loading ? <div style={{ marginLeft: 140 }}>\n                    <Pagination\n                        count={this.state.maxPages}\n                        color=\"primary\"\n                        page={this.state.page}\n                        onChange={(event, page) => this.setState({ page })}\n                    />\n                </div> : null}\n                {this.state.maxPages > 1 ? <div style={{ flexGrow: 1 }} /> : null}\n                {this.props.value ? <Button\n                    variant=\"outlined\"\n                    color=\"grey\"\n                    onClick={() => this.props.onClose('')}\n                    startIcon={<EraseIcon />}\n                >\n                    {I18n.t('Delete')}\n                </Button> : null}\n                <Button\n                    variant=\"contained\"\n                    color=\"primary\"\n                    onClick={() => this.onSelect()}\n                    disabled={!this.state.selectedIcon}\n                    startIcon={<CheckIcon />}\n                >\n                    {I18n.t('Select')}\n                </Button>\n                <Button\n                    variant=\"contained\"\n                    color=\"grey\"\n                    onClick={() => this.props.onClose(null)}\n                    startIcon={<ClearIcon />}\n                >\n                    {I18n.t('Cancel')}\n                </Button>\n            </DialogActions>\n        </Dialog>;\n    }\n}\n\nMaterialIconSelector.propTypes = {\n    value: PropTypes.string, // current icon\n    filter: PropTypes.string, // filter for icon list\n    iconType: PropTypes.string, // icon type (baseline, outlined, round, sharp, twotone)\n    onClose: PropTypes.func.isRequired, // close dialog\n    customIcons: PropTypes.string, // path to additional icons file\n    customColor: PropTypes.string, // additional icons color\n    themeType: PropTypes.string,\n};\n\nconst _MaterialIconSelector = withStyles(styles)(MaterialIconSelector);\nwindow.VisMaterialIconSelector = _MaterialIconSelector;\nexport default _MaterialIconSelector;\n","import PropTypes from 'prop-types';\nimport { useState, useCallback } from 'react';\nimport { useDropzone } from 'react-dropzone';\n\nimport { CircularProgress } from '@mui/material';\n\nimport { FolderZip } from '@mui/icons-material';\n\nimport { I18n, Utils } from '@iobroker/adapter-react-v5';\n\nconst IMAGE_TYPES = ['.png', '.jpg', '.svg', '.gif', '.apng', '.avif', '.webp'];\n\nconst UploadFile = props => {\n    const [fileName, setFileName] = useState('');\n    const [fileData, setFileData] = useState(null);\n    const [working, setWorking] = useState(false);\n    const [error, setError] = useState('');\n\n    const onDrop = useCallback((acceptedFiles, fileRejections) => {\n        if (acceptedFiles?.length) {\n            setWorking(true);\n            error && setError('');\n            const reader = new FileReader();\n            setFileName(acceptedFiles[0].name);\n\n            reader.onload = async evt => {\n                setWorking(false);\n                setFileData(evt.target.result);\n                props.onUpload(acceptedFiles[0].name, evt.target.result);\n            };\n\n            reader.readAsDataURL(acceptedFiles[0]);\n        }\n        if (fileRejections?.length) {\n            fileRejections[0].errors.forEach(err => {\n                if (err.code === 'file-too-large') {\n                    setError(I18n.t('File too large'));\n                } else if (err.code === 'file-invalid-type') {\n                    setError(I18n.t('Invalid file type'));\n                } else {\n                    setError(`Error: ${err.message}`);\n                }\n                setTimeout(() => error && setError(''), 3000);\n            });\n        }\n    }, []);\n\n    const { getRootProps, getInputProps, isDragActive } = useDropzone({\n        onDrop,\n        maxFiles: 1,\n        maxSize: props.maxSize || undefined,\n        accept: props.accept,\n    });\n\n    return <div\n        {...getRootProps()}\n        style={{\n            display: 'flex',\n            alignItems: 'center',\n            justifyContent: 'center',\n            width: '100%',\n            height: 200,\n            borderRadius: 4,\n            boxSizing: 'border-box',\n            borderStyle: 'dashed',\n            borderWidth: 1,\n            borderColor: isDragActive ? (props.themeType === 'dark' ? 'lightgreen' : 'green') : 'inherit',\n        }}\n    >\n        {error ? <div style={{ color: '#a90000' }}>{error}</div> : null}\n        {props.disabled || working ? null : <input {...getInputProps()} />}\n        {working ? <CircularProgress /> :\n            <p\n                style={{\n                    textAlign: 'center',\n                    color: isDragActive ? (props.themeType === 'dark' ? 'lightgreen' : 'green') : 'inherit',\n                }}\n            >\n                {fileName ? <>\n                    <div>{fileName}</div>\n                    {fileName.endsWith('.zip') ? <FolderZip /> : null}\n                    {IMAGE_TYPES.find(ext => fileName.toLowerCase().endsWith(ext)) ?\n                        <img\n                            src={fileData}\n                            alt=\"uploaded\"\n                            style={{\n                                maxWidth: 100,\n                                maxHeight: 100,\n                            }}\n                        /> : null}\n                    {fileData ? <div style={{ fontSize: 10, opacity: 0.5 }}>\n                        (\n                        {Utils.formatBytes(fileData.length)}\n                        )\n                    </div> : null}\n                </> : (props.instruction || `${I18n.t('Drop the files here ...')} ${props.maxSize ? I18n.t('(Maximal file size is %s)', Utils.formatBytes(props.maxSize)) : ''}`)}\n            </p>}\n    </div>;\n};\n\nUploadFile.propTypes = {\n    onUpload: PropTypes.func,\n    disabled: PropTypes.bool,\n    themeType: PropTypes.string,\n    accept: PropTypes.object, // {'application/zip': ['.zip'], 'application/json': ['.json']},\n    instruction: PropTypes.string,\n    maxSize: PropTypes.number,\n};\n\nexport default UploadFile;\n","import React from 'react';\n\nimport { GetRxDataFromWidget, RxRenderWidgetProps } from '@/types';\nimport VisRxWidget from '@/Vis/visRxWidget';\n\n// eslint-disable-next-line no-use-before-define\ntype RxData = GetRxDataFromWidget<typeof BasicBar>;\n\nexport default class BasicBar extends VisRxWidget<RxData> {\n    /**\n     * Returns the widget info which is rendered in the edit mode\n     */\n    static getWidgetInfo() {\n        return {\n            id: 'tplValueFloatBar',\n            visSet: 'basic',\n            visName: 'Bar',\n            visPrev: 'widgets/basic/img/Prev_ValueFloatBar.png',\n            visAttrs: [{\n                name: 'common',\n                fields: [\n                    {\n                        name: 'oid',\n                        type: 'id',\n                    },\n                    {\n                        name: 'min',\n                        type: 'number',\n                        default: 0,\n                    },\n                    {\n                        name: 'max',\n                        type: 'number',\n                        default: 100,\n                    },\n                    {\n                        name: 'orientation',\n                        type: 'select',\n                        default: 'horizontal',\n                        options: [\n                            { value: 'horizontal', label: 'horizontal' },\n                            { value: 'vertical', label: 'vertical' },\n                        ],\n                    },\n                    {\n                        name: 'color',\n                        type: 'color',\n                        default: 'blue',\n                    },\n                    {\n                        name: 'border',\n                        type: 'text',\n                    },\n                    {\n                        name: 'shadow',\n                        type: 'text',\n                    },\n                    {\n                        name: 'reverse',\n                        type: 'checkbox',\n                    },\n                ],\n            }],\n            visDefaultStyle: {\n                width: 200,\n                height: 130,\n            },\n        } as const;\n    }\n\n    /**\n     * Enables calling widget info on the class instance itself\n     */\n    // eslint-disable-next-line class-methods-use-this\n    getWidgetInfo() {\n        return BasicBar.getWidgetInfo();\n    }\n\n    /**\n     * Calculate the width or height of the bar w.r.t. to the border\n     *\n     * @param css the border css attribute\n     * @param multiplier number of borders, normally 2\n     */\n    // eslint-disable-next-line class-methods-use-this\n    extractWidth(css: string, multiplier: number): number | string | undefined {\n        // extract from \"2px solid #aabbcc\" => 2px\n        const m = css.match(/([0-9]+)(px|em)?/);\n        if (m) {\n            if (m[1] && m[2]) {\n                return parseInt(m[1], 10) * (multiplier || 1) + m[2];\n            }\n            return parseInt(m[1], 10) * (multiplier || 1);\n        }\n\n        return undefined;\n    }\n\n    /**\n     * Calculate the length of the bar\n     */\n    getCalc(): string {\n        // @ts-ignore\n        const min = (this.state.rxData.min || this.state.rxData.min === 0) ? Number(this.state.rxData.min) : 0;\n        // @ts-ignore\n        const max = (this.state.rxData.max || this.state.rxData.max === 0) ? Number(this.state.rxData.max) : 100;\n        let val = parseFloat(this.state.values[`${this.state.rxData.oid}.val`]) || 0;\n        val = (val - min) / (max - min);\n        return (this.state.rxData.border) ? (`calc(${Math.round(val * 100)}% - ${this.extractWidth(this.state.rxData.border as string, 2)})`) : (`${Math.round(val * 100)}%`);\n    }\n\n    /**\n     * Renders the widget\n     *\n     * @param props props passed to the parent classes render method\n     */\n    renderWidgetBody(props: RxRenderWidgetProps): React.JSX.Element {\n        super.renderWidgetBody(props);\n\n        let style: React.CSSProperties;\n\n        if (this.state.rxData.orientation === 'vertical') {\n            style = { height: this.getCalc() };\n            if (this.state.rxData.reverse) {\n                style = {\n                    ...style, left: 0, position: 'absolute', bottom: '0',\n                };\n            }\n\n            if (this.state.rxData.border) {\n                style = { ...style, border: this.state.rxData.border, width: `calc(100% - ${this.extractWidth(this.state.rxData.border, 2)}` };\n            }\n        } else {\n            style = { width: this.getCalc() };\n            if (this.state.rxData.reverse) {\n                style = {\n                    ...style, float: 'right',\n                };\n            }\n\n            if (this.state.rxData.border) {\n                style = { ...style, border: this.state.rxData.border, height: `calc(100% - ${this.extractWidth(this.state.rxData.border, 2)}` };\n            }\n        }\n\n        if (this.state.rxData.shadow) {\n            style = { ...style, boxShadow: this.state.rxData.shadow };\n        }\n\n        if (this.state.rxData.color) {\n            style = { ...style, backgroundColor: this.state.rxData.color };\n        }\n\n        return <div className=\"vis-widget-body\">\n            <div data-oid={this.state.rxData.oid} className=\"vis-widget-body\" style={style}>\n            </div>\n        </div>;\n    }\n}\n","import React from 'react';\n// eslint-disable-next-line import/no-cycle\nimport VisRxWidget from '@/Vis/visRxWidget';\nimport { GetRxDataFromWidget, RxRenderWidgetProps } from '@/types';\nimport { NOTHING_SELECTED } from '@/Utils/utils';\n\n// eslint-disable-next-line no-use-before-define\ntype RxData = GetRxDataFromWidget<typeof BasicBulb>\n\nexport default class BasicBulb extends VisRxWidget<RxData> {\n    /**\n     * Enables calling widget info on the class instance itself\n     */\n    // eslint-disable-next-line class-methods-use-this\n    getWidgetInfo() {\n        return BasicBulb.getWidgetInfo();\n    }\n\n    /**\n     * Returns the widget info which is rendered in the edit mode\n     */\n    static getWidgetInfo() {\n        return {\n            id: 'tplBulbOnOffCtrl',\n            visSet: 'basic',\n            visName: 'Bulb on/off',\n            visPrev: 'widgets/basic/img/Prev_BulbOnOffCtrl.png',\n            visAttrs: [{\n                name: 'common',\n                fields: [\n                    {\n                        name: 'oid',\n                        type: 'id',\n                    },\n                    {\n                        name: 'min',\n                    },\n                    {\n                        name: 'max',\n                    },\n                    {\n                        name: 'icon_off',\n                        type: 'image',\n                        default: 'img/bulb_off.png',\n                    },\n                    {\n                        name: 'icon_on',\n                        type: 'image',\n                        default: 'img/bulb_on.png',\n                    },\n                    {\n                        name: 'readOnly',\n                        type: 'checkbox',\n                    },\n                ],\n            },\n            {\n                name: 'ccontrol',\n                fields: [\n                    {\n                        name: 'urlTrue',\n                    },\n                    {\n                        name: 'urlFalse',\n                    },\n                    {\n                        name: 'oidTrue',\n                        type: 'id',\n                    },\n                    {\n                        name: 'oidFalse',\n                        type: 'id',\n                    },\n                    {\n                        name: 'oidTrueValue',\n                    },\n                    {\n                        name: 'oidFalseValue',\n                    },\n                ],\n            }],\n        };\n    }\n\n    /**\n     * Handle a click event\n     */\n    toggle(): void {\n        if (this.state.rxData.oid === NOTHING_SELECTED || this.state.rxData.readOnly) {\n            return;\n        }\n\n        let val = this.state.values[`${this.state.rxData.oid}.val`];\n\n        const {\n            oidTrue, urlTrue, oid, min, max, oidTrueValue, oidFalseValue,\n        } = this.state.rxData;\n        let {\n            urlFalse, oidFalse,\n        } = this.state.rxData;\n\n        let finalMin: string | boolean = min ?? '';\n        let finalMax: string | boolean = max ?? '';\n        let oidTrueValueFinal: string | boolean | number = oidTrueValue ?? '';\n        let oidFalseValueFinal: string | boolean | number = oidFalseValue ?? '';\n\n        if (oidTrue || urlTrue) {\n            if (!oidFalse && oidTrue) {\n                oidFalse = oidTrue;\n            }\n            if (!urlFalse && urlTrue) {\n                urlFalse = urlTrue;\n            }\n\n            if (finalMax !== '') {\n                if (finalMax === 'true')  finalMax = true;\n                if (finalMax === 'false') finalMax = false;\n                if (val === 'true')  val = true;\n                if (val === 'false') val = false;\n                val = (val === finalMax);\n            } else {\n                val = (val === 1 || val === '1' || val === true || val === 'true');\n            }\n            val = !val; // invert\n\n            if (finalMin === '' || finalMin === 'false' || finalMin === null) finalMin = false;\n            if (finalMax === '' || finalMax === 'true'  || finalMax === null) finalMax = true;\n\n            if (oidTrue && typeof oidTrue === 'string') {\n                if (val) {\n                    if (oidTrueValueFinal === '') oidTrueValueFinal = finalMax;\n                    if (oidTrueValueFinal === 'false') oidTrueValueFinal = false;\n                    if (oidTrueValueFinal === 'true')  oidTrueValueFinal = true;\n                    if (typeof oidTrueValueFinal === 'string') {\n                        const f = parseFloat(oidTrueValueFinal);\n                        if (f.toString() === oidTrueValueFinal) oidTrueValueFinal = f;\n                    }\n                    this.props.context.setValue(oidTrue, oidTrueValueFinal);\n                } else if (typeof oidFalse === 'string') {\n                    if (oidFalseValueFinal === '') oidFalseValueFinal = finalMin;\n                    if (oidFalseValueFinal === 'false') oidFalseValueFinal = false;\n                    if (oidFalseValueFinal === 'true')  oidFalseValueFinal = true;\n                    if (typeof oidFalseValueFinal === 'string') {\n                        const f = parseFloat(oidFalseValueFinal);\n                        if (f.toString() === oidFalseValueFinal) oidFalseValueFinal = f;\n                    }\n                    this.props.context.setValue(oidFalse, oidFalseValueFinal);\n                }\n            }\n\n            if (urlTrue) {\n                if (val) {\n                    this.props.socket.getRawSocket().emit('httpGet', urlTrue);\n                } else {\n                    this.props.socket.getRawSocket().emit('httpGet', urlFalse);\n                }\n            }\n        } else if ((finalMin === '' && (val === null || val === '' || val === undefined || val === false || val === 'false')) ||\n                        (finalMin !== '' && finalMin === val)) {\n            typeof oid === 'string' && this.props.context.setValue(oid, finalMax !== '' ? finalMax : true);\n        } else\n            if ((finalMax === '' && (val === true || val === 'true')) ||\n                        (finalMax !== '' && val === finalMax)) {\n                typeof oid === 'string' && this.props.context.setValue(oid,  finalMin !== '' ? finalMin : false);\n            } else if (typeof oid === 'string') {\n                val = parseFloat(val);\n                if (finalMin !== '' &&\n                    finalMax !== '' &&\n                    (typeof finalMax === 'number' || typeof finalMax === 'string') &&\n                    (typeof finalMin === 'number' || typeof finalMin === 'string')\n                ) {\n                    if (val >= (parseFloat(finalMax) - parseFloat(finalMin)) / 2) {\n                        val = finalMin;\n                    } else {\n                        val = finalMax;\n                    }\n                } else if (val >= 0.5) {\n                    val = 0;\n                } else {\n                    val = 1;\n                }\n\n                this.props.context.setValue(oid,  val);\n            }\n    }\n\n    /**\n     * Determine if the value is true or false\n     *\n     * @param val the value to calc result for\n     * @param min min value\n     * @param max max value\n     */\n    // eslint-disable-next-line class-methods-use-this\n    isFalse(val: any, min?: string | number, max?: string | number): boolean {\n        if (min !== undefined && min !== null && min !== '') {\n            if (val !== undefined && typeof val !== 'string') {\n                val = val.toString();\n            }\n\n            if (max !== undefined && max !== null && max !== '') {\n                return val !== max;\n            }\n\n            return val === min;\n        }\n\n        if (val === undefined || val === null || val === false || val === 'false' || val === 'FALSE' || val === 'False' || val === 'OFF' || val === 'Off' || val === 'off' || val === '') {\n            return true;\n        }\n        if (val === '0' || val === 0) {\n            return true;\n        }\n        const f = parseFloat(val);\n        if (f.toString() !== 'NaN') {\n            return !f;\n        }\n        return false;\n    }\n\n    /**\n     * Renders the widget\n     *\n     * @param props props passed to the parent classes render method\n     */\n    renderWidgetBody(props: RxRenderWidgetProps): React.JSX.Element {\n        super.renderWidgetBody(props);\n\n        const val = this.state.values[`${this.state.rxData.oid}.val`];\n        const isOff = this.isFalse(val, this.state.rxData.min as string, this.state.rxData.max as string);\n\n        let src;\n\n        if (isOff) {\n            src = this.state.rxData.icon_off || 'img/bulb_off.png';\n        } else {\n            src = this.state.rxData.icon_on || 'img/bulb_on.png';\n        }\n\n        return <div className=\"vis-widget-body\" onClick={() => this.toggle()}>\n            <img src={src.toString()} alt=\"tplBulbOnOffCtrl\" width=\"100%\" />\n        </div>;\n    }\n}\n","import React from 'react';\n\nimport { GetRxDataFromWidget, RxRenderWidgetProps } from '@/types';\nimport VisRxWidget from '@/Vis/visRxWidget';\n\n// eslint-disable-next-line no-use-before-define\ntype RxData = GetRxDataFromWidget<typeof BasicRedNumber>\n\ninterface SvgProps {\n    style?: React.CSSProperties;\n}\n\nconst PinSvg = (props: SvgProps) => <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 24\" style={props.style}>\n    <path\n        fill=\"currentColor\"\n        d=\"m7.97,0.026c-4.324,0 -7.82,3.72 -7.82,8.324c0,6.24 7.82,15.46 7.82,15.46s7.82,-9.21 7.82,-15.46c0,-4.6 -3.49,-8.32 -7.82,-8.32zm0,0\"\n    />\n</svg>;\n\nexport default class BasicRedNumber extends VisRxWidget<RxData> {\n    /**\n     * Returns the widget info which is rendered in the edit mode\n     */\n    static getWidgetInfo() {\n        return {\n            id: 'tplRedNumber',\n            visSet: 'basic',\n            visName: 'Red Number',\n            visPrev: 'widgets/basic/img/Prev_RedNumber.png',\n            visAttrs: [{\n                name: 'common',\n                fields: [\n                    {\n                        name: 'oid',\n                        type: 'id',\n                    },\n                    {\n                        name: 'oid',\n                        type: 'id',\n                    },\n                    {\n                        name: 'type',\n                        type: 'select',\n                        options: [\n                            { value: 'circle', label: 'basic_circle' },\n                            { value: 'pin', label: 'basic_pin' },\n                        ],\n                    },\n                    {\n                        name: 'html_prepend',\n                        type: 'html',\n                    },\n                    {\n                        name: 'html_append_singular',\n                        type: 'html',\n                    },\n                    {\n                        name: 'html_append_plural',\n                        type: 'html',\n                    },\n                    {\n                        name: 'background',\n                        type: 'color',\n                    },\n                    {\n                        name: 'borderColor',\n                        label: 'basic_borderColor',\n                        type: 'color',\n                        hidden: 'data.type === \"pin\"',\n                    },\n                    {\n                        name: 'borderRadius',\n                        label: 'basic_borderRadius',\n                        type: 'slider',\n                        min: 0,\n                        max: 100,\n                        step: 1,\n                        default: 16,\n                        hidden: 'data.type === \"pin\"',\n                    },\n                ],\n            }],\n            // visWidgetLabel: 'value_string',  // Label of widget\n            visDefaultStyle: {\n                width: 52,\n                height: 30,\n            },\n        } as const;\n    }\n\n    /**\n     * Enables calling widget info on the class instance itself\n     */\n    // eslint-disable-next-line class-methods-use-this\n    getWidgetInfo() {\n        return BasicRedNumber.getWidgetInfo();\n    }\n\n    /**\n     * Renders the widget\n     *\n     * @param props props passed to the parent classes render method\n     */\n    renderWidgetBody(props: RxRenderWidgetProps): React.JSX.Element | null {\n        super.renderWidgetBody(props);\n\n        const val: number | null | undefined = this.state.rxData.oid && this.state.rxData.oid !== 'nothing_selected' ? parseFloat(this.state.values[`${this.state.rxData.oid}.val`]) : null;\n\n        // hide on false\n        if (!this.props.editMode &&\n            (!val || this.state.values[`${this.state.rxData.oid}.val`] === 'false')\n        ) {\n            return null;\n        }\n\n        if (this.state.rxData.type === 'pin') {\n            return <div className=\"vis-widget-body\">\n                <PinSvg\n                    style={{\n                        width: '100%',\n                        height: '100%',\n                        position: 'absolute',\n                        top: 0,\n                        left: 0,\n                        zIndex: 0,\n                        color: this.state.rxData.background || 'red',\n                    }}\n                />\n                <div\n                    style={{\n                        position: 'absolute',\n                        top: '22%',\n                        width: '96%',\n                        textAlign: 'center',\n                        zIndex: 1,\n                    }}\n                >\n                    {this.state.rxData.html_prepend ?\n                        // eslint-disable-next-line react/no-danger\n                        <span dangerouslySetInnerHTML={{ __html: this.state.rxData.html_prepend }} /> : null}\n                    {val === null ? '--' : val}\n                    {val === 1 ?\n                        // eslint-disable-next-line react/no-danger\n                        <span dangerouslySetInnerHTML={{ __html: this.state.rxData.html_append_singular }} /> :\n                        // eslint-disable-next-line react/no-danger\n                        <span dangerouslySetInnerHTML={{ __html: this.state.rxData.html_append_plural }} />}\n                </div>\n            </div>;\n        }\n\n        const style: React.CSSProperties = {\n            padding: 3,\n            borderRadius: this.state.rxData.borderRadius !== undefined && this.state.rxData.borderRadius !== null ? parseFloat(this.state.rxData.borderRadius as unknown as string) : 16,\n            borderColor: this.state.rxData.borderColor ||  'white',\n            borderWidth: 3,\n            borderStyle: 'solid',\n            backgroundColor: this.state.rxData.background || 'red',\n            minWidth: 21,\n            textAlign: 'center',\n            color: props.style.color || 'white',\n            fontSize: props.style.fontSize || 20,\n            fontFamily: props.style.fontFamily || 'Helvetica',\n            display: 'flex',\n            justifyContent: 'center',\n            alignItems: 'center',\n            boxSizing: 'border-box',\n        };\n\n        return <div className=\"vis-widget-body\" style={style}>\n            {this.state.rxData.html_prepend ?\n                // eslint-disable-next-line react/no-danger\n                <span dangerouslySetInnerHTML={{ __html: this.state.rxData.html_prepend }} /> : null}\n            {val === null ? '--' : val}\n            {val === 1 ?\n                // eslint-disable-next-line react/no-danger\n                <span dangerouslySetInnerHTML={{ __html: this.state.rxData.html_append_singular }} /> :\n                // eslint-disable-next-line react/no-danger\n                <span dangerouslySetInnerHTML={{ __html: this.state.rxData.html_append_plural }} />}\n        </div>;\n    }\n}\n","import React from 'react';\n\ninterface DangerousHtmlWithScriptProps {\n    /** The passed html */\n    html: string;\n    /** If true uses a div, else a span */\n    isDiv?: boolean;\n    /** Any other props passed to the div or span element */\n    [other: string]: any;\n    /** The parent widget id */\n    wid: string;\n}\n\nclass DangerousHtmlWithScript extends React.Component<DangerousHtmlWithScriptProps> {\n    /**\n     * Called once if the component is mounted\n     * We add our scripts to the body here\n     */\n    componentDidMount(): void {\n        const doc = new DOMParser().parseFromString(this.props.html, 'text/html');\n        const scriptElements = doc.getElementsByTagName('script');\n        let i = 0;\n\n        const existingScripts = Array.from(document.querySelectorAll(\"script[type='text/javascript']\"));\n\n        for (const scriptElement of Array.from(scriptElements)) {\n            const id = `${this.props.wid}-${i++}`;\n            const scriptExists = existingScripts.find(script => script.id === id);\n\n            if (scriptExists) {\n                return;\n            }\n\n            const script = document.createElement('script');\n            script.id = id;\n            script.type = 'text/javascript';\n            script.async = true;\n            script.innerHTML = scriptElement.innerHTML;\n            document.body.appendChild(script);\n        }\n    }\n\n    /**\n     * Renders the component\n     */\n    render(): React.JSX.Element {\n        const { isDiv, html, ...otherProps } = this.props;\n\n        if (isDiv) {\n            // eslint-disable-next-line react/no-danger\n            return <div dangerouslySetInnerHTML={{ __html: html }} {...otherProps}></div>;\n        }\n\n        // eslint-disable-next-line react/no-danger\n        return <span dangerouslySetInnerHTML={{ __html: html }} {...otherProps}></span>;\n    }\n}\n\nexport default DangerousHtmlWithScript;\n","/**\n *  ioBroker.vis\n *  https://github.com/ioBroker/ioBroker.vis\n *\n *  Copyright (c) 2023-2024 Denis Haev https://github.com/GermanBluefox,\n *  Creative Common Attribution-NonCommercial (CC BY-NC)\n *\n *  http://creativecommons.org/licenses/by-nc/4.0/\n *\n * Short content:\n * Licensees may copy, distribute, display and perform the work and make derivative works based on it only if they give the author or licensor the credits in the manner specified by these.\n * Licensees may copy, distribute, display, and perform the work and make derivative works based on it only for noncommercial purposes.\n * (Free for non-commercial use).\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\n\n// eslint-disable-next-line import/no-cycle\nimport VisRxWidget from '../../visRxWidget';\nimport DangerousHtmlWithScript from '../Utils/DangerousHtmlWithScript';\n\nclass BasicHtml extends VisRxWidget {\n    static getWidgetInfo() {\n        return {\n            id: 'tplHtml',\n            visSet: 'basic',\n            visName: 'HTML',\n            visPrev: 'widgets/basic/img/Prev_HTML.png',\n            visAttrs: [{\n                name: 'common',\n                fields: [\n                    {\n                        name: 'html',\n                        type: 'html',\n                    },\n                    {\n                        name: 'refreshInterval',\n                        type: 'slider',\n                        min: 0,\n                        max: 180000,\n                        step: 100,\n                    },\n                ],\n            }],\n            // visWidgetLabel: 'value_string',  // Label of widget\n            visDefaultStyle: {\n                width: 200,\n                height: 130,\n            },\n        };\n    }\n\n    // eslint-disable-next-line class-methods-use-this\n    getWidgetInfo() {\n        return BasicHtml.getWidgetInfo();\n    }\n\n    async componentWillUnmount() {\n        this.interval && clearInterval(this.interval);\n        this.interval = null;\n        super.componentWillUnmount();\n    }\n\n    async componentDidMount() {\n        super.componentDidMount();\n        if (parseInt(this.state.rxData.refreshInterval, 10)) {\n            this.interval = setInterval(() => this.forceUpdate(), parseInt(this.state.rxData.refreshInterval, 10));\n        }\n    }\n\n    onRxDataChanged(prevRxData) {\n        super.onRxDataChanged(prevRxData);\n        if (this.interval) {\n            clearInterval(this.interval);\n            this.interval = null;\n        }\n        if (parseInt(this.state.rxData.refreshInterval, 10)) {\n            this.interval = setInterval(() => this.forceUpdate(), parseInt(this.state.rxData.refreshInterval, 10));\n        }\n    }\n\n    /**\n     * Renders the widget\n     *\n     * @return {Element}\n     */\n    renderWidgetBody(props) {\n        super.renderWidgetBody(props);\n\n        return <DangerousHtmlWithScript className=\"vis-widget-body\" html={this.state.rxData.html} isDiv wid={this.props.id} />;\n    }\n}\n\nBasicHtml.propTypes = {\n    id: PropTypes.string.isRequired,\n    context: PropTypes.object.isRequired,\n    view: PropTypes.string.isRequired,\n    editMode: PropTypes.bool.isRequired,\n};\n\nexport default BasicHtml;\n","/**\n *  ioBroker.vis\n *  https://github.com/ioBroker/ioBroker.vis\n *\n *  Copyright (c) 2022-2023 Denis Haev https://github.com/GermanBluefox,\n *  Creative Common Attribution-NonCommercial (CC BY-NC)\n *\n *  http://creativecommons.org/licenses/by-nc/4.0/\n *\n * Short content:\n * Licensees may copy, distribute, display and perform the work and make derivative works based on it only if they give the author or licensor the credits in the manner specified by these.\n * Licensees may copy, distribute, display, and perform the work and make derivative works based on it only for noncommercial purposes.\n * (Free for non-commercial use).\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\n\nimport { Icon } from '@iobroker/adapter-react-v5';\n\n// eslint-disable-next-line import/no-cycle\nimport VisRxWidget from '../../visRxWidget';\n\nclass BasicValueString extends VisRxWidget {\n    static getWidgetInfo() {\n        return {\n            id: 'tplValueString',\n            visSet: 'basic',\n            visName: 'String',\n            visPrev: 'widgets/basic/img/Prev_ValueString.png',\n            visAttrs: [{\n                name: 'common',\n                fields: [\n                    { name: 'oid', type: 'id' },\n                    { name: 'html_prepend', type: 'html' },\n                    { name: 'html_append', type: 'html' },\n                    { name: 'test_html', type: 'html' },\n                    { name: 'icon', type: 'icon64' },\n                    {\n                        name: 'iconSize',\n                        label: 'icon_size_in_pixels',\n                        type: 'slider',\n                        min: 5,\n                        max: 200,\n                        hidden: '!data.icon',\n                    },\n                ],\n            }],\n            visWidgetLabel: 'value_string',  // Label of widget\n            visDefaultStyle: {\n                width: 100,\n                height: 30,\n            },\n        };\n    }\n\n    // eslint-disable-next-line class-methods-use-this\n    getWidgetInfo() {\n        return BasicValueString.getWidgetInfo();\n    }\n\n    renderWidgetBody(props) {\n        super.renderWidgetBody(props);\n\n        // set default width and height\n        if (props.style.width === undefined) {\n            props.style.width = 50;\n        }\n        if (props.style.height === undefined) {\n            props.style.height = 20;\n        }\n\n        const oid = this.state.rxData.oid && this.state.rxData.oid.includes('\"') ? '' : this.state.rxData.oid || '';\n\n        let body;\n        if (this.props.editMode && this.state.rxData.test_html) {\n            body = this.state.rxData.test_html;\n        } else if (this.state.rxData.oid) {\n            if (this.state.rxData.oid.includes('\"')) {\n                body = this.state.rxData.oid.substring(1, this.state.rxData.oid.length - 1);\n            } else if (oid) {\n                body = this.state.values[`${oid}.val`];\n            } else {\n                body = '';\n            }\n        } else {\n            body = '';\n        }\n\n        const style = this.state.rxData.icon ? {\n            display: 'flex',\n            alignItems: 'center',\n        } : {};\n        return <div className=\"vis-widget-body\">\n            <div data-oid={oid} style={style}>\n                {this.state.rxData.icon ? <Icon\n                    src={this.state.rxData.icon}\n                    style={{\n                        width: this.state.rxData.iconSize || 24,\n                        height: this.state.rxData.iconSize || 24,\n                    }}\n                /> : null}\n                <span\n                    // eslint-disable-next-line react/no-danger\n                    dangerouslySetInnerHTML={{ __html: this.state.rxData.html_prepend ?? '' }}\n                />\n                <span>{body}</span>\n                <span\n                    // eslint-disable-next-line react/no-danger\n                    dangerouslySetInnerHTML={{ __html: this.state.rxData.html_append ?? '' }}\n                />\n            </div>\n        </div>;\n    }\n}\n\nBasicValueString.propTypes = {\n    id: PropTypes.string.isRequired,\n    context: PropTypes.object.isRequired,\n    view: PropTypes.string.isRequired,\n    editMode: PropTypes.bool.isRequired,\n};\n\nexport default BasicValueString;\n","/**\n *  ioBroker.vis\n *  https://github.com/ioBroker/ioBroker.vis\n *\n *  Copyright (c) 2022-2023 Denis Haev https://github.com/GermanBluefox,\n *  Creative Common Attribution-NonCommercial (CC BY-NC)\n *\n *  http://creativecommons.org/licenses/by-nc/4.0/\n *\n * Short content:\n * Licensees may copy, distribute, display and perform the work and make derivative works based on it only if they give the author or licensor the credits in the manner specified by these.\n * Licensees may copy, distribute, display, and perform the work and make derivative works based on it only for noncommercial purposes.\n * (Free for non-commercial use).\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\n\nimport {\n    DialogContent,\n    ListItemText,\n    ListSubheader,\n    MenuItem,\n    IconButton,\n    Dialog,\n    DialogTitle,\n} from '@mui/material';\n\nimport EditIcon from '@mui/icons-material/Edit';\nimport FileIcon from '@mui/icons-material/InsertDriveFile';\nimport { FaFolderOpen as FolderOpenedIcon } from 'react-icons/fa';\n\nimport { I18n } from '@iobroker/adapter-react-v5';\n\n// eslint-disable-next-line import/no-cycle\nimport VisRxWidget from '../../visRxWidget';\n\nclass BasicViewInWidget extends VisRxWidget {\n    static getWidgetInfo() {\n        return {\n            id: 'tplContainerView',\n            visSet: 'basic',\n            visName: 'View in widget',\n            visAttrs: [\n                {\n                    name: 'common',\n                    fields: [\n                        {\n                            name: 'contains_view',\n                            label: 'vis_2_widgets_basic_contains_view',\n                            type: 'views',\n                        },\n                        /*\n                        {\n                            name: 'test',\n                            label: 'vis_2_widgets_basic_test',\n                            type: 'custom',\n                            component: (\n                                field,\n                                data,\n                                onDataChange,\n                                options, // {context: {adapterName, instance, projectName, socket, views}, selectedView, selectedWidget, selectedWidgets}\n                            ) => <TextField\n                                fullWidth\n                                value={data[field.name]}\n                                onChange={e => {\n                                    onDataChange({ [field.name]: e.target.value });\n                                }}\n                            />,\n                        },\n                        */\n                    ],\n                },\n            ],\n            visPrev: 'widgets/basic/img/Prev_ContainerView.png',\n            visWidgetLabel: 'vis_2_widgets_basic_view_in_widget',  // Label of widget\n            visSetLabel: 'set_basic',\n            visDefaultStyle: {\n                width: 300,\n                height: 200,\n            },\n        };\n    }\n\n    // eslint-disable-next-line class-methods-use-this\n    getWidgetInfo() {\n        return BasicViewInWidget.getWidgetInfo();\n    }\n\n    getViewOptions(project, options = [], parentId = null, level = 0) {\n        project.___settings.folders\n            .filter(folder => (folder.parentId || null) === parentId)\n            .forEach(folder => {\n                options.push({\n                    type: 'folder',\n                    folder,\n                    level: level + 1,\n                });\n\n                this.getViewOptions(project, options, folder.id, level + 1);\n            });\n\n        const keys = Object.keys(project)\n            .filter(view => (project[view].parentId || null) === parentId && !view.startsWith('__'));\n\n        keys.forEach(view => {\n            options.push({\n                type: 'view',\n                view,\n                level: level + 1,\n            });\n        });\n\n        return options;\n    }\n\n    renderViewSelector() {\n        const options = this.getViewOptions(this.props.context.views, [], null, 0, true)\n            .filter(option => option.type === 'folder' || option.view !== this.props.view);\n\n        return [\n            <IconButton\n                key=\"button\"\n                className={this.props.context.editModeComponentClass}\n                onMouseDown={e => {\n                    e.stopPropagation();\n                    e.preventDefault();\n                    // Say to view to ignore next clicks on view to hold the widget selection\n                    this.props.onIgnoreMouseEvents(true);\n                    this.setState({ showViewSelector: true });\n                }}\n            >\n                <EditIcon />\n            </IconButton>,\n            this.state.showViewSelector ? <Dialog\n                key=\"dialog\"\n                open={!0}\n                onClose={() =>\n                    this.setState({ showViewSelector: false }, () =>\n                        // Say to view to cancel ignoring clicks\n                        this.props.onIgnoreMouseEvents(false))}\n            >\n                <DialogTitle>{I18n.t('vis_2_widgets_basic_contains_view')}</DialogTitle>\n                <DialogContent>\n                    {options.map((option, key) => (option.type === 'view' ?\n                        <MenuItem\n                            value={option.view}\n                            key={key.toString()}\n                            onClick={() =>\n                                this.setState({ showViewSelector: false }, () => {\n                                    // Say to view to cancel ignoring clicks\n                                    this.props.onIgnoreMouseEvents(false);\n                                    this.props.context.onWidgetsChanged([{\n                                        wid: this.props.id,\n                                        view: this.props.view,\n                                        data: {\n                                            contains_view: option.view,\n                                        },\n                                    }]);\n                                })}\n                            style={{ paddingLeft: option.level * 16, lineHeight: '36px' }}\n                        >\n                            <FileIcon style={{ verticalAlign: 'middle', marginRight: 4 }} />\n                            <ListItemText primary={option.view} style={{ verticalAlign: 'middle' }} />\n                        </MenuItem>\n                        :\n                        <ListSubheader key={key} style={{ paddingLeft: option.level * 16, lineHeight: '36px', backgroundColor: 'inherit' }}>\n                            <FolderOpenedIcon\n                                // className={this.props.classes.icon}\n                                style={{\n                                    verticalAlign: 'middle',\n                                    marginRight: 6,\n                                    marginTop: -3,\n                                    fontSize: 20,\n                                    color: '#00dc00',\n                                }}\n                            />\n                            <span style={{ fontSize: '1rem' }}>{option.folder.name}</span>\n                        </ListSubheader>))}\n                </DialogContent>\n            </Dialog> : null,\n        ];\n    }\n\n    renderWidgetBody(props) {\n        super.renderWidgetBody(props);\n        // set default width and height\n        if (props.style.width === undefined) {\n            props.style.width = 400;\n        }\n        if (props.style.height === undefined) {\n            props.style.height = 270;\n        }\n\n        const view = this.state.rxData.contains_view;\n\n        if (view === this.props.view) {\n            return <div className=\"vis-widget-body\" style={{ overflow: 'hidden', position: 'absolute' }}>\n                {I18n.t('vis_2_widgets_basic_cannot_recursive')}\n            </div>;\n        }\n        if (!view) {\n            return <div className=\"vis-widget-body\" style={{ overflow: 'hidden', position: 'absolute' }}>\n                {I18n.t('vis_2_widgets_basic_view_not_defined')}\n                {this.props.editMode ? this.renderViewSelector() : null}\n            </div>;\n        }\n\n        const style = {\n            position: 'absolute',\n        };\n        if (this.state.rxStyle['overflow-x'] && this.state.rxStyle['overflow-y']) {\n            delete props.style.overflow;\n            if (this.state.rxStyle['overflow-y'] === this.state.rxStyle['overflow-x']) {\n                style.overflow = this.state.rxStyle['overflow-x'];\n            } else {\n                style.overflowX = this.state.rxStyle['overflow-x'];\n                style.overflowY = this.state.rxStyle['overflow-y'];\n            }\n        } else if (this.state.rxStyle['overflow-x']) {\n            style.overflowX = this.state.rxStyle['overflow-x'];\n            delete props.style.overflow;\n        } else if (this.state.rxStyle['overflow-y']) {\n            style.overflowY = this.state.rxStyle['overflow-y'];\n            delete props.style.overflow;\n        } else if (this.state.rxStyle.overflow) {\n            style.overflow = this.state.rxStyle.overflow;\n        } else {\n            style.overflow = 'hidden';\n        }\n        delete props.style.overflow;\n        delete props.style.overflowX;\n        delete props.style.overflowY;\n\n        return <div className=\"vis-widget-body\" style={style}>\n            {this.state.editMode ? <div className=\"vis-editmode-helper\" /> : null}\n            {super.getWidgetView(view)}\n        </div>;\n    }\n}\n\nBasicViewInWidget.propTypes = {\n    id: PropTypes.string.isRequired,\n    context: PropTypes.object.isRequired,\n    view: PropTypes.string.isRequired,\n    editMode: PropTypes.bool.isRequired,\n    onIgnoreMouseEvents: PropTypes.func,\n};\n\nexport default BasicViewInWidget;\n","/**\n *  ioBroker.vis\n *  https://github.com/ioBroker/ioBroker.vis\n *\n *  Copyright (c) 2022-2023 Denis Haev https://github.com/GermanBluefox,\n *  Creative Common Attribution-NonCommercial (CC BY-NC)\n *\n *  http://creativecommons.org/licenses/by-nc/4.0/\n *\n * Short content:\n * Licensees may copy, distribute, display and perform the work and make derivative works based on it only if they give the author or licensor the credits in the manner specified by these.\n * Licensees may copy, distribute, display, and perform the work and make derivative works based on it only for noncommercial purposes.\n * (Free for non-commercial use).\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\n\nimport { I18n } from '@iobroker/adapter-react-v5';\n\n// eslint-disable-next-line import/no-cycle\nimport VisRxWidget from '../../visRxWidget';\n\nclass BasicViewInWidget8 extends VisRxWidget {\n    static getWidgetInfo() {\n        return {\n            id: 'tplStatefulContainerView8',\n            visSet: 'basic',\n            visName: 'View in widget 8',\n            visAttrs: 'oid;count[1]/number;group.views;contains_view_(0-count)/views',\n            visPrev: 'widgets/basic/img/Prev_StatefulContainerView8.png',\n        };\n    }\n\n    // eslint-disable-next-line class-methods-use-this\n    getWidgetInfo() {\n        return BasicViewInWidget8.getWidgetInfo();\n    }\n\n    renderWidgetBody(props) {\n        super.renderWidgetBody(props);\n        // set default width and height\n        if (props.style.width === undefined) {\n            props.style.width = 400;\n        }\n        if (props.style.height === undefined) {\n            props.style.height = 270;\n        }\n\n        const viewArr = [];\n        let i = 0;\n        while (this.state.rxData[`contains_view_${i}`] !== undefined) {\n            viewArr.push(this.state.rxData[`contains_view_${i}`]);\n            i++;\n        }\n\n        const oid = this.state.rxData.oid;\n        let val = this.state.values[`${oid}.val`];\n        let view;\n\n        if (oid !== 'nothing_selected' && val !== undefined) {\n            if (val === 'true' || val === true)  {\n                val = 1;\n            }\n            if (val === 'false' || val === false) {\n                val = 0;\n            }\n            view = viewArr[val];\n        } else {\n            view = viewArr[0];\n        }\n        /*\n        <% if (vis.editMode) { %>\n            <div class=\"editmode-helper\" />\n        <% } %>\n        <%\n            var viewArr = [];\n            var i = 0;\n            while (data.attr('contains_view_' + i) !== undefined) {\n                viewArr.push(data.attr('contains_view_' + i));\n                i++;\n            }\n        %>\n        <div class=\"vis-widget-body\">\n            <div class=\"vis-view-container\" data-oid=\"<%= data.attr('oid') %>\" data-vis-contains=\"<%= vis.binds.stateful.value(viewArr, data.attr('oid')) %>\" <%= (el) -> vis.binds.stateful.view(el, viewArr, data.attr('persistent'), data.attr('notIfInvisible')) %> />\n        </div>\n         */\n        if (view === this.props.view) {\n            return <div className=\"vis-widget-body\" style={{ overflow: 'hidden', position: 'absolute' }}>\n                {I18n.t('vis_2_widgets_basic_cannot_recursive')}\n            </div>;\n        }\n\n        const style = {\n            position: 'absolute',\n        };\n        if (this.state.rxStyle['overflow-x'] && this.state.rxStyle['overflow-y']) {\n            delete props.style.overflow;\n            if (this.state.rxStyle['overflow-y'] === this.state.rxStyle['overflow-x']) {\n                style.overflow = this.state.rxStyle['overflow-x'];\n            } else {\n                style.overflowX = this.state.rxStyle['overflow-x'];\n                style.overflowY = this.state.rxStyle['overflow-y'];\n            }\n        } else if (this.state.rxStyle['overflow-x']) {\n            style.overflowX = this.state.rxStyle['overflow-x'];\n            delete props.style.overflow;\n        } else if (this.state.rxStyle['overflow-y']) {\n            style.overflowY = this.state.rxStyle['overflow-y'];\n            delete props.style.overflow;\n        } else if (this.state.rxStyle.overflow) {\n            style.overflow = this.state.rxStyle.overflow;\n        } else {\n            style.overflow = 'hidden';\n        }\n        delete props.style.overflow;\n        delete props.style.overflowX;\n        delete props.style.overflowY;\n\n        return <div className=\"vis-widget-body\" style={style}>\n            {this.state.editMode ? <div className=\"vis-editmode-helper\" /> : null}\n            {super.getWidgetView(view)}\n        </div>;\n    }\n}\n\nBasicViewInWidget8.propTypes = {\n    id: PropTypes.string.isRequired,\n    context: PropTypes.object.isRequired,\n    view: PropTypes.string.isRequired,\n    editMode: PropTypes.bool.isRequired,\n    dateFormat: PropTypes.string,\n};\n\nexport default BasicViewInWidget8;\n","/**\n *  ioBroker.vis\n *  https://github.com/ioBroker/ioBroker.vis\n *\n *  Copyright (c) 2022-2023 Denis Haev https://github.com/GermanBluefox,\n *  Creative Common Attribution-NonCommercial (CC BY-NC)\n *\n *  http://creativecommons.org/licenses/by-nc/4.0/\n *\n * Short content:\n * Licensees may copy, distribute, display and perform the work and make derivative works based on it only if they give the author or licensor the credits in the manner specified by these.\n * Licensees may copy, distribute, display, and perform the work and make derivative works based on it only for noncommercial purposes.\n * (Free for non-commercial use).\n */\n\nimport PropTypes from 'prop-types';\n\nimport { I18n } from '@iobroker/adapter-react-v5';\n\n// eslint-disable-next-line import/no-cycle\nimport VisRxWidget from '../../visRxWidget';\n\nclass BasicGroup extends VisRxWidget {\n    static getWidgetInfo() {\n        return {\n            id: '_tplGroup',\n            visSet: 'basic',\n            visAttrs: (data, onChange, context) => { // this will be dynamically rendered in src/src/Attributes/Widget/index.jsx => Widget class\n                // Try to find all fields where could be groupAttrX\n                const listOfWidgets = data.members;\n                const attributes = [];\n\n                listOfWidgets.forEach(wid => {\n                    const widgetData = context.views[context.view].widgets[wid]?.data;\n                    widgetData && Object.keys(widgetData).forEach(attr => {\n                        if (typeof widgetData[attr] === 'string') {\n                            let ms = widgetData[attr].match(/(groupAttr\\d+)+?/g);\n                            if (ms) {\n                                ms.forEach(m => !attributes.includes(m) && attributes.push(m));\n                            }\n\n                            // new style: {html}, {myAttr}, ...\n                            ms = widgetData[attr].match(/%([-_a-zA-Z\\d]+)+?%/g);\n                            if (ms) {\n                                ms.forEach(m => {\n                                    const _attr = m.substring(1, m.length - 1);\n                                    !attributes.includes(_attr) && attributes.push(_attr);\n                                });\n                            }\n                        }\n                    });\n                });\n\n                const common = {\n                    name: 'common',\n                    fields: [{\n                        name: 'group_hint',\n                        label: 'group_hint',\n                        type: 'help',\n                        text: 'group_help',\n                    }],\n                };\n                const objects = {\n                    name: 'objects',\n                    label: 'group_fields',\n                    fields: [],\n                };\n\n                const groupFields = [common, objects];\n\n                for (let i = 0; i < attributes.length; i++) {\n                    const attrName = attributes[i];\n                    const num = attrName.startsWith('groupAttr') ? parseInt(attrName.substring(9), 10) : 0;\n                    // Add to common\n                    common.fields.push({\n                        name: attrName,\n                        title: data[`attrName_${attrName}`] || data[`attrName${num}`] || attrName,\n                        type: data[`attrType_${attrName}`] || data[`attrType${num}`] || '',\n                    });\n                    // add to objects\n                    objects.fields.push({\n                        name: `attrName_${attrName}`,\n                        title: `${I18n.t('group_attrName')} [${attrName}]`,\n                        type: '',\n                    });\n                    objects.fields.push({\n                        name: `attrType_${attrName}`,\n                        title: `${I18n.t('group_attrType')} [${attrName}]`,\n                        type: 'select',\n                        noTranslation: true,\n                        options: [\n                            '',\n                            'text',\n                            'checkbox',\n                            'number',\n                            'html',\n                            'image',\n                            'icon',\n                            'icon64',\n                            'id',\n                            'color',\n                            'views',\n                            'widget',\n                            'history',\n                            'password',\n                            'fontname',\n                            'widget',\n                            'groups',\n                            'class',\n                            'filters',\n                            'json',\n                        ],\n                    });\n                }\n\n                return groupFields;\n            },\n        };\n    }\n\n    componentDidMount() {\n        super.componentDidMount();\n        this.setState({ mounted: true });\n    }\n\n    // eslint-disable-next-line class-methods-use-this\n    getWidgetInfo() {\n        // render dynamical attributes\n        const info = BasicGroup.getWidgetInfo();\n        info.visAttrs = info.visAttrs(this.props.context.views[this.props.view].widgets[this.props.id].data, null, {\n            views: this.props.context.views,\n            view: this.props.view,\n            socket: this.props.context.socket,\n            themeType: this.props.context.themeType,\n            projectName: this.props.context.projectName,\n            adapterName: this.props.context.adapterName,\n            instance: this.props.context.instance,\n            id: this.props.id,\n            widget: this.props.context.views[this.props.view].widgets[this.props.id],\n        });\n        return info;\n    }\n\n    renderWidgetBody(props) {\n        const context = this.props.context;\n        super.renderWidgetBody(props);\n        const widget = context.views[this.props.view].widgets[this.props.id];\n\n        if (this.props.id === this.props.selectedGroup) {\n            props.style.overflow = 'visible';\n        }\n\n        const groupWidgets = [...(widget?.data?.members || [])];\n        let rxGroupWidgets = null;\n\n        // wait till view has real div (ref), because of CanJS widgets. they really need a DOM div\n        if (groupWidgets?.length && this.state.mounted) {\n            // first relative, then absolute\n            groupWidgets.sort((a, b) => {\n                const widgetA = context.views[this.props.view].widgets[a] || {};\n                const widgetB = context.views[this.props.view].widgets[b] || {};\n                const isRelativeA = widgetA.style && (\n                    widgetA.style.position === 'relative' ||\n                    widgetA.style.position === 'static'   ||\n                    widgetA.style.position === 'sticky'\n                );\n                const isRelativeB = widgetB.style && (\n                    widgetB.style.position === 'relative' ||\n                    widgetB.style.position === 'static'   ||\n                    widgetB.style.position === 'sticky'\n                );\n                if (isRelativeA && isRelativeB) {\n                    return 0;\n                }\n                if (isRelativeA) {\n                    return -1;\n                }\n                return 1;\n            });\n\n            rxGroupWidgets = groupWidgets.map((id, index) => {\n                const _widget = context.views[this.props.view].widgets[id];\n                if (!_widget) {\n                    return null;\n                }\n\n                const isRelative = _widget.style && (\n                    _widget.style.position === 'relative' ||\n                    _widget.style.position === 'static' ||\n                    _widget.style.position === 'sticky'\n                );\n\n                // use the same container for relative and absolute widgets (props.refService)\n                return this.props.context.VisView.getOneWidget(index, _widget, {\n                    selectedGroup: this.props.selectedGroup,\n                    selectedWidgets: this.props.selectedWidgets,\n                    context: this.props.context,\n                    editMode: this.props.editMode,\n                    moveAllowed: this.props.moveAllowed,\n                    mouseDownOnView: this.props.mouseDownOnView,\n                    index,\n                    id,\n                    view: this.props.view,\n                    isRelative,\n                    askView: this.props.askView,\n                    refParent: props.refService,\n                    relativeWidgetOrder: groupWidgets,\n                    viewsActiveFilter: this.props.viewsActiveFilter,\n                    customSettings: this.props.customSettings,\n                });\n            });\n        }\n\n        return rxGroupWidgets;\n    }\n}\n\nBasicGroup.propTypes = {\n    id: PropTypes.string.isRequired,\n    context: PropTypes.object.isRequired,\n    editMode: PropTypes.bool.isRequired,\n};\n\nexport default BasicGroup;\n","/**\n *  ioBroker.vis\n *  https://github.com/ioBroker/ioBroker.vis\n *\n *  Copyright (c) 2023 Denis Haev https://github.com/GermanBluefox,\n *  Creative Common Attribution-NonCommercial (CC BY-NC)\n *\n *  http://creativecommons.org/licenses/by-nc/4.0/\n *\n * Short content:\n * Licensees may copy, distribute, display and perform the work and make derivative works based on it only if they give the author or licensor the credits in the manner specified by these.\n * Licensees may copy, distribute, display, and perform the work and make derivative works based on it only for noncommercial purposes.\n * (Free for non-commercial use).\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\n\n// eslint-disable-next-line import/no-cycle\nimport VisRxWidget from '../../visRxWidget';\n\nclass BasicSvgBool extends VisRxWidget {\n    static getWidgetInfo() {\n        return {\n            id: 'tplValueBoolCtrlSvg',\n            visSet: 'basic',\n            visName: 'Bool SVG',\n            visWidgetLabel: 'qui_Bool SVG',\n            visPrev: 'widgets/basic/img/Prev_ValueBoolCtrlSvg.png',\n            visAttrs: [{\n                name: 'common',\n                fields: [\n                    {\n                        name: 'oid',\n                        type: 'id',\n                    },\n                    {\n                        name: 'no_control',\n                        type: 'checkbox',\n                    },\n                    {\n                        name: 'svg_false',\n                        type: 'html',\n                        default: '<polygon points=\\'100,10 40,198 190,78 10,78 160,198\\' style=\\'fill:lime; stroke:purple; stroke-width:5; fill-rule:nonzero\\' transform=\\'scale(0.4)\\' />',\n                    },\n                    {\n                        name: 'svg_true',\n                        type: 'html',\n                        default: '<polygon points=\\'100,10 40,198 190,78 10,78 160,198\\' style=\\'fill:yellow; stroke:red; stroke-width:5; fill-rule:nonzero\\' transform=\\'scale(0.4)\\' />',\n                    },\n                    {\n                        name: 'svg_opacity',\n                        type: 'slider',\n                        min: 0,\n                        max: 1,\n                        step: 0.05,\n                    },\n                ],\n            }],\n            // visWidgetLabel: 'value_string',  // Label of widget\n            visDefaultStyle: {\n                width: 85,\n                height: 85,\n            },\n        };\n    }\n\n    // eslint-disable-next-line class-methods-use-this\n    getWidgetInfo() {\n        return BasicSvgBool.getWidgetInfo();\n    }\n\n    onSvgClick() {\n        const oid = this.state.rxData.oid;\n        let val = this.state.values[`${this.state.rxData.oid}.val`];\n        if (val === null || val === '' || val === undefined || val === false || val === 'false') {\n            this.props.context.setValue(oid, true);\n        } else if (val === true || val === 'true') {\n            this.props.context.setValue(oid, false);\n        } else {\n            val = parseFloat(val);\n            if (val >= 0.5) {\n                val = 1;\n            } else {\n                val = 0;\n            }\n            this.props.context.setValue(oid, 1 - val);\n        }\n    }\n\n    renderSvg() {\n        let str = this.state.values[`${this.state.rxData.oid}.val`];\n        if (typeof str === 'string') {\n            str = str.toLowerCase();\n        }\n        const val = parseFloat(str);\n        let opacity = this.state.rxData.svg_opacity;\n        if (this.props.editMode) {\n            if (opacity === undefined || opacity === null || opacity === '') {\n                opacity = 1;\n            }\n\n            if (parseFloat(opacity) < 0.2) {\n                opacity = 0.2;\n            }\n        }\n        let svg;\n        if (val === 0 || str === 'false' || str === '0' || str === 'off' || str === false || str === null || str === undefined) {\n            svg = this.state.rxData.svg_false;\n        } else {\n            svg = this.state.rxData.svg_true;\n        }\n\n        return <svg\n            style={{\n                width: '100%',\n                height: '100%',\n                opacity,\n            }}\n            // eslint-disable-next-line react/no-danger\n            dangerouslySetInnerHTML={{ __html: svg }}\n        />;\n    }\n\n    renderWidgetBody(props) {\n        super.renderWidgetBody(props);\n\n        return <div\n            onClick={this.props.editMode ? null : () => this.onSvgClick()}\n            className=\"vis-widget-body\"\n        >\n            {this.renderSvg()}\n        </div>;\n    }\n}\n\nBasicSvgBool.propTypes = {\n    id: PropTypes.string.isRequired,\n    context: PropTypes.object.isRequired,\n    view: PropTypes.string.isRequired,\n    editMode: PropTypes.bool.isRequired,\n};\n\nexport default BasicSvgBool;\n","import React from 'react';\n\nimport { GetRxDataFromWidget, RxRenderWidgetProps } from '@/types';\nimport VisRxWidget from '@/Vis/visRxWidget';\n\n// eslint-disable-next-line no-use-before-define\ntype RxData = GetRxDataFromWidget<typeof BasicSvgShape>;\n\nexport default class BasicSvgShape extends VisRxWidget<RxData> {\n    /**\n     * Returns the widget info which is rendered in the edit mode\n     */\n    static getWidgetInfo() {\n        return {\n            id: 'tplShapes',\n            visSet: 'basic',\n            visName: 'SVG shape',\n            visPrev: 'widgets/basic/img/Prev_SvgShape.png',\n            visAttrs: [{\n                name: 'common',\n                fields: [\n                    {\n                        name: 'svgType',\n                        type: 'select',\n                        options: [\n                            { value: 'line', label: 'basic_line' },\n                            { value: 'triangle', label: 'basic_triangle' },\n                            { value: 'square', label: 'basic_square' },\n                            { value: 'pentagone', label: 'basic_pentagone' },\n                            { value: 'hexagone', label: 'basic_hexagone' },\n                            { value: 'octagone', label: 'basic_octagone' },\n                            { value: 'circle', label: 'basic_circle' },\n                            { value: 'star', label: 'basic_star' },\n                            { value: 'arrow', label: 'basic_arrow' },\n                            { value: 'custom', label: 'basic_custom' },\n                        ],\n                        default: 'circle',\n                    },\n                    {\n                        name: 'points',\n                        type: 'slider',\n                        min: 3,\n                        max: 20,\n                        default: 3,\n                        hidden: 'data.svgType !== \"custom\"',\n                    },\n                    {\n                        name: 'strokeColor',\n                        type: 'color',\n                        default: '#009cb3',\n                    },\n                    {\n                        name: 'fill',\n                        type: 'color',\n                        default: '#00b3ac',\n                    },\n                    {\n                        name: 'strokeWidth',\n                        type: 'slider',\n                        min: 0,\n                        max: 100,\n                        default: 5,\n                    },\n                    {\n                        name: 'rotate',\n                        type: 'slider',\n                        min: 0,\n                        max: 360,\n                        default: 0,\n                    },\n                    {\n                        name: 'scaleWidth',\n                        type: 'slider',\n                        min: 0,\n                        max: 1,\n                        step: 0.05,\n                        default: 1,\n                    },\n                    {\n                        name: 'scaleHeight',\n                        type: 'slider',\n                        min: 0,\n                        max: 1,\n                        step: 0.05,\n                        default: 1,\n                    },\n                ],\n            }],\n            visDefaultStyle: {\n                width: 100,\n                height: 100,\n            },\n        } as const;\n    }\n\n    /**\n     * Enables calling widget info on the class instance itself\n     */\n    // eslint-disable-next-line class-methods-use-this\n    getWidgetInfo() {\n        return BasicSvgShape.getWidgetInfo();\n    }\n\n    static circlePoints(radius: number, num: number, step?: number): string {\n        step = step || (360 / num);\n        const points = [];\n        let text = '';\n        const radian = Math.PI / 180;\n        for (let i = 0; i < num; i++) {\n            const angle = radian * (i * step - 180);\n            //         var point = {x:Math.sin(Math.PI / 180 * (i * step - 180)) * radius, y:Math.cos(Math.PI / 180 * (i * step - 180)) * radius};\n            const point = {\n                x: Math.sin(angle) * radius,\n                y: Math.cos(angle) * radius,\n            };\n            points.push(point);\n            text += `${point.x}, ${point.y} `;\n        }\n\n        return text;\n    }\n\n    /**\n     * Renders the widget\n     *\n     * @param props props passed to the parent classes render method\n     */\n    renderWidgetBody(props: RxRenderWidgetProps): React.JSX.Element | null {\n        super.renderWidgetBody(props);\n\n        let svg: React.JSX.Element | null = null;\n        const rotate      = Number(this.state.rxData.rotate) || 0;\n        const scaleWidth  = Number(this.state.rxData.scaleWidth) || 1;\n        const scaleHeight = Number(this.state.rxData.scaleHeight) || 1;\n        const strokeWidth = Number(this.state.rxData.strokeWidth) || 0;\n\n        const transform = `rotate(${rotate}) scale(${scaleWidth}, ${scaleHeight})`;\n\n        if (this.state.rxData.svgType === 'triangle') {\n            svg = <polygon\n                transform={transform}\n                points={BasicSvgShape.circlePoints(50 - strokeWidth, 3)}\n            />;\n        } else if (this.state.rxData.svgType === 'line') {\n            svg = <line\n                vectorEffect=\"non-scaling-stroke\"\n                transform={`rotate(${rotate})`}\n                x1=\"-50\"\n                y1=\"0\"\n                x2=\"50\"\n                y2=\"0\"\n            />;\n        } else if (this.state.rxData.svgType === 'circle') {\n            svg = <circle\n                transform={transform}\n                cx=\"0\"\n                cy=\"0\"\n                r={50 - strokeWidth / 2}\n            />;\n        } else if (this.state.rxData.svgType === 'pentagone') {\n            svg = <polygon\n                transform={transform}\n                points={BasicSvgShape.circlePoints(50 - strokeWidth, 5)}\n            />;\n        } else if (this.state.rxData.svgType === 'square') {\n            svg = <polygon\n                transform={transform}\n                points={BasicSvgShape.circlePoints(50 - strokeWidth, 4)}\n            />;\n        } else if (this.state.rxData.svgType === 'hexagone') {\n            svg = <polygon\n                transform={transform}\n                points={BasicSvgShape.circlePoints(50 - strokeWidth, 6)}\n            />;\n        } else if (this.state.rxData.svgType === 'octagone') {\n            svg = <polygon\n                transform={transform}\n                points={BasicSvgShape.circlePoints(50 - strokeWidth, 8)}\n            />;\n        }  else if (this.state.rxData.svgType === 'custom') {\n            svg = <polygon\n                transform={transform}\n                points={BasicSvgShape.circlePoints(50 - strokeWidth, Number(this.state.rxData.points) || 3)}\n            />;\n        } else if (this.state.rxData.svgType === 'star') {\n            svg = <polygon\n                transform={transform}\n                points={BasicSvgShape.circlePoints(50 - strokeWidth, 5, 144)}\n            />;\n        } else if (this.state.rxData.svgType === 'arrow') {\n            svg = <polygon\n                transform={`${transform} translate(0,10)`}\n                points=\"0, -50 -43.3, 25 0,0 43.3, 25\"\n            />;\n        }\n\n        return <div className=\"vis-widget-body\">\n            <svg\n                xmlns=\"http://www.w3.org/2000/svg\"\n                version=\"1.1\"\n                viewBox=\"-50 -50 100 100\"\n                style={{\n                    display: 'block',\n                    width: '100%',\n                    height: '100%',\n                    fill: this.state.rxData.fill,\n                    stroke: this.state.rxData.strokeColor,\n                    strokeWidth: this.state.rxData.strokeWidth,\n                }}\n            >\n                {svg}\n            </svg>\n        </div>;\n    }\n}\n","import React from 'react';\n\nimport { I18n } from '@iobroker/adapter-react-v5';\n\nimport {\n    RxRenderWidgetProps, VisLegacy, RxWidgetProps, GetRxDataFromWidget,\n} from '@/types';\nimport VisRxWidget, { VisRxWidgetState } from '@/Vis/visRxWidget';\n\ndeclare global {\n    interface Window {\n        vis: VisLegacy;\n    }\n}\n\ninterface BasicScreenResolutionState extends VisRxWidgetState {\n    width: number;\n    height: number;\n    defaultView: string;\n    essentialData?: string;\n}\n\n// eslint-disable-next-line no-use-before-define\ntype RxData = GetRxDataFromWidget<typeof BasicScreenResolution>\n\nexport default class BasicScreenResolution extends VisRxWidget<RxData, BasicScreenResolutionState> {\n    private essentialData: string;\n\n    constructor(props: RxWidgetProps) {\n        // @ts-expect-error refactor types to extend from parent types\n        super(props);\n        this.state = {\n            ...this.state,\n            width: document.documentElement.clientWidth,\n            height: document.documentElement.clientHeight,\n        };\n        this.essentialData = JSON.stringify(this.buildEssentialProjectData());\n    }\n\n    buildEssentialProjectData() {\n        return Object.keys(this.props.context.views)\n            .sort()\n            .filter(f => f !== '___settings')\n            .map((viewId: string) => ({\n                id: viewId,\n                sizex: this.props.context.views[viewId]?.settings?.sizex,\n                sizey: this.props.context.views[viewId]?.settings?.sizey,\n                useAsDefault: this.props.context.views[viewId]?.settings?.useAsDefault,\n            }));\n    }\n\n    /**\n     * Returns the widget info which is rendered in the edit mode\n     */\n    static getWidgetInfo() {\n        return {\n            id: 'tplScreenResolution',\n            visSet: 'basic',\n            visName: 'Screen Resolution',\n            visPrev: 'widgets/basic/img/Prev_ScreenResolution.png',\n            visAttrs: [],\n            // visWidgetLabel: 'value_string',  // Label of widget\n            visDefaultStyle: {\n                width: 170,\n                height: 75,\n            },\n        } as const;\n    }\n\n    async componentDidMount(): Promise<void> {\n        await super.componentDidMount();\n        window.addEventListener('resize', this.onResize);\n        window.addEventListener('hashchange', this.onResize);\n        this.onResize();\n    }\n\n    async componentWillUnmount(): Promise<void> {\n        super.componentWillUnmount();\n        window.removeEventListener('resize', this.onResize);\n        window.removeEventListener('hashchange', this.onResize);\n    }\n\n    /**\n     * Enables calling widget info on the class instance itself\n     */\n    // eslint-disable-next-line class-methods-use-this\n    getWidgetInfo() {\n        return BasicScreenResolution.getWidgetInfo();\n    }\n\n    createScreenText() {\n        return <span\n            style={{\n                fontWeight: 'bold',\n                cursor: 'pointer',\n            }}\n            onClick={() => {\n                if (!window.vis.instance) {\n                    window.vis.generateInstance();\n                    if (window.vis.instance) {\n                        this.forceUpdate();\n                    } else {\n                        window.alert('Cannot generate!');\n                    }\n                }\n            }}\n        >\n            {I18n.t('click to create')}\n        </span>;\n    }\n\n    onResize = () => {\n        let width: number;\n        let height: number;\n        let defaultView: string;\n        if (this.props.editMode) {\n            width = this.props.context.views[this.props.context.activeView]?.settings?.sizex || window.document.documentElement.clientWidth;\n            height = this.props.context.views[this.props.context.activeView]?.settings?.sizey || window.document.documentElement.clientHeight;\n            defaultView = window.vis.findNearestResolution(width as number, height as number);\n        } else {\n            width = document.documentElement.clientWidth || 0;\n            height = document.documentElement.clientHeight;\n            defaultView = window.vis.findNearestResolution();\n        }\n        this.setState({\n            width,\n            height,\n            defaultView,\n        });\n    };\n\n    /**\n     * Renders the widget\n     *\n     * @param props props passed to the parent classes render method\n     */\n    renderWidgetBody(props: RxRenderWidgetProps): React.JSX.Element | null {\n        super.renderWidgetBody(props);\n        const state = this.state;\n\n        const essentialData = JSON.stringify(this.buildEssentialProjectData());\n        if (essentialData !== this.essentialData) {\n            this.essentialData = essentialData;\n            setTimeout(() => this.onResize(), 100);\n        }\n\n        const style: React.CSSProperties = {\n            border: '1px solid #888',\n            fontSize: 12,\n            opacity: 0.8,\n            width: '100%',\n            height: '100%',\n            boxSizing: 'border-box',\n            padding: 10,\n            display: 'flex',\n            flexDirection: 'column',\n            overflow: 'hidden',\n            justifyContent: 'center',\n        };\n        const valueStyle: React.CSSProperties = {\n            marginLeft: 8,\n            fontWeight: 'bold',\n        };\n\n        return <div className=\"vis-widget-body\" style={style}>\n            <div>\n                {I18n.t('Default view')}\n                :\n                <span style={valueStyle}>{state.defaultView}</span>\n            </div>\n            <div>\n                {I18n.t('Width')}\n                :\n                <span style={valueStyle}>\n                    {state.width}\n                    px\n                </span>\n            </div>\n            <div>\n                {I18n.t('Height')}\n                :\n                <span style={valueStyle}>\n                    {state.height}\n                    px\n                </span>\n            </div>\n            <div>\n                {I18n.t('Instance')}\n                :\n                <span style={valueStyle}>{window.vis.instance || this.createScreenText()}</span>\n            </div>\n        </div>;\n    }\n}\n","import React from 'react';\n// @ts-expect-error fix import\nimport type * as SpeechRecognition from 'dom-speech-recognition';\n\nimport { I18n, Icon } from '@iobroker/adapter-react-v5';\n\n// eslint-disable-next-line import/no-cycle\nimport VisRxWidget from '@/Vis/visRxWidget';\nimport type {\n    GetRxDataFromWidget, RxRenderWidgetProps,\n} from '@/types';\nimport type { VisBaseWidgetState } from '@/Vis/visBaseWidget';\n\n// eslint-disable-next-line no-use-before-define\ntype RxData = GetRxDataFromWidget<typeof BasicSpeechToText>\n\ninterface BasicSpeechToTextState extends VisBaseWidgetState {\n    /** Current shown module text */\n    text: string;\n    /** Current shown image */\n    image: string;\n    /** Current result */\n    result: string;\n    /** Color of the result */\n    resultColor: string;\n}\n\nexport default class BasicSpeechToText extends VisRxWidget<RxData, BasicSpeechToTextState> {\n    /** Speech recognition instance if available */\n    private recognition: SpeechRecognition;\n\n    /** If current speech should be ignored due to errors */\n    private ignoreOnEnd = false;\n\n    /**\n     * Lifecycle hook called when component is mounted\n     */\n    async componentDidMount(): Promise<void> {\n        await super.componentDidMount();\n        this.setState({\n            text: !window.webkitSpeechRecognition ? I18n.t('basic_speech2text_info_upgrade') : '',\n            image: this.state.rxData.imageInactive,\n            result: '',\n            resultColor: this.state.rxData.keyWordColor,\n        });\n\n        if (!window.webkitSpeechRecognition) {\n            return;\n        }\n\n        if (this.state.rxData.speechMode === 'continuous' && !this.state.editMode) {\n            this.startRecognition();\n        } else {\n            this.setState({ text: I18n.t('basic_speech2text_info_start') });\n        }\n    }\n\n    /**\n     * Enables calling widget info on the class instance itself\n     */\n    // eslint-disable-next-line class-methods-use-this\n    getWidgetInfo() {\n        return BasicSpeechToText.getWidgetInfo();\n    }\n\n    /**\n     * Returns the widget info which is rendered in the edit mode\n     */\n    static getWidgetInfo() {\n        return {\n            id: 'tplSpeech2Text',\n            visSet: 'basic',\n            visName: 'Speech to Text',\n            visPrev: 'widgets/basic/img/Prev_Speech2Text.png',\n            visAttrs: [{\n                name: 'common',\n                fields: [\n                    {\n                        name: 'oid',\n                        type: 'id',\n                    },\n                    {\n                        name: 'speechMode',\n                        type: 'select',\n                        default: 'single',\n                        options: [\n                            { value: 'single', label: 'basic_speech2text_single' },\n                            { value: 'startstop', label: 'basic_speech2text_start_stop' },\n                            { value: 'continuous', label: 'basic_speech2text_continuous' },\n                        ],\n                    },\n                    {\n                        name: 'language',\n                        type: 'select',\n                        options: [\n                            { value: '', label: '' },\n                            { value: 'en-US', label: 'basic_speech2text_en_us' },\n                            { value: 'de', label: 'de' },\n                            { value: 'ru-RU', label: 'basic_speech2text_ru_ru' },\n                        ],\n                    },\n                    {\n                        name: 'keywords',\n                    },\n                ],\n            },\n            {\n                name: 'image',\n                label: 'Image',\n                fields: [\n                    {\n                        name: 'noImage',\n                        type: 'checkbox',\n                        label: 'basic_speech2text_no_image',\n                    },\n                    {\n                        name: 'imageInactive',\n                        default: 'widgets/basic/img/micInactive.svg',\n                        type: 'image',\n                        label: 'basic_speech2text_image_inactive',\n                    },\n                    {\n                        name: 'imageActive',\n                        default: 'widgets/basic/img/micActive.svg',\n                        type: 'image',\n                        label: 'basic_speech2text_image_active',\n                    },\n                    {\n                        name: 'imageStarted',\n                        default: 'widgets/basic/img/micStarted.svg',\n                        type: 'image',\n                        label: 'basic_speech2text_started',\n                    },\n                    {\n                        name: 'imageDetected',\n                        default: 'widgets/basic/img/micDetected.svg',\n                        type: 'image',\n                        label: 'basic_speech2text_detected',\n                    },\n                    {\n                        name: 'imageSent',\n                        default: 'widgets/basic/img/micSent.svg',\n                        type: 'image',\n                        label: 'basic_speech2text_sent',\n                    },\n                    {\n                        name: 'imageHeightPx',\n                        default: '70',\n                        type: 'slider',\n                        min: 0,\n                        max: 200,\n                        step: 1,\n                        label: 'basic_speech2text_height',\n                    },\n                    {\n                        name: 'imageWidthPx',\n                        default: '70',\n                        type: 'slider',\n                        min: 0,\n                        max: 200,\n                        step: 1,\n                        label: 'basic_speech2text_width',\n                    },\n                ],\n            },\n            {\n                name: 'text',\n                label: 'Text',\n                fields: [\n                    {\n                        name: 'noText',\n                        type: 'checkbox',\n                        label: 'basic_speech2text_no_text',\n                    },\n                    {\n                        name: 'noResults',\n                        type: 'checkbox',\n                        label: 'basic_speech2text_no_results',\n                    },\n                    {\n                        name: 'keyWordColor',\n                        type: 'color',\n                        default: '#FFB051',\n                        label: 'basic_speech2text_key_word_color',\n                        tooltip: 'basic_speech2text_key_word_color_tooltip',\n                    },\n                    {\n                        name: 'textSentColor',\n                        type: 'color',\n                        default: '#7E88D3',\n                        label: 'basic_speech2text_text_sent_color',\n                        tooltip: 'basic_speech2text_text_sent_color_tooltip',\n                    }],\n            }],\n            visDefaultStyle: {\n                width: 500,\n                height: 77,\n            },\n        } as const;\n    }\n\n    /**\n     * Find the keyword in the given text\n     *\n     * @param text text to scan for keyword\n     */\n    findKeyWord(text: string): string | boolean {\n        const words = this.state.rxData.keywords ? this.state.rxData.keywords.toLowerCase().split(/[\\s,;]+/g) : null;\n        let found = false;\n\n        if (words) {\n            const wwords = text.toLowerCase().split(' ');\n            for (let w = 0; w < words.length; w++) {\n                const pos = wwords.indexOf(words[w]);\n                if (pos !== -1) {\n                    let offset = 0;\n                    for (let p = 0; p < pos; p++) {\n                        offset += wwords[p].length + 1;\n                    }\n                    text = `${text.substring(0, offset)}<b>${text.substring(offset, offset + wwords[pos].length)}</b>${text.substring(offset + wwords[pos].length)}`;\n                    found = true;\n                    break;\n                }\n            }\n        } else {\n            return true;\n        }\n\n        return found ? text : false;\n    }\n\n    /**\n     * Start speech recognition\n     */\n    startRecognition() {\n        if (this.recognition) {\n            if (this.state.rxData.speechMode === 'startstop') {\n                this.recognition.onend = null;\n                this.recognition.stop();\n                this.recognition = null;\n                this.setState({ text: I18n.t('basic_speech2text_info_start'), image: this.state.rxData.imageInactive });\n            }\n            return;\n        }\n\n        // eslint-disable-next-line new-cap\n        this.recognition = new window.webkitSpeechRecognition();\n        this.recognition.continuous = this.state.rxData.speechMode === 'continuous' || this.state.rxData.speechMode === 'startstop';\n        this.recognition.interimResults = true;\n        this.recognition.maxAlternatives = 1;\n\n        const startTimestamp = Date.now();\n        let finalTranscript = '';\n        let timer: ReturnType<typeof setTimeout>;\n        let lastText = '';\n        let originalColor: string;\n\n        this.recognition.onstart = () => {\n            this.setState({\n                text: I18n.t('basic_speech2text_info_speak_now'),\n                image: this.state.rxData.imageActive,\n                result: '',\n            });\n        };\n\n        this.recognition.onerror  = (event: SpeechRecognition.SpeechRecognitionErrorEvent) => {\n            this.setState({\n                result: '',\n                image: this.state.rxData.imageInactive,\n            });\n\n            if (event.error === 'no-speech') {\n                this.setState({\n                    text: I18n.t('basic_speech2text_info_no_speech'),\n                });\n            }\n            if (event.error === 'audio-capture') {\n                this.setState({\n                    text: I18n.t('basic_speech2text_info_no_microphone'),\n                });\n                this.ignoreOnEnd = true;\n            }\n            if (event.error === 'not-allowed') {\n                if ((event.timeStamp - startTimestamp) < 100) {\n                    this.setState({\n                        text: I18n.t('basic_speech2text_info_blocked'),\n                    });\n                } else {\n                    this.setState({\n                        text: I18n.t('basic_speech2text_info_denied'),\n                    });\n                }\n                this.ignoreOnEnd = true;\n            }\n        };\n\n        this.recognition.onend =  () => {\n            this.recognition.stop();\n            this.recognition = null;\n            if (!this.ignoreOnEnd) {\n                setTimeout(() => {\n                    this.setState({\n                        image: this.state.rxData.imageInactive,\n                    });\n                    if (this.state.rxData.speechMode === 'continuous') {\n                        this.setState({\n                            result: '',\n                            text: I18n.t('basic_speech2text_info_speak_now'),\n                        });\n                        this.startRecognition();\n                    } else {\n                        this.setState({\n                            result: '',\n                            text: I18n.t('basic_speech2text_info_start'),\n                        });\n                    }\n                }, 1_000);\n            }\n        };\n\n        this.recognition.onresult = (event: SpeechRecognition.SpeechRecognitionResult) => {\n            let interimTranscript = '';\n\n            if (typeof event.results === 'undefined') {\n                this.recognition.onend = null;\n                this.recognition.stop();\n                return;\n            }\n\n            for (let i = event.resultIndex; i < event.results.length; ++i) {\n                if (event.results[i].isFinal) {\n                    finalTranscript += event.results[i][0].transcript;\n                } else {\n                    interimTranscript += event.results[i][0].transcript;\n                }\n            }\n\n            if (this.state.image === this.state.rxData.imageActive) {\n                this.setState({ image: this.state.rxData.imageStarted });\n            }\n\n            this.setState({ text: '' });\n            let text = finalTranscript || interimTranscript;\n            const foundKeyword = this.findKeyWord(text);\n\n            if (!originalColor) {\n                originalColor = this.state.resultColor;\n            }\n\n            if (foundKeyword) {\n                text = typeof foundKeyword === 'string' ? foundKeyword : text;\n                if (this.state.image === this.state.rxData.imageStarted) {\n                    this.setState({\n                        image: this.state.rxData.imageDetected,\n                    });\n                }\n                if (this.state.rxData.keyWordColor) {\n                    this.setState({\n                        resultColor: this.state.rxData.keyWordColor,\n                    });\n                }\n            }\n\n            this.setState({ text });\n\n            if (finalTranscript) {\n                if (timer) clearTimeout(timer);\n\n                if (foundKeyword) {\n                    this.setState({\n                        image: this.state.rxData.imageSent,\n                    });\n                    if (this.state.rxData.textSentColor) {\n                        this.setState({ resultColor: this.state.rxData.textSentColor });\n                    }\n                    // _data.$result.addClass('mic-text-sent');\n                    this.props.context.setValue(this.state.rxData.oid, finalTranscript);\n                }\n\n                finalTranscript = '';\n                lastText = '';\n\n                setTimeout(() => {\n                    this.setState({\n                        image: this.state.rxData.imageActive,\n                        text: I18n.t('basic_speech2text_info_speak_now'),\n                        resultColor: originalColor,\n                        result: '',\n                    });\n                }, 1_000);\n            } else {\n                lastText = interimTranscript;\n\n                if (timer) clearTimeout(timer);\n                timer = setTimeout(() => {\n                    this.recognition.onend = null;\n                    this.recognition.stop();\n                    this.recognition = null;\n\n                    const hasKeyword = !!this.findKeyWord(lastText);\n                    if (hasKeyword) {\n                        this.setState({\n                            image: this.state.rxData.imageSent,\n                        });\n                        if (this.state.rxData.textSentColor) {\n                            this.setState({ resultColor: this.state.rxData.textSentColor });\n                        }\n                        // _data.$result.addClass('mic-text-sent');\n                        this.props.context.setValue(this.state.rxData.oid, finalTranscript);\n                    }\n\n                    finalTranscript = '';\n                    lastText = '';\n\n                    setTimeout(() => {\n                        this.setState({\n                            image: this.state.rxData.imageActive,\n                            text: I18n.t('basic_speech2text_info_speak_now'),\n                            resultColor: originalColor,\n                            result: '',\n                        });\n                        // _data.$result.hide().removeClass('mic-keyword-found mic-text-sent');\n                        this.startRecognition();\n                    }, 1_000);\n                }, 3_000);\n            }\n        };\n\n        this.recognition.lang = this.state.rxData.language;\n\n        this.recognition.start();\n    }\n\n    /**\n     * Renders the widget\n     *\n     * @param props props passed to the parent classes render method\n     */\n    renderWidgetBody(props: RxRenderWidgetProps): React.JSX.Element {\n        super.renderWidgetBody(props);\n\n        return <div className=\"vis-widget-body\">\n            <table\n                style={{ height: '100%', width: '100%' }}\n                onClick={() => {\n                    if (this.state.rxData.speechMode !== 'continuous' && !this.state.editMode && window.webkitSpeechRecognition) {\n                        this.startRecognition();\n                    }\n                }}\n            >\n                <tbody>\n                    <tr>\n                        <td style={{ display: this.state.rxData.noImage ? 'none' : undefined }}>\n                            <Icon\n                                alt=\"mic\"\n                                style={{ height: `${this.state.rxData.imageHeightPx}px`, width: `${this.state.rxData.imageWidthPx}px` }}\n                                src={this.state.image}\n                            />\n                        </td>\n                        <td className=\"mic-text\" style={{ width: '100%' }}>\n                            <div\n                                style={{ display: this.state.rxData.noText ? 'none' : undefined }}\n                                /* eslint-disable-next-line react/no-danger */\n                                dangerouslySetInnerHTML={{ __html:  this.state.text }}\n                            />\n                            <div\n                                style={{ display: this.state.rxData.noResults ? 'none' : undefined, color: this.state.resultColor }}\n                                /* eslint-disable-next-line react/no-danger */\n                                dangerouslySetInnerHTML={{ __html:  this.state.result }}\n                            />\n                        </td>\n                    </tr>\n                </tbody>\n            </table>\n        </div>;\n    }\n}\n","import React from 'react';\n\nimport { GetRxDataFromWidget, RxRenderWidgetProps } from '@/types';\nimport VisRxWidget from '@/Vis/visRxWidget';\n\n// eslint-disable-next-line no-use-before-define\ntype RxData = GetRxDataFromWidget<typeof BasicIFrame>\n\nexport default class BasicIFrame extends VisRxWidget<RxData> {\n    private refreshInterval: ReturnType<typeof setInterval> | null = null;\n\n    private readonly frameRef: React.RefObject<HTMLIFrameElement>;\n\n    private hashInstalled = false;\n\n    private onWakeUpInstalled = false;\n\n    private startedInterval = 0;\n\n    constructor(props: RxRenderWidgetProps) {\n        // @ts-expect-error refactor types to extend from parent types\n        super(props);\n        this.frameRef = React.createRef();\n    }\n\n    /**\n     * Returns the widget info which is rendered in the edit mode\n     */\n    static getWidgetInfo() {\n        return {\n            id: 'tplIFrame',\n            visSet: 'basic',\n            visName: 'iFrame',\n            visPrev: 'widgets/basic/img/Prev_iFrame.png',\n            visAttrs: [{\n                name: 'common',\n                fields: [\n                    {\n                        name: 'src',\n                        type: 'url',\n                    },\n                    {\n                        name: 'refreshInterval',\n                        tooltip: 'basic_refreshInterval_tooltip',\n                        type: 'slider',\n                        min: 0,\n                        max: 180000,\n                        step: 100,\n                        default: 0,\n                    },\n                    {\n                        name: 'noSandbox',\n                        type: 'checkbox',\n                    },\n                    {\n                        name: 'refreshOnWakeUp',\n                        type: 'checkbox',\n                    },\n                    {\n                        name: 'refreshOnViewChange',\n                        type: 'checkbox',\n                    },\n                    {\n                        name: 'refreshWithNoQuery',\n                        type: 'checkbox',\n                    },\n                    {\n                        name: 'scrollX',\n                        type: 'checkbox',\n                    },\n                    {\n                        name: 'scrollY',\n                        type: 'checkbox',\n                    },\n                    {\n                        name: 'seamless',\n                        type: 'checkbox',\n                        default: true,\n                    },\n                ],\n            }],\n            // visWidgetLabel: 'value_string',  // Label of widget\n            visDefaultStyle: {\n                width: 600,\n                height: 320,\n            },\n        } as const;\n    }\n\n    async componentDidMount(): Promise<void> {\n        super.componentDidMount();\n        this.onPropertyUpdate();\n    }\n\n    async componentWillUnmount(): Promise<void> {\n        super.componentWillUnmount();\n        this.refreshInterval && clearInterval(this.refreshInterval);\n        if (this.hashInstalled) {\n            this.hashInstalled = false;\n            window.removeEventListener('hashchange', this.onHashChange);\n        }\n    }\n\n    /**\n     * Enables calling widget info on the class instance itself\n     */\n    // eslint-disable-next-line class-methods-use-this\n    getWidgetInfo() {\n        return BasicIFrame.getWidgetInfo();\n    }\n\n    onHashChange = () => {\n        if (this.props.context.activeView === this.props.view) {\n            this.refreshIFrame();\n        }\n    };\n\n    refreshIFrame() {\n        if (this.state.rxData.refreshWithNoQuery === true) {\n            this.frameRef.current?.contentWindow?.location.reload();\n        } else if (this.frameRef.current) {\n            this.frameRef.current.src = `${this.state.rxData.src}${this.state.rxData.src.includes('?') ? '&' : '?'}_refts=${Date.now()}`;\n        }\n    }\n\n    static isHidden(el: HTMLElement) {\n        return el.offsetParent === null;\n    }\n\n    static getParents(el: HTMLIFrameElement): HTMLElement[] {\n        const els = [];\n        let pel = el as HTMLElement;\n        do {\n            pel = pel.parentNode as HTMLElement;\n            els.unshift(el);\n        } while (pel);\n\n        return els;\n    }\n\n    onPropertyUpdate() {\n        const src     = this.state.rxData.src || '';\n        const refreshInterval = Number(this.state.rxData.refreshInterval) || 0;\n        const refreshOnViewChange = this.state.rxData.refreshOnViewChange === true;\n        const refreshOnWakeUp = this.state.rxData.refreshOnWakeUp === true;\n\n        if (src) {\n            if (refreshOnViewChange) {\n                // install on view changed handler\n                if (!this.hashInstalled) {\n                    this.hashInstalled = true;\n                    window.addEventListener('hashchange', this.onHashChange);\n                }\n            } else if (this.hashInstalled) {\n                this.hashInstalled = false;\n                window.removeEventListener('hashchange', this.onHashChange);\n            }\n\n            if (refreshInterval > 0) {\n                if (this.startedInterval !== refreshInterval) {\n                    this.startedInterval = refreshInterval;\n                    this.refreshInterval && clearInterval(this.refreshInterval);\n                    this.refreshInterval = null;\n                }\n                // install refresh handler\n                this.refreshInterval = this.refreshInterval || setInterval(() => {\n                    if (this.frameRef.current && !BasicIFrame.isHidden(this.frameRef.current as HTMLElement)) {\n                        const parents = BasicIFrame.getParents(this.frameRef.current).filter(el => BasicIFrame.isHidden(el));\n                        if (!parents.length || parents[0].tagName === 'BODY' || parents[0].id === 'materialdesign-vuetify-container') {\n                            this.refreshIFrame();\n                        }\n                    }\n                }, refreshInterval);\n            } else if (this.refreshInterval) {\n                this.startedInterval = 0;\n                clearInterval(this.refreshInterval);\n                this.refreshInterval = null;\n            }\n\n            if (refreshOnWakeUp) {\n                // install on wake-up handler\n                if (!this.onWakeUpInstalled) {\n                    this.onWakeUpInstalled = true;\n                    window.vis.onWakeUp(this.onHashChange, this.props.id);\n                }\n            } else if (this.onWakeUpInstalled) {\n                this.onWakeUpInstalled = false;\n                window.vis.onWakeUp(null, this.props.id);\n            }\n        }\n    }\n\n    onRxDataChanged() {\n        this.onPropertyUpdate();\n    }\n\n    /**\n     * Renders the widget\n     *\n     * @param props props passed to the parent classes render method\n     */\n    renderWidgetBody(props: RxRenderWidgetProps): React.JSX.Element | null {\n        super.renderWidgetBody(props);\n\n        if (this.props.editMode) {\n            props.overlayClassNames.push('vis-editmode-helper');\n        }\n\n        const style: React.CSSProperties = {\n            position: 'absolute',\n            boxSizing: 'border-box',\n            padding: 0,\n            margin: 0,\n            border: 0,\n            width: '100%',\n            height: '100%',\n            overflowX: this.state.rxData.scrollX ? 'scroll' : 'hidden',\n            overflowY: this.state.rxData.scrollY ? 'scroll' : 'hidden',\n        };\n        const src = this.state.rxData.src || '';\n\n        return src ? <div className=\"vis-widget-body\">\n            <iframe\n                style={style}\n                ref={this.frameRef}\n                title={this.props.id}\n                src={this.state.rxData.src}\n                sandbox={this.state.rxData.noSandbox ? 'allow-modals allow-forms allow-pointer-lock allow-popups allow-same-origin allow-scripts' : undefined}\n                seamless={this.state.rxData.seamless}\n            />\n        </div> : null;\n    }\n}\n","import React from 'react';\n\nimport { Icon } from '@iobroker/adapter-react-v5';\nimport { GetRxDataFromWidget, RxRenderWidgetProps } from '@/types';\nimport VisRxWidget from '@/Vis/visRxWidget';\n\n// eslint-disable-next-line no-use-before-define\ntype RxData = GetRxDataFromWidget<typeof BasicImage>\n\nexport default class BasicImage extends VisRxWidget<RxData> {\n    private refreshInterval: ReturnType<typeof setInterval> | null = null;\n\n    private readonly imageRef: React.RefObject<HTMLImageElement>;\n\n    private hashInstalled = false;\n\n    private onWakeUpInstalled = false;\n\n    private startedInterval = 0;\n\n    constructor(props: RxRenderWidgetProps) {\n        // @ts-expect-error refactor types to extend from parent types\n        super(props);\n        this.imageRef = React.createRef<HTMLImageElement>();\n    }\n\n    /**\n     * Returns the widget info which is rendered in the edit mode\n     */\n    static getWidgetInfo() {\n        return {\n            id: 'tplImage',\n            visSet: 'basic',\n            visName: 'Image',\n            visPrev: 'widgets/basic/img/Prev_Image.png',\n            visAttrs: [{\n                name: 'common',\n                fields: [\n                    {\n                        name: 'src',\n                        type: 'image',\n                    },\n                    {\n                        name: 'stretch',\n                        type: 'checkbox',\n                    },\n                    {\n                        name: 'refreshInterval',\n                        tooltip: 'basic_refreshInterval_tooltip',\n                        type: 'slider',\n                        min: 0,\n                        max: 180000,\n                        step: 100,\n                        default: 0,\n                    },\n                    {\n                        name: 'refreshOnWakeUp',\n                        type: 'checkbox',\n                    },\n                    {\n                        name: 'refreshOnViewChange',\n                        type: 'checkbox',\n                    },\n                    {\n                        name: 'refreshWithNoQuery',\n                        type: 'checkbox',\n                    },\n                    {\n                        name: 'allowUserInteractions',\n                        type: 'checkbox',\n                    },\n                ],\n            }],\n            // visWidgetLabel: 'value_string',  // Label of widget\n            visDefaultStyle: {\n                width: 200,\n                height: 130,\n            },\n        } as const;\n    }\n\n    async componentDidMount(): Promise<void> {\n        super.componentDidMount();\n        this.onPropertyUpdate();\n    }\n\n    async componentWillUnmount(): Promise<void> {\n        super.componentWillUnmount();\n        this.refreshInterval && clearInterval(this.refreshInterval);\n        if (this.hashInstalled) {\n            this.hashInstalled = false;\n            window.removeEventListener('hashchange', this.onHashChange);\n        }\n    }\n\n    /**\n     * Enables calling widget info on the class instance itself\n     */\n    // eslint-disable-next-line class-methods-use-this\n    getWidgetInfo() {\n        return BasicImage.getWidgetInfo();\n    }\n\n    onHashChange = () => {\n        if (this.props.context.activeView === this.props.view) {\n            this.refreshImage();\n        }\n    };\n\n    refreshImage() {\n        if (this.imageRef.current) {\n            if (this.state.rxData.refreshWithNoQuery === true) {\n                this.imageRef.current.src = this.state.rxData.src;\n            } else {\n                this.imageRef.current.src = `${this.state.rxData.src}${this.state.rxData.src.includes('?') ? '&' : '?'}_refts=${Date.now()}`;\n            }\n        }\n    }\n\n    static isHidden(el: HTMLElement) {\n        return el.offsetParent === null;\n    }\n\n    static getParents(el: HTMLImageElement): HTMLElement[] {\n        const els = [];\n        let pel = el as HTMLElement;\n        do {\n            pel = pel.parentNode as HTMLElement;\n            els.unshift(el);\n        } while (pel);\n\n        return els;\n    }\n\n    onPropertyUpdate() {\n        const src     = this.state.rxData.src || '';\n        const refreshInterval = Number(this.state.rxData.refreshInterval) || 0;\n        const refreshOnViewChange = this.state.rxData.refreshOnViewChange === true;\n        const refreshOnWakeUp = this.state.rxData.refreshOnWakeUp === true;\n\n        if (src) {\n            if (refreshOnViewChange) {\n                // install on view changed handler\n                if (!this.hashInstalled) {\n                    this.hashInstalled = true;\n                    window.addEventListener('hashchange', this.onHashChange);\n                }\n            } else if (this.hashInstalled) {\n                this.hashInstalled = false;\n                window.removeEventListener('hashchange', this.onHashChange);\n            }\n\n            if (refreshInterval > 0) {\n                if (this.startedInterval !== refreshInterval) {\n                    this.startedInterval = refreshInterval;\n                    this.refreshInterval && clearInterval(this.refreshInterval);\n                    this.refreshInterval = null;\n                }\n                // install refresh handler\n                this.refreshInterval = this.refreshInterval || setInterval(() => {\n                    if (this.imageRef.current && !BasicImage.isHidden(this.imageRef.current as HTMLElement)) {\n                        const parents = BasicImage.getParents(this.imageRef.current).filter(el => BasicImage.isHidden(el));\n                        if (!parents.length || parents[0].tagName === 'BODY' || parents[0].id === 'materialdesign-vuetify-container') {\n                            this.refreshImage();\n                        }\n                    }\n                }, refreshInterval);\n            } else if (this.refreshInterval) {\n                this.startedInterval = 0;\n                clearInterval(this.refreshInterval);\n                this.refreshInterval = null;\n            }\n\n            if (refreshOnWakeUp) {\n                // install on wake-up handler\n                if (!this.onWakeUpInstalled) {\n                    this.onWakeUpInstalled = true;\n                    window.vis.onWakeUp(this.onHashChange, this.props.id);\n                }\n            } else if (this.onWakeUpInstalled) {\n                this.onWakeUpInstalled = false;\n                window.vis.onWakeUp(null, this.props.id);\n            }\n        }\n    }\n\n    onRxDataChanged() {\n        this.onPropertyUpdate();\n    }\n\n    /**\n     * Renders the widget\n     *\n     * @param props props passed to the parent classes render method\n     */\n    renderWidgetBody(props: RxRenderWidgetProps): React.JSX.Element | null {\n        super.renderWidgetBody(props);\n\n        if (this.props.editMode) {\n            props.overlayClassNames.push('vis-editmode-helper');\n        }\n\n        const style: React.CSSProperties = {\n            padding: 0,\n            margin: 0,\n            border: 0,\n            width: '100%',\n            height: 'auto',\n        };\n        if (this.state.rxData.stretch) {\n            style.height = '100%';\n        }\n        if (!this.state.rxData.allowUserInteractions) {\n            style.touchAction = 'none';\n            style.userSelect = 'none';\n        }\n\n        const src = this.state.rxData.src || '';\n\n        return src ? <div className=\"vis-widget-body\" style={{ overflow: 'hidden' }}>\n            <Icon\n                style={style}\n                ref={this.imageRef}\n                src={this.state.rxData.src}\n                alt={this.props.id}\n            />\n        </div> : null;\n    }\n}\n","/**\n *  ioBroker.vis\n *  https://github.com/ioBroker/ioBroker.vis\n *\n *  Copyright (c) 2023 Denis Haev https://github.com/GermanBluefox,\n *  Creative Common Attribution-NonCommercial (CC BY-NC)\n *\n *  http://creativecommons.org/licenses/by-nc/4.0/\n *\n * Short content:\n * Licensees may copy, distribute, display and perform the work and make derivative works based on it only if they give the author or licensor the credits in the manner specified by these.\n * Licensees may copy, distribute, display, and perform the work and make derivative works based on it only for noncommercial purposes.\n * (Free for non-commercial use).\n */\n\nimport React from 'react';\n\n\nimport { GetRxDataFromWidget, RxRenderWidgetProps } from '@/types';\nimport VisRxWidget from '@/Vis/visRxWidget';\n\nimport DangerousHtmlWithScript from '../Utils/DangerousHtmlWithScript';\n\n// eslint-disable-next-line no-use-before-define\ntype RxData = GetRxDataFromWidget<typeof BasicHtmlNav>\n\nclass BasicHtmlNav extends VisRxWidget<RxData> {\n    static getWidgetInfo() {\n        return {\n            id: 'tplHtmlNav',\n            visSet: 'basic',\n            visName: 'HTML navigation',\n            visPrev: 'widgets/basic/img/Prev_HTMLnavigation.png',\n            visAttrs: [{\n                name: 'common',\n                fields: [\n                    {\n                        name: 'html',\n                        type: 'html',\n                    },\n                    {\n                        name: 'nav_view',\n                        type: 'views',\n                    },\n                    {\n                        name: 'sub_view',\n                        label: 'basic_sub_view',\n                        type: 'text',\n                        tooltip: 'sub_view_tooltip',\n                        hidden: '!data.nav_view',\n                    },\n                ],\n            }],\n            // visWidgetLabel: 'value_string',  // Label of widget\n            visDefaultStyle: {\n                width: 200,\n                height: 130,\n            },\n        };\n    }\n\n    // eslint-disable-next-line class-methods-use-this\n    getWidgetInfo() {\n        return BasicHtmlNav.getWidgetInfo();\n    }\n\n    onNavigate = () => {\n        if (this.state.rxData.nav_view) {\n            this.props.context.changeView(this.state.rxData.nav_view, this.state.rxData.sub_view || undefined);\n        }\n    };\n\n    /**\n     * Renders the widget\n     *\n     * @return {Element}\n     */\n    renderWidgetBody(props: RxRenderWidgetProps): React.JSX.Element {\n        super.renderWidgetBody(props);\n        if (props.style.width === undefined) {\n            props.style.width = 200;\n        }\n        if (props.style.height === undefined) {\n            props.style.height = 130;\n        }\n\n        return <DangerousHtmlWithScript\n            className=\"vis-widget-body\"\n            html={this.state.rxData.html}\n            isDiv\n            wid={this.props.id}\n            onClick={this.props.editMode ? null : this.onNavigate}\n        />;\n    }\n}\n\nexport default BasicHtmlNav;\n","import React, { Component } from 'react';\nimport { v4 as uuid } from 'uuid';\nimport { DragDropContext, Draggable, Droppable } from 'react-beautiful-dnd';\nimport { type Styles, withStyles } from '@mui/styles';\n\nimport type { Connection } from '@iobroker/adapter-react-v5';\n\nimport {\n    Button,\n    Dialog, DialogActions,\n    DialogContent, DialogTitle, Fab,\n    IconButton, Menu, MenuItem,\n    Table, TableBody,\n    TableCell, TableHead,\n    TableRow,\n    TextField,\n    Checkbox,\n    type Theme,\n} from '@mui/material';\n\nimport {\n    Add,\n    Check, Clear as ClearIcon,\n    Close,\n    Delete,\n    DragHandle,\n} from '@mui/icons-material';\n\nimport {\n    ColorPicker,\n    I18n,\n    Icon,\n    SelectFile as SelectFileDialog,\n} from '@iobroker/adapter-react-v5';\n\nimport { VisContext } from '@/types';\n\nimport MaterialIconSelector from '../../../Components/MaterialIconSelector';\n\nconst styles: Styles<any, any> = (theme: Theme) => ({\n    handlerCell: {\n        alignItems: 'center',\n        whiteSpace: 'nowrap',\n        padding: '1px 4px',\n        verticalAlign: 'middle',\n    },\n    grab: {\n        marginRight: 4,\n        marginTop: 12,\n    },\n    index: {\n        display: 'inline-block',\n        verticalAlign: 'top',\n        marginTop: 15,\n    },\n    cell: {\n        padding: '1px 4px',\n        verticalAlign: 'bottom',\n    },\n    cellText: {\n        padding: '12px 4px 0px 4px',\n    },\n    cellImage: {\n        padding: '0px 4px',\n        verticalAlign: 'bottom',\n    },\n    cellButton: {\n        padding: '0px 4px',\n    },\n    rowEven: {\n        backgroundColor: theme.palette.mode === 'dark' ? 'rgba(255, 255, 255, 0.04)' : 'rgba(0, 0, 0, 0.04)',\n    },\n});\n\ninterface Item {\n    id?: string;\n    label: string;\n    value: string;\n    icon?: string;\n    image?: string;\n    color?: string;\n    activeColor?: string;\n    default?: boolean;\n}\n\ninterface FiltersEditorDialogProps {\n    items: Item[] | undefined;\n    onClose: (items?: Item[]) => void;\n    context: VisContext;\n    multiple?: boolean;\n    classes: Record<string, string>;\n}\n\ninterface FiltersEditorDialogState {\n    filters: any[];\n    items: any[];\n    applyItems: string;\n    selectIcon: null | number;\n    selectImage: null | number;\n    anchorEl: any;\n}\n\nclass FiltersEditorDialog extends Component<FiltersEditorDialogProps, FiltersEditorDialogState> {\n    private readonly originalItems: string;\n\n    constructor(props: FiltersEditorDialogProps) {\n        super(props);\n        const items: Item[] = (props.items || []).map((item: Item) => ({ ...item, id: uuid() }));\n\n        this.state = {\n            filters: window.vis?.updateFilter() || [],\n            items,\n            applyItems: JSON.stringify(props.items || []),\n            selectIcon: null,\n            selectImage: null,\n            anchorEl: null,\n        };\n        this.originalItems = this.state.applyItems;\n    }\n\n    updateItems(items: Item[]) {\n        const applyItems = JSON.parse(JSON.stringify(items));\n        applyItems.forEach((item: Item) => delete item.id);\n\n        this.setState({ items, applyItems: JSON.stringify(applyItems) });\n    }\n\n    renderSelectIconDialog() {\n        if (this.state.selectIcon === null) {\n            return null;\n        }\n        return <MaterialIconSelector\n            themeType={this.props.context.themeType}\n            value={this.state.items[this.state.selectIcon]}\n            onClose={(icon: string | null) => {\n                if (icon !== null) {\n                    const items = JSON.parse(JSON.stringify(this.state.items));\n                    items[this.state.selectIcon as number].icon = icon;\n                    this.updateItems(items);\n                }\n                this.setState({ selectIcon: null });\n            }}\n        />;\n    }\n\n    renderFilterSelector() {\n        if (!this.state.anchorEl) {\n            return null;\n        }\n        const filters = this.state.filters.filter(filter => !this.state.items.find(item => item.value === filter));\n\n        return <Menu\n            anchorEl={this.state.anchorEl}\n            open={!0}\n            onClose={() => this.setState({ anchorEl: null })}\n        >\n            {filters?.map(filter => <MenuItem\n                onClick={async () => {\n                    const items = JSON.parse(JSON.stringify(this.state.items));\n                    items.push({\n                        label: filter,\n                        value: filter,\n                        id: uuid(),\n                    });\n                    this.setState({ anchorEl: null }, () => this.updateItems(items));\n                }}\n                key={filter}\n                value={filter}\n            >\n                {filter}\n            </MenuItem>)}\n            <MenuItem\n                sx={theme => ({ color: theme.palette.primary.main })}\n                onClick={() => {\n                    const items = JSON.parse(JSON.stringify(this.state.items));\n                    items.push({\n                        label: '',\n                        value: '',\n                        id: uuid(),\n                    });\n                    this.setState({ anchorEl: null }, () => this.updateItems(items));\n                }}\n            >\n                {I18n.t('Custom')}\n            </MenuItem>\n            {filters.length > 1 ? <MenuItem\n                sx={theme => ({ color: theme.palette.primary.main })}\n                onClick={() => {\n                    const items = JSON.parse(JSON.stringify(this.state.items));\n                    filters.forEach(filter => items.push({\n                        label: filter,\n                        value: filter,\n                        id: uuid(),\n                    }));\n\n                    this.setState({ anchorEl: null }, () => this.updateItems(items));\n                }}\n            >\n                {I18n.t('basic_all_filters')}\n            </MenuItem> : null}\n        </Menu>;\n    }\n\n    renderSelectImageDialog() {\n        if (this.state.selectImage === null) {\n            return null;\n        }\n\n        let _value = this.state.items[this.state.selectImage].image || '';\n        if (_value.startsWith('../')) {\n            _value = _value.substring(3);\n        } else if (_value.startsWith('_PRJ_NAME/')) {\n            _value = _value.replace('_PRJ_NAME/', `../${this.props.context.adapterName}.${this.props.context.instance}/${this.props.context.projectName}/`);\n        }\n\n        return <SelectFileDialog\n            title={I18n.t('Select file')}\n            onClose={() => this.setState({ selectImage: null })}\n            restrictToFolder={`${this.props.context.adapterName}.${this.props.context.instance}/${this.props.context.projectName}`}\n            allowNonRestricted\n            allowUpload\n            allowDownload\n            allowCreateFolder\n            allowDelete\n            allowView\n            showToolbar\n            imagePrefix=\"../\"\n            selected={_value}\n            filterByType=\"images\"\n            onOk={selectedOrArray => {\n                let selected = selectedOrArray ? (Array.isArray(selectedOrArray) ? selectedOrArray[0] : selectedOrArray) : '';\n                const projectPrefix = `${this.props.context.adapterName}.${this.props.context.instance}/${this.props.context.projectName}/`;\n                if (selected?.startsWith(projectPrefix)) {\n                    selected = `_PRJ_NAME/${selected.substring(projectPrefix.length)}`;\n                } else if (selected?.startsWith('/')) {\n                    selected = `..${selected}`;\n                } else if (selected && !selected.startsWith('.')) {\n                    selected = `../${selected}`;\n                }\n                const items = JSON.parse(JSON.stringify(this.state.items));\n                items[this.state.selectImage as number].image = selected;\n                this.updateItems(items);\n                this.setState({ selectImage: null });\n            }}\n            socket={this.props.context.socket as any as Connection}\n        />;\n    }\n\n    renderTableRow(item: Item, index: number) {\n        let image = item.image;\n        if (image) {\n            if (image.startsWith('../')) {\n                image = image.substring(3);\n            } else if (image.startsWith('_PRJ_NAME/')) {\n                image = image.replace('_PRJ_NAME/', `../${this.props.context.adapterName}.${this.props.context.instance}/${this.props.context.projectName}/`);\n            }\n        }\n\n        return <Draggable key={item.id} draggableId={item.id || ''} index={index}>\n            {(dragProvided /* dragSnapshot */) => <TableRow\n                className={index % 2 ? this.props.classes.rowEven : ''}\n                ref={dragProvided.innerRef}\n                {...dragProvided.draggableProps}\n            >\n                <TableCell\n                    className={this.props.classes.handlerCell}\n                    {...dragProvided.dragHandleProps}\n                >\n                    <DragHandle className={this.props.classes.grab} />\n                    <div className={this.props.classes.index}>\n                        {index + 1}\n                        .\n                    </div>\n                </TableCell>\n                <TableCell className={this.props.classes.cellText}>\n                    <TextField\n                        variant=\"standard\"\n                        fullWidth\n                        value={item.value || ''}\n                        onChange={e => {\n                            const items = JSON.parse(JSON.stringify(this.state.items));\n                            items[index].value = e.target.value;\n                            this.updateItems(items);\n                        }}\n                        InputLabelProps={{ shrink: true }}\n                    />\n                </TableCell>\n                <TableCell className={this.props.classes.cellText}>\n                    <TextField\n                        variant=\"standard\"\n                        fullWidth\n                        value={item.label || ''}\n                        onChange={e => {\n                            const items = JSON.parse(JSON.stringify(this.state.items));\n                            items[index].label = e.target.value;\n                            this.updateItems(items);\n                        }}\n                        InputLabelProps={{ shrink: true }}\n                    />\n                </TableCell>\n                <TableCell className={this.props.classes.cellImage}>\n                    {item.image ? null : <div style={{ display: 'flex', alignItems: 'center' }}>\n                        <TextField\n                            fullWidth\n                            size=\"small\"\n                            variant=\"standard\"\n                            value={item.icon}\n                            onChange={e => {\n                                const items = JSON.parse(JSON.stringify(this.state.items));\n                                items[index].icon = e.target.value;\n                                this.updateItems(items);\n                            }}\n                            InputProps={{\n                                endAdornment: item.icon ? <IconButton\n                                    size=\"small\"\n                                    onClick={() => {\n                                        const items = JSON.parse(JSON.stringify(this.state.items));\n                                        items[index].icon = '';\n                                        this.updateItems(items);\n                                    }}\n                                >\n                                    <ClearIcon />\n                                </IconButton> : null,\n                            }}\n                        />\n                        <Button\n                            variant={item.icon ? 'outlined' : undefined}\n                            // @ts-expect-error grey is correct\n                            color={item.icon ? 'grey' : undefined}\n                            onClick={() => this.setState({ selectIcon: index })}\n                        >\n                            {item.icon ? <Icon src={item.icon} style={{ width: 36, height: 36 }} /> : '...'}\n                        </Button>\n                    </div>}\n                </TableCell>\n                <TableCell className={this.props.classes.cellImage}>\n                    {item.icon ? null : <div style={{ display: 'flex', alignItems: 'center' }}>\n                        <TextField\n                            variant=\"standard\"\n                            fullWidth\n                            InputProps={{\n                                endAdornment: item.image ? <IconButton\n                                    size=\"small\"\n                                    onClick={() => {\n                                        const items = JSON.parse(JSON.stringify(this.state.items));\n                                        items[index].image = '';\n                                        this.updateItems(items);\n                                    }}\n                                >\n                                    <ClearIcon />\n                                </IconButton> : null,\n                            }}\n                            value={item.image}\n                            onChange={e => {\n                                const items = JSON.parse(JSON.stringify(this.state.items));\n                                items[index].image = e.target.value;\n                                this.updateItems(items);\n                            }}\n                        />\n                        <Button\n                            variant={image ? 'outlined' : undefined}\n                            // @ts-expect-error grey is correct\n                            color={image ? 'grey' : undefined}\n                            onClick={() => this.setState({ selectImage: index })}\n                        >\n                            {image ? <Icon src={image} style={{ width: 36, height: 36 }} /> : '...'}\n                        </Button>\n                    </div>}\n                </TableCell>\n                <TableCell className={this.props.classes.cell}>\n                    <ColorPicker\n                        style={{ width: '100%' }}\n                        value={item.color}\n                        onChange={color => {\n                            const items = JSON.parse(JSON.stringify(this.state.items));\n                            items[index].color = color;\n                            this.updateItems(items);\n                        }}\n                    />\n                </TableCell>\n                <TableCell className={this.props.classes.cell}>\n                    <ColorPicker\n                        style={{ width: '100%' }}\n                        value={item.activeColor}\n                        onChange={color => {\n                            const items = JSON.parse(JSON.stringify(this.state.items));\n                            items[index].activeColor = color;\n                            this.updateItems(items);\n                        }}\n                    />\n                </TableCell>\n                <TableCell className={this.props.classes.cellButton}>\n                    <Checkbox\n                        checked={!!item.default}\n                        onChange={e => {\n                            const items = JSON.parse(JSON.stringify(this.state.items));\n                            if (!this.props.multiple && e.target.checked) {\n                                items.forEach((_item: Item) => _item.default = false);\n                            }\n                            items[index].default = e.target.checked;\n                            this.updateItems(items);\n                        }}\n                    />\n                </TableCell>\n                <TableCell className={this.props.classes.cellButton}>\n                    <IconButton\n                        size=\"small\"\n                        onClick={() => {\n                            const items = JSON.parse(JSON.stringify(this.state.items));\n                            items.splice(index, 1);\n                            this.updateItems(items);\n                        }}\n                    >\n                        <Delete />\n                    </IconButton>\n                </TableCell>\n            </TableRow>}\n        </Draggable>;\n    }\n\n    renderTable() {\n        return <Table stickyHeader size=\"small\">\n            <TableHead>\n                <TableRow>\n                    <TableCell style={{ width: 40 }}>\n                        <Fab\n                            size=\"small\"\n                            onClick={event => this.setState({ anchorEl: event.currentTarget })}\n                        >\n                            <Add />\n                        </Fab>\n                    </TableCell>\n                    <TableCell style={{ width: 70 }}>{I18n.t('Value')}</TableCell>\n                    <TableCell style={{ width: 'calc(100% - 700px)' }}>{I18n.t('Title')}</TableCell>\n                    <TableCell style={{ width: 150 }}>{I18n.t('Icon')}</TableCell>\n                    <TableCell style={{ width: 150 }}>{I18n.t('Image')}</TableCell>\n                    <TableCell style={{ width: 150 }}>{I18n.t('Text color')}</TableCell>\n                    <TableCell style={{ width: 150 }}>{I18n.t('jqui_active_color')}</TableCell>\n                    <TableCell style={{ width: 70 }}>{I18n.t('Default')}</TableCell>\n                    <TableCell style={{ width: 40 }} />\n                </TableRow>\n            </TableHead>\n            <DragDropContext onDragEnd={data => {\n                if (!data.destination) {\n                    return;\n                }\n                const items = JSON.parse(JSON.stringify(this.state.items));\n                const [removed] = items.splice(data.source.index, 1);\n                items.splice(data.destination.index, 0, removed);\n                this.updateItems(items);\n            }}\n            >\n                <Droppable droppableId=\"items\" type=\"ROW\">\n                    {(dropProvided /* dropSnapshot */) => <TableBody\n                        ref={dropProvided.innerRef}\n                        {...dropProvided.droppableProps}\n                    >\n                        {this.state.items.map((item, index) => this.renderTableRow(item, index))}\n                    </TableBody>}\n                </Droppable>\n            </DragDropContext>\n        </Table>;\n    }\n\n    render() {\n        return <Dialog\n            fullWidth\n            maxWidth=\"xl\"\n            open={!0}\n            onClose={() => this.props.onClose()}\n        >\n            <DialogTitle>{I18n.t('Edit')}</DialogTitle>\n            <DialogContent style={{ minHeight: 'calc(90vh - 164px)' }}>\n                {this.renderSelectIconDialog()}\n                {this.renderSelectImageDialog()}\n                {this.renderFilterSelector()}\n                {this.renderTable()}\n            </DialogContent>\n            <DialogActions>\n                <Button\n                    disabled={this.originalItems === this.state.applyItems}\n                    variant=\"contained\"\n                    onClick={() => this.props.onClose(JSON.parse(this.state.applyItems))}\n                    color=\"primary\"\n                    startIcon={<Check />}\n                >\n                    {I18n.t('Apply')}\n                </Button>\n                <Button\n                    variant=\"contained\"\n                    // @ts-expect-error grey is correct\n                    color=\"grey\"\n                    onClick={() => this.props.onClose()}\n                    startIcon={<Close />}\n                >\n                    {I18n.t('Cancel')}\n                </Button>\n            </DialogActions>\n        </Dialog>;\n    }\n}\n\nexport default withStyles(styles)(FiltersEditorDialog);\n","/**\n *  ioBroker.vis\n *  https://github.com/ioBroker/ioBroker.vis\n *\n *  Copyright (c) 2024 Denis Haev https://github.com/GermanBluefox,\n *  Creative Common Attribution-NonCommercial (CC BY-NC)\n *\n *  http://creativecommons.org/licenses/by-nc/4.0/\n *\n * Short content:\n * Licensees may copy, distribute, display and perform the work and make derivative works based on it only if they give the author or licensor the credits in the manner specified by these.\n * Licensees may copy, distribute, display, and perform the work and make derivative works based on it only for noncommercial purposes.\n * (Free for non-commercial use).\n */\n\nimport React, { useState } from 'react';\n\nimport {\n    Button, ButtonGroup,\n    FormControl,\n    InputLabel, MenuItem,\n    Select,\n} from '@mui/material';\nimport { Edit } from '@mui/icons-material';\n\nimport { I18n, Icon } from '@iobroker/adapter-react-v5';\n\nimport {\n    GetRxDataFromWidget, RxRenderWidgetProps, RxWidgetInfo, WidgetData,\n    RxWidgetInfoAttributesField, RxWidgetInfoCustomComponentProperties, RxWidgetInfoCustomComponentContext,\n} from '@/types';\nimport VisRxWidget from '@/Vis/visRxWidget';\nimport { VisWidgetCommand } from '@/Vis/visBaseWidget';\nimport FiltersEditorDialog from './FiltersEditorDialog';\n\n// eslint-disable-next-line no-use-before-define\ntype RxData = GetRxDataFromWidget<typeof BasicFilterDropdown>\n\ninterface Item {\n    id?: string;\n    label: string;\n    value: string;\n    icon?: string;\n    image?: string;\n    color?: string;\n    activeColor?: string;\n    default?: boolean;\n}\n\nfunction processFilter(filters: string[]) {\n    const len = filters.length;\n    for (let f = 0; f < len; f++) {\n        const filter = filters[f];\n        if (filter.includes(',')) {\n            const ff = filter.split(',').map(t => t.trim()).filter(t => t);\n            const first = ff.shift();\n            if (first) {\n                filters[f] = first;\n                if (ff.length) {\n                    filters.push(...ff);\n                }\n            }\n        } else if (filter.includes(';')) {\n            const ff = filter.split(';').map(t => t.trim()).filter(t => t);\n            const first = ff.shift();\n            if (first) {\n                filters[f] = first;\n                if (ff.length) {\n                    filters.push(...ff);\n                }\n            }\n        }\n    }\n}\n\ninterface ItemsEditorProps {\n    data: any;\n    setData: (data: any) => void;\n    context: RxWidgetInfoCustomComponentContext;\n}\n\nconst ItemsEditor = (props: ItemsEditorProps) => {\n    const [open, setOpen] = useState(false);\n\n    let items = props.data.items;\n    // convert data from \"filters\" to \"items\"\n    if (open && !items && props.data.filters) {\n        items = props.data.filters.split(';')\n            .map((item: string) => ({ label: item.trim(), value: item.trim() }))\n            .filter((item: Item) => item.value);\n    }\n    if (open && typeof items === 'string') {\n        try {\n            items = JSON.parse(items);\n        } catch (e) {\n            items = [];\n        }\n    }\n\n    return <>\n        <Button\n            style={{ whiteSpace: 'nowrap' }}\n            onClick={() => setOpen(true)}\n            variant=\"outlined\"\n            startIcon={<Edit />}\n        >\n            {I18n.t('Edit')}\n        </Button>\n        {open ? <FiltersEditorDialog\n            context={props.context}\n            items={items || []}\n            multiple={props.data.multiple}\n            onClose={(newItems: Item[]) => {\n                if (newItems) {\n                    const data = JSON.parse(JSON.stringify(props.data));\n                    data.items = JSON.stringify(newItems);\n                    props.setData(data);\n                }\n                setOpen(false);\n            }}\n        /> : null}\n    </>;\n};\n\nclass BasicFilterDropdown extends VisRxWidget<RxData> {\n    private editMode: boolean | undefined;\n\n    static getWidgetInfo() {\n        return {\n            id: 'tplFilterDropdown',\n            visSet: 'basic',\n            visName: 'filter - dropdown',\n            visPrev: 'widgets/basic/img/Prev_FilterDropdown.png',\n            visAttrs: [{\n                name: 'common',\n                fields: [\n                    {\n                        name: 'items',\n                        label: 'editor',\n                        type: 'custom',\n                        noBinding: true,\n                        component: (\n                            _field: RxWidgetInfoAttributesField,\n                            data: WidgetData,\n                            onDataChange: (newData: WidgetData) => void,\n                            props: RxWidgetInfoCustomComponentProperties,\n                        ) => <ItemsEditor\n                            data={data}\n                            setData={onDataChange}\n                            context={props.context}\n                        />,\n                        default: '[]',\n                    },\n                    {\n                        name: 'type',\n                        label: 'Type',\n                        type: 'select',\n                        options: [\n                            {\n                                value: 'dropdown',\n                                label: 'basic_filter_type_dropdown',\n                            },\n                            {\n                                value: 'horizontal_buttons',\n                                label: 'basic_filter_type_horizontal_buttons',\n                            },\n                            {\n                                value: 'vertical_buttons',\n                                label: 'basic_filter_type_vertical_buttons',\n                            },\n                        ],\n                        default: 'horizontal_buttons',\n                    },\n                    {\n                        name: 'widgetTitle',\n                        label: 'name',\n                        hidden: 'data.type !== \"dropdown\"',\n                    },\n                    {\n                        name: 'autoFocus',\n                        type: 'checkbox',\n                        hidden: 'data.type !== \"dropdown\"',\n                    },\n                    {\n                        name: 'multiple',\n                        label: 'basic_filter_multiple',\n                        type: 'checkbox',\n                    },\n                    {\n                        name: 'noAllOption',\n                        label: 'basic_no_all_option',\n                        type: 'checkbox',\n                    },\n                    {\n                        name: 'noFilterText',\n                        label: 'basic_no_filter_text',\n                        type: 'text',\n                        hidden: '!!data.noAllOption',\n                    },\n                    {\n                        name: 'dropdownVariant',\n                        label: 'jqui_variant',\n                        type: 'select',\n                        noTranslation: true,\n                        options: [\n                            {\n                                value: 'standard',\n                                label: 'standard',\n                            },\n                            {\n                                value: 'outlined',\n                                label: 'outlined',\n                            },\n                            {\n                                value: 'filled',\n                                label: 'filled',\n                            },\n                        ],\n                        default: 'standard',\n                        hidden: 'data.type !== \"dropdown\"',\n                    },\n                    {\n                        name: 'buttonsVariant',\n                        label: 'jqui_variant',\n                        type: 'select',\n                        noTranslation: true,\n                        options: [\n                            {\n                                value: 'outlined',\n                                label: 'outlined',\n                            },\n                            {\n                                value: 'contained',\n                                label: 'contained',\n                            },\n                            {\n                                value: 'text',\n                                label: 'text',\n                            },\n                        ],\n                        default: 'outlined',\n                        hidden: 'data.type === \"dropdown\"',\n                    },\n                    {\n                        name: 'dropdownSmall',\n                        label: 'basic_small',\n                        default: false,\n                        type: 'checkbox',\n                        hidden: 'data.type !== \"dropdown\"',\n                    },\n                ],\n            }],\n            // visWidgetLabel: 'value_string',  // Label of widget\n            visDefaultStyle: {\n                width: 200,\n                height: 50,\n            },\n        };\n    }\n\n    // eslint-disable-next-line class-methods-use-this\n    getWidgetInfo() {\n        return BasicFilterDropdown.getWidgetInfo() as RxWidgetInfo;\n    }\n\n    async componentDidMount() {\n        super.componentDidMount();\n        // apply default filter\n        if (!this.props.editMode) {\n            this.editMode = false;\n            const items = this.getItems();\n            if (items.find((item: Item) => item.default && item.value)) {\n                const filter: string[] = [];\n                items.forEach((item: Item) => item.default && filter.push(item.value));\n                processFilter(filter);\n                setTimeout(() => {\n                    const view = this.props.askView('getViewClass');\n                    view.onCommand('changeFilter', { filter });\n                }, 0);\n            }\n        } else {\n            this.editMode = true;\n        }\n    }\n\n    onCommand(command: VisWidgetCommand): void {\n        if (command === 'changeFilter') {\n            // analyse filter\n            this.forceUpdate();\n        }\n        super.onCommand(command);\n    }\n\n    renderDropdown(items: Item[]): React.JSX.Element {\n        const viewsActiveFilter: string[] = (this.props.viewsActiveFilter[this.props.view] as string[]) || [];\n        let value;\n        if (this.state.rxData.multiple) {\n            value = viewsActiveFilter;\n        } else {\n            value = viewsActiveFilter[0] || '';\n        }\n        return <FormControl\n            fullWidth\n            variant={(this.state.rxData.dropdownVariant as 'standard' | 'outlined' | 'filled' | undefined) || 'standard'}\n        >\n            {this.state.rxData.widgetTitle ? <InputLabel>{this.state.rxData.widgetTitle}</InputLabel> : null}\n            <Select\n                fullWidth\n                value={value || '_'}\n                onChange={e => {\n                    let filter: string | string[] = e.target.value === '_' ? [] : e.target.value;\n                    if (typeof filter === 'string') {\n                        filter = filter.split(',');\n                    }\n                    if (filter.includes('') || filter.includes('_')) {\n                        filter = [];\n                    }\n                    processFilter(filter);\n                    const view = this.props.askView('getViewClass');\n                    view.onCommand('changeFilter', { filter });\n                }}\n                renderValue={val => {\n                    const option = items.find(item => item.value === val);\n                    if (option) {\n                        return <span style={{ color: option.color }}>{option.label}</span>;\n                    }\n                    if (val === '_' || !val) {\n                        return this.state.rxData.noAllOption ? '' : I18n.t('basic_no_filter');\n                    }\n                    return val;\n                }}\n                multiple={!!this.state.rxData.multiple}\n                autoFocus={!!this.state.rxData.autoFocus}\n            >\n                {this.state.rxData.noAllOption ? null : <MenuItem value=\"_\"><em>{this.state.rxData.noFilterText || I18n.t('basic_no_filter')}</em></MenuItem>}\n                {items.map(option => {\n                    let image = option.icon;\n                    if (!image && option.image) {\n                        image = option.image;\n                        if (image.startsWith('_PRJ_NAME/')) {\n                            image = image.replace('_PRJ_NAME/', `../${this.props.context.adapterName}.${this.props.context.instance}/${this.props.context.projectName}/`);\n                        }\n                    }\n\n                    return <MenuItem\n                        key={option.value}\n                        value={option.value}\n                        selected={viewsActiveFilter.includes(option.value)}\n                        style={{ color: viewsActiveFilter.includes(option.value) ? option.color : (option.activeColor || option.color) }}\n                    >\n                        {image ? <Icon\n                            src={image}\n                            style={{ width: 24, height: 24, marginRight: 8 }}\n                        /> : null}\n                        {option.label}\n                    </MenuItem>;\n                })}\n            </Select>\n        </FormControl>;\n    }\n\n    renderButtons(items: Item[]): React.JSX.Element {\n        const viewsActiveFilter: string[] = (this.props.viewsActiveFilter[this.props.view] as string[]) || [];\n        return <ButtonGroup\n            variant={(this.state.rxData.buttonsVariant as 'text' | 'outlined' | 'contained' | undefined) || 'contained'}\n            orientation={this.state.rxData.type === 'horizontal_buttons' ? 'horizontal' : 'vertical'}\n            style={{ width: '100%', height: '100%' }}\n        >\n            {this.state.rxData.noAllOption ? null : <Button\n                style={{\n                    flexGrow: 1,\n                }}\n                onClick={() => {\n                    const view = this.props.askView('getViewClass');\n                    view.onCommand('changeFilter', { filter: [] });\n                }}\n            >\n                <em>{this.state.rxData.noFilterText || I18n.t('basic_no_filter')}</em>\n            </Button>}\n            {items.map(option => {\n                let image = option.icon;\n                if (!image && option.image) {\n                    image = option.image;\n                    if (image.startsWith('_PRJ_NAME/')) {\n                        image = image.replace('_PRJ_NAME/', `../${this.props.context.adapterName}.${this.props.context.instance}/${this.props.context.projectName}/`);\n                    }\n                }\n                return <Button\n                    key={option.value}\n                    onClick={() => {\n                        let filter: string[];\n                        if (this.state.rxData.multiple) {\n                            filter = viewsActiveFilter.includes(option.value) ?\n                                viewsActiveFilter.filter(f => f !== option.value) :\n                                [...viewsActiveFilter, option.value];\n                        } else {\n                            filter = [option.value];\n                        }\n                        const view = this.props.askView('getViewClass');\n                        processFilter(filter);\n                        view.onCommand('changeFilter', { filter });\n                    }}\n                    color={viewsActiveFilter.includes(option.value) ? 'primary' : undefined}\n                    sx={theme => ({\n                        backgroundColor: viewsActiveFilter.includes(option.value) ? (this.state.rxData.buttonsVariant === 'contained' ? theme.palette.secondary.main : theme.palette.primary.main) : undefined,\n                        color: viewsActiveFilter.includes(option.value) ? (this.state.rxData.buttonsVariant === 'contained' ? theme.palette.secondary.contrastText : theme.palette.primary.contrastText) : undefined,\n                        '&:hover': {\n                            backgroundColor: viewsActiveFilter.includes(option.value) ? (this.state.rxData.buttonsVariant === 'contained' ? theme.palette.secondary.light : theme.palette.primary.light) : undefined,\n                            color: viewsActiveFilter.includes(option.value) ? (this.state.rxData.buttonsVariant === 'contained' ? theme.palette.secondary.contrastText : theme.palette.primary.contrastText) : undefined,\n                        },\n                    })}\n                    startIcon={image ? <Icon src={image} alt={option.label} style={{ height: 24 }} /> : null}\n                    style={{\n                        flexGrow: 1,\n                        color: viewsActiveFilter.includes(option.value) ? (option.activeColor || option.color) : option.color,\n                    }}\n                >\n                    {option.label}\n                </Button>;\n            })}\n        </ButtonGroup>;\n    }\n\n    getItems() {\n        let items = this.state.data.items;\n        // convert data from \"filters\" to \"items\"\n        if (!items && this.state.data.filters) {\n            items = this.state.data.filters.split(';')\n                .map((item: string) => ({ label: item.trim(), value: item.trim() }))\n                .filter((item: Item) => item.value);\n        }\n        if (typeof items === 'string') {\n            try {\n                items = JSON.parse(items);\n            } catch (e) {\n                items = [];\n            }\n        }\n        items = items || [];\n        return items;\n    }\n\n    renderWidgetBody(props: RxRenderWidgetProps): React.JSX.Element {\n        super.renderWidgetBody(props);\n        if (props.style.width === undefined) {\n            props.style.width = 200;\n        }\n        if (props.style.height === undefined) {\n            props.style.height = 50;\n        }\n\n        const items = this.getItems();\n        if (this.editMode !== undefined && this.editMode !== this.props.editMode) {\n            this.editMode = this.props.editMode;\n            // apply default filter if not in edit mode\n            if (!this.editMode && items.find((item: Item) => item.default && item.value)) {\n                const filter: string[] = [];\n                items.forEach((item: Item) => item.default && filter.push(item.value));\n                processFilter(filter);\n                setTimeout(() => {\n                    const view = this.props.askView('getViewClass');\n                    view.onCommand('changeFilter', { filter });\n                }, 0);\n            }\n        }\n\n        const type = this.state.rxData.type || 'dropdown';\n        if (type === 'horizontal_buttons' || type === 'vertical_buttons') {\n            return this.renderButtons(items);\n        }\n\n        return this.renderDropdown(items);\n    }\n}\n\nexport default BasicFilterDropdown;\n","/**\n *  ioBroker.vis\n *  https://github.com/ioBroker/ioBroker.vis\n *\n *  Copyright (c) 2023 Denis Haev https://github.com/GermanBluefox,\n *  Creative Common Attribution-NonCommercial (CC BY-NC)\n *\n *  http://creativecommons.org/licenses/by-nc/4.0/\n *\n * Short content:\n * Licensees may copy, distribute, display and perform the work and make derivative works based on it only if they give the author or licensor the credits in the manner specified by these.\n * Licensees may copy, distribute, display, and perform the work and make derivative works based on it only for noncommercial purposes.\n * (Free for non-commercial use).\n */\n\nimport React from 'react';\n\nimport { GetRxDataFromWidget, RxRenderWidgetProps } from '@/types';\nimport VisRxWidget from '@/Vis/visRxWidget';\n\nimport DangerousHtmlWithScript from '../Utils/DangerousHtmlWithScript';\n\n// eslint-disable-next-line no-use-before-define\ntype RxData = GetRxDataFromWidget<typeof BasicLink>\n\nclass BasicLink extends VisRxWidget<RxData> {\n    static getWidgetInfo() {\n        return {\n            id: 'tplLink',\n            visSet: 'basic',\n            visName: 'link',\n            visPrev: 'widgets/basic/img/Prev_tplLink.png',\n            visAttrs: [{\n                name: 'common',\n                fields: [\n                    {\n                        name: 'html',\n                        type: 'html',\n                    },\n                    {\n                        name: 'href',\n                        type: 'url',\n                    },\n                    {\n                        name: 'target',\n                        label: 'target',\n                        type: 'auto',\n                        options: ['auto', '_blank', '_self', '_parent', '_top'],\n                        hidden: '!data.href',\n                    },\n                ],\n            }],\n            // visWidgetLabel: 'value_string',  // Label of widget\n            visDefaultStyle: {\n                width: 200,\n                height: 130,\n            },\n        };\n    }\n\n    // eslint-disable-next-line class-methods-use-this\n    getWidgetInfo() {\n        return BasicLink.getWidgetInfo();\n    }\n\n    /**\n     * Renders the widget\n     *\n     * @return {Element}\n     */\n    renderWidgetBody(props: RxRenderWidgetProps): React.JSX.Element {\n        super.renderWidgetBody(props);\n        if (props.style.width === undefined) {\n            props.style.width = 200;\n        }\n        if (props.style.height === undefined) {\n            props.style.height = 130;\n        }\n\n        // eslint-disable-next-line jsx-a11y/control-has-associated-label\n        return <a\n            href={this.state.rxData.href}\n            target={this.state.rxData.target}\n            style={{\n                textDecoration: 'none',\n                width: '100%',\n                height: '100%',\n            }}\n        >\n            <DangerousHtmlWithScript\n                className=\"vis-widget-body\"\n                html={this.state.rxData.html}\n                isDiv\n                wid={this.props.id}\n            />\n        </a>;\n    }\n}\n\nexport default BasicLink;\n","import React from 'react';\n\nimport { Icon } from '@iobroker/adapter-react-v5';\nimport type { GetRxDataFromWidget, RxRenderWidgetProps } from '@/types';\nimport { store, recalculateFields } from '@/Store';\nimport VisRxWidget from '@/Vis/visRxWidget';\n\n// eslint-disable-next-line no-use-before-define\ntype RxData = GetRxDataFromWidget<typeof BasicImage8>;\n\nexport default class BasicImage8 extends VisRxWidget<RxData> {\n    /**\n     * Returns the widget info which is rendered in the edit mode\n     */\n    static getWidgetInfo() {\n        return {\n            id: 'tplStatefulImage8',\n            visSet: 'basic',\n            visName: 'Image 8',\n            visPrev: 'widgets/basic/img/Prev_StatefulImage.png',\n            visDefaultStyle: {\n                width: 200,\n                height: 130,\n            },\n            visAttrs: [{\n                name: 'common',\n                fields: [\n                    {\n                        name: 'oid',\n                        type: 'id',\n                    },\n                    {\n                        name: 'count',\n                        type: 'number',\n                        default: 0,\n                        onChange: async (_field: unknown, data: Record<string, any>, changeData: (newData: Record<string, any>) => void) => {\n                            const { count } = data;\n\n                            for (let i = 0;  i < count; i++) {\n                                data[`g_images-${i}`] = true;\n                            }\n\n                            changeData(data);\n                            store.dispatch(recalculateFields(true));\n                        },\n                    },\n                ],\n            }, {\n                name: 'images',\n                label: 'Image',\n                indexFrom: 0,\n                indexTo: 'count',\n                fields: [\n                    {\n                        name: 'src_',\n                        type: 'image',\n                    },\n                ],\n            }],\n        } as const;\n    }\n\n    /**\n     * Enables calling widget info on the class instance itself\n     */\n    // eslint-disable-next-line class-methods-use-this\n    getWidgetInfo() {\n        return BasicImage8.getWidgetInfo();\n    }\n\n    /**\n     * Renders the widget\n     *\n     * @param props props passed to the parent classes render method\n     */\n    renderWidgetBody(props: RxRenderWidgetProps): React.JSX.Element {\n        super.renderWidgetBody(props);\n        const classes = ['vis-widget-body'];\n\n        const srcArr: string[] = [];\n\n        for (let i = 0; i <= this.state.rxData.count; i++) {\n            // @ts-expect-error check this\n            if (this.state.rxData[`src_${i}`])  {\n                // @ts-expect-error check this\n                srcArr.push(this.state.rxData[`src_${i}`]);\n            }\n        }\n\n        return <div className={classes.join(' ')}>\n            <Icon\n                className=\"vis-widget-element\"\n                style={{ position: 'absolute', width: '100%' }}\n                src={this.getImage(srcArr)}\n                alt=\"selected_image\"\n            />\n        </div>;\n    }\n\n    /**\n     * Get image according to current state\n     *\n     * @param images array of images\n     */\n    getImage(images: string[]) {\n        if (this.state.rxData.oid !== 'nothing_selected' && this.state.values[`${this.state.rxData.oid}.val`] !== undefined) {\n            let val = this.state.values[`${this.state.rxData.oid}.val`];\n            if (val === 'true'  || val === true)  {\n                val = 1;\n            }\n\n            if (val === 'false' || val === false) {\n                val = 0;\n            }\n            return images[val];\n        }\n        return images[0];\n    }\n}\n","/**\n *  ioBroker.vis\n *  https://github.com/ioBroker/ioBroker.vis\n *\n *  Copyright (c) 2023 Denis Haev https://github.com/GermanBluefox,\n *  Creative Common Attribution-NonCommercial (CC BY-NC)\n *\n *  http://creativecommons.org/licenses/by-nc/4.0/\n *\n * Short content:\n * Licensees may copy, distribute, display and perform the work and make derivative works based on it only if they give the author or licensor the credits in the manner specified by these.\n * Licensees may copy, distribute, display, and perform the work and make derivative works based on it only for noncommercial purposes.\n * (Free for non-commercial use).\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\n\nimport {\n    Button,\n    Dialog,\n    DialogContent,\n    DialogTitle,\n    IconButton,\n    Popper,\n    Paper, TextField, DialogActions,\n} from '@mui/material';\n\nimport { Close, Check } from '@mui/icons-material';\n\nimport {\n    I18n, Icon,\n    Utils, IconCopy,\n} from '@iobroker/adapter-react-v5';\n\nimport { isVarFinite } from '../../../Utils/utils';\n// eslint-disable-next-line import/no-cycle\nimport VisRxWidget from '../../visRxWidget';\n\nclass JQuiButton extends VisRxWidget {\n    constructor(props) {\n        super(props);\n        this.state.width = 0;\n        this.state.height = 0;\n        this.state.dialogVisible = false;\n        this.state.showPassword = false;\n        this.state.password = '';\n        this.refButton = React.createRef();\n        this.refDialog = React.createRef();\n    }\n\n    static getWidgetInfo() {\n        return {\n            id: 'tplJquiButtonLink',\n            visSet: 'jqui',\n            visName: 'Button Link',\n            visSetLabel: 'jqui_set_label',\n            visWidgetLabel: 'jqui_button_link',\n            visPrev: 'widgets/jqui/img/Prev_ButtonLink.png',\n            visOrder: 1,\n            visAttrs: [\n                {\n                    name: 'common',\n                    fields: [\n                        {\n                            name: 'buttontext',\n                            type: 'text',\n                            default: 'URL',\n                            hidden: data => !!data.html || !!(data.buttontext_view && data.nav_view) || !!data.externalDialog,\n                        },\n                        {\n                            name: 'html',\n                            type: 'html',\n                            default: '',\n                            tooltip: 'jqui_html_tooltip',\n                            disabled: data => !!data.buttontext || !!data.icon || !!data.src || !!data.externalDialog,\n                        },\n                        {\n                            name: 'Password',\n                            type: 'password',\n                            label: 'password',\n                            tooltip: 'jqui_password_tooltip',\n                            disabled: data => !data.nav_view && !data.url && !data.href && !data.html_dialog && !data.contains_view,\n                        },\n                    ],\n                },\n                {\n                    name: 'view',\n                    label: 'jqui_view_group',\n                    hidden: data => !!data.url || !!data.href || !!data.html_dialog || !!data.contains_view,\n                    fields: [\n                        {\n                            name: 'nav_view',\n                            label: 'jqui_nav_view',\n                            type: 'views',\n                        },\n                        {\n                            name: 'buttontext_view',\n                            label: 'jqui_buttontext_view',\n                            type: 'checkbox',\n                            hidden: data => !data.nav_view,\n                        },\n                        {\n                            name: 'sub_view',\n                            label: 'basic_sub_view',\n                            type: 'text',\n                            tooltip: 'sub_view_tooltip',\n                            hidden: data => !data.nav_view,\n                        },\n                    ],\n                },\n                {\n                    name: 'URL',\n                    label: 'jqui_url_group',\n                    hidden: data => !!data.html_dialog || !!data.contains_view || !!data.nav_view,\n                    fields: [\n                        {\n                            name: 'href',\n                            label: 'jqui_url_in_browser',\n                            type: 'url',\n                            hidden: data => !!data.url,\n                            tooltip: 'jqui_href_tooltip',\n                        },\n                        {\n                            name: 'url',\n                            label: 'jqui_url_in_background',\n                            type: 'url',\n                            hidden: data => !!data.href,\n                            tooltip: 'jqui_url_tooltip',\n                        },\n                        {\n                            name: 'target',\n                            type: 'auto',\n                            options: ['_blank', '_self', '_parent', '_top'],\n                            hidden: data => !!data.url || !data.href,\n                        },\n                    ],\n                },\n                {\n                    name: 'style',\n                    label: 'Style',\n                    hidden: data => !!data.externalDialog,\n                    fields: [\n                        { name: 'no_style', type: 'checkbox', hidden: data => data.jquery_style },\n                        {\n                            name: 'jquery_style',\n                            label: 'jqui_jquery_style',\n                            type: 'checkbox',\n                            hidden: data => data.no_style,\n                        },\n                        {\n                            name: 'padding',\n                            type: 'slider',\n                            min: 0,\n                            max: 100,\n                            default: 5,\n                            // hidden: data => !data.no_style && !data.jquery_style,\n                        },\n                        {\n                            name: 'variant',\n                            label: 'jqui_variant',\n                            type: 'select',\n                            noTranslation: true,\n                            options: ['contained', 'outlined', 'standard'],\n                            default: 'contained',\n                            hidden: data => data.jquery_style || data.no_style,\n                        },\n                        {\n                            name: 'color',\n                            label: 'jqui_button_color',\n                            type: 'select',\n                            noTranslation: true,\n                            options: ['', 'primary', 'secondary'],\n                            default: '',\n                            hidden: data => data.jquery_style || data.no_style,\n                        },\n                        { name: 'html_prepend', type: 'html' },\n                        { name: 'html_append', type: 'html' },\n                        {\n                            name: 'visResizable', // reserved name for resizable\n                            label: 'visResizable',\n                            type: 'checkbox',\n                            default: false,\n                            desiredSize: false, // If sizes should be deleted or set to specific value. `false` - delete sizes, or {width: 100, height: 100}\n                        },\n                    ],\n                },\n                {\n                    name: 'icon',\n                    hidden: data => !!data.externalDialog || data.jquery_style,\n                    fields: [\n                        {\n                            name: 'src',\n                            label: 'jqui_image',\n                            type: 'image',\n                            hidden: data => data.icon,\n                        },\n                        {\n                            name: 'icon',\n                            label: 'jqui_icon',\n                            type: 'icon64',\n                            hidden: data => data.src,\n                        },\n                        {\n                            name: 'invert_icon',\n                            type: 'checkbox',\n                            hidden: data => (!data.icon && !data.src),\n                        },\n                        {\n                            name: 'imageHeight',\n                            type: 'slider',\n                            min: 0,\n                            max: 200,\n                            default: 100,\n                            hidden: data => !data.src,\n                        },\n                    ],\n                },\n                {\n                    name: 'dialog',\n                    hidden: data => !!data.url || !!data.href || !!data.nav_view,\n                    fields: [\n                        {\n                            name: 'html_dialog',\n                            type: 'html',\n                            hidden: data => !!data.contains_view,\n                        },\n                        {\n                            name: 'contains_view',\n                            type: 'views',\n                            hidden: data => !!data.html_dialog,\n                        },\n                        {\n                            name: 'title',\n                            type: 'text',\n                            hidden: data => !data.html_dialog && !data.contains_view,\n                        },\n                        {\n                            name: 'autoclose',\n                            type: 'slider',\n                            min: 0,\n                            max: 30000,\n                            step: 100,\n                            hidden: data => !data.html_dialog && !data.contains_view,\n                        },\n                        {\n                            name: 'modal',\n                            type: 'checkbox',\n                            default: true,\n                            hidden: data => !data.html_dialog && !data.contains_view,\n                        },\n                        {\n                            name: 'dialog_width',\n                            type: 'text',\n                            hidden: data => !data.html_dialog && !data.contains_view,\n                        },\n                        {\n                            name: 'dialog_height',\n                            type: 'text',\n                            hidden: data => !data.html_dialog && !data.contains_view,\n                        },\n                        {\n                            name: 'dialog_class',\n                            label: 'CSS Class',\n                            type: 'text',\n                            hidden: data => !data.html_dialog && !data.contains_view,\n                        },\n                        {\n                            name: 'persistent',\n                            type: 'checkbox',\n                            hidden: data => !data.html_dialog && !data.contains_view,\n                        },\n                        {\n                            name: 'preload',\n                            type: 'checkbox',\n                            hidden: data => !data.html_dialog && !data.contains_view,\n                        },\n                        {\n                            name: 'closeOnClick',\n                            type: 'checkbox',\n                            hidden: data => !data.html_dialog && !data.contains_view,\n                        },\n                        {\n                            name: 'hideCloseButton',\n                            label: 'jqui_hide_close_button',\n                            type: 'checkbox',\n                            hidden: data => !data.html_dialog && !data.contains_view && !!data.closeOnClick,\n                        },\n                        {\n                            name: 'dialogBackgroundColor',\n                            label: 'Background color',\n                            type: 'color',\n                            hidden: data => !data.html_dialog && !data.contains_view,\n                        },\n                        {\n                            name: 'dialogTitleColor',\n                            type: 'color',\n                            label: 'Text color',\n                            hidden: data => !data.html_dialog && !data.contains_view,\n                        },\n                        /*\n                        {\n                            name: 'dialog_top',\n                            type: 'text',\n                            hidden: data => !data.html_dialog && !data.contains_view,\n                        },\n                        {\n                            name: 'dialog_left',\n                            type: 'text',\n                            hidden: data => !data.html_dialog && !data.contains_view,\n                        },\n                        */\n                        {\n                            name: 'overflowX',\n                            type: 'select',\n                            noTranslation: true,\n                            options: ['', 'auto', 'hidden', 'visible', 'scroll', 'initial', 'inherit'],\n                            hidden: data => !data.html_dialog && !data.contains_view,\n                        },\n                        {\n                            name: 'overflowY',\n                            type: 'select',\n                            noTranslation: true,\n                            options: ['', 'auto', 'hidden', 'visible', 'scroll', 'initial', 'inherit'],\n                            hidden: data => !data.html_dialog && !data.contains_view,\n                        },\n                        {\n                            name: 'setId',\n                            type: 'id',\n                            tooltip: 'jqui_dialog_set_id_tooltip',\n                            hidden: data => !data.html_dialog && !data.contains_view,\n                        },\n                        {\n                            name: 'setValue',\n                            type: 'text',\n                            hidden: data => !data.setId || (!data.html_dialog && !data.contains_view),\n                        },\n                        {\n                            name: 'dialogName',\n                            label: 'jqui_dialog_name',\n                            type: 'text',\n                            hidden: data => !data.html_dialog && !data.contains_view,\n                        },\n                        {\n                            name: 'externalDialog',\n                            label: 'jqui_external_dialog',\n                            tooltip: 'jqui_external_dialog_tooltip',\n                            type: 'checkbox',\n                            hidden: data => !data.html_dialog && !data.contains_view,\n                        },\n                    ],\n                },\n            ],\n        };\n    }\n\n    static findField(widgetInfo, name) {\n        return VisRxWidget.findField(widgetInfo, name);\n    }\n\n    // eslint-disable-next-line class-methods-use-this\n    getWidgetInfo() {\n        return JQuiButton.getWidgetInfo();\n    }\n\n    async componentDidMount() {\n        super.componentDidMount();\n        await this.componentDidUpdate();\n    }\n\n    async componentWillUnmount() {\n        this.hideTimeout && clearTimeout(this.hideTimeout);\n        this.hideTimeout = null;\n        super.componentWillUnmount();\n    }\n\n    async componentDidUpdate() {\n        if (this.refButton.current) {\n            if (this.state.rxData.jquery_style && !this.refButton.current._jQueryDone) {\n                this.refButton.current._jQueryDone = true;\n                window.jQuery(this.refButton.current).button();\n            }\n            if (this.refButton.current.clientWidth !== this.state.width || this.refButton.current.clientHeight !== this.state.height) {\n                this.setState({ width: this.refButton.current.clientWidth, height: this.refButton.current.clientHeight });\n            }\n        }\n        // from base class\n        if (this.refService.current && (this.state.rxData.html_dialog || this.state.rxData.contains_view) && !this.refService.current._showDialog) {\n            this.refService.current._showDialog = this.showDialog;\n        }\n        if (this.refService.current) {\n            const dialogName = this.refService.current.dataset.dialogName;\n            if ((dialogName || '') !== (this.state.rxData.dialogName || '')) {\n                if (!this.state.rxData.dialogName) {\n                    delete this.refService.current.dataset.dialogName;\n                } else {\n                    this.refService.current.dataset.dialogName = this.state.rxData.dialogName;\n                }\n            }\n        }\n    }\n\n    showDialog = show => {\n        this.setState({ dialogVisible: show });\n\n        // Auto-close\n        let timeout = this.state.rxData.autoclose;\n        if (timeout === true || timeout === 'true') {\n            timeout = 10000;\n        }\n        if (timeout === null || timeout === undefined || timeout === '') {\n            return;\n        }\n        timeout = parseInt(timeout, 10);\n        if (timeout < 60) {\n            // maybe this is seconds\n            timeout *= 1000;\n        }\n        timeout = timeout || 1000;\n\n        if (timeout) {\n            if (show) {\n                this.hideTimeout = setTimeout(() => {\n                    this.hideTimeout = null;\n                    this.showDialog(false);\n                }, timeout);\n            } else if (this.hideTimeout) {\n                clearTimeout(this.hideTimeout);\n                this.hideTimeout = null;\n            }\n        }\n    };\n\n    onPasswordEnter() {\n        if (this.state.password === this.state.rxData.Password) {\n            this.setState({ showPassword: false }, () => this.onClick(true));\n        } else {\n            window.alert(I18n.t('Wrong password'));\n            this.setState({ passwordError: true }, () => {\n                setTimeout(() => this.setState({ passwordError: false }), 3000);\n            });\n        }\n    }\n\n    renderPasswordDialog() {\n        if (!this.state.showPassword) {\n            return null;\n        }\n        return <Dialog\n            open={!0}\n            onClose={() => this.setState({ showPassword: false })}\n        >\n            <DialogTitle>{I18n.t('Enter password')}</DialogTitle>\n            <DialogContent>\n                <TextField\n                    label={I18n.t('Password')}\n                    error={this.state.passwordError}\n                    helperText={this.state.passwordError ? I18n.t('Wrong password') : null}\n                    type=\"password\"\n                    autoFocus\n                    fullWidth\n                    variant=\"standard\"\n                    value={this.state.password || ''}\n                    onChange={e => this.setState({ password: e.target.value })}\n                    onKeyUp={e => e.keyCode === 13 && this.onPasswordEnter()}\n                />\n            </DialogContent>\n            <DialogActions>\n                <Button\n                    disabled={!this.state.password}\n                    startIcon={<Check />}\n                    onClick={e => {\n                        e.stopPropagation();\n                        e.preventDefault();\n                        this.onPasswordEnter();\n                    }}\n                    color=\"primary\"\n                    variant=\"contained\"\n                >\n                    {I18n.t('Enter')}\n                </Button>\n                <Button\n                    startIcon={<Close />}\n                    onClick={e => {\n                        e.stopPropagation();\n                        e.preventDefault();\n                        this.setState({ showPassword: false });\n                    }}\n                    color=\"grey\"\n                    variant=\"contained\"\n                >\n                    {I18n.t('Cancel')}\n                </Button>\n            </DialogActions>\n        </Dialog>;\n    }\n\n    async setObjectWithState(oid, value) {\n        if (this.setObjectType === undefined) {\n            try {\n                const obj = await this.props.context.socket.getObject(oid);\n                this.setObjectType = obj?.common?.type || 'string';\n                await this.setObjectWithState(oid, value);\n            } catch (error) {\n                console.warn(`Object ${oid} not found: ${error}`);\n            }\n            return;\n        }\n        if (this.setObjectType === 'boolean') {\n            value = value === 'true' || value === true || value === '1' || value === 1 || value === 'on' || value === 'ON';\n        } else if (this.setObjectType === 'number') {\n            value = parseFloat(value);\n        } else if (value !== null && value !== undefined) {\n            value = value.toString();\n        }\n\n        await this.props.context.setValue(oid, value);\n    }\n\n    onCommand(command) {\n        super.onCommand(command);\n        if (command === 'openDialog') {\n            this.showDialog(true);\n            return true;\n        }\n        if (command === 'closeDialog') {\n            this.showDialog(false);\n            return true;\n        }\n        return false;\n    }\n\n    onClick(passwordChecked) {\n        if (this.state.dialogVisible) {\n            return;\n        }\n\n        if (!passwordChecked && this.state.rxData.Password) {\n            if (this.props.editMode) {\n                window.alert(I18n.t('Ignored in edit mode'));\n            } else {\n                this.setState({ showPassword: true, password: '' });\n            }\n            return;\n        }\n\n        if (this.state.rxData.nav_view) {\n            this.props.context.changeView(this.state.rxData.nav_view);\n        } else if (!this.props.editMode && this.state.rxData.href) {\n            if (this.state.rxData.target ||\n                (this.props.tpl === 'tplJquiButtonLinkBlank' && this.state.rxData.target === undefined)\n            ) {\n                window.open(this.state.rxData.href, this.state.rxData.target);\n            } else {\n                window.location.href = this.state.rxData.href;\n            }\n        } else if (this.state.rxData.url) {\n            this.props.socket.getRawSocket().emit('httpGet', this.state.rxData.url, data =>\n                console.log('httpGet', this.state.rxData.url, data));\n        }\n\n        if (this.state.rxData.html_dialog || this.state.rxData.contains_view) {\n            if (this.state.rxData.setId) {\n                this.setObjectWithState(this.state.rxData.setId, this.state.rxData.setValue)\n                    .catch(error => console.warn(`Cannot set state: ${error}`));\n            }\n            // show dialog\n            this.showDialog(true);\n        }\n    }\n\n    renderRxDialog(dialogStyle, content) {\n        console.log('test');\n        if (this.state.rxData.modal) {\n            console.log('in');\n            return <Dialog\n                // fullWidth\n                maxWidth=\"xl\"\n                id={`${this.props.id}_dialog`}\n                ref={this.refDialog}\n                open={this.state.dialogVisible}\n                onClick={() => {\n                    if (this.state.rxData.closeOnClick) {\n                        this.showDialog(false);\n                    }\n                }}\n            >\n                <div style={{ backgroundColor: this.state.rxData.dialogBackgroundColor }}>\n                    {this.state.rxData.title ? <DialogTitle sx={{ color: this.state.rxData.dialogTitleColor }}>{this.state.rxData.title}</DialogTitle> : null}\n                    {!this.state.rxData.hideCloseButton || !this.state.rxData.closeOnClick ? <IconButton\n                        sx={{ color: this.state.rxData.dialogTitleColor }}\n                        style={{\n                            position: 'absolute',\n                            top: 0,\n                            right: 0,\n                            zIndex: 800,\n                        }}\n                        onClick={() => this.showDialog(false)}\n                    >\n                        <Close />\n                    </IconButton> : null}\n                    <DialogContent>{content}</DialogContent>\n                </div>\n            </Dialog>;\n        }\n\n        if (!this.state.dialogVisible) {\n            dialogStyle.display = 'none';\n        }\n\n        if (!dialogStyle.minWidth || dialogStyle.minWidth < 200) {\n            dialogStyle.minWidth = 200;\n        }\n        if (!dialogStyle.minHeight || dialogStyle.minHeight < 100) {\n            dialogStyle.minHeight = 100;\n        }\n\n        dialogStyle.backgroundColor = 'blue';\n        const paperStyle = { ...dialogStyle };\n        delete paperStyle.top;\n        delete paperStyle.left;\n        paperStyle.padding = this.state.rxData.title ? '0 24px 24px 24px' : '26px 24px 24px 24px';\n\n        return <Popper\n            open={this.state.dialogVisible}\n            id={`${this.props.id}_dialog`}\n            ref={this.refDialog}\n            anchorEl={this.refButton.current}\n            style={dialogStyle}\n            onClick={() => {\n                if (this.state.rxData.closeOnClick) {\n                    this.showDialog(false);\n                }\n            }}\n        >\n            <Paper\n                style={{ ...paperStyle, background: 'red !important' }}\n            >\n                {this.state.rxData.title ?\n                    <DialogTitle style={{ padding: '16px 0 0 0' }}>\n                        <div>{this.state.rxData.title}</div>\n                    </DialogTitle>\n                    :\n                    null}\n                <IconButton\n                    style={{\n                        position: 'absolute',\n                        top: 0,\n                        right: 0,\n                        zIndex: 800,\n                    }}\n                    onClick={() => this.showDialog(false)}\n                >\n                    <Close />\n                </IconButton>\n                <DialogContent>{content}</DialogContent>\n            </Paper>\n        </Popper>;\n    }\n\n    renderJQueryDialog(dialogStyle, content) {\n        return <div\n            id={`${this.props.id}_dialog`}\n            className=\"vis-widget-dialog\"\n            title={this.state.rxData.title}\n            style={dialogStyle}\n            ref={this.refDialog}\n        >\n            {this.state.rxData.preload ? content : null}\n        </div>;\n    }\n\n    renderDialog() {\n        if (this.props.editMode ||\n            (!this.state.dialogVisible && !this.state.rxData.persistent && !this.state.rxData.externalDialog) ||\n            (!this.state.rxData.html_dialog && !this.state.rxData.contains_view)\n        ) {\n            return null;\n        }\n\n        // eslint-disable-next-line no-restricted-properties\n        // const top = isVarFinite(this.state.rxData.dialog_top) ? parseFloat(this.state.rxData.dialog_top) : this.state.rxData.dialog_top;\n        // eslint-disable-next-line no-restricted-properties\n        // const left = isVarFinite(this.state.rxData.dialog_left) ? parseFloat(this.state.rxData.dialog_left) : this.state.rxData.dialog_left;\n        // eslint-disable-next-line no-restricted-properties\n        const width = isVarFinite(this.state.rxData.dialog_width) ? parseFloat(this.state.rxData.dialog_width) : this.state.rxData.dialog_width;\n        // eslint-disable-next-line no-restricted-properties\n        const height = isVarFinite(this.state.rxData.dialog_height) ? parseFloat(this.state.rxData.dialog_height) : this.state.rxData.dialog_height;\n\n        const dialogStyle = {\n            minWidth: width || (window.innerWidth - 50),\n            minHeight: height || (window.innerHeight - 50),\n            // top: top || top === 0 ? top : undefined,\n            // left: left || left === 0 ? left : undefined,\n            overflowX: this.state.rxData.overflowX,\n            overflowY: this.state.rxData.overflowY,\n        };\n\n        let content;\n        if (this.state.rxData.contains_view) {\n            content = <div\n                style={dialogStyle}\n                className={this.state.rxData.dialog_class}\n            >\n                {super.getWidgetView(this.state.rxData.contains_view)}\n            </div>;\n        } else {\n            content = <div\n                style={dialogStyle}\n                className={this.state.rxData.dialog_class}\n                // eslint-disable-next-line react/no-danger\n                dangerouslySetInnerHTML={{ __html: this.state.rxData.html_dialog }}\n            />;\n        }\n\n        if (this.state.rxData.jquery_style) {\n            // return this.renderJQueryDialog(dialogStyle, content);\n        }\n\n        return this.renderRxDialog(dialogStyle, content);\n    }\n\n    renderWidgetBody(props) {\n        super.renderWidgetBody(props);\n\n        const iconStyle = {\n            marginRight: 4,\n            filter: this.state.rxData.invert_icon ? 'invert(1)' : undefined,\n        };\n\n        if (!this.state.rxData.jquery_style && this.state.rxData.src) {\n            if (this.state.width > this.state.height) {\n                iconStyle.height = `${this.state.rxData.imageHeight || 100}%`;\n                iconStyle.width = 'auto';\n            } else {\n                iconStyle.width = `${this.state.rxData.imageHeight || 100}%`;\n                iconStyle.height = 'auto';\n            }\n        }\n        let iconSrc = !this.state.rxData.jquery_style && (this.state.rxData.src || this.state.rxData.icon);\n\n        if (iconSrc && iconSrc.startsWith('_PRJ_NAME/')) {\n            iconSrc = iconSrc.replace('_PRJ_NAME/', `../${this.props.context.adapterName}.${this.props.context.instance}/${this.props.context.projectName}/`);\n        }\n        const icon = iconSrc ? <Icon\n            src={iconSrc}\n            style={iconStyle}\n        /> : null;\n\n        const buttonStyle = { textTransform: 'none' };\n        // apply style from the element\n        Object.keys(this.state.rxStyle).forEach(attr => {\n            const value = this.state.rxStyle[attr];\n            if (value !== null &&\n                value !== undefined &&\n                VisRxWidget.POSSIBLE_MUI_STYLES.includes(attr)\n            ) {\n                attr = attr.replace(\n                    /(-\\w)/g,\n                    text => text[1].toUpperCase(),\n                );\n                buttonStyle[attr] = value;\n            }\n        });\n\n        // the following widgets are resizable by default\n        let visResizable = this.state.data.visResizable;\n        if (visResizable === undefined || visResizable === null) {\n            if (this.props.tpl === 'tplJquiButtonNav' ||\n                this.props.tpl === 'tplJquiNavPw' ||\n                this.props.tpl === 'tplContainerDialog' ||\n                this.props.tpl === 'tplContainerIconDialog' ||\n                this.props.tpl === 'tplJquiDialog' ||\n                this.props.tpl === 'tplJquiIconDialog' ||\n                this.props.tpl === 'tplIconHttpGet' ||\n                this.props.tpl === 'tplIconLink' ||\n                this.props.tpl === 'tplJquiIconNav'\n            ) {\n                visResizable = true;\n            }\n        }\n\n        // extra no rxData here, as it is not possible to set it with bindings\n        if (visResizable) {\n            buttonStyle.width = '100%';\n            buttonStyle.height = '100%';\n        } else {\n            buttonStyle.padding = this.state.rxData.padding;\n        }\n\n        let buttonText;\n        if (this.state.rxData.html) {\n            // ignore\n        } else if (this.state.rxData.nav_view && this.state.rxData.buttontext_view) {\n            buttonText = this.props.context.views[this.state.rxData.nav_view]?.settings?.navigationTitle || this.state.rxData.nav_view;\n        } else if (this.state.rxData.buttontext === undefined) {\n            buttonText = this.state.rxData.text || ''; // back compatibility\n        } else {\n            buttonText = this.state.rxData.buttontext;\n        }\n\n        let content;\n        if (this.state.rxData.externalDialog) {\n            content = this.props.editMode ? <div\n                style={{\n                    width: '100%',\n                    height: '100%',\n                    border: '2px dashed red',\n                    backgroundColor: 'grey',\n                    color: 'white',\n                    boxSizing: 'border-box',\n                }}\n            >\n                <IconButton\n                    style={{\n                        position: 'absolute',\n                        bottom: 0,\n                        right: 0,\n                        opacity: 0.4,\n                    }}\n                    className={this.props.context.editModeComponentClass}\n                    onClick={e => {\n                        e.stopPropagation();\n                        e.preventDefault();\n                        const text = `setState('${this.props.context.adapterName}.${this.props.context.instance}.control.command', '${JSON.stringify({ command: 'dialog', instance: window.localStorage.getItem('visInstance'), data: this.state.rxData.dialogName || this.props.id })}')`;\n                        window.alert(I18n.t('Copied %s', text));\n                        Utils.copyToClipboard(text);\n                    }}\n                >\n                    <IconCopy />\n                </IconButton>\n                <div>{I18n.t('External dialog')}</div>\n                <div>{this.state.rxData.html_dialog ? 'HTML' : `View: ${this.state.rxData.contains_view}`}</div>\n                <div>{`Name: ${this.state.rxData.dialogName ? `${this.state.rxData.dialogName} (${this.props.id})` : this.props.id}`}</div>\n                <div style={{ fontSize: 10 }}>{I18n.t('You can open dialog with following script:')}</div>\n                <div style={{ fontSize: 10 }}>{`setState('${this.props.context.adapterName}.${this.props.context.instance}.control.command', '${JSON.stringify({ command: 'dialog', instance: window.localStorage.getItem('visInstance'), data: this.state.rxData.dialogName || this.props.id })}')`}</div>\n            </div> : null;\n        } else {\n            content = [\n                this.state.rxData.html_prepend ? <span\n                    key=\"prepend\"\n                    // eslint-disable-next-line react/no-danger\n                    dangerouslySetInnerHTML={{ __html: this.state.rxData.html_prepend }}\n                /> : null,\n                this.state.rxData.html ?\n                    <span\n                        key=\"content\"\n                        // eslint-disable-next-line react/no-danger\n                        dangerouslySetInnerHTML={{ __html: this.state.rxData.html }}\n                    />\n                    :\n                    (this.state.rxData.no_style || this.state.rxData.jquery_style ?\n                        <button\n                            key=\"content\"\n                            className={this.state.rxData.nav_view && this.state.rxData.nav_view === window.location.hash.slice(1) ? 'ui-state-active' : undefined}\n                            ref={this.refButton}\n                            type=\"button\"\n                            style={buttonStyle}\n                            onClick={() => this.onClick()}\n                        >\n                            {icon}\n                            {buttonText}\n                        </button>\n                        :\n                        <Button\n                            key=\"content\"\n                            ref={this.refButton}\n                            style={buttonStyle}\n                            color={this.state.rxData.nav_view && this.state.rxData.nav_view === window.location.hash.slice(1) ?\n                                (this.state.rxData.color === 'primary' ? 'secondary' : 'primary') :\n                                (this.state.rxData.color || 'grey')}\n                            variant={this.state.rxData.variant === undefined ? 'contained' : this.state.rxData.variant}\n                            onClick={() => this.onClick()}\n                        >\n                            {icon}\n                            {buttonText}\n                        </Button>),\n                this.state.rxData.html_append ? <span\n                    key=\"append\"\n                    // eslint-disable-next-line react/no-danger\n                    dangerouslySetInnerHTML={{ __html: this.state.rxData.html_append }}\n                /> : null,\n            ];\n        }\n\n        return <div\n            className=\"vis-widget-body\"\n            onClick={this.state.rxData.html ? () => this.onClick() : undefined}\n        >\n            {content}\n            {this.renderDialog()}\n            {this.renderPasswordDialog()}\n        </div>;\n    }\n}\n\nJQuiButton.propTypes = {\n    id: PropTypes.string.isRequired,\n    context: PropTypes.object.isRequired,\n    view: PropTypes.string.isRequired,\n    editMode: PropTypes.bool.isRequired,\n    tpl: PropTypes.string.isRequired,\n};\n\nexport default JQuiButton;\n","/**\n *  ioBroker.vis\n *  https://github.com/ioBroker/ioBroker.vis\n *\n *  Copyright (c) 2023 Denis Haev https://github.com/GermanBluefox,\n *  Creative Common Attribution-NonCommercial (CC BY-NC)\n *\n *  http://creativecommons.org/licenses/by-nc/4.0/\n *\n * Short content:\n * Licensees may copy, distribute, display and perform the work and make derivative works based on it only if they give the author or licensor the credits in the manner specified by these.\n * Licensees may copy, distribute, display, and perform the work and make derivative works based on it only for noncommercial purposes.\n * (Free for non-commercial use).\n */\nimport PropTypes from 'prop-types';\n\n// eslint-disable-next-line import/no-cycle\nimport JQuiButton from './JQuiButton';\n\nclass JQuiButtonBlank extends JQuiButton {\n    static getWidgetInfo() {\n        const widgetInfo = JQuiButton.getWidgetInfo();\n        const newWidgetInfo = {\n            id: 'tplJquiButtonLinkBlank',\n            visSet: 'jqui',\n            visName: 'Button Link',\n            visWidgetLabel: 'jqui_button_link_blank',\n            visPrev: 'widgets/jqui/img/Prev_ButtonLinkBlank.png',\n            visOrder: 2,\n            visAttrs: widgetInfo.visAttrs,\n        };\n\n        // Add note\n        newWidgetInfo.visAttrs[0].fields.unshift({\n            name: '_note',\n            type: 'help',\n            text: 'jqui_button_link_blank_note',\n        });\n        const target = JQuiButton.findField(newWidgetInfo, 'target');\n        target.default = '_blank';\n\n        const visResizable = JQuiButton.findField(newWidgetInfo, 'visResizable');\n        visResizable.default = false;\n\n        const text = JQuiButton.findField(newWidgetInfo, 'buttontext');\n        text.default = 'URL Browser';\n\n        return newWidgetInfo;\n    }\n\n    // eslint-disable-next-line class-methods-use-this\n    getWidgetInfo() {\n        return JQuiButtonBlank.getWidgetInfo();\n    }\n}\n\nJQuiButtonBlank.propTypes = {\n    id: PropTypes.string.isRequired,\n    context: PropTypes.object.isRequired,\n    view: PropTypes.string.isRequired,\n    editMode: PropTypes.bool.isRequired,\n};\n\nexport default JQuiButtonBlank;\n","/**\n *  ioBroker.vis\n *  https://github.com/ioBroker/ioBroker.vis\n *\n *  Copyright (c) 2023 Denis Haev https://github.com/GermanBluefox,\n *  Creative Common Attribution-NonCommercial (CC BY-NC)\n *\n *  http://creativecommons.org/licenses/by-nc/4.0/\n *\n * Short content:\n * Licensees may copy, distribute, display and perform the work and make derivative works based on it only if they give the author or licensor the credits in the manner specified by these.\n * Licensees may copy, distribute, display, and perform the work and make derivative works based on it only for noncommercial purposes.\n * (Free for non-commercial use).\n */\nimport PropTypes from 'prop-types';\n\n// eslint-disable-next-line import/no-cycle\nimport JQuiButton from './JQuiButton';\n\nclass JQuiIconLink extends JQuiButton {\n    static getWidgetInfo() {\n        const widgetInfo = JQuiButton.getWidgetInfo();\n\n        const newWidgetInfo = {\n            id: 'tplIconLink',\n            visSet: 'jqui',\n            visName: 'Button Link',\n            visWidgetLabel: 'jqui_icon_link',\n            visPrev: 'widgets/jqui/img/Prev_IconLink.png',\n            visOrder: 3,\n            visAttrs: widgetInfo.visAttrs,\n        };\n\n        // Add note\n        newWidgetInfo.visAttrs[0].fields.unshift({\n            name: '_note',\n            type: 'help',\n            text: 'jqui_button_link_blank_note',\n        });\n\n        const target = JQuiButton.findField(newWidgetInfo, 'target');\n        target.default = '_blank';\n\n        // set resizable to true\n        const visResizable = JQuiButton.findField(newWidgetInfo, 'visResizable');\n        visResizable.default = true;\n\n        return newWidgetInfo;\n    }\n\n    // eslint-disable-next-line class-methods-use-this\n    getWidgetInfo() {\n        return JQuiIconLink.getWidgetInfo();\n    }\n}\n\nJQuiIconLink.propTypes = {\n    id: PropTypes.string.isRequired,\n    context: PropTypes.object.isRequired,\n    view: PropTypes.string.isRequired,\n    editMode: PropTypes.bool.isRequired,\n    tpl: PropTypes.string.isRequired,\n};\n\nexport default JQuiIconLink;\n","/**\n *  ioBroker.vis\n *  https://github.com/ioBroker/ioBroker.vis\n *\n *  Copyright (c) 2023 Denis Haev https://github.com/GermanBluefox,\n *  Creative Common Attribution-NonCommercial (CC BY-NC)\n *\n *  http://creativecommons.org/licenses/by-nc/4.0/\n *\n * Short content:\n * Licensees may copy, distribute, display and perform the work and make derivative works based on it only if they give the author or licensor the credits in the manner specified by these.\n * Licensees may copy, distribute, display, and perform the work and make derivative works based on it only for noncommercial purposes.\n * (Free for non-commercial use).\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\n\nimport {\n    Button,\n} from '@mui/material';\n\nimport {\n    I18n,\n    Icon,\n} from '@iobroker/adapter-react-v5';\n\n// eslint-disable-next-line import/no-cycle\nimport VisRxWidget from '../../visRxWidget';\n\nclass JQuiWriteState extends VisRxWidget {\n    constructor(props) {\n        super(props);\n        this.state.value = '';\n        this.state.valueType = null;\n    }\n\n    static getWidgetInfo() {\n        return {\n            id: 'tplIconState',\n            visSet: 'jqui',\n            visName: 'Icon State',\n            visWidgetLabel: 'jqui_write_value',\n            visPrev: 'widgets/jqui/img/Prev_WriteState.png',\n            visOrder: 26,\n            visAttrs: [\n                {\n                    name: 'common',\n                    fields: [\n                        {\n                            name: 'oid',\n                            type: 'id',\n                            onChange: async (field, data, changeData, socket) => {\n                                if (data[field.name] && data[field.name] !== 'nothing_selected') {\n                                    const obj = await socket.getObject(data[field.name]);\n                                    let changed = false;\n                                    if (obj?.common?.min !== undefined && obj?.common?.min !== null) {\n                                        if (data.min !== obj.common.min) {\n                                            data.min = obj.common.min;\n                                            changed = true;\n                                        }\n                                    }\n                                    if (obj?.common?.max !== undefined && obj?.common?.max !== null) {\n                                        if (data.max !== obj.common.max) {\n                                            data.max = obj.common.max;\n                                            changed = true;\n                                        }\n                                        if (data.step > 0) {\n                                            if (data.minmax !== obj.common.max) {\n                                                data.minmax = obj.common.max;\n                                                changed = true;\n                                            }\n                                        } else if (data.minmax !== obj.common.min) {\n                                            data.minmax = obj.common.min;\n                                            changed = true;\n                                        }\n                                    }\n                                    if (!data.step) {\n                                        if (obj?.common?.step !== undefined && obj?.common?.step !== null) {\n                                            if (data.step !== obj.common.step) {\n                                                data.step = obj.common.step;\n                                                changed = true;\n                                            }\n                                        }\n                                    }\n                                    changed && changeData(data);\n                                }\n                            },\n                        },\n                        {\n                            name: 'click_id',\n                            type: 'id',\n                            noSubscribe: true,\n                        },\n                        {\n                            name: 'type',\n                            label: 'jqui_type',\n                            type: 'select',\n                            default: 'value',\n                            options: [\n                                { value: 'value', label: 'jqui_from_value' },\n                                { value: 'oid', label: 'jqui_from_oid' },\n                                { value: 'toggle', label: 'jqui_toggle' },\n                                { value: 'change', label: 'jqui_increment_decrement' },\n                            ],\n                        },\n                        {\n                            name: 'value_oid',\n                            type: 'id',\n                            hidden: data => data.type !== 'oid',\n                        },\n                        {\n                            name: 'value',\n                            type: 'text',\n                            hidden: data => data.type !== 'value',\n                        },\n                        {\n                            name: 'step',\n                            type: 'number',\n                            hidden: data => data.type !== 'change',\n                            default: 1,\n                        },\n                        {\n                            name: 'minmax',\n                            label: 'jqui_max',\n                            type: 'number',\n                            hidden: data => data.type !== 'change' || (parseFloat(data.step) || 0) < 0,\n                            default: 1,\n                        },                        {\n                            name: 'minmax',\n                            label: 'jqui_min',\n                            type: 'number',\n                            hidden: data => data.type !== 'change' || (parseFloat(data.step) || 0) >= 0,\n                            default: 1,\n                        },\n                        {\n                            name: 'repeat_delay',\n                            type: 'number',\n                            label: 'jqui_repeat_delay',\n                            hidden: data => data.type !== 'change',\n                            default: 800,\n                        },\n                        {\n                            name: 'repeat_interval',\n                            type: 'number',\n                            label: 'jqui_repeat_interval',\n                            hidden: data => data.type !== 'change',\n                            default: 300,\n                        },\n                        {\n                            name: 'min',\n                            type: 'number',\n                            label: 'jqui_min',\n                            hidden: data => data.type !== 'toggle',\n                            default: 0,\n                        },\n                        {\n                            name: 'max',\n                            label: 'jqui_max',\n                            type: 'number',\n                            hidden: data => data.type !== 'toggle',\n                            default: 100,\n                        },\n                    ],\n                },\n                {\n                    name: 'style',\n                    fields: [\n                        {\n                            name: 'variant',\n                            label: 'jqui_variant',\n                            type: 'select',\n                            noTranslation: true,\n                            options: ['contained', 'outlined', 'standard'],\n                            default: 'contained',\n                        },\n                        {\n                            name: 'text',\n                            type: 'text',\n                            default: I18n.t('Write state'),\n                        },\n                        {\n                            name: 'src',\n                            type: 'image',\n                            label: 'jqui_image',\n                            hidden: data => !!data.icon,\n                        },\n                        {\n                            name: 'icon',\n                            type: 'icon64',\n                            label: 'jqui_icon',\n                            hidden: data => !!data.src,\n                        },\n                        {\n                            name: 'text_active',\n                            label: 'jqui_text_active',\n                            type: 'text',\n                        },\n                        {\n                            name: 'src_active',\n                            type: 'image',\n                            label: 'jqui_image_active',\n                            hidden: data => !!data.icon_active,\n                        },\n                        {\n                            name: 'icon_active',\n                            type: 'icon64',\n                            label: 'jqui_icon_active',\n                            hidden: data => !!data.src_active,\n                        },\n                        {\n                            name: 'invert_icon',\n                            type: 'checkbox',\n                            hidden: data => !data.icon || !data.src,\n                        },\n                        {\n                            name: 'invert_icon_active',\n                            type: 'checkbox',\n                            hidden: data => !data.icon_active || !data.src_active,\n                        },\n                    ],\n                },\n            ],\n            visDefaultStyle: {\n                width: 100,\n                height: 40,\n            },\n        };\n    }\n\n    async componentDidMount() {\n        await super.componentDidMount();\n        if (this.state.rxData.oid && this.state.rxData.oid !== 'nothing_selected') {\n            try {\n                const state = await this.props.context.socket.getState(this.state.rxData.oid);\n                this.onStateUpdated(this.state.rxData.oid, state);\n            } catch (e) {\n                console.error(`Cannot get state ${this.state.rxData.oid}: ${e}`);\n            }\n        }\n    }\n\n    static findField(widgetInfo, name) {\n        return VisRxWidget.findField(widgetInfo, name);\n    }\n\n    // eslint-disable-next-line class-methods-use-this\n    getWidgetInfo() {\n        return JQuiWriteState.getWidgetInfo();\n    }\n\n    onStateUpdated(id, state) {\n        if (id === this.state.rxData.oid && state) {\n            const value = state.val === null || state.val === undefined ? '' : state.val;\n\n            if (this.state.value !== value.toString()) {\n                this.setState({ value: value.toString() });\n            }\n        }\n    }\n\n    getControlOid() {\n        if (this.state.rxData.click_id && this.state.rxData.click_id !== 'nothing_selected') {\n            return this.state.rxData.click_id;\n        }\n        if (this.state.rxData.oid && this.state.rxData.oid !== 'nothing_selected') {\n            return this.state.rxData.oid;\n        }\n        return '';\n    }\n\n    async onClick() {\n        if (this.props.editMode) {\n            return;\n        }\n\n        let value;\n        switch (this.state.rxData.type) {\n            case 'value':\n                value = this.state.rxData.value.toString();\n                break;\n            case 'oid': {\n                value = this.state.values[`${this.state.rxData.value_oid}.val`];\n                if (value === undefined || value === null) {\n                    return;\n                }\n                break;\n            }\n            case 'toggle':\n                value = parseFloat(this.state.values[`${this.state.rxData.oid}.val`]) || 0;\n                value = value.toString() === (this.state.rxData.max || 0).toString() ? this.state.rxData.min : this.state.rxData.max;\n                break;\n            case 'change':\n                value = parseFloat(this.state.values[`${this.state.rxData.oid}.val`]) || 0;\n                value += parseFloat(this.state.rxData.step) || 0;\n                if (this.state.rxData.step > 0) {\n                    if (value > parseFloat(this.state.rxData.minmax)) {\n                        value = parseFloat(this.state.rxData.minmax);\n                    }\n                } else if (value < parseFloat(this.state.rxData.minmax)) {\n                    value = parseFloat(this.state.rxData.minmax);\n                }\n\n                break;\n            default:\n                return;\n        }\n\n        const oid = this.getControlOid();\n        if (oid) {\n            if (this.state.valueType === 'number') {\n                this.props.context.setValue(oid, parseFloat(value));\n            } else {\n                this.props.context.setValue(oid, value);\n            }\n        }\n        this.setState({ value });\n    }\n\n    renderIcon(isActive) {\n        let color;\n        let icon;\n        let invertIcon = null;\n        if (isActive) {\n            invertIcon = this.state.rxData.invert_icon_active;\n            icon = this.state.rxData.icon_active || this.state.rxData.src_active;\n            color = this.state.rxData.color_active;\n        }\n        if (!icon) {\n            icon = this.state.rxData.icon || this.state.rxData.src;\n            invertIcon = this.state.rxData.invert_icon;\n            color = this.state.rxData.color;\n        }\n\n        if (icon) {\n            if (icon.startsWith('_PRJ_NAME/')) {\n                icon = icon.replace('_PRJ_NAME/', `../${this.props.context.adapterName}.${this.props.context.instance}/${this.props.context.projectName}/`);\n            }\n            return <Icon\n                key=\"icon\"\n                style={{\n                    color,\n                    filter: invertIcon ? 'invert(100%)' : undefined,\n                    width: '100%',\n                    height: '100%',\n                }}\n                src={icon}\n            />;\n        }\n        return null;\n    }\n\n    renderText(isActive) {\n        let text = this.state.rxData.text;\n        let color = this.state.rxData.color;\n        if (isActive && this.state.rxData.color_active) {\n            color = this.state.rxData.color_active;\n        }\n\n        if (!text) {\n            if (this.state.rxData.type === 'oid') {\n                text = this.state.values[`${this.state.rxData.value_oid}.val`];\n            } else if (this.state.rxData.type === 'value') {\n                text = this.state.rxData.value;\n            } else if (this.state.rxData.type === 'change') {\n                text = this.state.rxData.step;\n                if (text > 0) {\n                    text = `+${text}`;\n                }\n            }\n        }\n\n        return text ? <span style={{ color }}>{text}</span> : null;\n    }\n\n    getIsActive() {\n        let actualValue = this.state.value;\n        if (actualValue === undefined || actualValue === null) {\n            actualValue = '';\n        }\n\n        switch (this.state.rxData.type) {\n            case 'value': {\n                let desiredValue = this.state.rxData.value;\n                if (desiredValue === undefined || desiredValue === null) {\n                    desiredValue = '';\n                }\n                return actualValue.toString() === desiredValue.toString();\n            }\n            case 'oid': {\n                let oidValue = this.state.values[`${this.state.rxData.value_oid}.val`];\n                if (oidValue === undefined || oidValue === null) {\n                    oidValue = '';\n                }\n                return actualValue.toString() === oidValue.toString();\n            }\n            case 'toggle':\n                return actualValue.toString() === (this.state.rxData.max || 0).toString();\n            default:\n                return false;\n        }\n    }\n\n    async componentWillUnmount() {\n        await super.componentWillUnmount();\n        this.iterateInterval && clearInterval(this.iterateInterval);\n        this.iterateInterval = null;\n        this.iterateTimeout && clearTimeout(this.iterateTimeout);\n        this.iterateTimeout = null;\n    }\n\n    renderWidgetBody(props) {\n        super.renderWidgetBody(props);\n        const isActive = this.getIsActive();\n\n        const buttonStyle = {};\n        // apply style from the element\n        Object.keys(this.state.rxStyle).forEach(attr => {\n            const value = this.state.rxStyle[attr];\n            if (value !== null &&\n                value !== undefined &&\n                VisRxWidget.POSSIBLE_MUI_STYLES.includes(attr)\n            ) {\n                attr = attr.replace(\n                    /(-\\w)/g,\n                    text => text[1].toUpperCase(),\n                );\n                buttonStyle[attr] = value;\n            }\n        });\n\n        const text = this.renderText(isActive);\n\n        const content = <Button\n            style={{\n                width: '100%',\n                height: '100%',\n            }}\n            color={isActive ? 'primary' : 'grey'}\n            startIcon={text ? this.renderIcon(isActive) : null}\n            onClick={() => this.onClick()}\n            onMouseDown={() => {\n                if (this.props.editMode) {\n                    return;\n                }\n                const delay = parseInt(this.state.rxData.repeat_delay, 10);\n                if (delay) {\n                    this.iterateTimeout && clearTimeout(this.iterateTimeout);\n                    this.iterateTimeout = setTimeout(async () => {\n                        this.iterateTimeout = null;\n                        this.iterateInterval && clearInterval(this.iterateInterval);\n                        this.iterateInterval = setInterval(() => this.onClick(), parseInt(this.state.rxData.repeat_interval, 10) || 500);\n                        await this.onClick();\n                    }, delay);\n                }\n            }}\n            onMouseUp={() => {\n                if (this.props.editMode) {\n                    return;\n                }\n                this.iterateInterval && clearInterval(this.iterateInterval);\n                this.iterateInterval = null;\n                this.iterateTimeout && clearTimeout(this.iterateTimeout);\n                this.iterateTimeout = null;\n            }}\n            variant={this.state.rxData.variant || 'contained'}\n        >\n            {text || this.renderIcon(isActive)}\n        </Button>;\n\n        return <div className=\"vis-widget-body\">\n            {content}\n        </div>;\n    }\n}\n\nJQuiWriteState.propTypes = {\n    id: PropTypes.string.isRequired,\n    context: PropTypes.object.isRequired,\n    view: PropTypes.string.isRequired,\n    editMode: PropTypes.bool.isRequired,\n    tpl: PropTypes.string.isRequired,\n};\n\nexport default JQuiWriteState;\n","/**\n *  ioBroker.vis\n *  https://github.com/ioBroker/ioBroker.vis\n *\n *  Copyright (c) 2023 Denis Haev https://github.com/GermanBluefox,\n *  Creative Common Attribution-NonCommercial (CC BY-NC)\n *\n *  http://creativecommons.org/licenses/by-nc/4.0/\n *\n * Short content:\n * Licensees may copy, distribute, display and perform the work and make derivative works based on it only if they give the author or licensor the credits in the manner specified by these.\n * Licensees may copy, distribute, display, and perform the work and make derivative works based on it only for noncommercial purposes.\n * (Free for non-commercial use).\n */\nimport PropTypes from 'prop-types';\n\n// eslint-disable-next-line import/no-cycle\nimport JQuiWriteState from './JQuiWriteState';\n\nclass JQuiIconInc extends JQuiWriteState {\n    static getWidgetInfo() {\n        const widgetInfo = JQuiWriteState.getWidgetInfo();\n\n        const newWidgetInfo = {\n            id: 'tplIconInc',\n            visSet: 'jqui',\n            visName: 'Icon Increment',\n            visWidgetLabel: 'jqui_icon_increment',\n            visPrev: 'widgets/jqui/img/Prev_IconInc.png',\n            visOrder: 27,\n            visAttrs: widgetInfo.visAttrs,\n        };\n\n        // Add note\n        newWidgetInfo.visAttrs[0].fields.unshift({\n            name: '_note',\n            type: 'help',\n            text: 'jqui_write_state_note',\n        });\n\n        const target = JQuiWriteState.findField(newWidgetInfo, 'type');\n        target.default = 'change';\n\n        return newWidgetInfo;\n    }\n\n    // eslint-disable-next-line class-methods-use-this\n    getWidgetInfo() {\n        return JQuiIconInc.getWidgetInfo();\n    }\n}\n\nJQuiIconInc.propTypes = {\n    id: PropTypes.string.isRequired,\n    context: PropTypes.object.isRequired,\n    view: PropTypes.string.isRequired,\n    editMode: PropTypes.bool.isRequired,\n    tpl: PropTypes.string.isRequired,\n};\n\nexport default JQuiIconInc;\n","/**\n *  ioBroker.vis\n *  https://github.com/ioBroker/ioBroker.vis\n *\n *  Copyright (c) 2023 Denis Haev https://github.com/GermanBluefox,\n *  Creative Common Attribution-NonCommercial (CC BY-NC)\n *\n *  http://creativecommons.org/licenses/by-nc/4.0/\n *\n * Short content:\n * Licensees may copy, distribute, display and perform the work and make derivative works based on it only if they give the author or licensor the credits in the manner specified by these.\n * Licensees may copy, distribute, display, and perform the work and make derivative works based on it only for noncommercial purposes.\n * (Free for non-commercial use).\n */\nimport PropTypes from 'prop-types';\n\n// eslint-disable-next-line import/no-cycle\nimport JQuiButton from './JQuiButton';\n\nclass JQuiIconHttpGet extends JQuiButton {\n    static getWidgetInfo() {\n        const widgetInfo = JQuiButton.getWidgetInfo();\n\n        const newWidgetInfo = {\n            id: 'tplIconHttpGet',\n            visSet: 'jqui',\n            visName: 'Icon HTTP GET',\n            visWidgetLabel: 'jqui_icon_http_get',\n            visPrev: 'widgets/jqui/img/Prev_IconHttpGet.png',\n            visOrder: 4,\n            visAttrs: widgetInfo.visAttrs,\n        };\n\n        // Add note\n        newWidgetInfo.visAttrs[0].fields.unshift({\n            name: '_note',\n            type: 'help',\n            text: 'jqui_button_link_blank_note',\n        });\n\n        const url = JQuiButton.findField(newWidgetInfo, 'url');\n        url.default = 'http://';\n\n        const text = JQuiButton.findField(newWidgetInfo, 'buttontext');\n        text.default = 'URL Backend';\n\n        // set resizable to true\n        const visResizable = JQuiButton.findField(newWidgetInfo, 'visResizable');\n        visResizable.default = true;\n\n        return newWidgetInfo;\n    }\n\n    // eslint-disable-next-line class-methods-use-this\n    getWidgetInfo() {\n        return JQuiIconHttpGet.getWidgetInfo();\n    }\n}\n\nJQuiIconHttpGet.propTypes = {\n    id: PropTypes.string.isRequired,\n    context: PropTypes.object.isRequired,\n    view: PropTypes.string.isRequired,\n    editMode: PropTypes.bool.isRequired,\n    tpl: PropTypes.string.isRequired,\n};\n\nexport default JQuiIconHttpGet;\n","/**\n *  ioBroker.vis\n *  https://github.com/ioBroker/ioBroker.vis\n *\n *  Copyright (c) 2023 Denis Haev https://github.com/GermanBluefox,\n *  Creative Common Attribution-NonCommercial (CC BY-NC)\n *\n *  http://creativecommons.org/licenses/by-nc/4.0/\n *\n * Short content:\n * Licensees may copy, distribute, display and perform the work and make derivative works based on it only if they give the author or licensor the credits in the manner specified by these.\n * Licensees may copy, distribute, display, and perform the work and make derivative works based on it only for noncommercial purposes.\n * (Free for non-commercial use).\n */\nimport PropTypes from 'prop-types';\n\n// eslint-disable-next-line import/no-cycle\nimport JQuiButton from './JQuiButton';\n\nclass JQuiDialog extends JQuiButton {\n    static getWidgetInfo() {\n        const widgetInfo = JQuiButton.getWidgetInfo();\n\n        const newWidgetInfo = {\n            id: 'tplJquiDialog',\n            visSet: 'jqui',\n            visName: 'HTML - Dialog',\n            visWidgetLabel: 'jqui_html_dialog',\n            visPrev: 'widgets/jqui/img/Prev_JquiDialog.png',\n            visOrder: 5,\n            visAttrs: widgetInfo.visAttrs,\n        };\n\n        // Add note\n        newWidgetInfo.visAttrs[0].fields.unshift({\n            name: '_note',\n            type: 'help',\n            text: 'jqui_button_link_blank_note',\n        });\n\n        // set resizable to true\n        const visResizable = JQuiButton.findField(newWidgetInfo, 'visResizable');\n        visResizable.default = true;\n\n        const html = JQuiButton.findField(newWidgetInfo, 'html');\n        html.default = '<div>HTML</div>';\n\n        const buttonText = JQuiButton.findField(newWidgetInfo, 'buttontext');\n        delete buttonText.default;\n\n        const htmlDialog = JQuiButton.findField(newWidgetInfo, 'html_dialog');\n        htmlDialog.default = '<div>HTML Dialog</div>';\n\n        newWidgetInfo.visDefaultStyle = {\n            'border-width': 1,\n            'border-style': 'solid',\n            'border-color': '#000',\n            width: '200px',\n            height: '130px',\n            cursor: 'pointer',\n        };\n\n        return newWidgetInfo;\n    }\n\n    // eslint-disable-next-line class-methods-use-this\n    getWidgetInfo() {\n        return JQuiDialog.getWidgetInfo();\n    }\n}\n\nJQuiDialog.propTypes = {\n    id: PropTypes.string.isRequired,\n    context: PropTypes.object.isRequired,\n    view: PropTypes.string.isRequired,\n    editMode: PropTypes.bool.isRequired,\n};\n\nexport default JQuiDialog;\n","/**\n *  ioBroker.vis\n *  https://github.com/ioBroker/ioBroker.vis\n *\n *  Copyright (c) 2023 Denis Haev https://github.com/GermanBluefox,\n *  Creative Common Attribution-NonCommercial (CC BY-NC)\n *\n *  http://creativecommons.org/licenses/by-nc/4.0/\n *\n * Short content:\n * Licensees may copy, distribute, display and perform the work and make derivative works based on it only if they give the author or licensor the credits in the manner specified by these.\n * Licensees may copy, distribute, display, and perform the work and make derivative works based on it only for noncommercial purposes.\n * (Free for non-commercial use).\n */\nimport PropTypes from 'prop-types';\n\n// eslint-disable-next-line import/no-cycle\nimport JQuiButton from './JQuiButton';\n\nclass JQuiIconDialog extends JQuiButton {\n    static getWidgetInfo() {\n        const widgetInfo = JQuiButton.getWidgetInfo();\n\n        const newWidgetInfo = {\n            id: 'tplJquiIconDialog',\n            visSet: 'jqui',\n            visName: 'Icon - Dialog',\n            visWidgetLabel: 'jqui_icon_dialog',\n            visPrev: 'widgets/jqui/img/Prev_JquiIconDialog.png',\n            visOrder: 6,\n            visAttrs: widgetInfo.visAttrs,\n        };\n\n        // Add note\n        newWidgetInfo.visAttrs[0].fields.unshift({\n            name: '_note',\n            type: 'help',\n            text: 'jqui_button_link_blank_note',\n        });\n\n        // set resizable to true\n        const visResizable = JQuiButton.findField(newWidgetInfo, 'visResizable');\n        visResizable.default = true;\n\n        const buttonText = JQuiButton.findField(newWidgetInfo, 'buttontext');\n        buttonText.default = 'Icon Dialog';\n\n        const htmlDialog = JQuiButton.findField(newWidgetInfo, 'html_dialog');\n        htmlDialog.default = '<div>HTML Dialog</div>';\n\n        return newWidgetInfo;\n    }\n\n    // eslint-disable-next-line class-methods-use-this\n    getWidgetInfo() {\n        return JQuiIconDialog.getWidgetInfo();\n    }\n}\n\nJQuiIconDialog.propTypes = {\n    id: PropTypes.string.isRequired,\n    context: PropTypes.object.isRequired,\n    view: PropTypes.string.isRequired,\n    editMode: PropTypes.bool.isRequired,\n};\n\nexport default JQuiIconDialog;\n","/**\n *  ioBroker.vis\n *  https://github.com/ioBroker/ioBroker.vis\n *\n *  Copyright (c) 2023 Denis Haev https://github.com/GermanBluefox,\n *  Creative Common Attribution-NonCommercial (CC BY-NC)\n *\n *  http://creativecommons.org/licenses/by-nc/4.0/\n *\n * Short content:\n * Licensees may copy, distribute, display and perform the work and make derivative works based on it only if they give the author or licensor the credits in the manner specified by these.\n * Licensees may copy, distribute, display, and perform the work and make derivative works based on it only for noncommercial purposes.\n * (Free for non-commercial use).\n */\nimport PropTypes from 'prop-types';\n\n// eslint-disable-next-line import/no-cycle\nimport JQuiButton from './JQuiButton';\n\nclass JQuiContainerDialog extends JQuiButton {\n    static getWidgetInfo() {\n        const widgetInfo = JQuiButton.getWidgetInfo();\n\n        const newWidgetInfo = {\n            id: 'tplContainerDialog',\n            visSet: 'jqui',\n            visName: 'container - HTML - view in jqui Dialog',\n            visWidgetLabel: 'jqui_container_dialog',\n            visPrev: 'widgets/jqui/img/Prev_ContainerDialog.png',\n            visOrder: 7,\n            visAttrs: widgetInfo.visAttrs,\n        };\n\n        // Add note\n        newWidgetInfo.visAttrs[0].fields.unshift({\n            name: '_note',\n            type: 'help',\n            text: 'jqui_button_link_blank_note',\n        });\n\n        // set resizable to true\n        const visResizable = JQuiButton.findField(newWidgetInfo, 'visResizable');\n        visResizable.default = true;\n\n        const buttonText = JQuiButton.findField(newWidgetInfo, 'buttontext');\n        buttonText.default = 'Container Dialog';\n\n        const htmlDialog = JQuiButton.findField(newWidgetInfo, 'html_dialog');\n        htmlDialog.default = '<div>HTML Dialog</div>';\n\n        return newWidgetInfo;\n    }\n\n    // eslint-disable-next-line class-methods-use-this\n    getWidgetInfo() {\n        return JQuiContainerDialog.getWidgetInfo();\n    }\n}\n\nJQuiContainerDialog.propTypes = {\n    id: PropTypes.string.isRequired,\n    context: PropTypes.object.isRequired,\n    view: PropTypes.string.isRequired,\n    editMode: PropTypes.bool.isRequired,\n};\n\nexport default JQuiContainerDialog;\n","/**\n *  ioBroker.vis\n *  https://github.com/ioBroker/ioBroker.vis\n *\n *  Copyright (c) 2023 Denis Haev https://github.com/GermanBluefox,\n *  Creative Common Attribution-NonCommercial (CC BY-NC)\n *\n *  http://creativecommons.org/licenses/by-nc/4.0/\n *\n * Short content:\n * Licensees may copy, distribute, display and perform the work and make derivative works based on it only if they give the author or licensor the credits in the manner specified by these.\n * Licensees may copy, distribute, display, and perform the work and make derivative works based on it only for noncommercial purposes.\n * (Free for non-commercial use).\n */\nimport PropTypes from 'prop-types';\n\n// eslint-disable-next-line import/no-cycle\nimport JQuiButton from './JQuiButton';\n\nclass JQuiButtonNavigation extends JQuiButton {\n    static getWidgetInfo() {\n        const widgetInfo = JQuiButton.getWidgetInfo();\n\n        const newWidgetInfo = {\n            id: 'tplJquiButtonNav',\n            visSet: 'jqui',\n            visName: 'Navigation Button',\n            visWidgetLabel: 'jqui_navigation_button',\n            visPrev: 'widgets/jqui/img/Prev_ButtonNav.png',\n            visOrder: 8,\n            visAttrs: widgetInfo.visAttrs,\n        };\n\n        // Add note\n        newWidgetInfo.visAttrs[0].fields.unshift({\n            name: '_note',\n            type: 'help',\n            text: 'jqui_button_nav_blank_note',\n        });\n\n        const modal = JQuiButton.findField(newWidgetInfo, 'modal');\n        delete modal.default;\n\n        const navView = JQuiButton.findField(newWidgetInfo, 'nav_view');\n        navView.default = '';\n\n        const text = JQuiButton.findField(newWidgetInfo, 'buttontext');\n        text.default = 'View';\n\n        // set resizable to true\n        const visResizable = JQuiButton.findField(newWidgetInfo, 'visResizable');\n        visResizable.default = true;\n\n        return newWidgetInfo;\n    }\n\n    // eslint-disable-next-line class-methods-use-this\n    getWidgetInfo() {\n        return JQuiButtonNavigation.getWidgetInfo();\n    }\n}\n\nJQuiButtonNavigation.propTypes = {\n    id: PropTypes.string.isRequired,\n    context: PropTypes.object.isRequired,\n    view: PropTypes.string.isRequired,\n    editMode: PropTypes.bool.isRequired,\n    tpl: PropTypes.string.isRequired,\n};\n\nexport default JQuiButtonNavigation;\n","/**\n *  ioBroker.vis\n *  https://github.com/ioBroker/ioBroker.vis\n *\n *  Copyright (c) 2023 Denis Haev https://github.com/GermanBluefox,\n *  Creative Common Attribution-NonCommercial (CC BY-NC)\n *\n *  http://creativecommons.org/licenses/by-nc/4.0/\n *\n * Short content:\n * Licensees may copy, distribute, display and perform the work and make derivative works based on it only if they give the author or licensor the credits in the manner specified by these.\n * Licensees may copy, distribute, display, and perform the work and make derivative works based on it only for noncommercial purposes.\n * (Free for non-commercial use).\n */\nimport PropTypes from 'prop-types';\n\n// eslint-disable-next-line import/no-cycle\nimport JQuiButton from './JQuiButton';\n\nclass JQuiIconNavigation extends JQuiButton {\n    static getWidgetInfo() {\n        const widgetInfo = JQuiButton.getWidgetInfo();\n\n        const newWidgetInfo = {\n            id: 'tplJquiIconNav',\n            visSet: 'jqui',\n            visName: 'Navigation Icon',\n            visWidgetLabel: 'jqui_navigation_icon',\n            visPrev: 'widgets/jqui/img/Prev_IconNav.png',\n            visOrder: 9,\n            visAttrs: widgetInfo.visAttrs,\n        };\n\n        // Add note\n        newWidgetInfo.visAttrs[0].fields.unshift({\n            name: '_note',\n            type: 'help',\n            text: 'jqui_button_nav_blank_note',\n        });\n\n        const buttonText = JQuiButton.findField(newWidgetInfo, 'buttontext');\n        delete buttonText.default;\n\n        const modal = JQuiButton.findField(newWidgetInfo, 'modal');\n        delete modal.default;\n\n        const navView = JQuiButton.findField(newWidgetInfo, 'nav_view');\n        navView.default = '';\n\n        const icon = JQuiButton.findField(newWidgetInfo, 'icon');\n        icon.default = 'data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0Ij48cGF0aCBmaWxsPSJjdXJyZW50Q29sb3IiIGQ9Ik0yMSAzTDMgMTAuNTN2Ljk4bDYuODQgMi42NUwxMi40OCAyMWguOThMMjEgM3oiLz48L3N2Zz4=';\n\n        // set resizable to true\n        const visResizable = JQuiButton.findField(newWidgetInfo, 'visResizable');\n        visResizable.default = true;\n\n        return newWidgetInfo;\n    }\n\n    // eslint-disable-next-line class-methods-use-this\n    getWidgetInfo() {\n        return JQuiIconNavigation.getWidgetInfo();\n    }\n}\n\nJQuiIconNavigation.propTypes = {\n    id: PropTypes.string.isRequired,\n    context: PropTypes.object.isRequired,\n    view: PropTypes.string.isRequired,\n    editMode: PropTypes.bool.isRequired,\n    tpl: PropTypes.string.isRequired,\n};\n\nexport default JQuiIconNavigation;\n","/**\n *  ioBroker.vis\n *  https://github.com/ioBroker/ioBroker.vis\n *\n *  Copyright (c) 2023 Denis Haev https://github.com/GermanBluefox,\n *  Creative Common Attribution-NonCommercial (CC BY-NC)\n *\n *  http://creativecommons.org/licenses/by-nc/4.0/\n *\n * Short content:\n * Licensees may copy, distribute, display and perform the work and make derivative works based on it only if they give the author or licensor the credits in the manner specified by these.\n * Licensees may copy, distribute, display, and perform the work and make derivative works based on it only for noncommercial purposes.\n * (Free for non-commercial use).\n */\nimport PropTypes from 'prop-types';\n\n// eslint-disable-next-line import/no-cycle\nimport JQuiButton from './JQuiButton';\n\nclass JQuiButtonPasswordNavigation extends JQuiButton {\n    static getWidgetInfo() {\n        const widgetInfo = JQuiButton.getWidgetInfo();\n\n        const newWidgetInfo = {\n            id: 'tplJquiNavPw',\n            visSet: 'jqui',\n            visName: 'Navigation with password',\n            visWidgetLabel: 'jqui_navigation_password',\n            visPrev: 'widgets/jqui/img/Prev_ButtonNavPw.png',\n            visOrder: 10,\n            visAttrs: widgetInfo.visAttrs,\n        };\n\n        // Add note\n        newWidgetInfo.visAttrs[0].fields.unshift({\n            name: '_note',\n            type: 'help',\n            text: 'jqui_button_nav_blank_note',\n        });\n\n        const modal = JQuiButton.findField(newWidgetInfo, 'modal');\n        delete modal.default;\n\n        const text = JQuiButton.findField(newWidgetInfo, 'buttontext');\n        text.default = 'Password';\n\n        const navView = JQuiButton.findField(newWidgetInfo, 'nav_view');\n        navView.default = '';\n\n        const password = JQuiButton.findField(newWidgetInfo, 'Password');\n        password.default = '';\n\n        // set resizable to true\n        const visResizable = JQuiButton.findField(newWidgetInfo, 'visResizable');\n        visResizable.default = true;\n\n        return newWidgetInfo;\n    }\n\n    // eslint-disable-next-line class-methods-use-this\n    getWidgetInfo() {\n        return JQuiButtonPasswordNavigation.getWidgetInfo();\n    }\n}\n\nJQuiButtonPasswordNavigation.propTypes = {\n    id: PropTypes.string.isRequired,\n    context: PropTypes.object.isRequired,\n    view: PropTypes.string.isRequired,\n    editMode: PropTypes.bool.isRequired,\n    tpl: PropTypes.string.isRequired,\n};\n\nexport default JQuiButtonPasswordNavigation;\n","/**\n *  ioBroker.vis\n *  https://github.com/ioBroker/ioBroker.vis\n *\n *  Copyright (c) 2023 Denis Haev https://github.com/GermanBluefox,\n *  Creative Common Attribution-NonCommercial (CC BY-NC)\n *\n *  http://creativecommons.org/licenses/by-nc/4.0/\n *\n * Short content:\n * Licensees may copy, distribute, display and perform the work and make derivative works based on it only if they give the author or licensor the credits in the manner specified by these.\n * Licensees may copy, distribute, display, and perform the work and make derivative works based on it only for noncommercial purposes.\n * (Free for non-commercial use).\n */\nimport PropTypes from 'prop-types';\n\n// eslint-disable-next-line import/no-cycle\nimport JQuiButton from './JQuiButton';\n\nclass JQuiDialogExternal extends JQuiButton {\n    static getWidgetInfo() {\n        const widgetInfo = JQuiButton.getWidgetInfo();\n\n        const newWidgetInfo = {\n            id: 'tplContainerDialogExternal',\n            visSet: 'jqui',\n            visName: 'External Dialog',\n            visWidgetLabel: 'jqui_html_external_dialog',\n            visPrev: 'widgets/jqui/img/Prev_JquiExternalDialog.png',\n            visOrder: 11,\n            visAttrs: widgetInfo.visAttrs,\n        };\n\n        // Add note\n        newWidgetInfo.visAttrs[0].fields.unshift({\n            name: '_note',\n            type: 'help',\n            text: 'jqui_button_link_blank_note',\n        });\n\n        const externalDialog = JQuiButton.findField(newWidgetInfo, 'externalDialog');\n        externalDialog.default = true;\n\n        const htmlDialog = JQuiButton.findField(newWidgetInfo, 'html_dialog');\n        htmlDialog.default = '<div>HTML Dialog</div>';\n\n        return newWidgetInfo;\n    }\n\n    // eslint-disable-next-line class-methods-use-this\n    getWidgetInfo() {\n        return JQuiDialogExternal.getWidgetInfo();\n    }\n}\n\nJQuiDialogExternal.propTypes = {\n    id: PropTypes.string.isRequired,\n    context: PropTypes.object.isRequired,\n    view: PropTypes.string.isRequired,\n    editMode: PropTypes.bool.isRequired,\n};\n\nexport default JQuiDialogExternal;\n","/**\n *  ioBroker.vis\n *  https://github.com/ioBroker/ioBroker.vis\n *\n *  Copyright (c) 2023 Denis Haev https://github.com/GermanBluefox,\n *  Creative Common Attribution-NonCommercial (CC BY-NC)\n *\n *  http://creativecommons.org/licenses/by-nc/4.0/\n *\n * Short content:\n * Licensees may copy, distribute, display and perform the work and make derivative works based on it only if they give the author or licensor the credits in the manner specified by these.\n * Licensees may copy, distribute, display, and perform the work and make derivative works based on it only for noncommercial purposes.\n * (Free for non-commercial use).\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\n\nimport {\n    Autocomplete,\n    Button, Fab, TextField,\n} from '@mui/material';\n\nimport {\n    I18n, Icon,\n} from '@iobroker/adapter-react-v5';\n\n// eslint-disable-next-line import/no-cycle\nimport VisRxWidget from '../../visRxWidget';\n\nclass JQuiButtonDialogClose extends VisRxWidget {\n    constructor(props) {\n        super(props);\n        this.state.width = 0;\n        this.state.height = 0;\n    }\n\n    static getWidgetInfo() {\n        return {\n            id: 'tplJquiButtonDialogClose',\n            visSet: 'jqui',\n            visName: 'Button dialog close',\n            visWidgetLabel: 'jqui_button_dialog_close',\n            visPrev: 'widgets/jqui/img/Prev_ButtonDialogClose.png',\n            visOrder: 13,\n            visAttrs: [\n                {\n                    name: 'common',\n                    fields: [\n                        {\n                            name: 'dlgName',\n                            label: 'jqui_dialog_name',\n                            tooltip: 'jqui_dialog_name_tooltip',\n                            type: 'custom',\n                            component: (\n                                field,\n                                data,\n                                onDataChange,\n                                options, // {context: {adapterName, instance, projectName, socket, views}, selectedView, selectedWidget, selectedWidgets}\n                            ) => {\n                                // find all possible dialogs\n                                const names = [];\n                                Object.keys(options.context.views).forEach(id => {\n                                    const widgets = options.context.views[id].widgets;\n                                    widgets && Object.keys(widgets).forEach(widget => {\n                                        if (widgets[widget].data?.html_dialog || widgets[widget].data?.contains_view || widgets[widget].data?.externalDialog) {\n                                            if (widgets[widget].data.dialogName) {\n                                                names.push({ label: `${widgets[widget].data.dialogName} (${widget})`, value: widgets[widget].data.dialogName });\n                                            } else {\n                                                names.push({ label: widget, value: widget });\n                                            }\n                                        }\n                                    });\n                                });\n                                return <Autocomplete\n                                    freeSolo\n                                    options={names}\n                                    variant=\"standard\"\n                                    value={data[field.name] || ''}\n                                    sx={{ width: '100%' }}\n                                    onInputChange={(e, inputValue) => {\n                                        if (typeof inputValue === 'object' && inputValue !== null) {\n                                            inputValue = inputValue.value;\n                                        }\n                                        onDataChange({ [field.name]: inputValue });\n                                    }}\n                                    onChange={(e, inputValue) => {\n                                        if (typeof inputValue === 'object' && inputValue !== null) {\n                                            inputValue = inputValue.value;\n                                        }\n                                        onDataChange({ [field.name]: inputValue });\n                                    }}\n                                    getOptionLabel={option => {\n                                        if (typeof option === 'string') {\n                                            return option;\n                                        }\n                                        return option.label;\n                                    }}\n                                    renderInput={params => <TextField variant=\"standard\" {...params} />}\n                                />;\n                            },\n                        },\n                        {\n                            name: 'buttontext',\n                            type: 'text',\n                            default: I18n.t('jqui_Close').replace('jqui_', ''),\n                            hidden: data => !!data.html,\n                        },\n                        {\n                            name: 'html',\n                            type: 'html',\n                            default: '',\n                            tooltip: 'jqui_html_tooltip',\n                            disabled: data => !!data.buttontext || !!data.icon || !!data.src,\n                        },\n                    ],\n                },\n                {\n                    name: 'style',\n                    hidden: data => !!data.externalDialog,\n                    fields: [\n                        { name: 'no_style', type: 'checkbox', hidden: data => data.jquery_style },\n                        {\n                            name: 'jquery_style',\n                            label: 'jqui_jquery_style',\n                            type: 'checkbox',\n                            hidden: data => data.no_style,\n                        },\n                        {\n                            name: 'padding',\n                            type: 'slider',\n                            min: 0,\n                            max: 100,\n                            default: 5,\n                            // hidden: data => !data.no_style && !data.jquery_style,\n                        },\n                        {\n                            name: 'variant',\n                            label: 'jqui_variant',\n                            type: 'select',\n                            noTranslation: true,\n                            options: ['contained', 'outlined', 'standard'],\n                            default: 'contained',\n                            hidden: data => data.jquery_style || data.no_style,\n                        },\n                        {\n                            name: 'color',\n                            label: 'jqui_button_color',\n                            type: 'select',\n                            noTranslation: true,\n                            options: ['', 'primary', 'secondary'],\n                            default: '',\n                            hidden: data => data.jquery_style || data.no_style,\n                        },\n                        { name: 'html_prepend', type: 'html' },\n                        { name: 'html_append', type: 'html' },\n                        {\n                            name: 'visResizable', // reserved name for resizable\n                            label: 'visResizable',\n                            type: 'checkbox',\n                            default: false,\n                            desiredSize: false, // If sizes should be deleted or set to specific value. `false` - delete sizes, or {width: 100, height: 100}\n                        },\n                    ],\n                },\n                {\n                    name: 'icon',\n                    hidden: data => !!data.html,\n                    fields: [\n                        {\n                            name: 'src',\n                            label: 'jqui_image',\n                            type: 'image',\n                            hidden: data => data.icon || data.jquery_style,\n                        },\n                        {\n                            name: 'icon',\n                            label: 'jqui_icon',\n                            type: 'icon64',\n                            default: 'data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0Ij48cGF0aCBmaWxsPSJjdXJyZW50Q29sb3IiIGQ9Ik0xOSA2LjQxTDE3LjU5IDVMMTIgMTAuNTlMNi40MSA1TDUgNi40MUwxMC41OSAxMkw1IDE3LjU5TDYuNDEgMTlMMTIgMTMuNDFMMTcuNTkgMTlMMTkgMTcuNTlMMTMuNDEgMTJ6Ii8+PC9zdmc+',\n                            hidden: data => data.src || data.jquery_style,\n                        },\n                        {\n                            name: 'invert_icon',\n                            type: 'checkbox',\n                            hidden: data => (!data.icon || !data.image) && data.jquery_style,\n                        },\n                        {\n                            name: 'imageHeight',\n                            type: 'slider',\n                            min: 0,\n                            max: 200,\n                            default: 100,\n                            hidden: data => !data.src || data.jquery_style,\n                        },\n                    ],\n                },\n            ],\n        };\n    }\n\n    // eslint-disable-next-line class-methods-use-this\n    getWidgetInfo() {\n        return JQuiButtonDialogClose.getWidgetInfo();\n    }\n\n    onClick() {\n        let dlgName = this.state.rxData.dlgName;\n        if (!dlgName) {\n            // go through all widgets and find the one with dialog content as this view\n            const views = Object.keys(this.props.context.views);\n            for (let i = 0; i < views.length; i++) {\n                const widgets = this.props.context.views[views[i]].widgets;\n                if (widgets) {\n                    const wids = Object.keys(widgets);\n                    for (let j = 0; j < wids.length; j++) {\n                        if (widgets[wids[j]].data?.contains_view === this.props.view) {\n                            dlgName = wids[j];\n                            break;\n                        }\n                    }\n                }\n                if (dlgName) {\n                    break;\n                }\n            }\n        }\n        if (dlgName) {\n            const el = window.document.getElementById(dlgName) || window.document.querySelector(`[data-dialog-name=\"${dlgName}\"]`);\n\n            const viewName = Object.keys(this.props.context.views).find(view => this.props.context.views[view].widgets[dlgName]);\n            this.props.context.onCommand('closeDialog', viewName, dlgName);\n\n            if (el?._showDialog) {\n                el._showDialog(false);\n            } else {\n                // noinspection JSJQueryEfficiency\n                window.jQuery(`#${dlgName}_dialog`).dialog('close');\n            }\n        } else {\n            window.alert('Dialog not found');\n        }\n    }\n\n    renderWidgetBody(props) {\n        super.renderWidgetBody(props);\n\n        const iconStyle = {\n            filter: this.state.rxData.invert_icon ? 'invert(1)' : undefined,\n        };\n\n        if (!this.state.rxData.jquery_style && this.state.rxData.src) {\n            if (this.state.width > this.state.height) {\n                iconStyle.height = `${this.state.rxData.imageHeight || 100}%`;\n                iconStyle.width = 'auto';\n            } else {\n                iconStyle.width = `${this.state.rxData.imageHeight || 100}%`;\n                iconStyle.height = 'auto';\n            }\n        }\n        let iconSrc = !this.state.rxData.jquery_style && (this.state.rxData.src || this.state.rxData.icon);\n\n        if (iconSrc && iconSrc.startsWith('_PRJ_NAME/')) {\n            iconSrc = iconSrc.replace('_PRJ_NAME/', `../${this.props.context.adapterName}.${this.props.context.instance}/${this.props.context.projectName}/`);\n        }\n\n        const icon = iconSrc ? <Icon\n            src={iconSrc}\n            style={iconStyle}\n        /> : null;\n\n        const buttonStyle = {};\n        // apply style from the element\n        Object.keys(this.state.rxStyle).forEach(attr => {\n            const value = this.state.rxStyle[attr];\n            if (value !== null &&\n                value !== undefined &&\n                VisRxWidget.POSSIBLE_MUI_STYLES.includes(attr)\n            ) {\n                attr = attr.replace(\n                    /(-\\w)/g,\n                    text => text[1].toUpperCase(),\n                );\n                buttonStyle[attr] = value;\n            }\n        });\n\n        // extra no rxData here, as it is not possible to set it with bindings\n        if (this.state.data.visResizable) {\n            buttonStyle.width = '100%';\n            buttonStyle.height = '100%';\n        } else {\n            buttonStyle.padding = this.state.rxData.padding;\n        }\n\n        let buttonText;\n        if (this.state.rxData.html) {\n            // ignore\n        } else {\n            buttonText = this.state.rxData.buttontext;\n        }\n\n        const content = [\n            this.state.rxData.html_prepend ? <span\n                key=\"prepend\"\n                // eslint-disable-next-line react/no-danger\n                dangerouslySetInnerHTML={{ __html: this.state.rxData.html_prepend }}\n            /> : null,\n            this.state.rxData.html ?\n                <span\n                    key=\"content\"\n                    // eslint-disable-next-line react/no-danger\n                    dangerouslySetInnerHTML={{ __html: this.state.rxData.html }}\n                />\n                :\n                (this.state.rxData.no_style || this.state.rxData.jquery_style ?\n                    <button\n                        key=\"content\"\n                        type=\"button\"\n                        style={buttonStyle}\n                        onClick={() => this.onClick()}\n                    >\n                        {icon}\n                        {buttonText}\n                    </button>\n                    :\n                    (!buttonText ?\n                        <Fab\n                            style={{\n                                zIndex: this.props.editMode ? 0 : undefined,\n                            }}\n                            key=\"content\"\n                            color={this.state.rxData.color || 'grey'}\n                            onClick={() => this.onClick()}\n                            size=\"small\"\n                        >\n                            {icon}\n                        </Fab> :\n                        <Button\n                            key=\"content\"\n                            style={buttonStyle}\n                            color={this.state.rxData.color || 'grey'}\n                            variant={this.state.rxData.variant === undefined ? 'contained' : this.state.rxData.variant}\n                            onClick={() => this.onClick()}\n                            startIcon={icon}\n                        >\n                            {buttonText}\n                        </Button>)),\n            this.state.rxData.html_append ? <span\n                key=\"append\"\n                // eslint-disable-next-line react/no-danger\n                dangerouslySetInnerHTML={{ __html: this.state.rxData.html_append }}\n            /> : null,\n        ];\n\n        return <div\n            className=\"vis-widget-body\"\n            onClick={this.state.rxData.html ? () => this.onClick() : undefined}\n        >\n            {content}\n        </div>;\n    }\n}\n\nJQuiButtonDialogClose.propTypes = {\n    id: PropTypes.string.isRequired,\n    context: PropTypes.object.isRequired,\n    view: PropTypes.string.isRequired,\n    editMode: PropTypes.bool.isRequired,\n    tpl: PropTypes.string.isRequired,\n};\n\nexport default JQuiButtonDialogClose;\n","/**\n *  ioBroker.vis\n *  https://github.com/ioBroker/ioBroker.vis\n *\n *  Copyright (c) 2023 Denis Haev https://github.com/GermanBluefox,\n *  Creative Common Attribution-NonCommercial (CC BY-NC)\n *\n *  http://creativecommons.org/licenses/by-nc/4.0/\n *\n * Short content:\n * Licensees may copy, distribute, display and perform the work and make derivative works based on it only if they give the author or licensor the credits in the manner specified by these.\n * Licensees may copy, distribute, display, and perform the work and make derivative works based on it only for noncommercial purposes.\n * (Free for non-commercial use).\n */\nimport PropTypes from 'prop-types';\n\n// eslint-disable-next-line import/no-cycle\nimport JQuiButton from './JQuiButton';\n\nclass JQuiContainerButtonDialog extends JQuiButton {\n    static getWidgetInfo() {\n        const widgetInfo = JQuiButton.getWidgetInfo();\n\n        const newWidgetInfo = {\n            id: 'tplContainerButtonDialog',\n            visSet: 'jqui',\n            visName: 'container - Button - view in jqui Dialog',\n            visWidgetLabel: 'jqui_container_button_dialog',\n            visPrev: 'widgets/jqui/img/Prev_ContainerButtonDialog.png',\n            visOrder: 11,\n            visAttrs: widgetInfo.visAttrs,\n        };\n\n        // Add note\n        newWidgetInfo.visAttrs[0].fields.unshift({\n            name: '_note',\n            type: 'help',\n            text: 'jqui_button_link_blank_note',\n        });\n\n        const buttonText = JQuiButton.findField(newWidgetInfo, 'buttontext');\n        buttonText.default = 'Container Dialog';\n\n        const containsView = JQuiButton.findField(newWidgetInfo, 'contains_view');\n        containsView.default = '';\n\n        return newWidgetInfo;\n    }\n\n    // eslint-disable-next-line class-methods-use-this\n    getWidgetInfo() {\n        return JQuiContainerButtonDialog.getWidgetInfo();\n    }\n}\n\nJQuiContainerButtonDialog.propTypes = {\n    id: PropTypes.string.isRequired,\n    context: PropTypes.object.isRequired,\n    view: PropTypes.string.isRequired,\n    editMode: PropTypes.bool.isRequired,\n};\n\nexport default JQuiContainerButtonDialog;\n","/**\n *  ioBroker.vis\n *  https://github.com/ioBroker/ioBroker.vis\n *\n *  Copyright (c) 2023 Denis Haev https://github.com/GermanBluefox,\n *  Creative Common Attribution-NonCommercial (CC BY-NC)\n *\n *  http://creativecommons.org/licenses/by-nc/4.0/\n *\n * Short content:\n * Licensees may copy, distribute, display and perform the work and make derivative works based on it only if they give the author or licensor the credits in the manner specified by these.\n * Licensees may copy, distribute, display, and perform the work and make derivative works based on it only for noncommercial purposes.\n * (Free for non-commercial use).\n */\nimport PropTypes from 'prop-types';\n\n// eslint-disable-next-line import/no-cycle\nimport JQuiButton from './JQuiButton';\n\nclass JQuiContainerIconDialog extends JQuiButton {\n    static getWidgetInfo() {\n        const widgetInfo = JQuiButton.getWidgetInfo();\n\n        const newWidgetInfo = {\n            id: 'tplContainerIconDialog',\n            visSet: 'jqui',\n            visName: 'container - Icon - view in jqui Dialog',\n            visWidgetLabel: 'jqui_container_icon_dialog',\n            visPrev: 'widgets/jqui/img/Prev_ContainerIconDialog.png',\n            visOrder: 12,\n            visAttrs: widgetInfo.visAttrs,\n        };\n\n        // Add note\n        newWidgetInfo.visAttrs[0].fields.unshift({\n            name: '_note',\n            type: 'help',\n            text: 'jqui_button_link_blank_note',\n        });\n\n        // set resizable to true\n        const visResizable = JQuiButton.findField(newWidgetInfo, 'visResizable');\n        visResizable.default = true;\n\n        const icon = JQuiButton.findField(newWidgetInfo, 'icon');\n        icon.default = 'data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0Ij48cGF0aCBmaWxsPSJjdXJyZW50Q29sb3IiIGQ9Ik0xOSAxOUg1VjVoN1YzSDVhMiAyIDAgMCAwLTIgMnYxNGEyIDIgMCAwIDAgMiAyaDE0YzEuMSAwIDItLjkgMi0ydi03aC0ydjd6TTE0IDN2MmgzLjU5bC05LjgzIDkuODNsMS40MSAxLjQxTDE5IDYuNDFWMTBoMlYzaC03eiIvPjwvc3ZnPg==';\n\n        const buttonText = JQuiButton.findField(newWidgetInfo, 'buttontext');\n        delete buttonText.default;\n\n        const containsView = JQuiButton.findField(newWidgetInfo, 'contains_view');\n        containsView.default = '';\n\n        return newWidgetInfo;\n    }\n\n    // eslint-disable-next-line class-methods-use-this\n    getWidgetInfo() {\n        return JQuiContainerIconDialog.getWidgetInfo();\n    }\n}\n\nJQuiContainerIconDialog.propTypes = {\n    id: PropTypes.string.isRequired,\n    context: PropTypes.object.isRequired,\n    view: PropTypes.string.isRequired,\n    editMode: PropTypes.bool.isRequired,\n};\n\nexport default JQuiContainerIconDialog;\n","/**\n *  ioBroker.vis\n *  https://github.com/ioBroker/ioBroker.vis\n *\n *  Copyright (c) 2023 Denis Haev https://github.com/GermanBluefox,\n *  Creative Common Attribution-NonCommercial (CC BY-NC)\n *\n *  http://creativecommons.org/licenses/by-nc/4.0/\n *\n * Short content:\n * Licensees may copy, distribute, display and perform the work and make derivative works based on it only if they give the author or licensor the credits in the manner specified by these.\n * Licensees may copy, distribute, display, and perform the work and make derivative works based on it only for noncommercial purposes.\n * (Free for non-commercial use).\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\n\nimport {\n    IconButton,\n    TextField,\n    InputAdornment, Button,\n} from '@mui/material';\n\nimport { KeyboardReturn } from '@mui/icons-material';\n\nimport { I18n } from '@iobroker/adapter-react-v5';\n\n// eslint-disable-next-line import/no-cycle\nimport VisRxWidget from '../../visRxWidget';\n\nclass JQuiInput extends VisRxWidget {\n    constructor(props) {\n        super(props);\n        this.state.input = '';\n        this.focused = false;\n        this.inputRef = React.createRef();\n    }\n\n    static getWidgetInfo() {\n        return {\n            id: 'tplJquiInput',\n            visSet: 'jqui',\n            visName: 'Input',\n            visWidgetLabel: 'jqui_input',\n            visPrev: 'widgets/jqui/img/Prev_Input.png',\n            visOrder: 13,\n            visAttrs: [\n                {\n                    name: 'common',\n                    fields: [\n                        {\n                            name: 'label',\n                            type: 'text',\n                            default: I18n.t('jqui_input').replace('jqui_', ''),\n                        },\n                        {\n                            name: 'oid',\n                            type: 'id',\n                            onChange: async (field, data, changeData, socket) => {\n                                if (data[field.name] && data[field.name] !== 'nothing_selected') {\n                                    const obj = await socket.getObject(data[field.name]);\n                                    let changed = false;\n                                    if (obj?.common?.unit) {\n                                        if (data.unit !== obj.common.unit) {\n                                            data.unit = obj.common.unit;\n                                            changed = true;\n                                        }\n                                    }\n                                    if (obj?.common?.type !== 'number') {\n                                        if (!data.asString) {\n                                            data.asString = true;\n                                            changed = true;\n                                        }\n                                    } else if (obj?.common?.type === 'number') {\n                                        if (data.asString) {\n                                            data.asString = false;\n                                            changed = true;\n                                        }\n                                    }\n                                    changed && changeData(data);\n                                }\n                            },\n                        },\n                        {\n                            name: 'asString',\n                            type: 'checkbox',\n                            label: 'jqui_as_string',\n                        },\n                        // {\n                        //     name: 'digits',\n                        //     type: 'slider',\n                        //     min: 0,\n                        //     max: 5,\n                        //     hidden: data => !!data.asString,\n                        // },\n                        {\n                            name: 'autoFocus',\n                            type: 'checkbox',\n                            min: 0,\n                            max: 5,\n                        },\n                        {\n                            name: 'readOnly',\n                            type: 'checkbox',\n                            label: 'jqui_read_only',\n                        },\n                        {\n                            name: 'withEnter',\n                            type: 'checkbox',\n                            label: 'jqui_with_enter_button',\n                            hidden: '!!data.readOnly',\n                        },\n                        {\n                            name: 'buttontext',\n                            type: 'text',\n                            label: 'jqui_button_text',\n                            hidden: '!data.withEnter || !!data.readOnly',\n                        },\n                        {\n                            name: 'selectAllOnFocus',\n                            type: 'checkbox',\n                            label: 'jqui_select_all_on_focus',\n                            tooltip: 'jqui_select_all_on_focus_tooltip',\n                        },\n                        {\n                            name: 'unit',\n                            type: 'text',\n                            label: 'jqui_unit',\n                        },\n                    ],\n                },\n                {\n                    name: 'style',\n                    hidden: data => !!data.externalDialog,\n                    fields: [\n                        { name: 'no_style', type: 'checkbox', hidden: data => data.jquery_style },\n                        {\n                            name: 'jquery_style',\n                            label: 'jqui_jquery_style',\n                            type: 'checkbox',\n                            hidden: data => data.no_style,\n                        },\n                        {\n                            name: 'variant',\n                            label: 'jqui_variant',\n                            type: 'select',\n                            noTranslation: true,\n                            options: ['filled', 'outlined', 'standard'],\n                            default: 'standard',\n                            hidden: data => data.jquery_style || data.no_style,\n                        },\n                        {\n                            name: 'size',\n                            type: 'slider',\n                            min: 4,\n                            max: 100,\n                            default: 10,\n                            hidden: data => !data.no_style,\n                        },\n                    ],\n                },\n            ],\n        };\n    }\n\n    // eslint-disable-next-line class-methods-use-this\n    getWidgetInfo() {\n        return JQuiInput.getWidgetInfo();\n    }\n\n    static findField(widgetInfo, name) {\n        return super.findField(widgetInfo, name);\n    }\n\n    async componentDidMount() {\n        super.componentDidMount();\n\n        try {\n            const input = await this.props.context.socket.getState(this.state.rxData.oid);\n            if (input && input.val !== undefined && input.val !== null) {\n                input.val = input.val.toString();\n                this.setState({ input: input.val });\n            }\n        } catch (error) {\n            console.error(`Cannot get state ${this.state.rxData.oid}: ${error}`);\n        }\n\n        if (this.inputRef.current &&\n            this.state.rxData.autoFocus &&\n            !this.props.editMode &&\n            (this.state.rxData.jquery_style || this.state.rxData.no_style)\n        ) {\n            setTimeout(() => this.inputRef.current.focus(), 100);\n        }\n    }\n\n    onStateUpdated(id, state) {\n        super.onStateUpdated(id, state);\n        if (state?.val || state?.val === 0) {\n            if (id === this.state.rxData.oid && !this.focused) {\n                if (state.val.toString() !== this.state.input.toString()) {\n                    this.setState({ input: state.val });\n                }\n            }\n        }\n    }\n\n    async componentDidUpdate() {\n        if (this.inputRef.current) {\n            if (this.state.rxData.jquery_style && !this.inputRef.current._jQueryDone) {\n                this.inputRef.current._jQueryDone = true;\n                window.jQuery(this.inputRef.current).button().addClass('ui-state-default');\n            }\n        }\n    }\n\n    async setValue(value) {\n        if (this.object?._id !== this.state.rxData.oid) {\n            this.object = await this.props.context.socket.getObject(this.state.rxData.oid);\n            if (!this.object) {\n                return;\n            }\n        }\n        if (this.object?.common?.type === 'number') {\n            value = parseFloat(value.replace(',', '.'));\n            if (Number.isNaN(value)) {\n                value = 0;\n            }\n        }\n        await this.props.context.setValue(this.state.rxData.oid, value);\n    }\n\n    onChange(value) {\n        this.setState({ input: value });\n        if (!this.state.rxData.withEnter) {\n            this.setValue(value);\n        }\n    }\n\n    renderWidgetBody(props) {\n        super.renderWidgetBody(props);\n\n        props.style.overflow = 'visible';\n\n        let content;\n        const label = this.state.rxData.label === undefined ? this.state.rxData.title : this.state.rxData.label; // title for back compatibility with tplJquiInputSet\n        if (!this.state.rxData.jquery_style && !this.state.rxData.no_style) {\n            content = <TextField\n                fullWidth\n                value={this.state.input === null || this.state.input === undefined ? '' : (this.state.rxData.asString ? this.state.input.toString() : this.state.input)}\n                type={this.state.rxData.asString ? 'text' : 'number'}\n                onFocus={e => {\n                    this.focused = true;\n                    if (this.state.rxData.selectAllOnFocus) {\n                        e.target.select();\n                    }\n                }}\n                onBlur={() => this.focused = false}\n                autoFocus={!this.props.editMode && this.state.rxData.autoFocus}\n                variant={this.state.rxData.variant === undefined ? 'standard' : this.state.rxData.variant}\n                inputProps={{ readOnly: this.state.rxData.readOnly }}\n                // eslint-disable-next-line react/jsx-no-duplicate-props\n                InputProps={{\n                    endAdornment: this.state.rxData.withEnter && !this.state.rxData.readOnly ? <InputAdornment position=\"end\">\n                        {this.state.rxData.buttontext ? <Button\n                            onClick={() => this.setValue(this.state.input)}\n                            variant=\"contained\"\n                            style={{ marginBottom: 10, minWidth: 40 }}\n                        >\n                            {this.state.rxData.buttontext}\n                        </Button> :\n                            <IconButton\n                                onClick={() => this.setValue(this.state.input)}\n                                edge=\"end\"\n                            >\n                                <KeyboardReturn />\n                            </IconButton>}\n                    </InputAdornment> : undefined,\n                    startAdornment: this.state.rxData.unit ? <InputAdornment position=\"start\">\n                        {this.state.rxData.unit}\n                    </InputAdornment> : undefined,\n                }}\n                label={label}\n                onChange={e => this.onChange(e.target.value)}\n            />;\n        } else {\n            content = [\n                <div key=\"label\" style={{ marginRight: 8 }}>{label}</div>,\n                <input\n                    style={{ flexGrow: 1 }}\n                    key=\"input\"\n                    readOnly={this.state.rxData.readOnly}\n                    value={this.state.input || ''}\n                    ref={this.inputRef}\n                    size={this.state.rxData.size || 10}\n                    onFocus={e => {\n                        this.focused = true;\n                        if (this.state.rxData.selectAllOnFocus) {\n                            e.target.select();\n                        }\n                    }}\n                    onBlur={() => this.focused = false}\n                    onChange={e => this.onChange(e.target.value)}\n                />,\n                this.state.rxData.withEnter && !this.state.rxData.readOnly ? <IconButton\n                    style={{ marginRight: 5 }}\n                    key=\"button\"\n                    onClick={() => this.setValue(this.state.input)}\n                    edge=\"end\"\n                >\n                    <KeyboardReturn />\n                </IconButton> : undefined,\n            ];\n        }\n\n        return <div className=\"vis-widget-body\" style={{ display: 'flex', alignItems: 'center' }}>\n            {content}\n        </div>;\n    }\n}\n\nJQuiInput.propTypes = {\n    id: PropTypes.string.isRequired,\n    context: PropTypes.object.isRequired,\n    view: PropTypes.string.isRequired,\n    editMode: PropTypes.bool.isRequired,\n    tpl: PropTypes.string.isRequired,\n};\n\nexport default JQuiInput;\n","/**\n *  ioBroker.vis\n *  https://github.com/ioBroker/ioBroker.vis\n *\n *  Copyright (c) 2023 Denis Haev https://github.com/GermanBluefox,\n *  Creative Common Attribution-NonCommercial (CC BY-NC)\n *\n *  http://creativecommons.org/licenses/by-nc/4.0/\n *\n * Short content:\n * Licensees may copy, distribute, display and perform the work and make derivative works based on it only if they give the author or licensor the credits in the manner specified by these.\n * Licensees may copy, distribute, display, and perform the work and make derivative works based on it only for noncommercial purposes.\n * (Free for non-commercial use).\n */\n\nimport PropTypes from 'prop-types';\n\n// eslint-disable-next-line import/no-cycle\nimport JQuiInput from './JQuiInput';\n\nclass JQuiInputSet extends JQuiInput {\n    static getWidgetInfo() {\n        const widgetInfo = JQuiInput.getWidgetInfo();\n        const newWidgetInfo = {\n            id: 'tplJquiInputSet',\n            visSet: 'jqui',\n            visName: 'Input + Button',\n            visWidgetLabel: 'jqui_input_with_button',\n            visPrev: 'widgets/jqui/img/Prev_InputWithButton.png',\n            visOrder: 14,\n            visAttrs: widgetInfo.visAttrs,\n            visDefaultStyle: {\n                width: 150,\n                height: 45,\n            },\n        };\n\n        // Add note\n        newWidgetInfo.visAttrs[0].fields.unshift({\n            name: '_note',\n            type: 'help',\n            text: 'jqui_button_input_note',\n        });\n\n        const withEnter = JQuiInput.findField(newWidgetInfo, 'withEnter');\n        if (withEnter) {\n            withEnter.default = true;\n        }\n\n        const buttonText = JQuiInput.findField(newWidgetInfo, 'buttontext');\n        if (buttonText) {\n            buttonText.default = 'OK';\n        }\n\n        return newWidgetInfo;\n    }\n\n    // eslint-disable-next-line class-methods-use-this\n    getWidgetInfo() {\n        return JQuiInputSet.getWidgetInfo();\n    }\n}\n\nJQuiInputSet.propTypes = {\n    id: PropTypes.string.isRequired,\n    context: PropTypes.object.isRequired,\n    view: PropTypes.string.isRequired,\n    editMode: PropTypes.bool.isRequired,\n    tpl: PropTypes.string.isRequired,\n};\n\nexport default JQuiInputSet;\n","/**\n *  ioBroker.vis\n *  https://github.com/ioBroker/ioBroker.vis\n *\n *  Copyright (c) 2023 Denis Haev https://github.com/GermanBluefox,\n *  Creative Common Attribution-NonCommercial (CC BY-NC)\n *\n *  http://creativecommons.org/licenses/by-nc/4.0/\n *\n * Short content:\n * Licensees may copy, distribute, display and perform the work and make derivative works based on it only if they give the author or licensor the credits in the manner specified by these.\n * Licensees may copy, distribute, display, and perform the work and make derivative works based on it only for noncommercial purposes.\n * (Free for non-commercial use).\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\n\nimport {\n    Button,\n    Fab, FormControlLabel,\n    Tooltip,\n    Checkbox, Switch, ButtonGroup,\n} from '@mui/material';\n\nimport {\n    I18n, Icon,\n} from '@iobroker/adapter-react-v5';\n\n// eslint-disable-next-line import/no-cycle\nimport VisRxWidget from '../../visRxWidget';\n\nclass JQuiBinaryState extends VisRxWidget {\n    constructor(props) {\n        super(props);\n        this.state.isOn = false;\n        this.state.height = 0;\n        this.state.width = 0;\n    }\n\n    static getWidgetInfo() {\n        return {\n            id: 'tplJquiBool',\n            visSet: 'jqui',\n            visName: 'Html Bool',\n            visWidgetLabel: 'jqui_binary_control',\n            visPrev: 'widgets/jqui/img/Prev_BinaryControl.png',\n            visOrder: 14,\n            visAttrs: [\n                {\n                    name: 'common',\n                    fields: [\n                        {\n                            name: 'type',\n                            label: 'jqui_type',\n                            type: 'select',\n                            noTranslation: true,\n                            default: 'button',\n                            options: ['button', 'round-button', 'html', 'radio', 'checkbox', 'image', 'switch'],\n                        },\n                        {\n                            name: 'oid',\n                            type: 'id',\n                        },\n                        {\n                            name: 'readOnly',\n                            type: 'checkbox',\n                        },\n                        {\n                            name: 'pushMode',\n                            type: 'checkbox',\n                            label: 'jqui_push_mode',\n                            tooltip: 'jqui_push_mode_tooltip',\n                            hidden: data => data.type !== 'button' && data.type !== 'round-button' && data.type !== 'image',\n                        },\n                        {\n                            name: 'click_id',\n                            type: 'id',\n                            noSubscribe: true,\n                            hidden: data => !!data.readOnly,\n                        },\n                        {\n                            name: 'invert',\n                            label: 'jqui_inverted',\n                            type: 'checkbox',\n                        },\n                        {\n                            name: 'test',\n                            type: 'select',\n                            label: 'jqui_test',\n                            options: [\n                                { value: '', label: 'none' },\n                                { value: true, label: 'jqui_true' },\n                                { value: false, label: 'jqui_false' },\n                            ],\n                        },\n                    ],\n                },\n                {\n                    name: 'html',\n                    label: 'jqui_html',\n                    hidden: data => data.type !== 'html',\n                    fields: [\n                        {\n                            name: 'html_true',\n                            type: 'html',\n                            label: 'jqui_html_true',\n                        },\n                        {\n                            name: 'html_false',\n                            type: 'html',\n                            label: 'jqui_html_false',\n                        },\n                    ],\n                },\n                {\n                    name: 'text',\n                    label: 'group_text',\n                    fields: [\n                        {\n                            name: 'text_false',\n                            type: 'text',\n                            label: 'text_false',\n                            default: I18n.t('jqui_off').replace('jqui_', ''),\n                            hidden: data => data.type === 'image' || data.type === 'html',\n                        },\n                        {\n                            name: 'text_true',\n                            type: 'text',\n                            label: 'text_true',\n                            default: I18n.t('jqui_on').replace('jqui_', ''),\n                            hidden: data => data.type === 'image' || data.type === 'html' || data.type === 'round-button',\n                        },\n                        {\n                            name: 'color_false',\n                            type: 'color',\n                            label: 'color_false',\n                            hidden: data => data.type === 'image' || data.type === 'html' || !data.text_false,\n                        },\n                        {\n                            name: 'color_true',\n                            type: 'color',\n                            label: 'color_true',\n                            hidden: data => data.type === 'image' || data.type === 'html' || !data.text_true,\n                        },\n                        {\n                            name: 'alt_false',\n                            type: 'text',\n                            label: 'alt_false',\n                        },\n                        {\n                            name: 'alt_true',\n                            type: 'text',\n                            label: 'alt_true',\n                        },\n                        {\n                            name: 'equal_text_length',\n                            type: 'checkbox',\n                            label: 'jqui_equal_text_length',\n                            tooltip: 'jqui_equal_text_length_tooltip',\n                            hidden: data => !data.text_true || !data.text_false,\n                        },\n                    ],\n                },\n                {\n                    name: 'style',\n                    fields: [\n                        {\n                            name: 'jquery_style',\n                            label: 'jqui_jquery_style',\n                            type: 'checkbox',\n                            hidden: data => data.type !== 'button',\n                        },\n                        {\n                            name: 'padding',\n                            type: 'slider',\n                            min: 0,\n                            max: 100,\n                            default: 5,\n                            // hidden: data => !data.no_style && !data.jquery_style,\n                        },\n                        {\n                            name: 'variant',\n                            label: 'jqui_variant',\n                            type: 'select',\n                            noTranslation: true,\n                            options: ['contained', 'outlined', 'standard'],\n                            default: 'contained',\n                            hidden: data => data.type !== 'button' && data.type !== 'radio',\n                        },\n                        {\n                            name: 'orientation',\n                            label: 'jqui_orientation',\n                            type: 'select',\n                            noTranslation: true,\n                            options: ['horizontal', 'vertical'],\n                            default: 'horizontal',\n                            hidden: data => data.type !== 'radio',\n                        },\n                        {\n                            name: 'notEqualLength',\n                            label: 'jqui_not_equal_length',\n                            type: 'checkbox',\n                            hidden: data => data.type !== 'radio' || data.orientation !== 'horizontal',\n                        },\n                        { name: 'html_prepend', type: 'html' },\n                        { name: 'html_append', type: 'html' },\n                    ],\n                },\n                {\n                    name: 'icon_false',\n                    label: 'group_icon_false',\n                    fields: [\n                        {\n                            name: 'src_false',\n                            label: 'jqui_image',\n                            type: 'image',\n                            hidden: data => data.icon_false,\n                        },\n                        {\n                            name: 'icon_false',\n                            label: 'jqui_icon',\n                            type: 'icon64',\n                            hidden: data => data.src_false,\n                        },\n                        {\n                            name: 'icon_color_false',\n                            label: 'jqui_color',\n                            type: 'color',\n                            hidden: data => !data.icon_false,\n                        },\n\n                        {\n                            name: 'invert_icon_false',\n                            label: 'jqui_invert_icon',\n                            type: 'checkbox',\n                            hidden: data => !data.src_false && !data.icon_false,\n                        },\n                        {\n                            name: 'imageHeight_false',\n                            label: 'jqui_image_height',\n                            type: 'slider',\n                            min: 0,\n                            max: 200,\n                            hidden: data => !data.src_false && !data.icon_false,\n                        },\n                    ],\n                },\n                {\n                    name: 'icon_true',\n                    label: 'group_icon_true',\n                    fields: [\n                        {\n                            name: 'src_true',\n                            label: 'jqui_image',\n                            type: 'image',\n                            hidden: data => data.icon_true,\n                        },\n                        {\n                            name: 'icon_true',\n                            label: 'jqui_icon',\n                            type: 'icon64',\n                            hidden: data => data.src_true,\n                        },\n                        {\n                            name: 'icon_color_true',\n                            label: 'jqui_color',\n                            type: 'color',\n                            hidden: data => !data.icon_true && !data.icon_false,\n                        },\n                        {\n                            name: 'invert_icon_true',\n                            label: 'jqui_invert_icon',\n                            type: 'checkbox',\n                            hidden: data => !data.src_true && !data.icon_true,\n                        },\n                        {\n                            name: 'imageHeight_true',\n                            label: 'jqui_image_height',\n                            type: 'slider',\n                            min: 0,\n                            max: 200,\n                            hidden: data => !data.src_true && !data.icon_true,\n                        },\n                    ],\n                },\n            ],\n        };\n    }\n\n    async componentDidMount() {\n        await super.componentDidMount();\n\n        // convert old tplIconStateBool data to JquiBinaryState data\n        if ((this.props.tpl === 'tplIconStateBool' || this.props.tpl === 'tplIconStatePushButton') && (this.state.data.false_text || this.state.data.true_text)) {\n            const data = JSON.parse(JSON.stringify(this.state.data));\n            data.text_false = data.false_text;\n            data.text_true = data.true_text;\n            data.src_false = data.false_src;\n            data.src_true = data.true_src;\n            data.alt_false = data.false_alt;\n            data.alt_true = data.true_alt;\n            data.invert_icon_false = data.invert_icon;\n            data.invert_icon_true = data.invert_icon;\n            if (this.props.tpl === 'tplIconStatePushButton') {\n                data.pushMode = true;\n            }\n\n            data.false_text = null;\n            data.true_text = null;\n\n            setTimeout(() => this.props.context.onWidgetsChanged([{\n                wid: this.props.id,\n                view: this.props.view,\n                data,\n            }]), 100);\n        }\n\n        if (this.state.rxData.oid && this.state.rxData.oid !== 'nothing_selected') {\n            try {\n                const state = await this.props.context.socket.getState(this.state.rxData.oid);\n                this.onStateUpdated(this.state.rxData.oid, state);\n            } catch (error) {\n                console.error(`Cannot get state ${this.state.rxData.oid}: ${error}`);\n            }\n        }\n    }\n\n    static findField(widgetInfo, name) {\n        return VisRxWidget.findField(widgetInfo, name);\n    }\n\n    // eslint-disable-next-line class-methods-use-this\n    getWidgetInfo() {\n        return JQuiBinaryState.getWidgetInfo();\n    }\n\n    onStateUpdated(id, state) {\n        if (id === this.state.rxData.oid && state) {\n            const isOn = state.val === true || state.val === 'true' || state.val === 1 || state.val === '1' || state.val === 'on' || state.val === 'ON' || state.val === 'On';\n            if (this.state.isOn !== isOn) {\n                this.setState({ isOn });\n            }\n        }\n    }\n\n    getControlOid() {\n        if (this.state.rxData.click_id && this.state.rxData.click_id !== 'nothing_selected') {\n            return this.state.rxData.click_id;\n        }\n        if (this.state.rxData.oid && this.state.rxData.oid !== 'nothing_selected') {\n            return this.state.rxData.oid;\n        }\n        return '';\n    }\n\n    onClick(isOn) {\n        if (this.state.rxData.readOnly || this.props.editMode) {\n            return;\n        }\n        if (isOn !== false && isOn !== true) {\n            isOn = !this.isOn(); // toggle\n        }\n\n        const oid = this.getControlOid();\n        if (oid) {\n            this.props.context.setValue(oid, isOn);\n        }\n\n        this.setState({ isOn });\n    }\n\n    // \"My\" is used to avoid conflicts with parent class\n    onMyMouseDown() {\n        const oid = this.getControlOid();\n        if (oid) {\n            this.props.context.setValue(oid, !this.state.rxData.invert);\n        }\n\n        this.setState({ isOn: true });\n    }\n\n    // \"My\" is used to avoid conflicts with parent class\n    onMyMouseUp() {\n        const oid = this.getControlOid();\n        if (oid) {\n            this.props.context.setValue(oid, !!this.state.rxData.invert);\n        }\n\n        this.setState({ isOn: false });\n    }\n\n    isOn() {\n        let value;\n        if (this.props.editMode && (this.state.rxData.test === true || this.state.rxData.test === false)) {\n            value = this.state.rxData.test;\n        } else {\n            value = this.state.isOn;\n        }\n\n        if (value === undefined || value === null) {\n            value = false;\n        }\n        if (this.state.rxData.invert) {\n            value = !value;\n        }\n        return value;\n    }\n\n    renderIcon(isOn, doNotFallback) {\n        let icon;\n        let invert;\n        let height;\n        let color;\n        if (isOn) {\n            icon = this.state.rxData.src_true || this.state.rxData.icon_true;\n            if (icon) {\n                invert = this.state.rxData.invert_icon_true;\n                height = this.state.rxData.imageHeight_true;\n            }\n            color = this.state.rxData.icon_color_true;\n        }\n        if (!icon && (!isOn || !doNotFallback)) {\n            icon = this.state.rxData.src_false || this.state.rxData.icon_false;\n            if (icon) {\n                invert = this.state.rxData.invert_icon_false;\n                height = this.state.rxData.imageHeight_false;\n                color = color || this.state.rxData.icon_color_false;\n            }\n        }\n        const style = {};\n        if (invert) {\n            style.filter = 'invert(1)';\n        }\n        if (color) {\n            style.color = color;\n        }\n        if (height) {\n            style.height = height;\n            style.width = 'auto';\n        } else if (this.state.width && this.state.rxData.type === 'image') {\n            if (this.state.width < this.state.height) {\n                style.width = `calc(100% - ${(this.state.rxData.padding || 0) * 2}px)`;\n                style.height = 'auto';\n                style.maxHeight = '100%';\n            } else {\n                style.height = `calc(100% - ${(this.state.rxData.padding || 0) * 2}px)`;\n                style.width = 'auto';\n                style.maxWidth = '100%';\n            }\n        } else if (this.state.rxData.type === 'round-button') {\n            if (this.state.width < this.state.height) {\n                style.width = `calc(70% - ${(this.state.rxData.padding || 0) * 2}px)`;\n                style.height = 'auto';\n                style.maxHeight = '100%';\n            } else {\n                style.height = `calc(70% - ${(this.state.rxData.padding || 0) * 2}px)`;\n                style.width = 'auto';\n                style.maxWidth = '100%';\n            }\n        } else if (this.state.width < this.state.height) {\n            style.width = `calc(100% - ${(this.state.rxData.padding || 0) * 2}px)`;\n            style.height = 'auto';\n            style.maxHeight = '100%';\n        } else {\n            style.height = `calc(100% - ${(this.state.rxData.padding || 0) * 2}px)`;\n            style.width = 'auto';\n            style.maxWidth = '100%';\n        }\n\n        if (this.state.rxData.padding) {\n            style.padding = this.state.rxData.padding;\n        }\n\n        if (icon) {\n            if (icon.startsWith('_PRJ_NAME/')) {\n                icon = icon.replace('_PRJ_NAME/', `../${this.props.context.adapterName}.${this.props.context.instance}/${this.props.context.projectName}/`);\n            }\n\n            return <Icon\n                key=\"icon\"\n                style={style}\n                src={icon}\n            />;\n        }\n        return null;\n    }\n\n    getTextWidth(text) {\n        if (!this.refService.current) {\n            return text * 14;\n        }\n        this.textsLengthCache = this.textsLengthCache || {};\n        if (this.textsLengthCache[text]) {\n            return this.textsLengthCache[text];\n        }\n        const el = document.createElement('div');\n        el.style.position = 'absolute';\n        el.style.visibility = 'hidden';\n        el.style.height = 'auto';\n        el.style.width = 'auto';\n        el.innerHTML = text;\n        this.refService.current.appendChild(el);\n        const width = el.clientWidth;\n        this.refService.current.removeChild(el);\n        this.textsLengthCache[text] = width;\n        return width;\n    }\n\n    renderText(isOn) {\n        let text;\n        let color;\n\n        if (isOn) {\n            text = this.state.rxData.text_true !== undefined ? this.state.rxData.text_true : this.state.rxData.on_text; // back compatibility with radio on/off\n            color = this.state.rxData.color_true;\n        }\n\n        text = text || (this.state.rxData.text_false !== undefined ? this.state.rxData.text_false : this.state.rxData.off_text); // back compatibility with radio on/off\n        color = color || this.state.rxData.color_false;\n\n        if (this.state.rxData.equal_text_length && this.state.rxData.text_false && this.state.rxData.text_true) {\n            // get the length of false text\n            const falseLength = this.getTextWidth(this.state.rxData.text_false);\n            const trueLength = this.getTextWidth(this.state.rxData.text_true);\n            const length = Math.max(falseLength, trueLength);\n            return {\n                text: <div style={{ width: length, display: 'inline-block', color }}>{text}</div>,\n                color,\n            };\n        }\n\n        return { text, color };\n    }\n\n    renderButton(isOn, style) {\n        const icon = this.renderIcon(isOn);\n        const text = this.renderText(isOn);\n\n        style.color = text.color || undefined;\n\n        // Button\n        return <Button\n            variant={this.state.rxData.variant === undefined ? 'contained' : this.state.rxData.variant}\n            color={isOn ? 'primary' : 'grey'}\n            onMouseDown={this.state.rxData.pushMode && !this.state.rxData.readOnly && !this.props.editMode ? () => this.onMyMouseDown() : undefined}\n            onMouseUp={this.state.rxData.pushMode && !this.state.rxData.readOnly && !this.props.editMode ? () => this.onMyMouseUp() : undefined}\n            onClick={!this.state.rxData.pushMode && !this.state.rxData.readOnly && !this.props.editMode ? () => this.onClick() : undefined}\n            style={style}\n        >\n            {icon}\n            {text.text}\n        </Button>;\n    }\n\n    renderFab(isOn, style) {\n        const icon = this.renderIcon(isOn);\n        const text = this.renderText(isOn);\n\n        style.zIndex = this.props.editMode ? 0 : undefined;\n        // Fab\n        return <Fab\n            style={style}\n            color={isOn ? 'primary' : 'grey'}\n            onMouseDown={this.state.rxData.pushMode && !this.state.rxData.readOnly && !this.props.editMode ? () => this.onMyMouseDown() : undefined}\n            onMouseUp={this.state.rxData.pushMode && !this.state.rxData.readOnly && !this.props.editMode ? () => this.onMyMouseUp() : undefined}\n            onClick={!this.state.rxData.pushMode && !this.state.rxData.readOnly && !this.props.editMode ? () => this.onClick() : undefined}\n        >\n            {icon || text.text}\n        </Fab>;\n    }\n\n    renderHtml(isOn) {\n        let html;\n        if (isOn) {\n            html = this.state.rxData.html_true;\n        }\n        if (!html) {\n            html = this.state.rxData.html_false;\n        }\n\n        const icon = this.renderIcon(isOn);\n\n        return [\n            this.state.rxData.html_prepend ? <span\n                key=\"prepend\"\n                // eslint-disable-next-line react/no-danger\n                dangerouslySetInnerHTML={{ __html: this.state.rxData.html_prepend }}\n            /> : null,\n            icon,\n            html ? <span\n                key=\"content\"\n                // eslint-disable-next-line react/no-danger\n                dangerouslySetInnerHTML={{ __html: html }}\n            /> : null,\n            this.state.rxData.html_append ? <span\n                key=\"append\"\n                // eslint-disable-next-line react/no-danger\n                dangerouslySetInnerHTML={{ __html: this.state.rxData.html_append }}\n            /> : null,\n        ];\n    }\n\n    renderSwitch(isOn, style) {\n        const on = this.state.rxData.text_true !== undefined ? this.state.rxData.text_true : this.state.rxData.on_text; // back compatibility with radio on/off\n        const textColorOn = this.state.rxData.color_true;\n        const off = this.state.rxData.text_false !== undefined ? this.state.rxData.text_false : this.state.rxData.off_text; // back compatibility with radio on/off\n        const textColorOff = this.state.rxData.color_false;\n\n        const onIcon = this.renderIcon(true, true);\n        const offIcon = this.renderIcon(false);\n\n        if ((on || onIcon) && (off || offIcon)) {\n            style.display = 'flex';\n            style.alignItems = 'center';\n\n            return <div style={style}>\n                <div style={{ marginTop: -2, color: textColorOff }}>{off}</div>\n                <div>{offIcon}</div>\n                <Switch\n                    checked={isOn}\n                    onChange={() => this.onClick()}\n                />\n                <div>{onIcon}</div>\n                <div style={{ marginTop: -2, color: textColorOn }}>{on}</div>\n            </div>;\n        }\n        if (off || offIcon) {\n            let text;\n            if (offIcon && off) {\n                text = <div style={{ display: 'flex', alignItems: 'center', color: textColorOff }}>\n                    {offIcon}\n                    {off}\n                </div>;\n            } else {\n                text = off || offIcon;\n            }\n            style.marginLeft = 5;\n            return <FormControlLabel\n                style={style}\n                control={<Switch\n                    checked={isOn}\n                    onChange={() => this.onClick()}\n                />}\n                label={text}\n            />;\n        }\n\n        return <div style={style}>\n            <Switch\n                checked={false}\n                onChange={() => this.onClick()}\n            />\n        </div>;\n    }\n\n    renderCheckbox(isOn, style) {\n        let text = isOn ?\n            (this.state.rxData.text_true !== undefined ? this.state.rxData.text_true : this.state.rxData.on_text) // back compatibility with radio on/off\n            : (this.state.rxData.text_false !== undefined ? this.state.rxData.text_false : this.state.rxData.off_text); // back compatibility with radio on/off\n        if (!text) {\n            text = this.state.rxData.text_false !== undefined ? this.state.rxData.text_false : this.state.rxData.off_text; // back compatibility with radio on/off\n        }\n        const icon = isOn ? this.renderIcon(true) : this.renderIcon(false);\n        style.marginLeft = 5;\n\n        if (text || icon) {\n            return <FormControlLabel\n                style={style}\n                control={<Checkbox\n                    checked={isOn}\n                    onChange={() => this.onClick()}\n                />}\n                label={<div style={{ display: 'flex', alignItems: 'center' }}>\n                    {icon}\n                    {text}\n                </div>}\n            />;\n        }\n\n        return <Checkbox\n            style={style}\n            checked={isOn}\n            onChange={() => this.onClick()}\n        />;\n    }\n\n    renderRadio(isOn, style) {\n        const on = this.state.rxData.text_true !== undefined ? this.state.rxData.text_true : this.state.rxData.on_text; // back compatibility with radio on/off\n        const off = this.state.rxData.text_false !== undefined ? this.state.rxData.text_false : this.state.rxData.off_text; // back compatibility with radio on/off\n        const onIcon = this.renderIcon(true);\n        const offIcon = this.renderIcon(false);\n\n        let variant = this.state.rxData.variant === undefined ? 'contained' : this.state.rxData.variant;\n        if (variant === 'standard') {\n            variant = 'text';\n        }\n\n        const buttonStyle = this.state.rxData.orientation === 'vertical' ? { height: '50%' } : (this.state.rxData.notEqualLength ? undefined : { width: '50%' });\n\n        return <ButtonGroup\n            style={style}\n            variant={variant}\n            orientation={this.state.rxData.orientation || 'horizontal'}\n        >\n            <Button\n                style={buttonStyle}\n                startIcon={offIcon}\n                color={isOn ? 'grey' : 'primary'}\n                onClick={() => this.onClick(false)}\n            >\n                {off || I18n.t('off')}\n            </Button>\n            <Button\n                style={buttonStyle}\n                color={isOn ? 'primary' : 'grey'}\n                startIcon={onIcon}\n                onClick={() => this.onClick(true)}\n            >\n                {on || I18n.t('on')}\n            </Button>\n        </ButtonGroup>;\n    }\n\n    componentDidUpdate(/* prevProps, prevState */) {\n        if (!this.refService.current) {\n            return;\n        }\n        if (this.state.rxData.type === 'image' ||\n            this.state.rxData.type === 'html' ||\n            (this.state.rxData.type === 'button' && this.state.rxData.jquery_style)\n        ) {\n            if (this.state.rxData.type === 'button') {\n                const el = this.refService.current.getElementsByClassName('vis-widget-body');\n                if (el?.length && !this.refService.current._jQueryDone) {\n                    this.refService.current._jQueryDone = true;\n                    window.jQuery(el[0]).button();\n                    const textEl = el[0].getElementsByClassName('ui-button-text');\n                    if (textEl?.length) {\n                        textEl[0].style.display = 'flex';\n                        textEl[0].style.alignItems = 'center';\n                    }\n                }\n            }\n\n            if (this.refService.current.clientWidth !== this.state.width ||\n                this.refService.current.clientHeight !== this.state.height\n            ) {\n                this.setState({\n                    width: this.refService.current.clientWidth,\n                    height: this.refService.current.clientHeight,\n                });\n            }\n        }\n    }\n\n    renderWidgetBody(props) {\n        super.renderWidgetBody(props);\n        const isOn = this.isOn();\n\n        const buttonStyle = {};\n        // apply style from the element\n        Object.keys(this.state.rxStyle).forEach(attr => {\n            const value = this.state.rxStyle[attr];\n            if (value !== null &&\n                value !== undefined &&\n                VisRxWidget.POSSIBLE_MUI_STYLES.includes(attr)\n            ) {\n                attr = attr.replace(\n                    /(-\\w)/g,\n                    text => text[1].toUpperCase(),\n                );\n                buttonStyle[attr] = value;\n            }\n        });\n\n        let type = this.state.rxData.type;\n        if (!type && this.props.tpl === 'tplJquiRadio') {\n            type = 'radio';\n        }\n\n        // extra no rxData here, as it is not possible to set it with bindings\n        buttonStyle.width = '100%';\n        buttonStyle.height = '100%';\n        let content;\n        const bodyStyle = { textAlign: 'center' };\n        if (type === 'radio') {\n            content = this.renderRadio(isOn, buttonStyle);\n        } else if (type === 'html' || (type === 'button' && this.state.rxData.jquery_style)) {\n            bodyStyle.display = 'flex';\n            bodyStyle.flexDirection = this.state.height > this.state.width ? 'column' : 'row';\n            bodyStyle.alignItems = 'center';\n            bodyStyle.justifyContent = 'center';\n            bodyStyle.cursor = !this.state.rxData.readOnly ? 'pointer' : undefined;\n\n            content = this.renderHtml(isOn);\n        } else if (type === 'switch') {\n            content = this.renderSwitch(isOn, buttonStyle);\n        } else if (type === 'checkbox') {\n            content = this.renderCheckbox(isOn, buttonStyle);\n        } else if (type === 'image') {\n            bodyStyle.cursor = !this.state.rxData.readOnly ? 'pointer' : undefined;\n            content = this.renderIcon(isOn, buttonStyle);\n        } else if (type === 'round-button') {\n            content = this.renderFab(isOn, buttonStyle);\n        } else if (!this.state.rxData.jquery_style) {\n            content = this.renderButton(isOn, buttonStyle);\n        }\n\n        const result = <div\n            className=\"vis-widget-body\"\n            style={bodyStyle}\n            onClick={type === 'image' || type === 'html' ? () => this.onClick() : undefined}\n        >\n            {content}\n        </div>;\n        if (isOn && this.state.rxData.alt_true) {\n            return <Tooltip title={this.state.rxData.alt_true}>{result}</Tooltip>;\n        }\n        if (!isOn && this.state.rxData.alt_false) {\n            return <Tooltip title={this.state.rxData.alt_false}>{result}</Tooltip>;\n        }\n        return result;\n    }\n}\n\nJQuiBinaryState.propTypes = {\n    id: PropTypes.string.isRequired,\n    context: PropTypes.object.isRequired,\n    view: PropTypes.string.isRequired,\n    editMode: PropTypes.bool.isRequired,\n    tpl: PropTypes.string.isRequired,\n};\n\nexport default JQuiBinaryState;\n","/**\n *  ioBroker.vis\n *  https://github.com/ioBroker/ioBroker.vis\n *\n *  Copyright (c) 2023 Denis Haev https://github.com/GermanBluefox,\n *  Creative Common Attribution-NonCommercial (CC BY-NC)\n *\n *  http://creativecommons.org/licenses/by-nc/4.0/\n *\n * Short content:\n * Licensees may copy, distribute, display and perform the work and make derivative works based on it only if they give the author or licensor the credits in the manner specified by these.\n * Licensees may copy, distribute, display, and perform the work and make derivative works based on it only for noncommercial purposes.\n * (Free for non-commercial use).\n */\n\nimport PropTypes from 'prop-types';\n\n// eslint-disable-next-line import/no-cycle\nimport JQuiBinaryState from './JQuiBinaryState';\n\nclass JQuiRadio extends JQuiBinaryState {\n    static getWidgetInfo() {\n        const widgetInfo = JQuiBinaryState.getWidgetInfo();\n        const newWidgetInfo = {\n            id: 'tplJquiRadio',\n            visSet: 'jqui',\n            visName: 'Radiobuttons on/off',\n            visWidgetLabel: 'jqui_radio_buttons_on_off',\n            visPrev: 'widgets/jqui/img/Prev_RadioButtonsOnOff.png',\n            visOrder: 15,\n            visAttrs: widgetInfo.visAttrs,\n            visDefaultStyle: {\n                width: 150,\n                height: 45,\n            },\n        };\n\n        // Add note\n        newWidgetInfo.visAttrs[0].fields.unshift({\n            name: '_note',\n            type: 'help',\n            text: 'jqui_button_binary_control_note',\n        });\n\n        const type = JQuiBinaryState.findField(newWidgetInfo, 'type');\n        if (type) {\n            type.default = 'radio';\n        }\n\n        return newWidgetInfo;\n    }\n\n    // eslint-disable-next-line class-methods-use-this\n    getWidgetInfo() {\n        return JQuiRadio.getWidgetInfo();\n    }\n}\n\nJQuiRadio.propTypes = {\n    id: PropTypes.string.isRequired,\n    context: PropTypes.object.isRequired,\n    view: PropTypes.string.isRequired,\n    editMode: PropTypes.bool.isRequired,\n    tpl: PropTypes.string.isRequired,\n};\n\nexport default JQuiRadio;\n","import React from 'react';\nimport { withStyles } from '@mui/styles';\nimport type { LegacyConnection, Connection } from '@iobroker/adapter-react-v5';\n\nimport {\n    Button,\n    Dialog,\n    DialogContent,\n    DialogTitle,\n    IconButton,\n    TableBody,\n    TableRow,\n    TextField,\n    Table,\n    TableHead,\n    TableCell,\n    MenuItem,\n    DialogActions,\n    Popper, Fade,\n    Paper, ButtonGroup,\n    Fab, Slider,\n    FormControlLabel,\n    Checkbox,\n    Radio,\n} from '@mui/material';\n\nimport {\n    Clear,\n    Close,\n    Check,\n    Delete, Clear as ClearIcon,\n    Add, Edit,\n} from '@mui/icons-material';\n\nimport {\n    ColorPicker,\n    I18n,\n    Icon, SelectFile as SelectFileDialog,\n    Utils,\n} from '@iobroker/adapter-react-v5';\n\nimport MaterialIconSelector from '@/Components/MaterialIconSelector';\n\nconst BUTTONS: Record<string, string> = {\n    AUTO: 'thermostat_auto',\n    MANUAL: 'pan_tool',\n    VACATION: 'houseboat',\n    PARTY: 'celebration',\n    COOL: 'ac_unit',\n    DRY: 'dry',\n    ECO: 'park',\n    FAN_ONLY: 'air',\n    HEAT: 'wb_sunny',\n    HEATING: 'wb_sunny',\n    OFF: 'power_settings_new',\n};\n\nconst styles = () => ({\n    clearPadding: {\n        '&&&&': {\n            padding: 0,\n            margin: 0,\n            minHeight: 'initial',\n        },\n    },\n    fieldContent: {\n        '&&&&&&': {\n            fontSize: '80%',\n        },\n        '& svg': {\n            fontSize: '1rem',\n        },\n    },\n});\n\ninterface BulkEditorData {\n    variant?: 'outlined' | 'contained';\n    type: 'select' | 'radio';\n    oid: string;\n    count: number;\n    [colors: `color${string}`]: string;\n    [values: `value${string}`]: string | number;\n    [values: `text${string}`]: string;\n    [values: `icon${string}`]: string | null;\n    [values: `g_states-${string}`]: boolean;\n    [values: `image${string}`]: string;\n    [values: `activeColor${string}`]: string;\n    [values: `tooltip${string}`]: string;\n}\n\ninterface BulkEditorProps {\n    socket: LegacyConnection;\n    data: BulkEditorData;\n    themeType: 'dark' | 'light';\n    adapterName: string;\n    instance: number;\n    projectName: string;\n    /** The css classes */\n    classes: Record<keyof ReturnType<typeof styles>, any>;\n    onDataChange: (data: BulkEditorData) => void;\n}\n\ninterface BulkEditorState {\n    minMaxDialog?: boolean;\n    activeLine?: number;\n    editDialog?: {\n        index?: number;\n        value: string | number;\n        /** True if add dialog, false if edit dialog */\n        add: boolean;\n    } | null;\n    textDialogFocused: unknown[];\n    states: null;\n    unit: string;\n    originalUnit: string;\n    usePercents: boolean;\n    min: number;\n    max: number;\n    step?: number;\n    steps: number;\n    texts: string[];\n    values: (string | number)[];\n    colors: string[];\n    activeColors: string[];\n    icons: (string|null)[];\n    images: string[];\n    tooltips: string[];\n    iconDialog: null | number;\n    imageDialog: null | number;\n    dialog: boolean;\n    dialogDelete: null | number;\n    numbers?: boolean;\n}\n\nclass BulkEditor extends React.Component<BulkEditorProps, BulkEditorState> {\n    private readonly textRef: React.RefObject<any>[];\n\n    constructor(props: BulkEditorProps) {\n        super(props);\n        this.state = {\n            textDialogFocused: [],\n            states: null,\n            unit: '',\n            originalUnit: '',\n            usePercents: true,\n            min: 0,\n            max: 100,\n            steps: 4,\n            texts: [],\n            values: [],\n            colors: [],\n            activeColors: [],\n            icons: [],\n            images: [],\n            tooltips: [],\n\n            iconDialog: null,\n            imageDialog: null,\n            dialog: false,\n            dialogDelete: null,\n        };\n        this.textRef = [];\n    }\n\n    static iconPromise: Promise<Record<string, any>>;\n\n    static getIcon(icon: string): Promise<string | null> {\n        if (!BulkEditor.iconPromise) {\n            BulkEditor.iconPromise = fetch('./material-icons/baseline.json')\n                .then(res => res.json());\n        }\n\n        return BulkEditor.iconPromise\n            .then(icons => {\n                if (icons[icon]) {\n                    return `data:image/svg+xml;base64,${icons[icon]}`;\n                }\n                return null;\n            })\n            .catch(e => {\n                console.error(e);\n                return null;\n            });\n    }\n\n    static async generateFields(data: BulkEditorData, socket: LegacyConnection) {\n        const oid = data.oid;\n        if (!oid || oid === 'nothing_selected') {\n            return false;\n        }\n\n        if (data.count <= 1) {\n            let changed = false;\n            const obj = await socket.getObject(oid);\n            if (obj?.common?.states) {\n                let states = obj.common.states;\n                if (Array.isArray(states)) {\n                    states = {};\n                    Object.keys(obj.common.states).forEach(key => states[key] = key);\n                }\n                const keys = Object.keys(obj.common.states);\n                for (let i = 0; i < keys.length; i++) {\n                    if (data[`text${i + 1}`] !== states[keys[i]]) {\n                        data[`text${i + 1}`] = states[keys[i]];\n                        changed = true;\n                    }\n                    if (data[`value${i + 1}`] !== keys[i]) {\n                        data[`value${i + 1}`] = keys[i];\n                        changed = true;\n                    }\n                    if (BUTTONS[states[keys[i]].toUpperCase()]) {\n                        const icon = await BulkEditor.getIcon(BUTTONS[states[keys[i]].toUpperCase()]);\n                        if (data[`icon${i + 1}`] !== icon) {\n                            data[`icon${i + 1}`] = icon;\n                        }\n                        changed = true;\n                    }\n\n                    if (!data[`g_states-${i + 1}`]) {\n                        data[`g_states-${i + 1}`] = true;\n                        changed = true;\n                    }\n                }\n                if (data.count !== keys.length) {\n                    data.count = keys.length;\n                    changed = true;\n                }\n            } else if (obj?.common?.type === 'number') {\n                const unit = obj.common.unit || '';\n                const min = obj.common.min !== undefined ? obj.common.min : 0;\n                const max = obj.common.max !== undefined ? obj.common.max : 100;\n                const step = (max - min) / 4;\n\n                let count = 0;\n                for (let i = min; i < max; i += step) {\n                    count++;\n                    const percent = Math.round(((i - min) / (max - min)) * 100);\n                    if (data[`text${count}`] !== percent.toString() + unit) {\n                        data[`text${count}`] = percent.toString() + unit;\n                        changed = true;\n                    }\n                    if (data[`value${count}`] !== i.toString()) {\n                        data[`value${count}`] = i.toString();\n                        changed = true;\n                    }\n                    if (!data[`g_states-${count}`]) {\n                        data[`g_states-${count}`] = true;\n                        changed = true;\n                    }\n                }\n                count++;\n                if (data[`text${count}`] !== 100 + unit) {\n                    data[`text${count}`] = 100 + unit;\n                    changed = true;\n                }\n                if (data[`value${count}`] !== max.toString()) {\n                    data[`value${count}`] = max.toString();\n                    changed = true;\n                }\n                if (!data[`g_states-${count}`]) {\n                    data[`g_states-${count}`] = true;\n                    changed = true;\n                }\n                if (data.count !== count) {\n                    changed = true;\n                    data.count = count;\n                }\n            }\n            return changed ? data : false;\n        }\n\n        return false;\n    }\n\n    async calculateFirst(useStates?: boolean | undefined): Promise<void> {\n        const newState: Pick<BulkEditorState, keyof BulkEditorState> = {\n            ...this.state,\n            dialog: true,\n        };\n\n        if (this.props.data.count < 1 || useStates !== undefined) {\n            const oid = this.props.data.oid;\n            if (oid && oid !== 'nothing_selected') {\n                const obj = await this.props.socket.getObject(oid);\n                newState.texts = [];\n                newState.values = [];\n\n                if (obj?.common?.states) {\n                    newState.numbers = false;\n\n                    let states = obj.common.states;\n                    if (Array.isArray(states)) {\n                        states = {};\n                        Object.keys(obj.common.states).forEach(key => states[key] = key);\n                    }\n                    newState.states = states;\n                    const keys = Object.keys(states);\n                    newState.texts = [];\n                    newState.values = [];\n                    for (let i = 0; i < keys.length; i++) {\n                        newState.texts[i] = states[keys[i]];\n                        newState.values[i] = keys[i];\n                        if (BUTTONS[states[keys[i]].toUpperCase()]) {\n                            newState.icons[i] = await BulkEditor.getIcon(BUTTONS[states[keys[i]].toUpperCase()]);\n                        }\n                    }\n                } else if (obj?.common?.type === 'number') {\n                    newState.numbers = true;\n                    newState.unit = obj.common.unit || '';\n                    newState.min = obj.common.min !== undefined ? obj.common.min : 0;\n                    newState.max = obj.common.max !== undefined ? obj.common.max : 100;\n                    newState.step = (newState.max - newState.min) / 4;\n                    for (let i = newState.min; i < newState.max; i += newState.step) {\n                        const value = Math.round(((i - newState.min) / (newState.max - newState.min)) * 100);\n                        newState.texts.push(value + newState.unit);\n                        newState.values.push(i);\n                    }\n                    newState.texts.push(100 + newState.unit);\n                    newState.values.push(newState.max);\n                }\n            }\n        } else {\n            newState.texts = [];\n            newState.values = [];\n            newState.icons = [];\n            newState.images = [];\n            newState.colors = [];\n            newState.activeColors = [];\n            newState.tooltips = [];\n            for (let i = 0; i < this.props.data.count; i++) {\n                newState.texts[i] = this.props.data[`text${i + 1}`] as string || '';\n                newState.values[i] = this.props.data[`value${i + 1}`] || '';\n                newState.icons[i] = this.props.data[`icon${i + 1}`] || '';\n                newState.images[i] = this.props.data[`image${i + 1}`] || '';\n                newState.colors[i] = this.props.data[`color${i + 1}`] || '';\n                newState.activeColors[i] = this.props.data[`activeColor${i + 1}`] || '';\n                newState.tooltips[i] = this.props.data[`tooltip${i + 1}`] || '';\n            }\n        }\n\n        this.setState(newState);\n    }\n\n    renderDeleteDialog() {\n        if (this.state.dialogDelete === null) {\n            return null;\n        }\n        return <Dialog\n            key=\"deleteDialog\"\n            open={!0}\n            onClose={() => this.setState({ dialogDelete: null })}\n        >\n            <DialogContent>\n                {I18n.t('jqui_Are you sure?')}\n            </DialogContent>\n            <DialogActions>\n                <Button\n                    variant=\"contained\"\n                    color=\"primary\"\n                    startIcon={<Delete />}\n                    onClick={() => {\n                        const values = [...this.state.values];\n                        const texts = [...this.state.texts];\n                        const icons = [...this.state.icons];\n                        const images = [...this.state.images];\n                        const colors = [...this.state.colors];\n                        const activeColors = [...this.state.activeColors];\n                        const tooltips = [...this.state.tooltips];\n                        if (typeof this.state.dialogDelete === 'number') {\n                            values.splice(this.state.dialogDelete, 1);\n                            texts.splice(this.state.dialogDelete, 1);\n                            icons.splice(this.state.dialogDelete, 1);\n                            images.splice(this.state.dialogDelete, 1);\n                            colors.splice(this.state.dialogDelete, 1);\n                            tooltips.splice(this.state.dialogDelete, 1);\n                            activeColors.splice(this.state.dialogDelete, 1);\n                        }\n\n                        this.setState({\n                            values,\n                            texts,\n                            icons,\n                            images,\n                            colors,\n                            activeColors,\n                            tooltips,\n                            dialogDelete: null,\n                        });\n                    }}\n                >\n                    {I18n.t('Delete')}\n                </Button>\n                <Button\n                    variant=\"contained\"\n                    // @ts-expect-error this is fine\n                    color=\"grey\"\n                    startIcon={<Close />}\n                    onClick={() => this.setState({ dialogDelete: null })}\n                >\n                    {I18n.t('Cancel')}\n                </Button>\n            </DialogActions>\n        </Dialog>;\n    }\n\n    renderMaterialDialog() {\n        if (this.state.iconDialog === null) {\n            return null;\n        }\n        return <MaterialIconSelector\n            key=\"iconDialog\"\n            themeType={this.props.themeType}\n            value={this.state.icons[this.state.iconDialog]}\n            onClose={(icon: string) => {\n                this.setState({ iconDialog: null });\n                if (icon !== null) {\n                    const icons = [...this.state.icons];\n                    if (typeof this.state.iconDialog === 'number') {\n                        icons[this.state.iconDialog] = icon;\n                    }\n                    this.setState({ icons, iconDialog: null });\n                }\n            }}\n        />;\n    }\n\n    renderImageDialog(): React.JSX.Element | null {\n        if (this.state.imageDialog === null) {\n            return null;\n        }\n        let value = this.state.images[this.state.imageDialog];\n        if (value.startsWith('../')) {\n            value = value.substring(3);\n        } else if (value.startsWith('_PRJ_NAME/')) {\n            value = value.replace('_PRJ_NAME/', `../${this.props.adapterName}.${this.props.instance}/${this.props.projectName}/`);\n        }\n\n        const onChange = (selected: string | undefined, isClose: boolean) => {\n            const projectPrefix = `${this.props.adapterName}.${this.props.instance}/${this.props.projectName}/`;\n            if (selected?.startsWith(projectPrefix)) {\n                selected = `_PRJ_NAME/${selected.substring(projectPrefix.length)}`;\n            } else if (selected?.startsWith('/')) {\n                selected = `..${selected}`;\n            } else if (selected && !selected.startsWith('.')) {\n                selected = `../${selected}`;\n            }\n            const images = [...this.state.images];\n            if (typeof this.state.imageDialog === 'number') {\n                images[this.state.imageDialog] = selected || '';\n            }\n            this.setState({ images });\n\n            isClose && this.setState({ imageDialog: null });\n        };\n\n        return <SelectFileDialog\n            key=\"imageDialog\"\n            title={I18n.t('jqui_Select file')}\n            onClose={() => this.setState({ imageDialog: null })}\n            restrictToFolder={`${this.props.adapterName}.${this.props.instance}/${this.props.projectName}`}\n            allowNonRestricted\n            allowUpload\n            allowDownload\n            allowCreateFolder\n            allowDelete\n            allowView\n            showToolbar\n            imagePrefix=\"../\"\n            selected={value}\n            filterByType=\"images\"\n            onOk={(selectedOrArray: string | string[] | undefined) =>\n                onChange(Array.isArray(selectedOrArray) ? selectedOrArray[0] : selectedOrArray, true)}\n            socket={this.props.socket as any as Connection}\n        />;\n    }\n\n    /**\n     * Called when Bulk Editor data is submitted\n     */\n    onEnter() {\n        const values = [...this.state.values];\n\n        if (this.state.editDialog?.add) {\n            const index = values.length;\n            values[index] = this.state.editDialog.value;\n\n            const texts = [...this.state.texts];\n            const icons = [...this.state.icons];\n            const images = [...this.state.images];\n            const colors = [...this.state.colors];\n            const activeColors = [...this.state.activeColors];\n            const tooltips = [...this.state.tooltips];\n            texts[index] = texts[index] || '';\n            icons[index] = icons[index] || '';\n            images[index] = images[index] || '';\n            colors[index] = colors[index] || '';\n            activeColors[index] = activeColors[index] || '';\n            tooltips[index] = tooltips[index] || '';\n\n            this.setState({\n                values,\n                texts,\n                icons,\n                images,\n                colors,\n                activeColors,\n                tooltips,\n                editDialog: null,\n            });\n        } else {\n            if (this.state.editDialog?.index !== undefined) {\n                values[this.state.editDialog.index] = this.state.editDialog.value;\n            }\n\n            this.setState({\n                values,\n                editDialog: null,\n            });\n        }\n    }\n\n    renderEditDialog(): React.JSX.Element | null {\n        if (!this.state.editDialog) {\n            return null;\n        }\n        const isUnique = !this.state.values.map(v => (typeof v === 'string' ? v.trim() : v)).includes(this.state.editDialog.value);\n\n        return <Dialog\n            key=\"editDialog\"\n            maxWidth=\"sm\"\n            open={!0}\n            onClose={() => this.setState({ editDialog: null })}\n        >\n            <DialogTitle>{this.state.editDialog.add ? I18n.t('jqui_Add new value') : I18n.t('Edit')}</DialogTitle>\n            <DialogContent>\n                <TextField\n                    onKeyDown={e => e.keyCode === 13 && isUnique && this.state.editDialog?.value && this.onEnter()}\n                    fullWidth\n                    autoFocus\n                    variant=\"standard\"\n                    label={I18n.t('Value')}\n                    value={this.state.editDialog.value}\n                    onChange={e => {\n                        if (this.state.editDialog) {\n                            this.setState({\n                                editDialog: {\n                                    value: e.target.value,\n                                    add: this.state.editDialog.add,\n                                    index: this.state.editDialog.index,\n                                },\n                            });\n                        }\n                    }}\n                />\n            </DialogContent>\n            <DialogActions>\n                <Button\n                    variant=\"contained\"\n                    color=\"primary\"\n                    disabled={!isUnique || !this.state.editDialog.value}\n                    startIcon={this.state.editDialog.add ? <Add /> : <Check />}\n                    onClick={() => this.onEnter()}\n                >\n                    {this.state.editDialog.add ? I18n.t('Add') : I18n.t('Apply')}\n                </Button>\n                <Button\n                    variant=\"contained\"\n                    // @ts-expect-error this is fine\n                    color=\"grey\"\n                    startIcon={<Close />}\n                    onClick={() => this.setState({ editDialog: null })}\n                >\n                    {I18n.t('Cancel')}\n                </Button>\n            </DialogActions>\n        </Dialog>;\n    }\n\n    renderLine(i: number): React.JSX.Element {\n        let image = null;\n        this.textRef[i] = this.textRef[i] || React.createRef();\n        if (!this.state.icons[i]) {\n            const value = this.state.images[i];\n\n            const urlPopper = <Popper\n                key=\"popper\"\n                open={!!(this.state.textDialogFocused[i] && value?.toString().startsWith(window.location.origin))}\n                anchorEl={this.textRef[i]?.current}\n                placement=\"bottom\"\n                transition\n            >\n                {({ TransitionProps }) => <Fade {...TransitionProps} timeout={350}>\n                    <Paper>\n                        <Button\n                            style={{ textTransform: 'none' }}\n                            onClick={() => {\n                                const images = [...this.state.images];\n                                images[i] = `.${images[i].toString().slice(window.location.origin.length)}`;\n                                this.setState({ images });\n                            }}\n                        >\n                            {I18n.t('jqui_Replace to')}\n                            {` .${value.toString().slice(window.location.origin.length)}`}\n                        </Button>\n                        <IconButton\n                            size=\"small\"\n                            onClick={() => {\n                                const textDialogFocused = [...this.state.textDialogFocused];\n                                textDialogFocused[i] = false;\n                                this.setState({ textDialogFocused });\n                            }}\n                        >\n                            <ClearIcon fontSize=\"small\" />\n                        </IconButton>\n                    </Paper>\n                </Fade>}\n            </Popper>;\n            image = [\n                <TextField\n                    key=\"image\"\n                    variant=\"standard\"\n                    fullWidth\n                    InputProps={{\n                        classes: { input: Utils.clsx(this.props.classes.clearPadding, this.props.classes.fieldContent) },\n                        endAdornment: <Button size=\"small\" onClick={() => this.setState({ imageDialog: i })}>...</Button>,\n                    }}\n                    ref={this.textRef[i]}\n                    value={this.state.images[i] || ''}\n                    onFocus={() => {\n                        const textDialogFocused = [...this.state.textDialogFocused];\n                        textDialogFocused[i] = true;\n                        this.setState({ textDialogFocused });\n                    }}\n                    onBlur={() => {\n                        const textDialogFocused = [...this.state.textDialogFocused];\n                        textDialogFocused[i] = false;\n                        this.setState({ textDialogFocused });\n                    }}\n                    onChange={e => {\n                        const images = [...this.state.images];\n                        images[i] = e.target.value;\n                        this.setState({ images });\n                    }}\n                />,\n                urlPopper,\n            ];\n        }\n\n        let button;\n        let iconSrc = this.state.images[i] || this.state.icons[i] || '';\n        if (iconSrc.startsWith('_PRJ_NAME/')) {\n            iconSrc = iconSrc.replace('_PRJ_NAME/', `../${this.props.adapterName}.${this.props.instance}/${this.props.projectName}/`);\n        }\n\n        if (this.props.data.type === 'radio') {\n            const icon = <Icon src={iconSrc} style={{ width: 24, height: 24 }} />;\n            const text = <div style={{ display: 'flex', gap: 4 }}>\n                {icon}\n                {this.state.texts[i]}\n            </div>;\n            button = <FormControlLabel\n                control={<Radio\n                    onClick={() => this.setState({ activeLine: i })}\n                    checked={this.state.activeLine === i}\n                />}\n                labelPlacement=\"end\"\n                label={text}\n            />;\n        } else if (this.props.data.type === 'select') {\n            const icon = <Icon src={iconSrc} style={{ width: 24, height: 24 }} />;\n            const text = <div style={{ display: 'flex', gap: 4 }}>\n                {icon}\n                {this.state.texts[i]}\n            </div>;\n            button = <MenuItem\n                onClick={() => this.setState({ activeLine: i })}\n                selected={this.state.activeLine === i}\n            >\n                {text}\n            </MenuItem>;\n        } else {\n            button = <Button\n                style={{ color: this.state.activeLine === i ? (this.state.activeColors[i] || this.state.colors[i]) : this.state.colors[i] || undefined }}\n                // @ts-expect-error this is fine\n                color={this.state.activeLine === i ? 'primary' : 'grey'}\n                variant={this.props.data.variant === undefined ? 'contained' : this.props.data.variant}\n                onClick={() => this.setState({ activeLine: i })}\n                startIcon={<Icon src={iconSrc} style={{ width: 24, height: 24 }} />}\n            >\n                {this.state.texts[i]}\n            </Button>;\n        }\n\n        return <TableRow key={`${this.state.values[i]}_${i}`}>\n            <TableCell style={{ display: 'flex', alignItems: 'center' }}>\n                {this.state.values[i]}\n                <IconButton\n                    size=\"small\"\n                    onClick={() => this.setState({ editDialog: { add: false, index: i, value: this.state.values[i] } })}\n                >\n                    <Edit />\n                </IconButton>\n            </TableCell>\n            <TableCell>\n                <TextField\n                    size=\"small\"\n                    fullWidth\n                    variant=\"standard\"\n                    value={this.state.texts[i] || ''}\n                    onChange={e => {\n                        const texts = [...this.state.texts];\n                        texts[i] = e.target.value;\n                        this.setState({ texts });\n                    }}\n                />\n            </TableCell>\n            <TableCell>\n                {this.state.images[i] ? null : <div style={{ display: 'flex', width: '100%', alignItems: 'center' }}>\n                    <TextField\n                        fullWidth\n                        size=\"small\"\n                        variant=\"standard\"\n                        value={this.state.icons[i] || ''}\n                        onChange={e => {\n                            const icons = [...this.state.icons];\n                            icons[i] = e.target.value;\n                            this.setState({ icons });\n                        }}\n                        InputProps={{\n                            endAdornment: this.state.icons[i] ? <IconButton\n                                size=\"small\"\n                                onClick={() => {\n                                    const icons = [...this.state.icons];\n                                    icons[i] = '';\n                                    this.setState({ icons });\n                                }}\n                            >\n                                <Clear />\n                            </IconButton> : null,\n                            classes: {\n                                input: Utils.clsx(this.props.classes.clearPadding, this.props.classes.fieldContent),\n                            },\n                        }}\n                    />\n                    <Button\n                        variant={this.state.icons[i] ? 'outlined' : undefined}\n                        // @ts-expect-error this is fine\n                        color={this.state.icons[i] ? 'grey' : undefined}\n                        onClick={() => this.setState({ iconDialog: i })}\n                    >\n                        {this.state.icons[i] ? <Icon src={this.state.icons[i]} style={{ width: 36, height: 36 }} /> : '...'}\n                    </Button>\n                </div>}\n            </TableCell>\n            <TableCell>\n                {image}\n            </TableCell>\n            <TableCell>\n                <ColorPicker\n                    value={this.state.colors[i]}\n                    onChange={color => {\n                        const colors = [...this.state.colors];\n                        colors[i] = color;\n                        this.setState({ colors });\n                    }}\n                />\n            </TableCell>\n            <TableCell>\n                <ColorPicker\n                    value={this.state.activeColors[i]}\n                    onChange={color => {\n                        const activeColors = [...this.state.activeColors];\n                        activeColors[i] = color;\n                        this.setState({ activeColors });\n                    }}\n                />\n            </TableCell>\n            <TableCell>\n                <TextField\n                    size=\"small\"\n                    fullWidth\n                    variant=\"standard\"\n                    value={this.state.tooltips[i] || ''}\n                    onChange={e => {\n                        const tooltips = [...this.state.tooltips];\n                        tooltips[i] = e.target.value;\n                        this.setState({ tooltips });\n                    }}\n                />\n            </TableCell>\n            <TableCell>\n                <IconButton onClick={() => this.setState({ dialogDelete: i })}>\n                    <Delete />\n                </IconButton>\n            </TableCell>\n            <TableCell>\n                {button}\n            </TableCell>\n        </TableRow>;\n    }\n\n    renderMinMaxDialog() {\n        if (!this.state.minMaxDialog) {\n            return null;\n        }\n        const buttons = [];\n        const step = Math.round((this.state.max - this.state.min) / this.state.steps);\n        for (let i = this.state.min; i < this.state.max; i += step) {\n            let value = i;\n            if (this.state.usePercents) {\n                value = Math.round(((i - this.state.min) / (this.state.max - this.state.min)) * 100);\n            }\n            buttons.push(<Button\n                key={i}\n                variant=\"contained\"\n                disabled\n            >\n                {Math.round(value).toString() + this.state.unit}\n            </Button>);\n        }\n        buttons.push(<Button\n            key={1000}\n            variant=\"contained\"\n            disabled\n        >\n            {(this.state.usePercents ? 100 : this.state.max).toString() + this.state.unit}\n        </Button>);\n\n        return <Dialog\n            key=\"minMaxDialog\"\n            fullWidth\n            maxWidth=\"md\"\n            open={!0}\n            onClose={() => this.setState({ minMaxDialog: false })}\n        >\n            <DialogTitle>{I18n.t('jqui_Number settings')}</DialogTitle>\n            <DialogContent>\n                {this.state.min !== 0 || this.state.max !== 100 ? <div style={{ width: '100%' }}>\n                    <FormControlLabel\n                        control={<Checkbox\n                            checked={this.state.usePercents}\n                            onChange={e => {\n                                let unit = this.state.unit;\n                                if (e.target.checked) {\n                                    unit = unit || '%';\n                                } else if (unit === '%') {\n                                    unit = this.state.originalUnit || '';\n                                }\n                                this.setState({ usePercents: e.target.checked, unit });\n                            }}\n                        />}\n                        label={I18n.t('jqui_Percents')}\n                    />\n                </div> : null}\n                <TextField\n                    fullWidth\n                    type=\"number\"\n                    variant=\"standard\"\n                    label={I18n.t('jqui_Minimum value')}\n                    value={this.state.min}\n                    onChange={e => this.setState({ min: Number(e.target.value) })}\n                />\n                <TextField\n                    fullWidth\n                    type=\"number\"\n                    variant=\"standard\"\n                    label={I18n.t('jqui_Maximum value')}\n                    value={this.state.max}\n                    onChange={e => this.setState({ max: Number(e.target.value) })}\n                />\n                <div style={{ width: '100%' }}>\n                    <div style={{ width: '100%' }}>\n                        {I18n.t('Steps')}\n                    </div>\n                    <div style={{ width: '100%' }}>\n                        <Slider\n                            value={this.state.steps}\n                            step={1}\n                            valueLabelDisplay=\"auto\"\n                            min={2}\n                            max={20}\n                            marks={[\n                                {\n                                    value: 0,\n                                    label: '0',\n                                },\n                                {\n                                    value: 20,\n                                    label: '20',\n                                },\n                            ]}\n                            onChange={(e, value) => this.setState({ steps: value as number })}\n                        />\n                    </div>\n                </div>\n                <TextField\n                    fullWidth\n                    variant=\"standard\"\n                    label={I18n.t('Unit')}\n                    value={this.state.unit}\n                    onChange={e => this.setState({ unit: e.target.value })}\n                />\n                <ButtonGroup\n                    style={{ marginTop: 20 }}\n                    variant={this.props.data.variant === undefined ? 'contained' : this.props.data.variant}\n                >\n                    {buttons}\n                </ButtonGroup>\n            </DialogContent>\n            <DialogActions>\n                <Button\n                    variant=\"contained\"\n                    color=\"primary\"\n                    startIcon={<Check />}\n                    onClick={() => {\n                        const newState: BulkEditorState = {\n                            ...this.state,\n                            minMaxDialog: false,\n                            values: [],\n                            texts: [...this.state.texts],\n                            icons: [...this.state.icons],\n                            images: [...this.state.images],\n                            colors: [...this.state.colors],\n                            activeColors: [...this.state.activeColors],\n                            tooltips: [...this.state.tooltips],\n                        };\n\n                        const _step = Math.round((this.state.max - this.state.min) / this.state.steps);\n                        let index = 0;\n                        for (let i = this.state.min; i < this.state.max; i += _step) {\n                            if (this.state.usePercents) {\n                                newState.texts[index] = Math.round(((i - this.state.min) / (this.state.max - this.state.min)) * 100) + this.state.unit;\n                            } else {\n                                newState.texts[index] = i + this.state.unit;\n                            }\n                            newState.values[index] = i.toString();\n                            newState.icons[index] = newState.icons[index] || '';\n                            newState.images[index] = newState.images[index] || '';\n                            newState.colors[index] = newState.colors[index] || '';\n                            newState.activeColors[index] = newState.activeColors[index] || '';\n                            newState.tooltips[index] = newState.tooltips[index] || '';\n                            index++;\n                        }\n                        newState.values[index] = this.state.max.toString();\n                        newState.texts[index] = 100 + this.state.unit;\n                        this.setState(newState);\n                    }}\n                >\n                    {I18n.t('Apply')}\n                </Button>\n                <Button\n                    variant=\"contained\"\n                    // @ts-expect-error this is fine\n                    color=\"grey\"\n                    startIcon={<Close />}\n                    onClick={() => this.setState({ minMaxDialog: false })}\n                >\n                    {I18n.t('Cancel')}\n                </Button>\n            </DialogActions>\n        </Dialog>;\n    }\n\n    renderDialog() {\n        if (!this.state.dialog) {\n            return null;\n        }\n\n        return <Dialog\n            key=\"dialog\"\n            fullWidth\n            maxWidth=\"lg\"\n            open={!0}\n            onClose={() => this.setState({ dialog: false })}\n        >\n            <DialogTitle>{I18n.t('jqui_Bulk edit')}</DialogTitle>\n            <DialogContent>\n                <Button\n                    variant=\"contained\"\n                    onClick={async () => {\n                        const oid = this.props.data.oid;\n                        const newState: BulkEditorState = {\n                            ...this.state,\n                            minMaxDialog: true,\n                            usePercents: true,\n                            min: this.state.min,\n                            max: this.state.max || 100,\n                            steps: 4,\n                            unit: '%',\n                        };\n\n                        if (oid && oid !== 'nothing_selected') {\n                            const obj = await this.props.socket.getObject(oid);\n                            newState.min = obj?.common?.min;\n                            if (newState.min === undefined || newState.min === null) {\n                                newState.min = 0;\n                            }\n                            newState.max = obj?.common?.max;\n                            if (newState.max === undefined || newState.max === null) {\n                                newState.max = 100;\n                            }\n                            newState.originalUnit = obj?.common?.unit || '';\n                        }\n                        this.setState(newState);\n                    }}\n                >\n                    {I18n.t('jqui_Generate steps')}\n                </Button>\n                {this.state.states ? <Button\n                    variant=\"contained\"\n                    onClick={() => this.calculateFirst(true)}\n                >\n                    {I18n.t('jqui_Generate states')}\n                </Button> : null}\n                <Table>\n                    <TableHead>\n                        <TableRow>\n                            <TableCell>\n                                {I18n.t('Value')}\n                            </TableCell>\n                            <TableCell>{I18n.t('Text')}</TableCell>\n                            <TableCell>{I18n.t('Icon')}</TableCell>\n                            <TableCell>{I18n.t('Image')}</TableCell>\n                            <TableCell>{I18n.t('color')}</TableCell>\n                            <TableCell>{I18n.t('jqui_active_color')}</TableCell>\n                            <TableCell>{I18n.t('jqui_tooltip')}</TableCell>\n                            <TableCell>\n                                <Fab\n                                    size=\"small\"\n                                    style={{ marginRight: 8 }}\n                                    onClick={() => this.setState({ editDialog: { add: true, value: '' } })}\n                                >\n                                    <Add />\n                                </Fab>\n                            </TableCell>\n                            <TableCell>\n                                {I18n.t('jqui_Example')}\n                            </TableCell>\n                        </TableRow>\n                    </TableHead>\n                    <TableBody>\n                        {this.state.values.map((_, i) => this.renderLine(i))}\n                    </TableBody>\n                </Table>\n            </DialogContent>\n            <DialogActions>\n                <Button\n                    variant=\"contained\"\n                    color=\"primary\"\n                    startIcon={<Check />}\n                    onClick={() => {\n                        // apply changes\n                        const data = { ...this.props.data };\n                        for (let i = 0; i < this.state.values.length; i++) {\n                            data[`text${i + 1}`] = this.state.texts[i];\n                            data[`value${i + 1}`] = this.state.values[i];\n                            data[`icon${i + 1}`] = this.state.icons[i];\n                            data[`image${i + 1}`] = this.state.images[i];\n                            data[`color${i + 1}`] = this.state.colors[i];\n                            data[`tooltip${i + 1}`] = this.state.tooltips[i];\n                            data[`activeColor${i + 1}`] = this.state.activeColors[i];\n                            data[`g_states-${i + 1}`] = true;\n                        }\n                        // delete all others\n                        for (let i = this.state.values.length + 1; i < 30; i++) {\n                            delete data[`text${i}`];\n                            delete data[`value${i}`];\n                            delete data[`icon${i}`];\n                            delete data[`image${i}`];\n                            delete data[`color${i}`];\n                            delete data[`tooltip${i}`];\n                            delete data[`activeColor${i}`];\n                            delete data[`g_states-${i}`];\n                        }\n\n                        data.count = this.state.values.length;\n\n                        this.props.onDataChange(data);\n\n                        this.setState({ dialog: false });\n                    }}\n                >\n                    {I18n.t('Apply')}\n                </Button>\n                <Button\n                    variant=\"contained\"\n                    // @ts-expect-error this works\n                    color=\"grey\"\n                    startIcon={<Close />}\n                    onClick={() => this.setState({ dialog: false })}\n                >\n                    {I18n.t('Cancel')}\n                </Button>\n            </DialogActions>\n        </Dialog>;\n    }\n\n    render() {\n        return [\n            <Button\n                fullWidth\n                key=\"button\"\n                variant=\"outlined\"\n                disabled={!this.props.data.oid}\n                onClick={() => this.calculateFirst()}\n            >\n                {I18n.t('jqui_generate')}\n            </Button>,\n            this.renderMinMaxDialog(),\n            this.renderImageDialog(),\n            this.renderMaterialDialog(),\n            this.renderDeleteDialog(),\n            this.renderDialog(),\n            this.renderEditDialog(),\n        ];\n    }\n}\n\nexport default withStyles(styles)(BulkEditor);\n","/**\n *  ioBroker.vis\n *  https://github.com/ioBroker/ioBroker.vis\n *\n *  Copyright (c) 2023 Denis Haev https://github.com/GermanBluefox,\n *  Creative Common Attribution-NonCommercial (CC BY-NC)\n *\n *  http://creativecommons.org/licenses/by-nc/4.0/\n *\n * Short content:\n * Licensees may copy, distribute, display and perform the work and make derivative works based on it only if they give the author or licensor the credits in the manner specified by these.\n * Licensees may copy, distribute, display, and perform the work and make derivative works based on it only for noncommercial purposes.\n * (Free for non-commercial use).\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\n\nimport {\n    Button,\n    Tooltip,\n    ButtonGroup, Radio,\n    RadioGroup,\n    FormControlLabel, MenuItem,\n    Select,\n    FormControl,\n    InputLabel,\n    FormLabel, Slider,\n    List,\n} from '@mui/material';\n\nimport {\n    I18n,\n    Icon,\n} from '@iobroker/adapter-react-v5';\n\n// eslint-disable-next-line import/no-cycle\nimport VisRxWidget from '../../visRxWidget';\nimport BulkEditor from './BulkEditor';\nimport { deepClone } from '../../../Utils/utils';\n\nclass JQuiState extends VisRxWidget {\n    static getWidgetInfo() {\n        return {\n            id: 'tplJquiButtonState',\n            visSet: 'jqui',\n            visName: 'States control',\n            visWidgetLabel: 'jqui_states_control',\n            visPrev: 'widgets/jqui/img/Prev_ButtonState.png',\n            visOrder: 14,\n            visAttrs: [\n                {\n                    name: 'common',\n                    fields: [\n                        {\n                            name: 'type',\n                            label: 'jqui_type',\n                            type: 'select',\n                            noTranslation: true,\n                            default: 'button',\n                            options: ['button', 'select', 'radio', 'slider'],\n                        },\n                        {\n                            name: 'oid',\n                            type: 'id',\n                            onChange: async (field, data, changeData, socket) => {\n                                if (data[field.name]) {\n                                    if (await BulkEditor.generateFields(data, socket)) {\n                                        changeData(data);\n                                    }\n                                }\n                            },\n                        },\n                        {\n                            name: 'readOnly',\n                            type: 'checkbox',\n                        },\n                        {\n                            name: 'click_id',\n                            type: 'id',\n                            noSubscribe: true,\n                            hidden: data => !!data.readOnly,\n                        },\n                        {\n                            name: 'count',\n                            type: 'slider',\n                            min: 0,\n                            default: 1,\n                            max: 10,\n                            hidden: data => !!data.percents,\n                        },\n                        {\n                            type: 'custom',\n                            component: (\n                                field,\n                                data,\n                                onDataChange,\n                                props, // {context: {views, view, socket, themeType, projectName, adapterName, instance, id, widget}, selectedView, selectedWidget, selectedWidgets}\n                            ) => <BulkEditor\n                                // TODO: if multiple widgets of this type selected data will get undefined, check why\n                                data={data || {}}\n                                onDataChange={onDataChange}\n                                socket={props.context.socket}\n                                themeType={props.context.themeType}\n                                adapterName={props.context.adapterName}\n                                instance={props.context.instance}\n                                projectName={props.context.projectName}\n                            />,\n                        },\n                        {\n                            name: 'variant',\n                            label: 'jqui_variant',\n                            type: 'select',\n                            noTranslation: true,\n                            options: ['contained', 'outlined', 'text', 'standard'],\n                            default: 'contained',\n                            hidden: data => data.type !== 'button' && data.type !== 'select',\n                        },\n                        {\n                            name: 'orientation',\n                            label: 'orientation',\n                            type: 'select',\n                            options: ['horizontal', 'vertical'],\n                            default: 'horizontal',\n                            hidden: data => data.type !== 'button' && data.type !== 'slider',\n                        },\n                        {\n                            name: 'widgetTitle',\n                            label: 'jqui_name',\n                            type: 'text',\n                        },\n                        {\n                            name: 'timeout',\n                            label: 'jqui_set_timeout',\n                            type: 'number',\n                            hidden: data => data.type !== 'slider',\n                        },\n                        {\n                            name: 'open',\n                            label: 'jqui_open',\n                            type: 'checkbox',\n                            hidden: data => data.type !== 'select',\n                        },\n                    ],\n                },\n                {\n                    name: 'states',\n                    label: 'jqui_group_value',\n                    indexFrom: 1,\n                    indexTo: 'count',\n                    hidden: data => !!data.percents,\n                    fields: [\n                        {\n                            name: 'value',\n                            type: 'text',\n                            label: 'jqui_value',\n                            default: '0',\n                        },\n                        {\n                            name: 'test',\n                            type: 'checkbox',\n                            label: 'jqui_test',\n                            onChange: async (field, data, changeData, socket, index) => {\n                                if (data[field.name]) {\n                                    let changed = false;\n                                    // deactivate all other tests\n                                    for (let i = 1; i <= data.count; i++) {\n                                        if (i !== index) {\n                                            if (data[`test${i}`]) {\n                                                changed = true;\n                                                data[`test${i}`] = false;\n                                            }\n                                        }\n                                    }\n                                    changed && changeData(data);\n                                }\n                            },\n                            hidden: (data, index) => data.type === 'slider' || data[`value${index}`] === '' || data[`value${index}`] === null || data[`value${index}`] === undefined,\n                        },\n                        {\n                            name: 'onlyIcon',\n                            type: 'checkbox',\n                            label: 'jqui_only_icon',\n                        },\n                        {\n                            name: 'text',\n                            default: I18n.t('Value'),\n                            type: 'text',\n                            label: 'jqui_text',\n                            hidden: (data, index) => !!data[`onlyIcon${index}`] || data[`value${index}`] === '' || data[`value${index}`] === null || data[`value${index}`] === undefined,\n                        },\n                        {\n                            name: 'color',\n                            type: 'color',\n                            label: 'color',\n                            hidden: (data, index) => data.type === 'slider' || data[`value${index}`] === '' || data[`value${index}`] === null || data[`value${index}`] === undefined,\n                        },\n                        {\n                            name: 'activeColor',\n                            type: 'color',\n                            label: 'jqui_active_color',\n                            hidden: (data, index) => data.type === 'slider' || data[`value${index}`] === '' || data[`value${index}`] === null || data[`value${index}`] === undefined,\n                        },\n                        {\n                            name: 'image',\n                            label: 'jqui_image',\n                            type: 'image',\n                            hidden: (data, index) => data.type === 'slider' || !!data.icon || data[`value${index}`] === '' || data[`value${index}`] === null || data[`value${index}`] === undefined,\n                        },\n                        {\n                            name: 'icon',\n                            label: 'jqui_icon',\n                            type: 'icon64',\n                            hidden: (data, index) => data.type === 'slider' || !!data.image || data[`value${index}`] === '' || data[`value${index}`] === null || data[`value${index}`] === undefined,\n                        },\n                        {\n                            name: 'tooltip',\n                            label: 'jqui_tooltip',\n                            type: 'text',\n                            hidden: (data, index) => data.type === 'slider' || data[`value${index}`] === '' || data[`value${index}`] === null || data[`value${index}`] === undefined,\n                        },\n                    ],\n                },\n            ],\n            visDefaultStyle: {\n                width: 300,\n                height: 40,\n            },\n        };\n    }\n\n    async componentDidMount() {\n        await super.componentDidMount();\n\n        // convert old tplJquiRadioSteps data to JquiState data\n        if (this.props.tpl === 'tplJquiRadioSteps' && this.state.data && this.props.context.onWidgetsChanged && this.state.data.count === undefined) {\n            const data = deepClone(this.state.data);\n\n            data.count = 5;\n            const min = parseFloat(data.min || 0, 10);\n            const max = parseFloat(data.max || 100, 10);\n\n            data.value1 = min;\n            data.text1 = I18n.t('jqui_off');\n            data['g_states-1'] = true;\n\n            data.value5 = max;\n            data.text5 = '100%';\n            data['g_states-5'] = true;\n\n            data.value2 = (max - min) * 0.25 + min;\n            data.text2 = '25%';\n            data['g_states-2'] = true;\n\n            data.value3 = (max - min) * 0.5 + min;\n            data.text3 = '50%';\n            data['g_states-3'] = true;\n\n            data.value4 = (max - min) * 0.75 + min;\n            data.text4 = '75%';\n            data['g_states-4'] = true;\n\n            data.min = null;\n            data.max = null;\n\n            setTimeout(() => this.props.context.onWidgetsChanged([{\n                wid: this.props.id,\n                view: this.props.view,\n                data,\n            }]), 100);\n        }\n\n        // convert old tplJquiRadioList data to JquiState data\n        if ((this.props.tpl === 'tplJquiRadioList' || this.props.tpl === 'tplJquiSelectList') && this.state.data && this.state.data.values && this.state.data.texts && this.props.context.onWidgetsChanged) {\n            // convert\n            const values = this.state.data.values.split(';');\n            const texts = this.state.data.texts.split(';');\n            const data = deepClone(this.state.data);\n            data.values = null;\n            data.texts = null;\n            data.count = values.length;\n            for (let i = 1; i <= values.length; i++) {\n                data[`value${i}`] = values[i - 1];\n                data[`text${i}`] = texts[i - 1];\n                data[`g_states-${i}`] = true;\n            }\n            data.type = this.props.tpl === 'tplJquiRadioList' ? 'radio' : 'select';\n            setTimeout(() => this.props.context.onWidgetsChanged([{\n                wid: this.props.id,\n                view: this.props.view,\n                data,\n            }]), 100);\n        }\n\n        if (this.state.rxData.oid && this.state.rxData.oid !== 'nothing_selected') {\n            try {\n                const state = await this.props.context.socket.getState(this.state.rxData.oid);\n                this.onStateUpdated(this.state.rxData.oid, state);\n            } catch (error) {\n                console.error(`Cannot get state ${this.state.rxData.oid}: ${error}`);\n            }\n        }\n    }\n\n    async componentWillUnmount() {\n        super.componentWillUnmount();\n        this.controlTimeout && clearTimeout(this.controlTimeout);\n        this.controlTimeout = null;\n    }\n\n    static findField(widgetInfo, name) {\n        return VisRxWidget.findField(widgetInfo, name);\n    }\n\n    // eslint-disable-next-line class-methods-use-this\n    getWidgetInfo() {\n        return JQuiState.getWidgetInfo();\n    }\n\n    onStateUpdated(id, state) {\n        if (id === this.state.rxData.oid && state) {\n            const value = state.val === null || state.val === undefined ? '' : state.val;\n\n            if (this.state.value !== value.toString()) {\n                this.setState({ value: value.toString() });\n            }\n        }\n    }\n\n    getControlOid() {\n        if (this.state.rxData.click_id && this.state.rxData.click_id !== 'nothing_selected') {\n            return this.state.rxData.click_id;\n        }\n        if (this.state.rxData.oid && this.state.rxData.oid !== 'nothing_selected') {\n            return this.state.rxData.oid;\n        }\n        return '';\n    }\n\n    async onClick(indexOrValue, immediately) {\n        if (this.state.rxData.readOnly || this.props.editMode) {\n            return;\n        }\n\n        if (this.state.rxData.type === 'slider') {\n            this.controlTimeout && clearTimeout(this.controlTimeout);\n            this.controlTimeout = setTimeout(() => {\n                this.controlTimeout = null;\n                const oid = this.getControlOid();\n                if (oid) {\n                    this.props.context.setValue(oid, parseFloat(indexOrValue));\n                }\n            }, immediately ? 0 : parseInt(this.state.rxData.timeout, 10) || 300);\n            this.setState({ value: indexOrValue });\n        } else {\n            const oid = this.getControlOid();\n            if (oid) {\n                if (this.state.object.common.type === 'number') {\n                    this.props.context.setValue(oid, parseFloat(this.state.rxData[`value${indexOrValue}`]));\n                } else {\n                    this.props.context.setValue(oid, this.state.rxData[`value${indexOrValue}`]);\n                }\n            }\n            this.setState({ value: this.state.rxData[`value${indexOrValue}`] });\n        }\n    }\n\n    getSelectedIndex(value) {\n        if (value === undefined) {\n            value = this.state.value;\n        }\n\n        if (this.props.editMode) {\n            for (let i = 1; i <= this.state.rxData.count; i++) {\n                if (this.state.rxData[`test${i}`]) {\n                    return i;\n                }\n            }\n        }\n        for (let i = 1; i <= this.state.rxData.count; i++) {\n            if (this.state.rxData[`value${i}`] === value) {\n                return i;\n            }\n        }\n        return 0;\n    }\n\n    renderIcon(i, selectedIndex) {\n        let color;\n        let icon = this.state.rxData[`icon${i}`] || this.state.rxData[`image${i}`];\n        if (icon && this.state.rxData[`color${i}`]) {\n            color = this.state.rxData[`color${i}`];\n            if (i === selectedIndex && this.state.rxData[`activeColor${i}`]) {\n                color = this.state.rxData[`activeColor${i}`];\n            }\n        }\n\n        if (icon) {\n            if (icon.startsWith('_PRJ_NAME/')) {\n                icon = icon.replace('_PRJ_NAME/', `../${this.props.context.adapterName}.${this.props.context.instance}/${this.props.context.projectName}/`);\n            }\n            const style = { color };\n            style.width = 'auto';\n            style.height = 24;\n\n            return <Icon\n                key=\"icon\"\n                style={style}\n                src={icon}\n            />;\n        }\n        return null;\n    }\n\n    renderText(i, selectedIndex) {\n        if (this.state.rxData[`onlyIcon${i}`]) {\n            return null;\n        }\n        let text = this.state.rxData[`text${i}`];\n        let color = this.state.rxData[`color${i}`];\n        if (i === selectedIndex && this.state.rxData[`activeColor${i}`]) {\n            color = this.state.rxData[`activeColor${i}`];\n        }\n\n        text = text || this.state.rxData[`value${i}`];\n\n        return <span style={{ color }}>{text}</span>;\n    }\n\n    renderButton(i, selectedIndex, buttonStyle) {\n        const icon = this.renderIcon(i, selectedIndex);\n        const text = this.renderText(i, selectedIndex);\n\n        // Button\n        const button = <Button\n            key={i}\n            style={{ ...buttonStyle, flexGrow: 1 }}\n            startIcon={text ? icon : undefined}\n            color={selectedIndex === i ? 'primary' : 'grey'}\n            onClick={() => this.onClick(i)}\n        >\n            {text || icon}\n        </Button>;\n\n        if (this.state.rxData[`tooltip${i}`]) {\n            return <Tooltip key={i} title={this.state.rxData[`tooltip${i}`]}>\n                {button}\n            </Tooltip>;\n        }\n\n        return button;\n    }\n\n    renderRadio(i, selectedIndex, buttonStyle) {\n        const icon = this.renderIcon(i, selectedIndex);\n        let text = this.renderText(i, selectedIndex);\n\n        if (icon && text) {\n            text = <div style={{ display: 'flex', gap: 4 }}>\n                {icon}\n                {text}\n            </div>;\n        }\n\n        // Button\n        const button = <FormControlLabel\n            key={i}\n            style={buttonStyle}\n            control={<Radio\n                onClick={() => this.onClick(i)}\n                checked={selectedIndex === i}\n            />}\n            labelPlacement=\"end\"\n            label={text || icon}\n        />;\n\n        if (this.state.rxData[`tooltip${i}`]) {\n            return <Tooltip key={i} title={this.state.rxData[`tooltip${i}`]}>\n                {button}\n            </Tooltip>;\n        }\n        return button;\n    }\n\n    renderMenuItem(i, selectedIndex, buttonStyle) {\n        const icon = this.renderIcon(i, selectedIndex);\n        let text = this.renderText(i, selectedIndex);\n\n        if (icon && text) {\n            text = <div style={{ display: 'flex', gap: 4 }}>\n                {icon}\n                {text}\n            </div>;\n        }\n\n        // Button\n        return <MenuItem\n            title={this.state.rxData[`tooltip${i}`]}\n            key={i}\n            selected={selectedIndex === i}\n            style={buttonStyle}\n            value={this.state.rxData[`value${i}`]}\n            onClick={this.state.rxData.open ? () => this.onClick(i) : undefined}\n        >\n            {text || icon}\n        </MenuItem>;\n    }\n\n    renderWidgetBody(props) {\n        super.renderWidgetBody(props);\n        const selectedIndex = this.getSelectedIndex();\n\n        if (this.state.object?._id !== this.state.rxData.oid && this.state.object !== false) {\n            this.state.object = false;\n            setTimeout(async () => {\n                if (this.state.rxData.oid && this.state.rxData.oid !== 'nothing_selected') {\n                    const obj = await this.props.context.socket.getObject(this.state.rxData.oid);\n                    if (obj?.common?.type) {\n                        this.setState({ object: { _id: obj._id, common: { type: obj.common.type } } });\n                        return;\n                    }\n                }\n                this.setState({ object: { _id: this.state.rxData.oid, common: { type: 'string' } } });\n            }, 0);\n        }\n\n        const buttonStyle = {};\n        // apply style from the element\n        Object.keys(this.state.rxStyle).forEach(attr => {\n            const value = this.state.rxStyle[attr];\n            if (value !== null &&\n                value !== undefined &&\n                VisRxWidget.POSSIBLE_MUI_STYLES.includes(attr)\n            ) {\n                attr = attr.replace(\n                    /(-\\w)/g,\n                    text => text[1].toUpperCase(),\n                );\n                buttonStyle[attr] = value;\n            }\n        });\n\n        let content;\n        if (\n            (!this.state.rxData.count ||\n                (this.state.rxData.count === 1 && !this.state.rxData.text0 && !this.state.rxData.icon0 && !this.state.rxData.image0)) &&\n            (!this.state.rxData.oid || this.state.rxData.oid === 'nothing_selected')\n        ) {\n            content = <Button\n                variant=\"outlined\"\n                style={{ width: '100%', height: '100%' }}\n            >\n                {I18n.t('Select object ID')}\n            </Button>;\n        } else if (!this.state.rxData.count) {\n            content = <Button\n                variant=\"outlined\"\n                style={{ width: '100%', height: '100%' }}\n            >\n                {I18n.t('Please define states')}\n            </Button>;\n        }  else if (this.state.rxData.type === 'radio') {\n            const buttons = [];\n            for (let i = 1; i <= this.state.rxData.count; i++) {\n                buttons.push(this.renderRadio(i, selectedIndex, buttonStyle));\n            }\n\n            content = <RadioGroup\n                style={{ width: '100%', height: '100%' }}\n                variant={this.state.rxData.variant === undefined ? 'contained' : this.state.rxData.variant}\n            >\n                {buttons}\n            </RadioGroup>;\n        } else if (this.state.rxData.type === 'select') {\n            const buttons = [];\n            for (let i = 1; i <= this.state.rxData.count; i++) {\n                buttons.push(this.renderMenuItem(i, selectedIndex, buttonStyle));\n            }\n\n            let variant = 'standard';\n            if (this.state.rxData.variant === 'contained') {\n                variant = 'filled';\n            } else if (this.state.rxData.variant === 'outlined') {\n                variant = 'outlined';\n            }\n\n            if (this.state.rxData.open) {\n                content = <List\n                    style={{ width: '100%', height: '100%' }}\n                    value={this.state.value}\n                    onChange={e => this.onClick(this.getSelectedIndex(e.target.value))}\n                    variant={variant}\n                >\n                    {buttons}\n                </List>;\n            } else {\n                content = <Select\n                    style={{ width: '100%', height: '100%' }}\n                    value={this.state.value === undefined ? '' : this.state.value}\n                    onChange={e => this.onClick(this.getSelectedIndex(e.target.value))}\n                    variant={variant}\n                >\n                    {buttons}\n                </Select>;\n            }\n        } else if (this.state.rxData.type === 'slider') {\n            props.style.overflow = 'visible';\n            const marks = [];\n            for (let i = 1; i <= this.state.rxData.count; i++) {\n                marks.push({\n                    value: parseFloat(this.state.rxData[`value${i}`] || 0),\n                    label: this.state.rxData[`text${i}`] || 0,\n                });\n            }\n\n            content = <Slider\n                style={!this.state.rxData.orientation || this.state.rxData.orientation === 'horizontal' ?\n                    { marginLeft: 20, marginRight: 20, width: 'calc(100% - 40px)' } :\n                    { marginTop: 10, marginBottom: 10 }}\n                value={parseFloat(this.state.value) || 0}\n                valueLabelDisplay=\"auto\"\n                min={marks[0].value}\n                max={marks[marks.length - 1].value}\n                orientation={this.state.rxData.orientation || 'horizontal'}\n                marks={marks}\n                onChangeCommitted={(e, value) => this.onClick(value, true)}\n                onChange={(e, value) => this.onClick(value)}\n            />;\n        } else {\n            const buttons = [];\n            for (let i = 1; i <= this.state.rxData.count; i++) {\n                buttons.push(this.renderButton(i, selectedIndex, buttonStyle));\n            }\n\n            content = <ButtonGroup\n                style={{ width: '100%', height: '100%' }}\n                orientation={this.state.rxData.orientation || 'horizontal'}\n                variant={this.state.rxData.variant === undefined ? 'contained' : this.state.rxData.variant}\n            >\n                {buttons}\n            </ButtonGroup>;\n        }\n\n        if (this.state.rxData.widgetTitle) {\n            content = <FormControl\n                fullWidth\n                style={{\n                    marginTop: this.state.rxData.type === 'select' ? 5 : undefined,\n                    width: '100%',\n                    height: '100%',\n                }}\n            >\n                {this.state.rxData.type === 'select' ?\n                    <InputLabel>{this.state.rxData.widgetTitle}</InputLabel> :\n                    <FormLabel style={this.state.rxData.type === 'slider' ? { marginLeft: 10 } : undefined}>{this.state.rxData.widgetTitle}</FormLabel>}\n                {content}\n            </FormControl>;\n        }\n\n        return <div className=\"vis-widget-body\">\n            {content}\n        </div>;\n    }\n}\n\nJQuiState.propTypes = {\n    id: PropTypes.string.isRequired,\n    context: PropTypes.object.isRequired,\n    view: PropTypes.string.isRequired,\n    editMode: PropTypes.bool.isRequired,\n    tpl: PropTypes.string.isRequired,\n};\n\nexport default JQuiState;\n","/**\n *  ioBroker.vis\n *  https://github.com/ioBroker/ioBroker.vis\n *\n *  Copyright (c) 2023 Denis Haev https://github.com/GermanBluefox,\n *  Creative Common Attribution-NonCommercial (CC BY-NC)\n *\n *  http://creativecommons.org/licenses/by-nc/4.0/\n *\n * Short content:\n * Licensees may copy, distribute, display and perform the work and make derivative works based on it only if they give the author or licensor the credits in the manner specified by these.\n * Licensees may copy, distribute, display, and perform the work and make derivative works based on it only for noncommercial purposes.\n * (Free for non-commercial use).\n */\n\nimport PropTypes from 'prop-types';\n\n// eslint-disable-next-line import/no-cycle\nimport JQuiState from './JQuiState';\n\nclass JQuiRadioList extends JQuiState {\n    static getWidgetInfo() {\n        const widgetInfo = JQuiState.getWidgetInfo();\n        const newWidgetInfo = {\n            id: 'tplJquiRadioList',\n            visSet: 'jqui',\n            visName: 'Radiobuttons ValueList',\n            visWidgetLabel: 'jqui_radio_list',\n            visPrev: 'widgets/jqui/img/Prev_RadioList.png',\n            visOrder: 15,\n            visAttrs: widgetInfo.visAttrs,\n            visDefaultStyle: {\n                width: 250,\n                height: 45,\n            },\n        };\n\n        const type = JQuiState.findField(newWidgetInfo, 'type');\n        type.default = 'radio';\n\n        // Add note\n        newWidgetInfo.visAttrs[0].fields.unshift({\n            name: '_note',\n            type: 'help',\n            text: 'jqui_state_note',\n        });\n\n        return newWidgetInfo;\n    }\n\n    // eslint-disable-next-line class-methods-use-this\n    getWidgetInfo() {\n        return JQuiRadioList.getWidgetInfo();\n    }\n}\n\nJQuiRadioList.propTypes = {\n    id: PropTypes.string.isRequired,\n    context: PropTypes.object.isRequired,\n    view: PropTypes.string.isRequired,\n    editMode: PropTypes.bool.isRequired,\n    tpl: PropTypes.string.isRequired,\n};\n\nexport default JQuiRadioList;\n","/**\n *  ioBroker.vis\n *  https://github.com/ioBroker/ioBroker.vis\n *\n *  Copyright (c) 2023 Denis Haev https://github.com/GermanBluefox,\n *  Creative Common Attribution-NonCommercial (CC BY-NC)\n *\n *  http://creativecommons.org/licenses/by-nc/4.0/\n *\n * Short content:\n * Licensees may copy, distribute, display and perform the work and make derivative works based on it only if they give the author or licensor the credits in the manner specified by these.\n * Licensees may copy, distribute, display, and perform the work and make derivative works based on it only for noncommercial purposes.\n * (Free for non-commercial use).\n */\n\nimport PropTypes from 'prop-types';\n\n// eslint-disable-next-line import/no-cycle\nimport JQuiState from './JQuiState';\n\nclass JQuiSelectList extends JQuiState {\n    static getWidgetInfo() {\n        const widgetInfo = JQuiState.getWidgetInfo();\n        const newWidgetInfo = {\n            id: 'tplJquiSelectList',\n            visSet: 'jqui',\n            visName: 'Select ValueList',\n            visWidgetLabel: 'jqui_select_list',\n            visPrev: 'widgets/jqui/img/Prev_SelectList.png',\n            visOrder: 16,\n            visAttrs: widgetInfo.visAttrs,\n            visDefaultStyle: {\n                width: 250,\n                height: 45,\n            },\n        };\n\n        const type = JQuiState.findField(newWidgetInfo, 'type');\n        type.default = 'select';\n\n        // Add note\n        newWidgetInfo.visAttrs[0].fields.unshift({\n            name: '_note',\n            type: 'help',\n            text: 'jqui_state_note',\n        });\n\n        return newWidgetInfo;\n    }\n\n    // eslint-disable-next-line class-methods-use-this\n    getWidgetInfo() {\n        return JQuiSelectList.getWidgetInfo();\n    }\n}\n\nJQuiSelectList.propTypes = {\n    id: PropTypes.string.isRequired,\n    context: PropTypes.object.isRequired,\n    view: PropTypes.string.isRequired,\n    editMode: PropTypes.bool.isRequired,\n    tpl: PropTypes.string.isRequired,\n};\n\nexport default JQuiSelectList;\n","/**\n *  ioBroker.vis\n *  https://github.com/ioBroker/ioBroker.vis\n *\n *  Copyright (c) 2023 Denis Haev https://github.com/GermanBluefox,\n *  Creative Common Attribution-NonCommercial (CC BY-NC)\n *\n *  http://creativecommons.org/licenses/by-nc/4.0/\n *\n * Short content:\n * Licensees may copy, distribute, display and perform the work and make derivative works based on it only if they give the author or licensor the credits in the manner specified by these.\n * Licensees may copy, distribute, display, and perform the work and make derivative works based on it only for noncommercial purposes.\n * (Free for non-commercial use).\n */\n\nimport PropTypes from 'prop-types';\n\n// eslint-disable-next-line import/no-cycle\nimport JQuiBinaryState from './JQuiBinaryState';\n\nclass JQuiIconStatePushButton extends JQuiBinaryState {\n    static getWidgetInfo() {\n        const widgetInfo = JQuiBinaryState.getWidgetInfo();\n        const newWidgetInfo = {\n            id: 'tplIconStatePushButton',\n            visSet: 'jqui',\n            visName: 'Binary Icon Push Button',\n            visWidgetLabel: 'jqui_icon_state_push_button',\n            visPrev: 'widgets/jqui/img/Prev_IconPushButton.png',\n            visOrder: 15,\n            visAttrs: widgetInfo.visAttrs,\n            visDefaultStyle: {\n                width: 70,\n                height: 30,\n            },\n        };\n\n        const pushMode = JQuiBinaryState.findField(newWidgetInfo, 'pushMode');\n        if (pushMode) {\n            pushMode.default = true;\n        }\n\n        // Add note\n        newWidgetInfo.visAttrs[0].fields.unshift({\n            name: '_note',\n            type: 'help',\n            text: 'jqui_button_binary_control_note',\n        });\n\n        return newWidgetInfo;\n    }\n\n    // eslint-disable-next-line class-methods-use-this\n    getWidgetInfo() {\n        return JQuiIconStatePushButton.getWidgetInfo();\n    }\n}\n\nJQuiIconStatePushButton.propTypes = {\n    id: PropTypes.string.isRequired,\n    context: PropTypes.object.isRequired,\n    view: PropTypes.string.isRequired,\n    editMode: PropTypes.bool.isRequired,\n    tpl: PropTypes.string.isRequired,\n};\n\nexport default JQuiIconStatePushButton;\n","/**\n *  ioBroker.vis\n *  https://github.com/ioBroker/ioBroker.vis\n *\n *  Copyright (c) 2023 Denis Haev https://github.com/GermanBluefox,\n *  Creative Common Attribution-NonCommercial (CC BY-NC)\n *\n *  http://creativecommons.org/licenses/by-nc/4.0/\n *\n * Short content:\n * Licensees may copy, distribute, display and perform the work and make derivative works based on it only if they give the author or licensor the credits in the manner specified by these.\n * Licensees may copy, distribute, display, and perform the work and make derivative works based on it only for noncommercial purposes.\n * (Free for non-commercial use).\n */\n\nimport PropTypes from 'prop-types';\n\n// eslint-disable-next-line import/no-cycle\nimport JQuiBinaryState from './JQuiBinaryState';\n\nclass JQuiIconStateBool extends JQuiBinaryState {\n    static getWidgetInfo() {\n        const widgetInfo = JQuiBinaryState.getWidgetInfo();\n        const newWidgetInfo = {\n            id: 'tplIconStateBool',\n            visSet: 'jqui',\n            visName: 'Binary Icon State',\n            visWidgetLabel: 'jqui_icon_state_bool',\n            visPrev: 'widgets/jqui/img/Prev_IconStateBool.png',\n            visOrder: 15,\n            visAttrs: widgetInfo.visAttrs,\n            visDefaultStyle: {\n                width: 70,\n                height: 30,\n            },\n        };\n\n        const iconFalse = JQuiBinaryState.findField(newWidgetInfo, 'icon_false');\n        if (iconFalse) {\n            iconFalse.default = 'data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0Ij48cGF0aCBmaWxsPSJjdXJyZW50Q29sb3IiIGQ9Ik05IDIxYzAgLjUuNCAxIDEgMWg0Yy42IDAgMS0uNSAxLTF2LTFIOXYxem0zLTE5QzguMSAyIDUgNS4xIDUgOWMwIDIuNCAxLjIgNC41IDMgNS43VjE3YzAgLjUuNCAxIDEgMWg2Yy42IDAgMS0uNSAxLTF2LTIuM2MxLjgtMS4zIDMtMy40IDMtNS43YzAtMy45LTMuMS03LTctN3oiLz48L3N2Zz4=';\n        }\n\n        // Add note\n        newWidgetInfo.visAttrs[0].fields.unshift({\n            name: '_note',\n            type: 'help',\n            text: 'jqui_button_binary_control_note',\n        });\n\n        return newWidgetInfo;\n    }\n\n    // eslint-disable-next-line class-methods-use-this\n    getWidgetInfo() {\n        return JQuiIconStateBool.getWidgetInfo();\n    }\n}\n\nJQuiIconStateBool.propTypes = {\n    id: PropTypes.string.isRequired,\n    context: PropTypes.object.isRequired,\n    view: PropTypes.string.isRequired,\n    editMode: PropTypes.bool.isRequired,\n    tpl: PropTypes.string.isRequired,\n};\n\nexport default JQuiIconStateBool;\n","/**\n *  ioBroker.vis\n *  https://github.com/ioBroker/ioBroker.vis\n *\n *  Copyright (c) 2023 Denis Haev https://github.com/GermanBluefox,\n *  Creative Common Attribution-NonCommercial (CC BY-NC)\n *\n *  http://creativecommons.org/licenses/by-nc/4.0/\n *\n * Short content:\n * Licensees may copy, distribute, display and perform the work and make derivative works based on it only if they give the author or licensor the credits in the manner specified by these.\n * Licensees may copy, distribute, display, and perform the work and make derivative works based on it only for noncommercial purposes.\n * (Free for non-commercial use).\n */\n\nimport PropTypes from 'prop-types';\n\n// eslint-disable-next-line import/no-cycle\nimport JQuiState from './JQuiState';\n\nclass JQuiRadioSteps extends JQuiState {\n    static getWidgetInfo() {\n        const widgetInfo = JQuiState.getWidgetInfo();\n        const newWidgetInfo = {\n            id: 'tplJquiRadioSteps',\n            visSet: 'jqui',\n            visName: 'Radiobuttons 25%',\n            visWidgetLabel: 'jqui_radio_steps',\n            visPrev: 'widgets/jqui/img/Prev_RadioSteps.png',\n            visOrder: 25,\n            visAttrs: widgetInfo.visAttrs,\n            visDefaultStyle: {\n                width: 350,\n                height: 35,\n            },\n        };\n\n        // Add note\n        newWidgetInfo.visAttrs[0].fields.unshift({\n            name: '_note',\n            type: 'help',\n            text: 'jqui_state_note',\n        });\n\n        return newWidgetInfo;\n    }\n\n    // eslint-disable-next-line class-methods-use-this\n    getWidgetInfo() {\n        return JQuiRadioSteps.getWidgetInfo();\n    }\n}\n\nJQuiRadioSteps.propTypes = {\n    id: PropTypes.string.isRequired,\n    context: PropTypes.object.isRequired,\n    view: PropTypes.string.isRequired,\n    editMode: PropTypes.bool.isRequired,\n    tpl: PropTypes.string.isRequired,\n};\n\nexport default JQuiRadioSteps;\n","/**\n *  ioBroker.vis\n *  https://github.com/ioBroker/ioBroker.vis\n *\n *  Copyright (c) 2023 Denis Haev https://github.com/GermanBluefox,\n *  Creative Common Attribution-NonCommercial (CC BY-NC)\n *\n *  http://creativecommons.org/licenses/by-nc/4.0/\n *\n * Short content:\n * Licensees may copy, distribute, display and perform the work and make derivative works based on it only if they give the author or licensor the credits in the manner specified by these.\n * Licensees may copy, distribute, display, and perform the work and make derivative works based on it only for noncommercial purposes.\n * (Free for non-commercial use).\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\n\nimport {\n    FormControl,\n    InputLabel,\n    FormLabel, Slider, Stack, LinearProgress,\n} from '@mui/material';\n\nimport {\n    Icon,\n} from '@iobroker/adapter-react-v5';\n\n// eslint-disable-next-line import/no-cycle\nimport VisRxWidget from '../../visRxWidget';\n\nclass JQuiSlider extends VisRxWidget {\n    constructor(props) {\n        super(props);\n        this.state.value = '';\n        this.state.valueMax = '';\n    }\n\n    static getWidgetInfo() {\n        return {\n            id: 'tplJquiSlider',\n            visSet: 'jqui',\n            visName: 'Slider',\n            visWidgetLabel: 'jqui_slider',\n            visPrev: 'widgets/jqui/img/Prev_Slider.png',\n            visOrder: 24,\n            visAttrs: [\n                {\n                    name: 'common',\n                    fields: [\n                        {\n                            name: 'type',\n                            label: 'jqui_type',\n                            type: 'select',\n                            options: [\n                                { value: 'single', label: 'jqui_single' },\n                                { value: 'range', label: 'jqui_range' },\n                            ],\n                        },\n                        {\n                            name: 'oid',\n                            type: 'id',\n                            onChange: async (field, data, changeData, socket) => {\n                                if (data[field.name] && data[field.name] !== 'nothing_selected') {\n                                    const obj = await socket.getObject(data[field.name]);\n                                    let changed = false;\n                                    if (obj?.common?.min !== undefined && obj?.common?.min !== null) {\n                                        if (data.min !== obj.common.min) {\n                                            data.min = obj.common.min;\n                                            changed = true;\n                                        }\n                                        if (data.text !== obj.common.min.toString() + (obj.common.unit || '')) {\n                                            data.text = obj.common.min.toString() + (obj.common.unit || '');\n                                            changed = true;\n                                        }\n                                    }\n                                    if (obj?.common?.max !== undefined && obj?.common?.max !== null) {\n                                        if (data.max !== obj.common.max) {\n                                            data.max = obj.common.max;\n                                            changed = true;\n                                        }\n                                        if (data['text-2'] !== obj.common.max.toString() + (obj.common.unit || '')) {\n                                            data['text-2'] = obj.common.max.toString() + (obj.common.unit || '');\n                                            changed = true;\n                                        }\n                                    }\n                                    if (obj?.common?.unit) {\n                                        if (data.unit !== obj.common.unit) {\n                                            data.unit = obj.common.unit;\n                                            changed = true;\n                                        }\n                                    }\n                                    if (!data.step) {\n                                        if (obj?.common?.step !== undefined && obj?.common?.step !== null) {\n                                            if (data.step !== obj.common.step) {\n                                                data.step = obj.common.step;\n                                                changed = true;\n                                            }\n                                        }\n                                    }\n                                    changed && changeData(data);\n                                }\n                            },\n                        },\n                        {\n                            name: 'click_id',\n                            type: 'id',\n                            noSubscribe: true,\n                            hidden: data => !!data.readOnly,\n                        },\n                        {\n                            name: 'inverted',\n                            type: 'checkbox',\n                            label: 'jqui_inverted',\n                        },\n                        {\n                            name: 'min',\n                            type: 'number',\n                            label: 'jqui_min',\n                        },\n                        {\n                            name: 'max',\n                            type: 'number',\n                            label: 'jqui_max',\n                        },\n                        {\n                            name: 'min_distance',\n                            type: 'number',\n                            hidden: data => data.type !== 'range',\n                        },\n                        {\n                            name: 'shift_min_distance',\n                            type: 'checkbox',\n                            hidden: data => data.type !== 'range' || !data.min_distance,\n                        },\n                        {\n                            name: 'step',\n                            type: 'number',\n                            min: 0,\n                        },\n                        {\n                            name: 'unit',\n                        },\n                        {\n                            name: 'timeout',\n                            label: 'jqui_set_timeout',\n                            type: 'number',\n                        },\n                        {\n                            name: 'oid-working',\n                            label: 'jqui_oid_working',\n                            type: 'id',\n                        },\n                    ],\n                },\n                {\n                    name: 'second',\n                    hidden: data => data.type !== 'range',\n                    fields: [\n                        {\n                            name: 'inverted-2',\n                            type: 'checkbox',\n                            label: 'jqui_inverted',\n                        },\n                        {\n                            name: 'oid-2',\n                            type: 'id',\n                            hidden: data => data.type !== 'range',\n                        },\n                        {\n                            name: 'click_id-2',\n                            type: 'id',\n                            noSubscribe: true,\n                            hidden: data => !data['oid-2'] || data.type !== 'range',\n                        },\n                    ],\n                },\n                {\n                    name: 'style',\n                    fields: [\n                        {\n                            name: 'widgetTitle',\n                            label: 'jqui_name',\n                            type: 'text',\n                        },\n                        {\n                            name: 'orientation',\n                            label: 'orientation',\n                            type: 'select',\n                            options: ['horizontal', 'vertical'],\n                            default: 'horizontal',\n                        },\n                        {\n                            name: 'text',\n                            label: 'jqui_text',\n                            hidden: data => !!data.icon || !!data.image,\n                        },\n                        {\n                            name: 'text-2',\n                            label: 'jqui_text_max',\n                            hidden: data => !!data['icon-2'] || !!data['image-2'],\n                        },\n                        {\n                            name: 'image',\n                            label: 'jqui_image',\n                            type: 'image',\n                            hidden: data => !!data.icon || !!data.text,\n                        },\n                        {\n                            name: 'icon',\n                            label: 'jqui_icon',\n                            type: 'icon64',\n                            hidden: data => !!data.image || !!data.text,\n                        },\n                        {\n                            name: 'image-2',\n                            label: 'jqui_image_max',\n                            type: 'image',\n                            hidden: data => !!data['icon-2'] || !!data['text-2'],\n                        },\n                        {\n                            name: 'icon-2',\n                            label: 'jqui_icon_max',\n                            type: 'icon64',\n                            hidden: data => !!data['image-2'] || !!data['text-2'],\n                        },\n                        {\n                            name: 'valueLabelDisplay',\n                            type: 'select',\n                            label: 'jqui_value_label_display',\n                            options: [\n                                { value: 'auto', label: 'jqui_auto' },\n                                { value: 'on', label: 'jqui_on' },\n                                { value: 'off', label: 'jqui_off' },\n                            ],\n                        },\n                    ],\n                },\n            ],\n            visDefaultStyle: {\n                width: 300,\n                height: 40,\n            },\n        };\n    }\n\n    async componentDidMount() {\n        super.componentDidMount();\n        if (this.state.rxData.oid && this.state.rxData.oid !== 'nothing_selected') {\n            try {\n                const state = await this.props.context.socket.getState(this.state.rxData.oid);\n                this.onStateUpdated(this.state.rxData.oid, state);\n            } catch (error) {\n                console.error(`Cannot get state ${this.state.rxData.oid}: ${error}`);\n            }\n        }\n        if (this.state.rxData.type === 'range' && this.state.rxData['oid-2'] && this.state.rxData['oid-2'] !== 'nothing_selected') {\n            try {\n                const state = await this.props.context.socket.getState(this.state.rxData['oid-2']);\n                this.onStateUpdated(this.state.rxData['oid-2'], state);\n            } catch (error) {\n                console.error(`Cannot get state ${this.state.rxData.oid}: ${error}`);\n            }\n        }\n    }\n\n    componentWillUnmount() {\n        super.componentWillUnmount();\n        this.controlTimeout && clearTimeout(this.controlTimeout);\n        this.controlTimeout = null;\n    }\n\n    static findField(widgetInfo, name) {\n        return VisRxWidget.findField(widgetInfo, name);\n    }\n\n    // eslint-disable-next-line class-methods-use-this\n    getWidgetInfo() {\n        return JQuiSlider.getWidgetInfo();\n    }\n\n    onStateUpdated(id, state) {\n        if (id === this.state.rxData.oid && state) {\n            let value = parseFloat(state.val === null || state.val === undefined ? 0 : state.val) || 0;\n            if (this.state.rxData.inverted) {\n                value = parseFloat(this.state.rxData.max) - value + parseFloat(this.state.rxData.min);\n            }\n\n            if (this.state.value !== value) {\n                this.setState({ value });\n            }\n        } else if (id === this.state.rxData['oid-2'] && state) {\n            let value = parseFloat(state.val === null || state.val === undefined ? 0 : state.val) || 0;\n\n            if (this.state.rxData['inverted-2']) {\n                value = parseFloat(this.state.rxData.max) - value + parseFloat(this.state.rxData.min);\n            }\n\n            if (this.state.valueMax !== value) {\n                this.setState({ valueMax: value.toString() });\n            }\n        }\n    }\n\n    getControlOid(isMax) {\n        if (isMax) {\n            if (this.state.rxData['click_id-2'] && this.state.rxData['click_id-2'] !== 'nothing_selected') {\n                return this.state.rxData['click_id-2'];\n            }\n            if (this.state.rxData['oid-2'] && this.state.rxData['oid-2'] !== 'nothing_selected') {\n                return this.state.rxData['oid-2'];\n            }\n        } else {\n            if (this.state.rxData.click_id && this.state.rxData.click_id !== 'nothing_selected') {\n                return this.state.rxData.click_id;\n            }\n            if (this.state.rxData.oid && this.state.rxData.oid !== 'nothing_selected') {\n                return this.state.rxData.oid;\n            }\n        }\n\n        return '';\n    }\n\n    async onChange(value, isMax, immediate) {\n        if (this.props.editMode) {\n            return;\n        }\n\n        this.newState = this.newState || {};\n\n        const minDistance = isMax || this.state.rxData.type === 'range' ? (parseFloat(this.state.rxData.min_distance) || 0) : 0;\n        if (isMax) {\n            if (Array.isArray(value)) {\n                console.log(`Set ${value[0]} - ${value[1]}`);\n                this.newState.value = value[0];\n                this.newState.valueMax = value[1];\n\n                if (minDistance) {\n                    if (this.lastChanged === 2) {\n                        if (this.state.rxData.shift_min_distance) {\n                            this.newState.valueMax = Math.max(this.newState.valueMax, parseFloat(this.state.rxData.min) + minDistance);\n                            if (this.newState.valueMax - minDistance < this.newState.value) {\n                                this.newState.value = this.newState.valueMax - minDistance;\n                            }\n                        } else {\n                            this.newState.valueMax = Math.max(this.newState.valueMax, this.state.value + minDistance);\n                        }\n                    } else if (this.state.rxData.shift_min_distance) {\n                        this.newState.value = Math.min(this.newState.value, parseFloat(this.state.rxData.max) - minDistance);\n                        this.newState.valueMax = this.state.valueMax;\n                        if (this.newState.valueMax - minDistance < this.newState.value) {\n                            this.newState.valueMax = this.newState.value + minDistance;\n                        }\n                    } else {\n                        this.newState.value = Math.min(this.newState.value, this.state.valueMax - minDistance);\n                    }\n                }\n                console.log(`Set ${this.newState.value} - ${this.newState.valueMax}`);\n            } else {\n                this.lastChanged = 2;\n                this.newState.valueMax = value;\n                if (minDistance) {\n                    if (this.state.rxData.shift_min_distance) {\n                        this.newState.valueMax = Math.max(this.newState.valueMax, parseFloat(this.state.rxData.min) + minDistance);\n                        this.newState.value = this.state.value;\n                        if (this.newState.valueMax - minDistance < this.newState.value) {\n                            this.newState.value = this.newState.valueMax - minDistance;\n                        }\n                    } else {\n                        this.newState.valueMax = Math.max(value, this.state.value + minDistance);\n                    }\n                }\n                console.log(`Set (${this.newState.value || this.state.value}) - ${this.newState.valueMax}`);\n            }\n        } else {\n            this.lastChanged = 1;\n            this.newState.value = value;\n\n            if (minDistance) {\n                if (this.state.rxData.shift_min_distance) {\n                    this.newState.value = Math.min(this.newState.value, parseFloat(this.state.rxData.max) - minDistance);\n                    this.newState.valueMax = this.state.valueMax;\n                    if (this.newState.valueMax - minDistance < this.newState.value) {\n                        this.newState.valueMax = this.newState.value + minDistance;\n                    }\n                } else {\n                    this.newState.value = Math.min(value, this.state.valueMax - minDistance);\n                }\n            }\n            console.log(`Set ${this.newState.value} - (${this.newState.valueMax || this.state.valueMax})`);\n        }\n\n        this.controlTimeout && clearTimeout(this.controlTimeout);\n        this.controlTimeout = setTimeout(async () => {\n            this.controlTimeout = null;\n            const newState = this.newState;\n            this.newState = null;\n            if (!newState) {\n                console.error('This can\\'t be true!');\n                return;\n            }\n\n            if (newState.value !== undefined) {\n                const oid = this.getControlOid();\n                if (oid) {\n                    let val = parseFloat(newState.value);\n                    if (this.state.rxData.inverted) {\n                        val = parseFloat(this.state.rxData.max) - val + parseFloat(this.state.rxData.min);\n                    }\n\n                    if (this.state.values[`${this.state.rxData.oid}.val`] !== val) {\n                        this.props.context.setValue(oid, val);\n                    }\n                }\n            }\n            if (newState.valueMax !== undefined) {\n                const oidMax = this.getControlOid(true);\n                if (oidMax) {\n                    let val = parseFloat(newState.valueMax);\n                    if (this.state.rxData['inverted-2']) {\n                        val = parseFloat(this.state.rxData.max) - val + parseFloat(this.state.rxData.min);\n                    }\n\n                    if (this.state.values[`${this.state.rxData['oid-2']}.val`] !== val) {\n                        this.props.context.setValue(oidMax, val);\n                    }\n                }\n            }\n        }, immediate ? 0 : parseInt(this.state.rxData.timeout, 10) || 300);\n\n        this.setState(this.newState);\n    }\n\n    renderIcon(isMax) {\n        let icon;\n        if (isMax) {\n            icon = this.state.rxData['icon-2'] || this.state.rxData['image-2'];\n        } else {\n            icon = this.state.rxData.icon || this.state.rxData.image;\n        }\n\n        if (icon) {\n            if (icon && icon.startsWith('_PRJ_NAME/')) {\n                icon = icon.replace('_PRJ_NAME/', `../${this.props.context.adapterName}.${this.props.context.instance}/${this.props.context.projectName}/`);\n            }\n            return <Icon\n                src={icon}\n            />;\n        }\n        return null;\n    }\n\n    renderText(isMax) {\n        return isMax ? this.state.rxData['text-2'] : this.state.rxData.text;\n    }\n\n    renderWidgetBody(props) {\n        super.renderWidgetBody(props);\n\n        props.style.overflow = 'visible';\n        const step = this.state.rxData.step === undefined || this.state.rxData.step === null ? 0 : parseFloat(this.state.rxData.step);\n\n        let content;\n\n        if (this.state.rxData.type === 'range') {\n            content = <Slider\n                key=\"control\"\n                // style={!this.state.rxData.orientation || this.state.rxData.orientation === 'horizontal' ?\n                //    { marginLeft: 20, marginRight: 20, width: 'calc(100% - 40px)' } :\n                //    { marginTop: 10, marginBottom: 10 }}\n                valueLabelFormat={value => value + (this.state.rxData.unit || '')}\n                value={[parseFloat(this.state.value) || 0, parseFloat(this.state.valueMax) || 0]}\n                valueLabelDisplay={this.state.rxData.valueLabelDisplay || 'auto'}\n                min={parseFloat(this.state.rxData.min === undefined || this.state.rxData.min === null ? 0 : this.state.rxData.min)}\n                max={parseFloat(this.state.rxData.max === undefined || this.state.rxData.max === null ? 100 : this.state.rxData.max)}\n                orientation={this.state.rxData.orientation || 'horizontal'}\n                disabled={!!this.state.values[`${this.state.rxData['oid-working']}.val`]}\n                step={step === 0 ? undefined : step}\n                disableSwap={this.state.rxData.type === 'range' ? true : undefined}\n                marks={step === 0 ? undefined : true}\n                onChangeCommitted={(e, value) => this.onChange(value, true, true)}\n                onChange={(e, value, activeThumb) => this.onChange(value[activeThumb], !!activeThumb)}\n            />;\n        } else {\n            content = <Slider\n                key=\"control2\"\n                // style={!this.state.rxData.orientation || this.state.rxData.orientation === 'horizontal' ?\n                //    { marginLeft: 20, marginRight: 20, width: 'calc(100% - 40px)' } :\n                //    { marginTop: 10, marginBottom: 10 }}\n                valueLabelFormat={value => value + (this.state.rxData.unit || '')}\n                value={parseFloat(this.state.value) || 0}\n                valueLabelDisplay={this.state.rxData.valueLabelDisplay || 'auto'}\n                min={parseFloat(this.state.rxData.min === undefined || this.state.rxData.min === null ? 0 : this.state.rxData.min)}\n                max={parseFloat(this.state.rxData.max === undefined || this.state.rxData.max === null ? 100 : this.state.rxData.max)}\n                disabled={!!this.state.values[`${this.state.rxData['oid-working']}.val`]}\n                orientation={this.state.rxData.orientation || 'horizontal'}\n                step={step === 0 ? undefined : step}\n                marks={step === 0 ? undefined : true}\n                onChangeCommitted={(e, value) => this.onChange(value, false, true)}\n                onChange={(e, value) => this.onChange(value)}\n            />;\n        }\n\n        if (this.state.rxData.text || this.state.rxData['text-2'] || this.state.rxData.icon || this.state.rxData['icon-2'] || this.state.rxData.image || this.state.rxData['image-2']) {\n            content = <Stack\n                key=\"stack\"\n                spacing={1}\n                style={{ width: '100%', height: '100%' }}\n                direction={this.state.rxData.orientation === 'vertical' ? 'column' : 'row'}\n                sx={{ mb: 1 }}\n                alignItems=\"center\"\n            >\n                {this.renderText(this.state.rxData.orientation === 'vertical')}\n                {this.renderIcon(this.state.rxData.orientation === 'vertical')}\n                {content}\n                {this.renderIcon(this.state.rxData.orientation !== 'vertical')}\n                {this.renderText(this.state.rxData.orientation !== 'vertical')}\n            </Stack>;\n        }\n\n        if (this.state.rxData.widgetTitle) {\n            content = <FormControl\n                fullWidth\n                key=\"form\"\n                style={{\n                    marginTop: this.state.rxData.type === 'select' ? 5 : undefined,\n                    width: '100%',\n                    height: '100%',\n                }}\n            >\n                {this.state.rxData.type === 'select' ?\n                    <InputLabel>{this.state.rxData.widgetTitle}</InputLabel> :\n                    <FormLabel style={this.state.rxData.type === 'slider' ? { marginLeft: 10 } : undefined}>{this.state.rxData.widgetTitle}</FormLabel>}\n                {content}\n            </FormControl>;\n        }\n        if (this.state.rxData['oid-working'] && this.state.values[`${this.state.rxData['oid-working']}.val`]) {\n            content = [\n                content,\n                <LinearProgress\n                    key=\"progress\"\n                    style={{\n                        position: 'absolute',\n                        bottom: 0,\n                        left: 0,\n                        right: 0,\n                    }}\n                />,\n            ];\n        }\n\n        return <div className=\"vis-widget-body\" style={{ position: 'relative' }}>\n            {content}\n        </div>;\n    }\n}\n\nJQuiSlider.propTypes = {\n    id: PropTypes.string.isRequired,\n    context: PropTypes.object.isRequired,\n    view: PropTypes.string.isRequired,\n    editMode: PropTypes.bool.isRequired,\n    tpl: PropTypes.string.isRequired,\n};\n\nexport default JQuiSlider;\n","/**\n *  ioBroker.vis\n *  https://github.com/ioBroker/ioBroker.vis\n *\n *  Copyright (c) 2023 Denis Haev https://github.com/GermanBluefox,\n *  Creative Common Attribution-NonCommercial (CC BY-NC)\n *\n *  http://creativecommons.org/licenses/by-nc/4.0/\n *\n * Short content:\n * Licensees may copy, distribute, display and perform the work and make derivative works based on it only if they give the author or licensor the credits in the manner specified by these.\n * Licensees may copy, distribute, display, and perform the work and make derivative works based on it only for noncommercial purposes.\n * (Free for non-commercial use).\n */\n\nimport PropTypes from 'prop-types';\n\n// eslint-disable-next-line import/no-cycle\nimport JQuiSlider from './JQuiSlider';\n\nclass JQuiSliderVertical extends JQuiSlider {\n    static getWidgetInfo() {\n        const widgetInfo = JQuiSlider.getWidgetInfo();\n        const newWidgetInfo = {\n            id: 'tplJquiSliderVertical',\n            visSet: 'jqui',\n            visName: 'Vertical slider ',\n            visWidgetLabel: 'jqui_slider_vertical',\n            visPrev: 'widgets/jqui/img/Prev_SliderVertical.png',\n            visOrder: 25,\n            visAttrs: widgetInfo.visAttrs,\n            visDefaultStyle: {\n                width: 40,\n                height: 300,\n            },\n        };\n        newWidgetInfo.visAttrs[0].fields.unshift({\n            name: '_note',\n            type: 'help',\n            text: 'jqui_slider_note',\n        });\n\n        const orientation = JQuiSlider.findField(newWidgetInfo, 'orientation');\n        orientation.default = 'vertical';\n\n        return newWidgetInfo;\n    }\n\n    // eslint-disable-next-line class-methods-use-this\n    getWidgetInfo() {\n        return JQuiSliderVertical.getWidgetInfo();\n    }\n}\n\nJQuiSliderVertical.propTypes = {\n    id: PropTypes.string.isRequired,\n    context: PropTypes.object.isRequired,\n    view: PropTypes.string.isRequired,\n    editMode: PropTypes.bool.isRequired,\n    tpl: PropTypes.string.isRequired,\n};\n\nexport default JQuiSliderVertical;\n","/**\n *  ioBroker.vis\n *  https://github.com/ioBroker/ioBroker.vis\n *\n *  Copyright (c) 2023 Denis Haev https://github.com/GermanBluefox,\n *  Creative Common Attribution-NonCommercial (CC BY-NC)\n *\n *  http://creativecommons.org/licenses/by-nc/4.0/\n *\n * Short content:\n * Licensees may copy, distribute, display and perform the work and make derivative works based on it only if they give the author or licensor the credits in the manner specified by these.\n * Licensees may copy, distribute, display, and perform the work and make derivative works based on it only for noncommercial purposes.\n * (Free for non-commercial use).\n */\n\nimport React from 'react';\nimport { withStyles } from '@mui/styles';\n\nimport { DatePicker, LocalizationProvider } from '@mui/x-date-pickers';\nimport { AdapterDayjs } from '@mui/x-date-pickers/AdapterDayjs';\nimport 'dayjs/locale/de';\nimport 'dayjs/locale/en';\nimport 'dayjs/locale/ru';\nimport 'dayjs/locale/zh-cn';\nimport 'dayjs/locale/uk';\nimport 'dayjs/locale/it';\nimport 'dayjs/locale/fr';\nimport 'dayjs/locale/es';\nimport 'dayjs/locale/pl';\nimport 'dayjs/locale/pt';\nimport 'dayjs/locale/nl';\n\nimport type { GetRxDataFromWidget, RxRenderWidgetProps } from '@/types';\nimport type { TextFieldVariants } from '@mui/material';\nimport dayjs from 'dayjs';\nimport VisRxWidget from '../../visRxWidget';\n\nconst styles = {\n    textRoot: {\n        '& .MuiInputBase-root': {\n            width: '100%',\n            height: '100%',\n        },\n    },\n};\n\n// eslint-disable-next-line no-use-before-define\ntype RxData = GetRxDataFromWidget<typeof JQuiInputDate>\n\nclass JQuiInputDate extends VisRxWidget<RxData> {\n    /** If user does not want to use full date */\n    private readonly EASY_DATE_FORMAT = 'DD.MM.YYYY';\n\n    static getWidgetInfo() {\n        return {\n            id: 'tplJquiInputDate',\n            visSet: 'jqui',\n            visName: 'Input Date',\n            visWidgetLabel: 'jqui_input_date',\n            visPrev: 'widgets/jqui/img/Prev_InputDate.png',\n            visOrder: 30,\n            visAttrs: [\n                {\n                    name: 'common',\n                    fields: [\n                        {\n                            name: 'oid',\n                            type: 'id',\n                        },\n                        {\n                            name: 'variant',\n                            label: 'jqui_variant',\n                            type: 'select',\n                            options: [\n                                { label: 'standard', value: 'standard' },\n                                { label: 'outlined', value: 'outlined' },\n                                { label: 'filled', value: 'filled' },\n                            ],\n                            default: 'standard',\n                        },\n                        {\n                            name: 'autoFocus',\n                            type: 'checkbox',\n                        },\n                        {\n                            name: 'clearable',\n                            label: 'jqui_clearable',\n                            type: 'checkbox',\n                        },\n                        {\n                            name: 'widgetTitle',\n                            label: 'jqui_widgetTitle',\n                            type: 'text',\n                        },\n                        {\n                            name: 'disableFuture',\n                            label: 'jqui_disableFuture',\n                            type: 'checkbox',\n                            hidden: '!!data.disablePast',\n                        },\n                        {\n                            name: 'disablePast',\n                            label: 'jqui_disablePast',\n                            type: 'checkbox',\n                            hidden: '!!data.disableFuture',\n                        },\n                        {\n                            name: 'asFullDate',\n                            label: 'jqui_asFullDate',\n                            type: 'checkbox',\n                        },\n                        {\n                            name: 'displayWeekNumber',\n                            label: 'jqui_displayWeekNumber',\n                            type: 'checkbox',\n                        },\n                        {\n                            name: 'wideFormat',\n                            label: 'jqui_wideFormat',\n                            type: 'checkbox',\n                        },\n                    ],\n                },\n            ],\n            visDefaultStyle: {\n                width: 250,\n                height: 56,\n            },\n        } as const;\n    }\n\n    // eslint-disable-next-line class-methods-use-this\n    getWidgetInfo() {\n        return JQuiInputDate.getWidgetInfo();\n    }\n\n    renderWidgetBody(props: RxRenderWidgetProps) {\n        super.renderWidgetBody(props);\n\n        return <div\n            className=\"vis-widget-body\"\n        >\n            <LocalizationProvider dateAdapter={AdapterDayjs} adapterLocale={this.props.context.lang}>\n                <DatePicker\n                    value={this.state.rxData.asFullDate ? dayjs(this.state.values[`${this.state.rxData.oid}.val`]) || '' : dayjs(this.state.values[`${this.state.rxData.oid}.val`], this.EASY_DATE_FORMAT)}\n                    label={this.state.rxData.widgetTitle || null}\n                    autoFocus={this.state.rxData.autoFocus || false}\n                    onChange={newValue => {\n                        if (!newValue) {\n                            return;\n                        }\n\n                        const val = this.state.rxData.asFullDate ? newValue.toDate().toString() : newValue.format(this.EASY_DATE_FORMAT);\n                        this.props.context.setValue(this.state.rxData.oid, val);\n                    }}\n                    formatDensity={this.state.rxData.wideFormat ? 'spacious' : 'dense'}\n                    slotProps={{\n                        textField: {\n                            variant: this.state.rxData.variant as TextFieldVariants || 'standard',\n                            style: {\n                                width: '100%',\n                                height: '100%',\n                            },\n                            classes: {\n                                root: this.props.classes.textRoot,\n                            },\n                        },\n                        field: { clearable: this.state.rxData.clearable, onClear: () => this.props.context.setValue(this.state.rxData.oid, '') },\n                    }}\n                    disableFuture={this.state.rxData.disableFuture || false}\n                    disablePast={this.state.rxData.disablePast || false}\n                    displayWeekNumber={this.state.rxData.displayWeekNumber || false}\n                />\n            </LocalizationProvider>\n        </div>;\n    }\n}\n\nexport default withStyles(styles)(JQuiInputDate);\n","/**\n *  ioBroker.vis\n *  https://github.com/ioBroker/ioBroker.vis\n *\n *  Copyright (c) 2023 Denis Haev https://github.com/GermanBluefox,\n *  Creative Common Attribution-NonCommercial (CC BY-NC)\n *\n *  http://creativecommons.org/licenses/by-nc/4.0/\n *\n * Short content:\n * Licensees may copy, distribute, display and perform the work and make derivative works based on it only if they give the author or licensor the credits in the manner specified by these.\n * Licensees may copy, distribute, display, and perform the work and make derivative works based on it only for noncommercial purposes.\n * (Free for non-commercial use).\n */\n\nimport React from 'react';\nimport { withStyles } from '@mui/styles';\n\nimport { TimePicker, LocalizationProvider } from '@mui/x-date-pickers';\nimport { AdapterDayjs } from '@mui/x-date-pickers/AdapterDayjs';\nimport dayjs from 'dayjs';\nimport 'dayjs/locale/de';\nimport 'dayjs/locale/en';\nimport 'dayjs/locale/ru';\nimport 'dayjs/locale/zh-cn';\nimport 'dayjs/locale/uk';\nimport 'dayjs/locale/it';\nimport 'dayjs/locale/fr';\nimport 'dayjs/locale/es';\nimport 'dayjs/locale/pl';\nimport 'dayjs/locale/pt';\nimport 'dayjs/locale/nl';\n\n// eslint-disable-next-line import/no-cycle\nimport { GetRxDataFromWidget, RxRenderWidgetProps } from '@/types';\nimport type { TextFieldVariants } from '@mui/material';\nimport VisRxWidget from '../../visRxWidget';\n\nconst styles = {\n    textRoot: {\n        '& .MuiInputBase-root': {\n            width: '100%',\n            height: '100%',\n        },\n    },\n};\n\n// eslint-disable-next-line no-use-before-define\ntype RxData = GetRxDataFromWidget<typeof JQuiInputDateTime>\n\nclass JQuiInputDateTime extends VisRxWidget<RxData> {\n    static getWidgetInfo() {\n        return {\n            id: 'tplJquiInputDatetime',\n            visSet: 'jqui',\n            visName: 'Input Time',\n            visWidgetLabel: 'jqui_input_time',\n            visPrev: 'widgets/jqui/img/Prev_InputDateTime.png',\n            visOrder: 31,\n            visAttrs: [\n                {\n                    name: 'common',\n                    fields: [\n                        {\n                            name: 'oid',\n                            type: 'id',\n                        },\n                        {\n                            name: 'variant',\n                            label: 'jqui_variant',\n                            type: 'select',\n                            options: [\n                                { label: 'standard', value: 'standard' },\n                                { label: 'outlined', value: 'outlined' },\n                                { label: 'filled', value: 'filled' },\n                            ],\n                            default: 'standard',\n                        },\n                        {\n                            name: 'autoFocus',\n                            type: 'checkbox',\n                        },\n                        {\n                            name: 'clearable',\n                            label: 'jqui_clearable',\n                            type: 'checkbox',\n                        },\n                        {\n                            name: 'widgetTitle',\n                            label: 'jqui_widgetTitle',\n                            type: 'text',\n                        },\n                        {\n                            name: 'ampm',\n                            label: 'jqui_ampm',\n                            type: 'checkbox',\n                        },\n                        {\n                            name: 'asDate',\n                            label: 'jqui_asDate',\n                            type: 'checkbox',\n                        },\n                        {\n                            name: 'stepMinute',\n                            label: 'jqui_stepMinute',\n                            type: 'select',\n                            options: [\n                                { label: '1 minute', value: 1 },\n                                { label: '2 minutes', value: 2 },\n                                { label: '3 minutes', value: 3 },\n                                { label: '4 minutes', value: 4 },\n                                { label: '5 minutes', value: 5 },\n                                { label: '10 minutes', value: 10 },\n                                { label: '15 minutes', value: 15 },\n                                { label: '20 minutes', value: 20 },\n                                { label: '30 minutes', value: 30 },\n                                { label: '60 minutes', value: 60 },\n                            ],\n                        },\n                    ],\n                },\n            ],\n            visDefaultStyle: {\n                width: 250,\n                height: 56,\n            },\n        } as const;\n    }\n\n    // eslint-disable-next-line class-methods-use-this\n    getWidgetInfo() {\n        return JQuiInputDateTime.getWidgetInfo();\n    }\n\n    renderWidgetBody(props: RxRenderWidgetProps) {\n        super.renderWidgetBody(props);\n\n        const val = this.state.values[`${this.state.rxData.oid}.val`];\n        const asDate = this.state.rxData.asDate;\n\n        return <div\n            className=\"vis-widget-body\"\n        >\n            <LocalizationProvider dateAdapter={AdapterDayjs} adapterLocale={this.props.context.lang}>\n                <TimePicker\n                    value={val && !asDate ? dayjs(val, 'HH:mm') : dayjs(val)}\n                    ampm={this.state.rxData.ampm || false}\n                    minutesStep={parseInt(this.state.rxData.stepMinute, 10) || 1}\n                    label={this.state.rxData.widgetTitle || null}\n                    formatDensity=\"dense\"\n                    format=\"HH:mm\"\n                    autoFocus={this.state.rxData.autoFocus || false}\n                    onChange={value => {\n                        if (!value) {\n                            return;\n                        }\n\n                        const res = !asDate ? value.format('HH:mm') : value.second(0).millisecond(0).toDate().toString();\n\n                        this.props.context.setValue(this.state.rxData.oid, res);\n                    }}\n                    slotProps={{\n                        textField: {\n                            variant: this.state.rxData.variant as TextFieldVariants || 'standard',\n                            style: {\n                                width: '100%',\n                                height: '100%',\n                            },\n                            classes: {\n                                root: this.props.classes.textRoot,\n                            },\n                        },\n                        field: { clearable: this.state.rxData.clearable, onClear: () => this.props.context.setValue(this.state.rxData.oid, '') },\n                    }}\n                />\n            </LocalizationProvider>\n        </div>;\n    }\n}\n\nexport default withStyles(styles)(JQuiInputDateTime);\n","/**\n *  ioBroker.vis\n *  https://github.com/ioBroker/ioBroker.vis\n *\n *  Copyright (c) 2023 Denis Haev https://github.com/GermanBluefox,\n *  Creative Common Attribution-NonCommercial (CC BY-NC)\n *\n *  http://creativecommons.org/licenses/by-nc/4.0/\n *\n * Short content:\n * Licensees may copy, distribute, display and perform the work and make derivative works based on it only if they give the author or licensor the credits in the manner specified by these.\n * Licensees may copy, distribute, display, and perform the work and make derivative works based on it only for noncommercial purposes.\n * (Free for non-commercial use).\n */\n\nimport PropTypes from 'prop-types';\n\n// eslint-disable-next-line import/no-cycle\nimport JQuiBinaryState from './JQuiBinaryState';\n\nclass JQuiToggle extends JQuiBinaryState {\n    static getWidgetInfo() {\n        const widgetInfo = JQuiBinaryState.getWidgetInfo();\n        const newWidgetInfo = {\n            id: 'tplJquiToogle',\n            visSet: 'jqui',\n            visName: 'Icon Toggle',\n            visWidgetLabel: 'jqui_icon_toggle',\n            visPrev: 'widgets/jqui/img/Prev_IconToggle.png',\n            visOrder: 32,\n            visAttrs: widgetInfo.visAttrs,\n            visDefaultStyle: {\n                width: 92,\n                height: 36,\n            },\n        };\n\n        // Add note\n        newWidgetInfo.visAttrs[0].fields.unshift({\n            name: '_note',\n            type: 'help',\n            text: 'jqui_button_binary_control_note',\n        });\n\n        const iconFalse = JQuiBinaryState.findField(newWidgetInfo, 'icon_false');\n        if (iconFalse) {\n            iconFalse.default = 'data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0Ij48cGF0aCBmaWxsPSJjdXJyZW50Q29sb3IiIGQ9Ik0xMyAzaC0ydjEwaDJWM3ptNC44MyAyLjE3bC0xLjQyIDEuNDJBNi45MiA2LjkyIDAgMCAxIDE5IDEyYzAgMy44Ny0zLjEzIDctNyA3QTYuOTk1IDYuOTk1IDAgMCAxIDcuNTggNi41OEw2LjE3IDUuMTdBOC45MzIgOC45MzIgMCAwIDAgMyAxMmE5IDkgMCAwIDAgMTggMGMwLTIuNzQtMS4yMy01LjE4LTMuMTctNi44M3oiLz48L3N2Zz4=';\n        }\n\n        const colorTrue = JQuiBinaryState.findField(newWidgetInfo, 'color_true');\n        if (colorTrue) {\n            colorTrue.default = '#93ff93';\n        }\n\n        return newWidgetInfo;\n    }\n\n    // eslint-disable-next-line class-methods-use-this\n    getWidgetInfo() {\n        return JQuiToggle.getWidgetInfo();\n    }\n}\n\nJQuiToggle.propTypes = {\n    id: PropTypes.string.isRequired,\n    context: PropTypes.object.isRequired,\n    view: PropTypes.string.isRequired,\n    editMode: PropTypes.bool.isRequired,\n    tpl: PropTypes.string.isRequired,\n};\n\nexport default JQuiToggle;\n","/**\n *  ioBroker.vis\n *  https://github.com/ioBroker/ioBroker.vis\n *\n *  Copyright (c) 2022-2024 Denis Haev https://github.com/GermanBluefox,\n *  Creative Common Attribution-NonCommercial (CC BY-NC)\n *\n *  http://creativecommons.org/licenses/by-nc/4.0/\n *\n * Short content:\n * Licensees may copy, distribute, display and perform the work and make derivative works based on it only if they give the author or licensor the credits in the manner specified by these.\n * Licensees may copy, distribute, display, and perform the work and make derivative works based on it only for noncommercial purposes.\n * (Free for non-commercial use).\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\n\nimport { Tab, Tabs } from '@mui/material';\nimport { Icon } from '@iobroker/adapter-react-v5';\n\n// eslint-disable-next-line import/no-cycle\nimport VisRxWidget from '../../visRxWidget';\n\nclass TabsSliderTabs extends VisRxWidget {\n    static getWidgetInfo() {\n        return {\n            id: 'tplSTab',\n            visSet: 'tabs',\n            visName: 'SliderTabs',\n            visSetLabel: 'Tabs',\n            visPrev: 'widgets/tabs/img/Prev_SliderTabs.png',\n            visWidgetLabel: 'vis_2_widgets_widgets_tabs_label',  // Label of widget\n            visSetIcon: 'widgets/tabs/img/Prev_SliderTabs.png',  // Icon of a widget set\n            visAttrs: [\n                {\n                    name: 'common',\n                    fields: [\n                        {\n                            name: 'show_tabs',\n                            type: 'slider',\n                            min: 1,\n                            max: 20,\n                            label: 'vis_2_widgets_widgets_tabs_show_tabs',\n                            default: 2,\n                        },\n                        {\n                            name: 'vertical',\n                            type: 'checkbox',\n                            label: 'vis_2_widgets_widgets_tabs_vertical',\n                        },\n                        {\n                            name: 'variant',\n                            type: 'select',\n                            label: 'vis_2_widgets_widgets_tabs_variant',\n                            hidden: data => data.vertical,\n                            options: [\n                                { value: '', label: 'vis_2_widgets_widgets_tabs_variant_default' },\n                                { value: 'centered', label: 'vis_2_widgets_widgets_tabs_variant_centered' },\n                                { value: 'fullWidth', label: 'vis_2_widgets_widgets_tabs_variant_full_width' },\n                            ],\n                        },\n                        {\n                            name: 'color',\n                            type: 'color',\n                            label: 'vis_2_widgets_widgets_tabs_color',\n                        },\n                    ],\n                },\n                {\n\n                    name: 'node',\n                    label: 'vis_2_widgets_widgets_tabs_group_tab',\n                    indexFrom: 1,\n                    indexTo: 'show_tabs',\n                    fields: [\n                        {\n                            name: 'title_tab_',\n                            label: 'vis_2_widgets_widgets_tabs_tab_title',\n                        },\n                        {\n                            name: 'contains_view_',\n                            multiple: false,\n                            type: 'select-views',\n                            label: 'vis_2_widgets_widgets_tabs_tab_view',\n                        },\n                        {\n                            name: 'icon_tab_',\n                            type: 'icon64',\n                            label: 'vis_2_widgets_widgets_tabs_tab_icon',\n                            hidden: (data, index) => data[`image_tab_${index}`],\n                        },\n                        {\n                            name: 'image_tab_',\n                            type: 'image',\n                            label: 'vis_2_widgets_widgets_tabs_tab_image',\n                            hidden: (data, index) => data[`icon_tab_${index}`],\n                        },\n                        {\n                            name: 'icon_size_',\n                            type: 'slider',\n                            min: 0,\n                            max: 100,\n                            label: 'vis_2_widgets_widgets_tabs_tab_icon_size',\n                            hidden: (data, index) => !data[`icon_tab_${index}`] && !data[`image_tab_${index}`],\n                        },\n                        {\n                            name: 'icon_color_',\n                            type: 'color',\n                            label: 'vis_2_widgets_widgets_tabs_tab_icon_color',\n                            hidden: (data, index) => !data[`icon_tab_${index}`],\n                        },\n                        {\n                            name: 'overflow_x_',\n                            label: 'vis_2_widgets_widgets_tabs_tab_overflow_x',\n                            type: 'select',\n                            noTranslation: true,\n                            options: ['', 'visible', 'hidden', 'scroll', 'auto', 'initial', 'inherit'],\n                        },\n                        {\n                            name: 'overflow_y_',\n                            label: 'vis_2_widgets_widgets_tabs_tab_overflow_y',\n                            type: 'select',\n                            noTranslation: true,\n                            options: ['', 'visible', 'hidden', 'scroll', 'auto', 'initial', 'inherit'],\n                        },\n                    ],\n                },\n            ],\n            visDefaultStyle: {\n                width: 250,\n                height: 250,\n            },\n        };\n    }\n\n    async componentDidMount() {\n        super.componentDidMount();\n        let tabIndex = window.localStorage.getItem(`${this.props.id}-tabIndex`);\n        if (tabIndex) {\n            tabIndex = parseInt(tabIndex, 10) || 0;\n        }\n        this.setState({ tabIndex });\n    }\n\n    // eslint-disable-next-line class-methods-use-this\n    getWidgetInfo() {\n        return TabsSliderTabs.getWidgetInfo();\n    }\n\n    getWidgetView() {\n        const view = this.state.rxData[`contains_view_${this.state.tabIndex + 1}`];\n        const style = {\n            flex: 1,\n            position: 'relative',\n        };\n        const overflowX = this.state.rxData[`overflow_x_${this.state.tabIndex + 1}`];\n        const overflowY = this.state.rxData[`overflow_y_${this.state.tabIndex + 1}`];\n\n        if (overflowX && overflowY) {\n            if (overflowY === overflowX) {\n                style.overflow = overflowX;\n            } else {\n                style.overflowX = overflowX;\n                style.overflowY = overflowY;\n            }\n        } else if (overflowX) {\n            style.overflowX = overflowX;\n        } else if (overflowY) {\n            style.overflowY = overflowY;\n        } else {\n            style.overflow = 'hidden';\n        }\n\n        return <div\n            className=\"vis-widget-body\"\n            style={style}\n        >\n            {this.state.editMode ? <div className=\"vis-editmode-helper\" /> : null}\n            {view ? super.getWidgetView(view) : null}\n        </div>;\n    }\n\n    renderWidgetBody(props) {\n        super.renderWidgetBody(props);\n\n        // set default width and height\n        if (props.style.width === undefined) {\n            props.style.width = 250;\n        }\n        if (props.style.height === undefined) {\n            props.style.height = 250;\n        }\n\n        const tabs = [];\n        for (let t = 0; t < parseInt(this.state.rxData.show_tabs, 10); t++) {\n            const color = this.state.rxData[`icon_color_${t + 1}`];\n            const icon = this.state.rxData[`icon_tab_${t + 1}`];\n            let image = this.state.rxData[`image_tab_${t + 1}`];\n            const size = this.state.rxData[`icon_size_${t + 1}`];\n            const title = this.state.rxData[`title_tab_${t + 1}`];\n            if (image && image.startsWith('_PRJ_NAME/')) {\n                image = image.replace('_PRJ_NAME/', `../${this.props.context.adapterName}.${this.props.context.instance}/${this.props.context.projectName}/`);\n            }\n\n            tabs.push(<Tab\n                label={title || (icon || image ? '' : `Tab ${t + 1}`)}\n                icon={icon ? <Icon src={icon} style={{ color, width: size, height: size }} /> :\n                    (image ? <Icon src={image} style={{ width: size, height: size }} /> : null)}\n                iconPosition=\"start\"\n                value={t}\n                key={t.toString()}\n                style={{ color: this.state.rxData.color, textTransform: 'none' }}\n                wrapped\n            />);\n        }\n\n        return <div\n            className=\"vis-widget-body\"\n            style={{\n                display: 'flex',\n                flexDirection: this.state.rxData.vertical ? 'row' : 'column',\n            }}\n        >\n            <div style={{ width: '100%', overflow: 'hidden' }}>\n                <Tabs\n                    TabIndicatorProps={{\n                        style: {\n                            backgroundColor: this.state.rxData.color,\n                        },\n                    }}\n                    value={this.state.tabIndex || 0}\n                    onChange={(e, tabIndex) => {\n                        window.localStorage.setItem(`${this.props.id}-tabIndex`, tabIndex.toString());\n                        this.setState({ tabIndex });\n                    }}\n                    scrollButtons=\"auto\"\n                    centered={this.state.rxData.variant === 'centered'}\n                    variant={this.state.rxData.variant === 'fullWidth' ? 'fullWidth' : (this.state.rxData.variant === 'centered' ? undefined : 'scrollable')}\n                    orientation={this.state.rxData.vertical ? 'vertical' : undefined}\n                >\n                    {tabs}\n                </Tabs>\n            </div>\n            {this.getWidgetView()}\n        </div>;\n    }\n}\n\nTabsSliderTabs.propTypes = {\n    id: PropTypes.string.isRequired,\n    context: PropTypes.object.isRequired,\n    view: PropTypes.string.isRequired,\n    editMode: PropTypes.bool.isRequired,\n};\n\nexport default TabsSliderTabs;\n","// eslint-disable-next-line import/no-cycle\nimport BasicBar from './Basic/BasicBar';\nimport BasicBulb from './Basic/BasicBulb';\nimport BasicRedNumber from './Basic/BasicRedNumber';\nimport BasicHtml from './Basic/BasicHtml';\nimport BasicValueString from './Basic/BasicValueString';\nimport BasicViewInWidget from './Basic/BasicViewInWidget';\nimport BasicViewInWidget8 from './Basic/BasicViewInWidget8';\nimport BasicGroup from './Basic/BasicGroup';\nimport BasicSvgBool from './Basic/BasicSvgBool';\nimport BasicSvgShape from './Basic/BasicSvgShape';\nimport BasicScreenResolution from './Basic/BasicScreenResolution';\nimport BasicSpeechToText from './Basic/BasicSpeechToText';\nimport BasicIFrame from './Basic/BasicIFrame';\nimport BasicImage from './Basic/BasicImage';\nimport BasicHtmlNav from './Basic/BasicHtmlNav';\nimport BasicFilterDropdown from './Basic/BasicFilterDropdown';\nimport BasicLink from './Basic/BasicLink';\nimport BasicImage8 from './Basic/BasicImage8';\n\nimport JQuiButton from './JQui/JQuiButton';\nimport JQuiButtonBlank from './JQui/JQuiButtonBlank';\nimport JQuiIconLink from './JQui/JQuiIconLink';\nimport JQuiIconInc from './JQui/JQuiIconInc';\nimport JQuiIconHttpGet from './JQui/JQuiIconHttpGet';\nimport JQuiDialog from './JQui/JQuiDialog';\nimport JQuiIconDialog from './JQui/JQuiIconDialog';\nimport JQuiContainerDialog from './JQui/JQuiContainerDialog';\nimport JQuiButtonNavigation from './JQui/JQuiButtonNavigation';\nimport JQuiIconNavigation from './JQui/JQuiIconNavigation';\nimport JQuiButtonPasswordNavigation from './JQui/JQuiButtonPasswordNavigation';\nimport JQuiDialogExternal from './JQui/JQuiDialogExternal';\nimport JQuiButtonDialogClose from './JQui/JQuiButtonDialogClose';\nimport JQuiContainerButtonDialog from './JQui/JQuiContainerButtonDialog';\nimport JQuiContainerIconDialog from './JQui/JQuiContainerIconDialog';\nimport JQuiInput from './JQui/JQuiInput';\nimport JQuiInputSet from './JQui/JQuiInputSet';\nimport JQuiBinaryState from './JQui/JQuiBinaryState';\nimport JQuiRadio from './JQui/JQuiRadio';\nimport JQuiState from './JQui/JQuiState';\nimport JQuiRadioList from './JQui/JQuiRadioList';\nimport JQuiSelectList from './JQui/JQuiSelectList';\nimport JQuiIconStatePushButton from './JQui/JQuiIconStatePushButton';\nimport JQuiIconStateBool from './JQui/JQuiIconStateBool';\nimport JQuiRadioSteps from './JQui/JQuiRadioSteps';\nimport JQuiWriteState from './JQui/JQuiWriteState';\nimport JQuiSlider from './JQui/JQuiSlider';\nimport JQuiSliderVertical from './JQui/JQuiSliderVertical';\nimport JQuiInputDate from './JQui/JQuiInputDate';\nimport JQuiInputDateTime from './JQui/JQuiInputDateTime';\nimport JQuiToggle from './JQui/JQuiToggle';\n\nimport TabsSliderTabs from './Tabs/TabsSliderTabs';\n\nconst WIDGETS = [\n    BasicBar,\n    BasicBulb,\n    BasicHtml,\n    BasicHtmlNav,\n    BasicFilterDropdown,\n    BasicLink,\n    BasicValueString,\n    BasicViewInWidget,\n    BasicViewInWidget8,\n    BasicGroup,\n    BasicSvgBool,\n    BasicRedNumber,\n    BasicSvgShape,\n    BasicScreenResolution,\n    BasicSpeechToText,\n    BasicIFrame,\n    BasicImage,\n    BasicImage8,\n\n    JQuiButton,\n    JQuiButtonBlank,\n    JQuiIconLink,\n    JQuiIconInc,\n    JQuiIconHttpGet,\n    JQuiDialog,\n    JQuiIconDialog,\n    JQuiContainerDialog,\n    JQuiButtonNavigation,\n    JQuiIconNavigation,\n    JQuiButtonPasswordNavigation,\n    JQuiDialogExternal,\n    JQuiContainerButtonDialog,\n    JQuiContainerIconDialog,\n    JQuiButtonDialogClose,\n    JQuiInput,\n    JQuiInputSet,\n    JQuiBinaryState,\n    JQuiRadio,\n    JQuiState,\n    JQuiRadioList,\n    JQuiSelectList,\n    JQuiRadioSteps,\n    JQuiWriteState,\n    JQuiSlider,\n    JQuiSliderVertical,\n    JQuiIconStatePushButton,\n    JQuiIconStateBool,\n    JQuiInputDate,\n    JQuiInputDateTime,\n    JQuiToggle,\n\n    TabsSliderTabs,\n];\n\nexport default WIDGETS;\n","import React, { useRef } from 'react';\nimport { type Styles, withStyles } from '@mui/styles';\nimport { useDrag, useDrop, DndProvider } from 'react-dnd';\nimport { HTML5Backend } from 'react-dnd-html5-backend';\n\nimport { Menu, MenuItem } from '@mui/material';\n\nimport { I18n, Utils } from '@iobroker/adapter-react-v5';\n\n// eslint-disable-next-line import/no-cycle\nimport { getWidgetTypes, type WidgetType } from './visWidgetsCatalog';\n\nconst styles: Styles<string, any> = () => ({\n    widgetIcon: {\n        overflow: 'hidden',\n        width: 40,\n        height: 40,\n        display: 'inline-block',\n        marginRight: 4,\n    },\n    icon: {\n        width: '100%',\n        height: '100%',\n        objectFit: 'contain',\n    },\n    widgetName: {\n        verticalAlign: 'top',\n        display: 'inline-block',\n    },\n    widgetImage: {\n        display: 'block',\n        width: 30,\n        height: 30,\n        transformOrigin: '0 0',\n    },\n    widgetType: {\n        verticalAlign: 'top',\n        display: 'inline-block',\n        fontSize: 12,\n        fontStyle: 'italic',\n        marginLeft: 8,\n    },\n    widgetNameText: {\n        lineHeight: '20px',\n    },\n    coloredWidgetSet: {\n        padding: '0 3px',\n        borderRadius: 3,\n    },\n    number: {\n        marginRight: 8,\n    },\n});\n\nconst WIDGET_ICON_HEIGHT = 34;\n\nconst IMAGE_TYPES = ['.png', '.jpg', '.svg', '.gif', '.apng', '.avif', '.webp'];\n\ninterface WidgetProps {\n    id: string;\n    children: React.JSX.Element | React.JSX.Element[];\n    index: number;\n    moveCard: (dragIndex: number, hoverIndex: number) => void;\n    onDropped: (index?: number) => void;\n    selected: boolean;\n}\n\ninterface Item {\n    id: string;\n    index: number;\n}\n\nconst Widget = ({\n    id,\n    children,\n    index,\n    moveCard,\n    onDropped,\n    selected,\n}: WidgetProps) => {\n    const ref = useRef(null);\n    const [{ handlerId }, drop] = useDrop({\n        accept: 'widget',\n        collect(monitor) {\n            return {\n                handlerId: monitor.getHandlerId(),\n            };\n        },\n        drop(/* item, monitor */) {\n            onDropped();\n        },\n        hover(item, monitor) {\n            if (!ref.current) {\n                return;\n            }\n            const dragIndex = (item as Item).index;\n            const hoverIndex = index;\n            // Don't replace items with themselves\n            if (dragIndex === hoverIndex) {\n                return;\n            }\n            // Determine rectangle on screen\n            const hoverBoundingRect = (ref.current as HTMLElement)?.getBoundingClientRect();\n            // Get vertical middle\n            const hoverMiddleY =\n                (hoverBoundingRect.bottom - hoverBoundingRect.top) / 2;\n            // Determine mouse position\n            const clientOffset = monitor.getClientOffset();\n            // Get pixels to the top\n            const hoverClientY = (clientOffset?.y || 0) - hoverBoundingRect.top;\n            // Only perform the move when the mouse has crossed half of the item's height\n            // When dragging downwards, only move when the cursor is below 50%\n            // When dragging upwards, only move when the cursor is above 50%\n            // Dragging downwards\n            if (dragIndex < hoverIndex && hoverClientY < hoverMiddleY) {\n                return;\n            }\n            // Dragging upwards\n            if (dragIndex > hoverIndex && hoverClientY > hoverMiddleY) {\n                return;\n            }\n            // Time to actually perform the action\n            moveCard(dragIndex, hoverIndex);\n            // Note: we're mutating the monitor item here!\n            // Generally it's better to avoid mutations,\n            // but it's good here for the sake of performance\n            // to avoid expensive index searches.\n            (item as Item).index = hoverIndex;\n        },\n    });\n\n    const [{ isDragging }, drag] = useDrag({\n        type: 'widget',\n        item: () => ({ id, index }),\n        collect: monitor => ({ isDragging: monitor.isDragging() }),\n    });\n    const opacity = isDragging ? 0 : 1;\n    drag(drop(ref));\n\n    return <MenuItem\n        ref={ref}\n        selected={selected}\n        style={{ opacity }}\n        data-handler-id={handlerId}\n        onClick={() => onDropped(index)}\n    >\n        {children}\n    </MenuItem>;\n};\n\ninterface VisOrderMenuProps {\n    wid: string;\n    view: string;\n    anchorEl: any;\n    order: string[];\n    views: Record<string, any>;\n    themeType: 'dark' | 'light';\n    onClose: (order?: string[]) => void;\n    classes: Record<string, string>;\n}\n\ninterface VisOrderMenuState {\n    order: string[];\n}\n\nclass VisOrderMenu extends React.Component<VisOrderMenuProps, VisOrderMenuState> {\n    private readonly imageRef: React.RefObject<HTMLDivElement>[];\n\n    private readonly widgetTypes: WidgetType[];\n\n    constructor(props: VisOrderMenuProps) {\n        super(props);\n        this.widgetTypes = getWidgetTypes();\n        this.imageRef = [];\n        for (let i = 0; i < this.props.order.length; i++) {\n            this.imageRef.push(React.createRef());\n        }\n\n        this.state = {\n            order: [...this.props.order],\n        };\n    }\n\n    componentDidUpdate(/* prevProps, prevState, snapshot */) {\n        for (let i = 0; i < this.state.order.length; i++) {\n            if (this.imageRef[i].current?.children[0]) {\n                const height = (this.imageRef[i].current as HTMLElement).children[0].clientHeight;\n                if (height > WIDGET_ICON_HEIGHT) {\n                    (this.imageRef[i].current as HTMLElement).style.transform = `scale(${WIDGET_ICON_HEIGHT / height})`;\n                }\n            }\n        }\n    }\n\n    moveCard = (dragIndex: number, hoverIndex: number) => {\n        const order = [...this.state.order];\n        const dragCard = order[dragIndex];\n        order.splice(dragIndex, 1);\n        order.splice(hoverIndex, 0, dragCard);\n        this.setState({ order });\n    };\n\n    getWidgetDiv(id: string, index: number) {\n        const widget = this.props.views[this.props.view].widgets[id];\n        const tpl = widget.tpl;\n        const _widgetType = this.widgetTypes.find(foundWidgetType => foundWidgetType.name === tpl);\n        let widgetLabel = _widgetType?.title || '';\n        let widgetColor = _widgetType?.setColor;\n        if (_widgetType?.label) {\n            widgetLabel = I18n.t(_widgetType.label);\n        }\n        // remove legacy stuff\n        widgetLabel = widgetLabel.split('<br')[0];\n        widgetLabel = widgetLabel.split('<span')[0];\n        widgetLabel = widgetLabel.split('<div')[0];\n\n        let setLabel = _widgetType?.set;\n        if (_widgetType?.setLabel) {\n            setLabel = I18n.t(_widgetType.setLabel);\n        } else if (setLabel) {\n            const widgetWithSetLabel = this.widgetTypes.find(w => w.set === setLabel && w.setLabel);\n            if (widgetWithSetLabel) {\n                widgetColor = widgetWithSetLabel.setColor;\n                if (widgetWithSetLabel.setLabel) {\n                    setLabel = I18n.t(widgetWithSetLabel.setLabel);\n                }\n            }\n        }\n\n        let widgetIcon = _widgetType?.preview || '';\n        if (widgetIcon.startsWith('<img')) {\n            const prev = widgetIcon.match(/src=\"([^\"]+)\"/);\n            if (prev && prev[1]) {\n                widgetIcon = prev[1];\n            }\n        }\n\n        let img;\n        if (_widgetType?.preview?.startsWith('<img')) {\n            const m = _widgetType?.preview.match(/src=\"([^\"]+)\"/) || _widgetType?.preview.match(/src='([^']+)'/);\n            if (m) {\n                img = <img src={m[1]} className={this.props.classes.icon} alt={id} />;\n            }\n        } else if (_widgetType?.preview) {\n            const preview = _widgetType.preview.toLowerCase();\n            if (IMAGE_TYPES.find(ext => preview.endsWith(ext))) {\n                img = <img src={_widgetType?.preview} className={this.props.classes.icon} alt={id} />;\n            }\n        }\n\n        if (!img && _widgetType?.preview) {\n            img = <span\n                className={this.props.classes.widgetImage}\n                ref={this.imageRef[index]}\n                // eslint-disable-next-line react/no-danger\n                dangerouslySetInnerHTML={{ __html: _widgetType.preview }}\n            />;\n        }\n\n        let widgetBackColor;\n        if (widgetColor) {\n            widgetBackColor = Utils.getInvertedColor(widgetColor, this.props.themeType, false);\n            if (widgetBackColor === '#DDD') {\n                widgetBackColor = '#FFF';\n            } else if (widgetBackColor === '#111') {\n                widgetBackColor = '#000';\n            }\n        }\n        if (tpl === '_tplGroup') {\n            widgetLabel = I18n.t('group');\n        }\n        if (widget.marketplace) {\n            setLabel = `${widget.marketplace.name}`;\n            widgetLabel = `${I18n.t('version')} ${widget.marketplace.version}`;\n        }\n\n        return <Widget\n            key={id}\n            id={id}\n            index={index}\n            selected={this.props.wid === id}\n            moveCard={this.moveCard}\n            onDropped={i => this.onMove(i)}\n        >\n            <div style={{ display: 'flex', flexWrap: 'wrap' }}>\n                {widgetIcon ? <div className={this.props.classes.widgetIcon}>{img}</div> : null}\n                <div className={this.props.classes.widgetName}>{id}</div>\n                <div className={this.props.classes.widgetType}>\n                    <div\n                        style={{\n                            fontWeight: 'bold',\n                            color: widgetColor,\n                            backgroundColor: widgetBackColor,\n                        }}\n                        className={Utils.clsx(this.props.classes.widgetNameText, widgetBackColor && this.props.classes.coloredWidgetSet)}\n                    >\n                        {setLabel}\n                    </div>\n                    <div className={this.props.classes.widgetNameText}>{widgetLabel}</div>\n                </div>\n            </div>\n        </Widget>;\n    }\n\n    onMove(index?: number): void {\n        if (index !== undefined) {\n            // move actual widget to the index\n            const order = [...this.state.order];\n            const w = order[index];\n            order[index] = this.props.wid;\n            order[this.state.order.indexOf(this.props.wid)] = w;\n            this.setState({ order }, () => {\n                if (JSON.stringify(this.state.order) !== JSON.stringify(this.props.order)) {\n                    this.props.onClose(this.state.order);\n                }\n            });\n            return;\n        }\n\n        if (JSON.stringify(this.state.order) !== JSON.stringify(this.props.order)) {\n            this.props.onClose(this.state.order);\n        }\n    }\n\n    render() {\n        return <Menu\n            anchorEl={this.props.anchorEl}\n            open={!0}\n            onClose={() => this.props.onClose()}\n        >\n            <div\n                style={{\n                    padding: 21,\n                    fontWeight: 'normal',\n                    width: 250,\n                    fontSize: 12,\n                    fontStyle: 'italic',\n                    textAlign: 'center',\n                }}\n            >\n                {I18n.t('order_help')}\n            </div>\n            <DndProvider backend={HTML5Backend}>\n                {this.state.order.map((id, i) => this.getWidgetDiv(id, i))}\n            </DndProvider>\n        </Menu>;\n    }\n}\n\nexport default withStyles(styles)(VisOrderMenu);\n","/**\n *  ioBroker.vis\n *  https://github.com/ioBroker/ioBroker.vis\n *\n *  Copyright (c) 2022-2024 Denis Haev https://github.com/GermanBluefox,\n *  Creative Common Attribution-NonCommercial (CC BY-NC)\n *\n *  http://creativecommons.org/licenses/by-nc/4.0/\n *\n * Short content:\n * Licensees may copy, distribute, display and perform the work and make derivative works based on it only if they give the author or licensor the credits in the manner specified by these.\n * Licensees may copy, distribute, display, and perform the work and make derivative works based on it only for noncommercial purposes.\n * (Free for non-commercial use).\n */\n\nimport React from 'react';\n\nimport {\n    Anchor as AnchorIcon,\n    Expand as ExpandIcon,\n    ArrowUpward as UpIcon,\n    ArrowDownward as DownIcon,\n    KeyboardReturn,\n} from '@mui/icons-material';\n\nimport { type LegacyConnection, I18n, Utils } from '@iobroker/adapter-react-v5';\n\nimport { calculateOverflow, deepClone, isVarFinite } from '@/Utils/utils';\nimport {\n    AnyWidgetId, ResizeHandler,\n    VisContext, GroupData, WidgetData, WidgetStyle, GroupWidgetId,\n} from '@/types';\nimport {\n    addClass,\n    removeClass,\n    replaceGroupAttr,\n} from './visUtils';\n\nimport VisOrderMenu from './visOrderMenu';\nimport type { AskViewCommand, WidgetReference } from './visView';\n\nexport interface VisBaseWidgetProps {\n    /** Widget ID */\n    id: AnyWidgetId;\n    /** If edit mode */\n    editMode: boolean;\n    /** If runtime */\n    runtime: boolean;\n    /** View where widget is on */\n    view: string;\n    /** If it is positioned relative */\n    isRelative: boolean;\n    /** Currently selected widgets */\n    selectedWidgets: AnyWidgetId[];\n    /** Relative order of widgets */\n    relativeWidgetOrder: AnyWidgetId[];\n    /** If moving of widget is allowed */\n    moveAllowed: boolean;\n    /** Currently selected group */\n    selectedGroup: GroupWidgetId;\n    /** Additional context */\n    context: VisContext;\n    /** TPL type */\n    tpl: string;\n    /** Some filter */\n    viewsActiveFilter: { [view: string]: string[] };\n    /** Function to register the widget */\n    askView: (command: AskViewCommand, props?: WidgetReference) => any;\n    onIgnoreMouseEvents: (bool: boolean) => void;\n    onWidgetsChanged: (...props: any[]) => void;\n    mouseDownOnView: (...props: any[]) => void;\n    refParent: React.RefObject<any>;\n    customSettings: any;\n    classes: Record<string, string>;\n    socket: LegacyConnection;\n}\n\nexport type VisWidgetCommand = 'includePossible' | 'includePossibleNOT' | 'startStealMode' | 'cancelStealMode' | 'startMove' | 'startResize' | 'stopMove' | 'stopResize' | 'collectFilters' | 'changeFilter' | 'updateContainers' | 'closeDialog' | 'openDialog' | 'updatePosition' | 'include';\n\ntype Resize = 'left' | 'right' | 'top' | 'bottom' | 'bottom-left' | 'bottom-right' | 'top-left' | 'top-right' | boolean\n\nexport interface WidgetDataState extends WidgetData {\n    bindings: string[];\n    _originalData?: string;\n}\n\nexport interface GroupDataState extends GroupData {\n    bindings?: string[];\n    _originalData?: string;\n}\n\nexport interface WidgetStyleState extends WidgetStyle {\n    bindings?: string[];\n    _originalData?: string;\n}\n\nexport interface VisBaseWidgetState {\n    data: WidgetDataState | GroupDataState;\n    style: WidgetStyleState;\n    editMode: boolean;\n    rxStyle?: WidgetStyleState;\n    applyBindings?: false | true | { top: string | number; left: string | number };\n    multiViewWidget?: boolean;\n    selected?: boolean;\n    selectedOne?: boolean;\n    resizable?: boolean;\n    resizeHandles?: ResizeHandler[];\n    widgetHint?: 'light' | 'dark' | 'hide';\n    hideHelper?: boolean;\n    isHidden?: boolean;\n    gap?: number;\n    draggable?: boolean;\n    showRelativeMoveMenu?: boolean;\n}\n\nexport interface VisBaseWidgetMovement {\n    top: number;\n    left: number;\n    width: number;\n    height: number;\n    order?: any;\n}\n\ninterface Handler {\n    top?: string | number;\n    left?: string | number;\n    bottom?: string | number;\n    height?: string | number;\n    right?: string | number;\n    width?: string | number;\n    cursor: 'nwse-resize' | 'ns-resize' | 'ew-resize' | 'nesw-resize' | 'default';\n    background: string;\n    opacity: number;\n    borderTop?: string;\n    borderBottom?: string;\n    borderLeft?: string;\n    borderRight?: string;\n}\n\ninterface ResizerElement extends HTMLDivElement {\n    _storedOpacity: string;\n}\n\n/**\n * Methods which should be optionally implemented by inherited classes\n */\ninterface VisBaseWidget {\n    renderSignals(): React.ReactNode;\n    renderLastChange(style: unknown): React.ReactNode;\n}\n\nclass VisBaseWidget<TState extends Partial<VisBaseWidgetState> = VisBaseWidgetState> extends React.Component<VisBaseWidgetProps, TState & VisBaseWidgetState> {\n    static FORBIDDEN_CHARS = /[^._\\-/ :!#$%&()+=@^{}|~]+/g; // from https://github.com/ioBroker/ioBroker.js-controller/blob/master/packages/common/lib/common/tools.js\n\n    /** We do not store the SVG Element in the state because it is cyclic */\n    private relativeMoveMenu?: EventTarget & SVGSVGElement;\n\n    /** if currently resizing */\n    private resize: Resize = false;\n\n    private readonly uuid = `${Date.now()}.${Math.round(Math.random() * 1_000_000)}`;\n\n    protected refService = React.createRef<HTMLDivElement>();\n\n    protected widDiv: null | HTMLDivElement = null;\n\n    readonly onCommandBound: typeof this.onCommand;\n\n    protected onResize: undefined | (() => void);\n\n    private updateInterval?: ReturnType<typeof setTimeout>;\n\n    private pressTimeout?: ReturnType<typeof setTimeout>;\n\n    private shadowDiv: any;\n\n    private stealCursor?: string;\n\n    private beforeIncludeColor?: string;\n\n    private lastClick?: number;\n\n    protected movement?: VisBaseWidgetMovement;\n\n    protected resizeLocked?: boolean;\n\n    protected visDynamicResizable: undefined | null | { default: boolean; desiredSize: { width: number; height: number } | boolean };\n\n    protected isCanWidget?: boolean;\n\n    constructor(props: VisBaseWidgetProps) {\n        super(props);\n\n        const widget = props.context.views[props.view].widgets[props.id];\n        const multiViewWidget = props.id.includes('_');\n\n        const selected = !multiViewWidget && props.editMode && props.selectedWidgets?.includes(props.id);\n\n        const data: WidgetDataState | GroupDataState = deepClone(widget.data || {}) as WidgetDataState | GroupDataState;\n        const style: WidgetStyle = deepClone(widget.style || {}) as WidgetStyle;\n        VisBaseWidget.replacePRJ_NAME(data, style, props);\n\n        this.state = {\n            data,\n            style,\n            // eslint-disable-next-line react/no-unused-state\n            applyBindings: false,\n            editMode: !multiViewWidget && this.props.editMode,\n            multiViewWidget,\n            selected,\n            selectedOne: selected && this.props.selectedWidgets.length === 1,\n            resizable: true,\n            resizeHandles: ['n', 'e', 's', 'w', 'nw', 'ne', 'sw', 'se'],\n            widgetHint: props.context.widgetHint,\n            isHidden: VisBaseWidget.isWidgetFilteredOutStatic(\n                props.viewsActiveFilter,\n                widget.data,\n                props.view,\n                props.editMode,\n            ),\n            hideHelper: false,\n            gap: style.position === 'relative' ? (isVarFinite(props.context.views[props.view].settings?.rowGap) ? parseFloat(props.context.views[props.view].settings?.rowGap as string) : 0) : 0,\n        } as TState & VisBaseWidgetState;\n\n        this.onCommandBound = this.onCommand.bind(this);\n    }\n\n    static replacePRJ_NAME(data: Record<string, any>, style: Record<string, any>, props: VisBaseWidgetProps) {\n        const context = props.context;\n        if (data) {\n            delete data._originalData;\n            Object.keys(data).forEach(attr => {\n                if (attr && data[attr] && typeof data[attr] === 'string' && (attr.startsWith('src') || attr.endsWith('src') || attr.includes('icon')) && data[attr].startsWith('_PRJ_NAME')) {\n                    if (!data._originalData) {\n                        data._originalData = JSON.stringify(data);\n                    }\n                    // \"_PRJ_NAME\".length = 9\n                    data[attr] = `../${context.adapterName}.${context.instance}/${context.projectName}${data[attr].substring(9)}`;\n                }\n            });\n        }\n        if (style) {\n            delete style._originalData;\n            if (style['background-image'] && style['background-image'].startsWith('_PRJ_NAME')) {\n                if (!style._originalData) {\n                    style._originalData = JSON.stringify(style);\n                }\n                style['background-image'] = `../${context.adapterName}.${context.instance}/${context.projectName}${style['background-image'].substring(9)}`;  // \"_PRJ_NAME\".length = 9\n            }\n        }\n    }\n\n    componentDidMount() {\n        // register service ref by view for resize and move only in edit mode\n        this.props.askView && this.props.askView('register', {\n            id: this.props.id,\n            uuid: this.uuid,\n            widDiv: this.widDiv,\n            refService: this.refService,\n            onMove: this.onMove,\n            onResize: this.onResize,\n            onTempSelect: this.onTempSelect,\n            onCommand: this.onCommandBound,\n        });\n    }\n\n    componentWillUnmount() {\n        this.updateInterval && clearInterval(this.updateInterval);\n        this.updateInterval = undefined;\n\n        this.pressTimeout && clearTimeout(this.pressTimeout);\n        this.pressTimeout = undefined;\n\n        // delete service ref from view only in edit mode\n        this.props.askView && this.props.askView('unregister', { id: this.props.id, uuid: this.uuid });\n        if (this.shadowDiv) {\n            this.shadowDiv.remove();\n            this.shadowDiv = null;\n        }\n    }\n\n    // this method may be not in form onCommand = command => {}, as it can be overloaded\n    onCommand(command: VisWidgetCommand, _option?: any): any {\n        if (command === 'includePossible') {\n            const overlay = this.refService.current?.querySelector('.vis-editmode-overlay') as HTMLDivElement;\n            if (overlay && this.beforeIncludeColor === undefined) {\n                this.beforeIncludeColor = overlay.style.backgroundColor;\n                overlay.style.backgroundColor = 'rgba(0, 255, 0, 0.3)';\n            }\n            return true;\n        }\n        if (command === 'includePossibleNOT') {\n            if (this.beforeIncludeColor !== undefined) {\n                const overlay = this.refService.current?.querySelector('.vis-editmode-overlay') as HTMLDivElement;\n                overlay && (overlay.style.backgroundColor = this.beforeIncludeColor);\n                this.beforeIncludeColor = undefined;\n            }\n            return true;\n        }\n\n        if (command === 'startStealMode') {\n            this.stealCursor = this.refService.current?.style.cursor || 'nocursor';\n            if (this.refService.current) {\n                this.refService.current.style.cursor = 'crosshair';\n                this.refService.current.className = addClass(this.refService.current.className, 'vis-editmode-steal-style');\n            }\n            const resizers = this.refService.current?.querySelectorAll('.vis-editmode-resizer') as NodeListOf<HTMLDivElement>;\n            resizers?.forEach(item => item.style.display = 'none');\n            return true;\n        }\n\n        if (command === 'cancelStealMode') {\n            if (this.stealCursor !== 'nocursor' && this.refService.current && this.stealCursor) {\n                this.refService.current.style.cursor = this.stealCursor;\n            }\n            this.stealCursor = undefined;\n            if (this.refService.current) {\n                this.refService.current.className = removeClass(this.refService.current.className, 'vis-editmode-steal-style');\n            }\n            const resizers = this.refService.current?.querySelectorAll('.vis-editmode-resizer') as NodeListOf<HTMLDivElement>;\n            resizers?.forEach(item => item.style.display = '');\n            return true;\n        }\n\n        if (command === 'startMove' || command === 'startResize') {\n            const overlay = this.refService.current?.querySelector('.vis-editmode-overlay');\n            if (overlay) {\n                if (this.state.selected) {\n                    overlay.className = removeClass(overlay.className, 'vis-editmode-selected');\n                } else {\n                    overlay.className = removeClass(overlay.className, 'vis-editmode-overlay-not-selected');\n                }\n            }\n\n            if (command === 'startResize') {\n                this.resize = true;\n            }\n            return true;\n        }\n\n        if (command === 'stopMove' || command === 'stopResize') {\n            const overlay = this.refService.current?.querySelector('.vis-editmode-overlay') as HTMLDivElement;\n            if (overlay) {\n                if (this.beforeIncludeColor !== undefined) {\n                    overlay.style.backgroundColor = this.beforeIncludeColor;\n                    this.beforeIncludeColor = undefined;\n                }\n\n                if (this.state.selected) {\n                    overlay.className = addClass(overlay.className, 'vis-editmode-selected');\n                } else {\n                    overlay.className = addClass(overlay.className, 'vis-editmode-overlay-not-selected');\n                }\n            }\n\n            // show resizers again\n            const resizers = this.refService.current?.querySelectorAll('.vis-editmode-resizer') as NodeListOf<HTMLDivElement>;\n            resizers?.forEach(item => item.style.display = 'block');\n\n            if (command === 'stopResize') {\n                this.resize = false;\n            }\n            return true;\n        }\n\n        return false;\n    }\n\n    static getDerivedStateFromProps(props: VisBaseWidgetProps, state: VisBaseWidgetState) {\n        const context = props.context;\n        let newState: Partial<VisBaseWidgetState> | null = null; // No change to state by default\n        let widget = context.views[props.view].widgets[props.id];\n        const gap = widget.style.position === 'relative' ?\n            (isVarFinite(context.views[props.view].settings?.rowGap) ? parseFloat(context.views[props.view].settings?.rowGap as string) : 0) : 0;\n        let copied = false;\n\n        if (widget.groupid) {\n            // this widget belongs to group\n            const parentWidgetData = context.views[props.view].widgets[widget.groupid].data;\n            // extract attribute names\n            const names = Object.keys(parentWidgetData)\n                .map(attr => (attr.startsWith('attrType_') ? attr.substring(9) : null))\n                .filter(attr => attr);\n\n            if (names.length && widget.data) {\n                for (const [attr, val] of Object.entries(widget.data)) {\n                    if (typeof val === 'string' && names.find(a => val.includes(a as string))) {\n                        const result = replaceGroupAttr(widget.data[attr], parentWidgetData);\n                        if (result.doesMatch) {\n                            // create a copy as we will substitute the values\n                            if (!copied) {\n                                copied = true;\n                                widget = deepClone(widget);\n                            }\n                            widget.data[attr] = result.newString || '';\n                        }\n                    }\n                }\n            }\n        }\n\n        // take actual (old) style and data\n        const styleStr: string = state.style?._originalData ? state.style._originalData : JSON.stringify(state.style);\n        const dataStr: string = state.data?._originalData ? state.data._originalData : JSON.stringify(state.data);\n\n        const isHidden = VisBaseWidget.isWidgetFilteredOutStatic(\n            props.viewsActiveFilter,\n            widget.data,\n            props.view,\n            props.editMode,\n        );\n\n        // compare with new style and data\n        if (JSON.stringify(widget.style || {}) !== styleStr ||\n            JSON.stringify(widget.data || {}) !== dataStr ||\n            gap !== state.gap ||\n            isHidden !== state.isHidden\n        ) {\n            if (!props.runtime) {\n                const styleObj: WidgetStyle = JSON.parse(styleStr);\n                Object.keys(styleObj as Record<string, string>).forEach(attr => {\n                    const oldStyle = (widget.style as Record<string, string>)[attr];\n                    const newStyle = (styleObj as Record<string, string>)[attr];\n                    if (newStyle !== oldStyle) {\n                        console.log(`[${Date.now()} / ${props.id}] Rerender because of style.${attr}: ${newStyle} !== ${oldStyle}`);\n                    }\n                });\n                Object.keys(widget.style).forEach((attr: string) => {\n                    const oldStyle = (widget.style as Record<string, string>)[attr];\n                    const newStyle = (styleObj as Record<string, string>)[attr];\n                    if (newStyle !== oldStyle) {\n                        console.log(`[${Date.now()} / ${props.id}] Rerender because of style.${attr}: ${newStyle} !== ${oldStyle}`);\n                    }\n                });\n\n                const dataObj: GroupData = JSON.parse(dataStr);\n                Object.keys(dataObj).forEach((attr: string) => {\n                    if (JSON.stringify(dataObj[attr]) !== JSON.stringify(widget.data[attr])) {\n                        console.log(`[${Date.now()} / ${props.id}] Rerender because of data.${attr}: ${dataObj[attr]} !== ${widget.data[attr]}`);\n                    }\n                });\n            }\n\n            let data: WidgetDataState;\n            let style: WidgetStyleState;\n            // restore original data\n            if (copied) {\n                data = widget.data as WidgetDataState || { bindings: [] };\n                // detect for CanWidgets if size was changed\n                style = widget.style as WidgetStyleState || { bindings: [] };\n            } else {\n                data = widget.data ? deepClone(widget.data) as WidgetDataState : { bindings: [] } as WidgetDataState;\n                // detect for CanWidgets if size was changed\n                style = widget.style ? deepClone(widget.style) as WidgetStyleState : { bindings: [] } as WidgetStyleState;\n            }\n\n            // replace all _PRJ_NAME with vis.0/name\n            VisBaseWidget.replacePRJ_NAME(data, style, props);\n\n            newState = {};\n            newState.isHidden = isHidden;\n            newState.style = style;\n            newState.data = data;\n            newState.gap = gap;\n            newState.applyBindings = { top: widget.style.top as number, left: widget.style.left as number };\n        }\n\n        if (props.editMode !== state.editMode) {\n            newState = newState || {};\n            newState.editMode = props.editMode;\n            newState.applyBindings = true;\n        }\n\n        if (props.context.widgetHint !== state.widgetHint) {\n            newState = newState || {};\n            newState.widgetHint = props.context.widgetHint;\n        }\n\n        const selected = !state.multiViewWidget && props.editMode && props.selectedWidgets && props.selectedWidgets.includes(props.id);\n        const selectedOne = selected && props.selectedWidgets.length === 1;\n\n        if (selected !== state.selected || selectedOne !== state.selectedOne) {\n            newState = newState || {};\n            newState.selected = selected;\n            newState.selectedOne = selectedOne;\n        }\n\n        return newState;\n    }\n\n    static removeFromArray(items: Record<string, any>, IDs: string[], view: string, widget: string) {\n        items && Object.keys(items).forEach(id => {\n            if (!IDs || IDs.includes(id)) {\n                for (let i = items[id].length - 1; i >= 0; i--) {\n                    const item = items[id][i];\n                    if (item.view === view && item.widget === widget) {\n                        items[id].splice(i, 1);\n                    }\n                }\n            }\n        });\n    }\n\n    static parseStyle(style: string, isRxStyle: boolean) {\n        const result: Record<string, unknown> = {};\n        // style is like \"height: 10; width: 20\"\n        (style || '').split(';').forEach(part => {\n            part = part.trim();\n            if (part) {\n                let [attr, value] = part.split(':');\n                attr = attr.trim();\n                if (attr && value) {\n                    value = value.trim();\n                    if (!isRxStyle && (attr === 'top' || attr === 'left' || attr === 'width' || attr === 'height')) {\n                        if (!isRxStyle) {\n                            if (value !== '0' && value.match(/^[-+]?\\d+$/)) {\n                                value = `${value}px`;\n                            }\n                        } else {\n                            const f = parseFloat(value);\n                            if (value === f.toString()) {\n                                // @ts-expect-error fix later\n                                value = f;\n                            }\n                        }\n                    }\n\n                    if (value) {\n                        if (isRxStyle) {\n                            attr = attr.replace(/(-\\w)/, text => text[1].toUpperCase());\n                        }\n\n                        result[attr] = value;\n                    }\n                }\n            }\n        });\n\n        return result;\n    }\n\n    onMouseDown(e: React.MouseEvent) {\n        e.stopPropagation();\n        if (this.stealCursor && !this.state.multiViewWidget) {\n            e.stopPropagation();\n            this.props.mouseDownOnView(e, this.props.id, this.props.isRelative);\n            return;\n        }\n        if (this.props.context.views[this.props.view].widgets[this.props.id].data.locked) {\n            return;\n        }\n\n        if (this.lastClick !== undefined && Date.now() - this.lastClick < 250) {\n            console.log('AAA');\n        }\n\n        // detect double click for multi-view widgets\n        if (this.lastClick) {\n            if (this.state.multiViewWidget) {\n                if (Date.now() - this.lastClick < 250) {\n                    // change view\n                    const parts: string[] = this.props.id.split('_');\n                    const multiView: string = parts[0];\n                    const multiId: AnyWidgetId = parts[1] as AnyWidgetId;\n                    this.props.context.setSelectedWidgets([multiId], multiView);\n                }\n\n                this.lastClick = Date.now();\n                return;\n            }\n        }\n\n        if (e.shiftKey || e.ctrlKey) {\n            // add or remove\n            const pos = this.props.selectedWidgets.indexOf(this.props.id);\n            if (pos === -1) {\n                const selectedWidgets = [...this.props.selectedWidgets, this.props.id];\n                this.props.context.setSelectedWidgets(selectedWidgets);\n            } else {\n                const selectedWidgets = [...this.props.selectedWidgets];\n                selectedWidgets.splice(pos, 1);\n                this.props.context.setSelectedWidgets(selectedWidgets);\n            }\n            return;\n        }\n\n        if (!this.props.selectedWidgets.includes(this.props.id)) {\n            // set select\n            this.props.context.setSelectedWidgets([this.props.id]);\n        } else if (this.props.moveAllowed && this.state.draggable !== false) {\n            if (!this.props.isRelative) {\n                // User can drag only objects of the same type\n                this.props.mouseDownOnView(e, this.props.id, this.props.isRelative, false, this.lastClick !== undefined && Date.now() - this.lastClick < 300);\n            } else if (this.lastClick && Date.now() - this.lastClick < 250) {\n                // if double-click on a group\n                if (this.props.selectedWidgets.length === 1 &&\n                    this.props.context.views[this.props.view].widgets[this.props.selectedWidgets[0]].tpl === '_tplGroup'\n                ) {\n                    this.props.context.setSelectedGroup(this.props.selectedWidgets[0]);\n                }\n            }\n        }\n        this.lastClick = Date.now();\n    }\n\n    createWidgetMovementShadow() {\n        if (this.shadowDiv) {\n            this.shadowDiv.remove();\n            this.shadowDiv = null;\n        }\n\n        if (!this.movement) {\n            console.error('Unknown issue, movement is falsy');\n            return;\n        }\n\n        this.shadowDiv = window.document.createElement('div');\n        this.shadowDiv.setAttribute('id', `${this.props.id}_shadow`);\n        this.shadowDiv.className = 'vis-editmode-widget-shadow';\n        if (this.refService.current) {\n            this.shadowDiv.style.width = `${this.refService.current.clientWidth}px`;\n            this.shadowDiv.style.height = `${this.refService.current.clientHeight}px`;\n            if (this.refService.current.style.borderRadius) {\n                this.shadowDiv.style.borderRadius = this.refService.current.style.borderRadius;\n            }\n        }\n\n        let parentDiv: any = this.props.refParent;\n        if (Object.prototype.hasOwnProperty.call(parentDiv, 'current')) {\n            parentDiv = parentDiv.current;\n        }\n\n        if (this.widDiv) {\n            parentDiv.insertBefore(this.shadowDiv, this.widDiv);\n            this.widDiv.style.position = 'absolute';\n            this.widDiv.style.left = `${this.movement.left}px`;\n            this.widDiv.style.top = `${this.movement.top}px`;\n        } else {\n            parentDiv.insertBefore(this.shadowDiv, this.refService.current);\n            if (this.refService.current) {\n                this.refService.current.style.position = 'absolute';\n            }\n        }\n        if (this.refService.current) {\n            this.refService.current.style.left = `${this.movement.left}px`;\n            this.refService.current.style.top = `${this.movement.top}px`;\n        }\n    }\n\n    isResizable() {\n        if (this.visDynamicResizable) {\n            // take data from field \"visResizable\"\n            // this value cannot be bound, so we can read it directly from widget.data\n            return typeof this.state.data.visResizable === 'boolean' ?\n                this.state.data.visResizable : this.visDynamicResizable.default; // by default all widgets are resizable\n        }\n\n        return this.state.resizable;\n    }\n\n    onMove = (x: number | undefined, y: number | undefined, save?: boolean, calculateRelativeWidgetPosition?: null | ((...props: any[]) => void)) => {\n        if (this.state.multiViewWidget || !this.state.editMode) {\n            return;\n        }\n\n        const movement = this.movement;\n\n        if (!this.refService.current) {\n            return;\n        }\n        if (this.resize) {\n            if (this.isResizable() === false) {\n                return;\n            }\n\n            if (x === undefined) {\n                // start of resizing\n                const rect = (this.widDiv || this.refService.current)?.getBoundingClientRect();\n\n                if (rect) {\n                    this.movement = {\n                        top: this.refService.current.offsetTop,\n                        left: this.refService.current.offsetLeft,\n                        width: rect.width,\n                        height: rect.height,\n                    };\n                }\n                const resizers = this.refService.current.querySelectorAll('.vis-editmode-resizer') as NodeListOf<ResizerElement>;\n                resizers.forEach(item => {\n                    item._storedOpacity = item.style.opacity;\n                    item.style.opacity = '0.3';\n                });\n            } else if (movement && y !== undefined && x !== undefined) {\n                if (this.resize === 'top') {\n                    this.refService.current.style.top = `${movement.top + y}px`;\n                    this.refService.current.style.height = `${movement.height - y}px`;\n                    if (this.resizeLocked) {\n                        // noinspection JSSuspiciousNameCombination\n                        this.refService.current.style.width = this.refService.current.style.height;\n                    }\n\n                    if (this.widDiv) {\n                        this.widDiv.style.top = `${movement.top + y}px`;\n                        this.widDiv.style.height = `${movement.height - y}px`;\n                        if (this.resizeLocked) {\n                            // noinspection JSSuspiciousNameCombination\n                            this.widDiv.style.width = this.widDiv.style.height;\n                        }\n                    }\n                } else if (this.resize === 'bottom') {\n                    this.widDiv && (this.widDiv.style.height = `${movement.height + y}px`);\n                    this.refService.current.style.height = `${movement.height + y}px`;\n\n                    if (this.resizeLocked) {\n                        // noinspection JSSuspiciousNameCombination\n                        this.refService.current.style.width = this.refService.current.style.height;\n                    }\n                    if (this.widDiv && this.resizeLocked) {\n                        // noinspection JSSuspiciousNameCombination\n                        this.widDiv.style.width = this.widDiv.style.height;\n                    }\n                } else if (this.resize === 'left') {\n                    this.refService.current.style.left = `${movement.left + x}px`;\n                    this.refService.current.style.width = `${movement.width - x}px`;\n                    if (this.resizeLocked) {\n                        // noinspection JSSuspiciousNameCombination\n                        this.refService.current.style.height = this.refService.current.style.width;\n                    }\n                    if (this.widDiv) {\n                        this.widDiv.style.left = `${movement.left + x}px`;\n                        this.widDiv.style.width = `${movement.width - x}px`;\n                        if (this.resizeLocked) {\n                            // noinspection JSSuspiciousNameCombination\n                            this.widDiv.style.height = this.widDiv.style.width;\n                        }\n                    }\n                } else if (this.resize === 'right') {\n                    this.widDiv && (this.widDiv.style.width = `${movement.width + x}px`);\n                    this.refService.current.style.width = `${movement.width + x}px`;\n                    if (this.resizeLocked) {\n                        // noinspection JSSuspiciousNameCombination\n                        this.refService.current.style.height = this.refService.current.style.width;\n                    }\n                    if (this.widDiv && this.resizeLocked) {\n                        // noinspection JSSuspiciousNameCombination\n                        this.widDiv.style.height = this.widDiv.style.width;\n                    }\n                } else if (this.resize === 'top-left') {\n                    this.refService.current.style.top = `${movement.top + y}px`;\n                    this.refService.current.style.left = `${movement.left + x}px`;\n                    this.refService.current.style.height = `${movement.height - y}px`;\n                    this.refService.current.style.width = `${movement.width - x}px`;\n                    if (this.resizeLocked) {\n                        // noinspection JSSuspiciousNameCombination\n                        this.refService.current.style.height = this.refService.current.style.width;\n                    }\n\n                    if (this.widDiv) {\n                        this.widDiv.style.top = `${movement.top + y}px`;\n                        this.widDiv.style.left = `${movement.left + x}px`;\n                        this.widDiv.style.height = `${movement.height - y}px`;\n                        this.widDiv.style.width = `${movement.width - x}px`;\n                        if (this.resizeLocked) {\n                            // noinspection JSSuspiciousNameCombination\n                            this.widDiv.style.height = this.widDiv.style.width;\n                        }\n                    }\n                } else if (this.resize === 'top-right') {\n                    this.refService.current.style.top = `${movement.top + y}px`;\n                    this.refService.current.style.height = `${movement.height - y}px`;\n                    this.refService.current.style.width = `${movement.width + x}px`;\n                    if (this.resizeLocked) {\n                        // noinspection JSSuspiciousNameCombination\n                        this.refService.current.style.height = this.refService.current.style.width;\n                    }\n                    if (this.widDiv) {\n                        this.widDiv.style.top = `${movement.top + y}px`;\n                        this.widDiv.style.height = `${movement.height - y}px`;\n                        this.widDiv.style.width = `${movement.width + x}px`;\n                        if (this.resizeLocked) {\n                            // noinspection JSSuspiciousNameCombination\n                            this.widDiv.style.height = this.widDiv.style.width;\n                        }\n                    }\n                } else if (this.resize === 'bottom-left') {\n                    this.refService.current.style.left = `${movement.left + x}px`;\n                    this.refService.current.style.height = `${movement.height + y}px`;\n                    this.refService.current.style.width = `${movement.width - x}px`;\n                    if (this.resizeLocked) {\n                        // noinspection JSSuspiciousNameCombination\n                        this.refService.current.style.height = this.refService.current.style.width;\n                    }\n                    if (this.widDiv) {\n                        this.widDiv.style.left = `${movement.left + x}px`;\n                        this.widDiv.style.height = `${movement.height + y}px`;\n                        this.widDiv.style.width = `${movement.width - x}px`;\n                        if (this.resizeLocked) {\n                            // noinspection JSSuspiciousNameCombination\n                            this.widDiv.style.height = this.widDiv.style.width;\n                        }\n                    }\n                } else { // bottom-right\n                    this.refService.current.style.height = `${movement.height + y}px`;\n                    this.refService.current.style.width = `${movement.width + x}px`;\n                    if (this.resizeLocked) {\n                        // noinspection JSSuspiciousNameCombination\n                        this.refService.current.style.height = this.refService.current.style.width;\n                    }\n                    if (this.widDiv) {\n                        this.widDiv.style.height = `${movement.height + y}px`;\n                        this.widDiv.style.width = `${movement.width + x}px`;\n                        if (this.resizeLocked) {\n                            // noinspection JSSuspiciousNameCombination\n                            this.widDiv.style.height = this.widDiv.style.width;\n                        }\n                    }\n                }\n            }\n\n            // end of resize\n            if (save) {\n                const resizers = this.refService.current?.querySelectorAll('.vis-editmode-resizer') as NodeListOf<any>;\n                resizers?.forEach(item => {\n                    if (item._storedOpacity !== undefined) {\n                        item.style.opacity = item._storedOpacity;\n                        delete item._storedOpacity;\n                    }\n                });\n                this.resize = false;\n                this.props.context.onWidgetsChanged([{\n                    wid: this.props.id,\n                    view: this.props.view,\n                    style: {\n                        top: this.refService.current.style.top,\n                        left: this.refService.current.style.left,\n                        width: this.refService.current.style.width,\n                        height: this.refService.current.style.height,\n                    },\n                }]);\n\n                this.movement = undefined;\n            }\n        } else if (x === undefined) {\n            if (this.state.draggable === false) {\n                return;\n            }\n\n            // initiate movement\n            this.movement = {\n                top: this.refService.current.offsetTop,\n                left: this.refService.current.offsetLeft,\n                order: [...this.props.relativeWidgetOrder],\n                width: 0,\n                height: 0,\n            };\n\n            // hide resizers\n            const resizers = this.refService.current.querySelectorAll('.vis-editmode-resizer') as NodeListOf<HTMLDivElement>;\n            resizers.forEach(item => item.style.display = 'none');\n\n            if (this.props.isRelative) {\n                // create shadow widget\n                this.createWidgetMovementShadow();\n            }\n        } else if (this.movement && y !== undefined && x !== undefined) {\n            // move widget\n            const left = `${this.movement.left + x}px`;\n            const top = `${this.movement.top + y}px`;\n\n            if (this.refService.current) {\n                this.refService.current.style.left = left;\n                this.refService.current.style.top = top;\n            }\n\n            if (this.widDiv) {\n                this.widDiv.style.left = left;\n                this.widDiv.style.top = top;\n\n                // @ts-expect-error check later\n                if (this.widDiv._customHandlers && this.widDiv._customHandlers.onMove) {\n                    // @ts-expect-error check later\n                    this.widDiv._customHandlers.onMove(this.widDiv, this.props.id);\n                }\n            }\n\n            if (this.props.isRelative && calculateRelativeWidgetPosition) {\n                // calculate widget position\n                calculateRelativeWidgetPosition(this.props.id, left, top, this.shadowDiv, this.movement.order);\n            }\n\n            // End of movement\n            if (save) {\n                // show resizers\n                const resizers = this.refService.current.querySelectorAll('.vis-editmode-resizer') as NodeListOf<HTMLDivElement>;\n                resizers.forEach(item => item.style.display = 'block');\n\n                if (this.props.isRelative) {\n                    let parentDiv: any = this.props.refParent;\n                    if (Object.prototype.hasOwnProperty.call(parentDiv, 'current')) {\n                        parentDiv = parentDiv.current;\n                    }\n                    // create shadow widget\n                    if (this.widDiv) {\n                        this.widDiv.style.position = 'relative';\n                        this.widDiv.style.top = '0';\n                        this.widDiv.style.left = '0';\n                        parentDiv.insertBefore(this.widDiv, this.shadowDiv);\n                        this.refService.current.style.top = `${this.widDiv.offsetTop}px`;\n                        this.refService.current.style.left = `${this.widDiv.offsetLeft}px`;\n                    } else {\n                        parentDiv.insertBefore(this.refService.current, this.shadowDiv);\n                        this.refService.current.style.position = 'relative';\n                        this.refService.current.style.top = '0';\n                        this.refService.current.style.left = '0';\n                    }\n                    this.shadowDiv.remove();\n                    this.shadowDiv = null;\n\n                    this.props.context.onWidgetsChanged(\n                        [{\n                            wid: this.props.id,\n                            view: this.props.view,\n                            style: {\n                                left: null,\n                                top: null,\n                            },\n                        }],\n                        this.props.view,\n                        { order: this.movement.order },\n                    );\n                } else {\n                    this.props.context.onWidgetsChanged([{\n                        wid: this.props.id,\n                        view: this.props.view,\n                        style: {\n                            left: this.movement.left + x,\n                            top: this.movement.top + y,\n                        },\n                    }]);\n                }\n\n                this.movement = undefined;\n            }\n        }\n    };\n\n    onTempSelect = (selected?: boolean) => {\n        const ref = this.refService.current?.querySelector('.vis-editmode-overlay') as HTMLElement;\n        if (!ref) {\n            return;\n        }\n        if (selected === null || selected === undefined)  {\n            // restore original state\n            if (this.props.selectedWidgets.includes(this.props.id)) {\n                if (!ref.className.includes('vis-editmode-selected')) {\n                    ref.className = addClass('vis-editmode-selected', ref.className);\n                }\n            } else {\n                ref.style.backgroundColor = '';\n                ref.className = removeClass(ref.className, 'vis-editmode-selected');\n            }\n        } else if (selected) {\n            if (!ref.className.includes('vis-editmode-selected')) {\n                ref.className = addClass('vis-editmode-selected', ref.className);\n            }\n        } else {\n            ref.className = removeClass(ref.className, 'vis-editmode-selected');\n        }\n    };\n\n    onResizeStart(e: React.MouseEvent, type: Resize) {\n        e.stopPropagation();\n        this.resize = type;\n        this.props.mouseDownOnView(e, this.props.id, this.props.isRelative, true);\n    }\n\n    getResizeHandlers(selected: any, widget: any) {\n        if (!this.state.editMode || !selected || this.props.selectedWidgets?.length !== 1) {\n            return null;\n        }\n\n        const thickness = 0.4;\n        const shift = 0.3;\n        const square = 0.4;\n\n        const squareShift = `${shift - square}em`;\n        const squareWidthHeight = `${square}em`;\n        const shiftEm = `${shift}em`;\n        const thicknessEm = `${thickness}em`;\n        const offsetEm = `${shift - thickness}em`;\n\n        const widgetWidth100 = widget.style.width === '100%';\n        const widgetHeight100 = widget.style.height === '100%';\n\n        const color = '#014488'; // it is so, to be able to change color in web storm\n        const border = `0.1em dashed ${color}`;\n        const borderDisabled = '0.1em dashed #888';\n\n        const resizable = this.isResizable();\n\n        let resizeHandlers: ResizeHandler[] = resizable && this.state.resizeHandles ? this.state.resizeHandles : [];\n\n        if (resizable && this.props.selectedGroup && this.props.selectedGroup === this.props.id) {\n            resizeHandlers = ['s', 'e', 'se'];\n        }\n\n        const RESIZERS_OPACITY = 0.9;\n        const RESIZERS_OPACITY_DISABLED = 0.5;\n\n        const isRelative = widget.usedInWidget || this.props.isRelative;\n\n        const controllable = {\n            top: !isRelative && resizeHandlers.includes('n'),\n            bottom: !widget.usedInWidget && !widgetHeight100 && resizeHandlers.includes('s'),\n            left: !isRelative && resizeHandlers.includes('w'),\n            right: !widget.usedInWidget && !widgetWidth100 && resizeHandlers.includes('e'),\n            'top-left': !widgetHeight100 && !widgetWidth100 && !isRelative && resizeHandlers.includes('nw'),\n            'top-right': !widgetHeight100 && !widgetWidth100 && !isRelative && resizeHandlers.includes('ne'),\n            'bottom-left': !widgetHeight100 && !widgetWidth100 && !isRelative && resizeHandlers.includes('sw'),\n            'bottom-right': !widgetHeight100 && !widgetWidth100 && !widget.usedInWidget && resizeHandlers.includes('se'),\n        };\n\n        const handlers: Record<string, Handler> = {\n            top: {\n                top: offsetEm,\n                height: thicknessEm,\n                left: controllable['top-left'] ? shiftEm : 0,\n                right: controllable['top-right'] ? shiftEm : 0,\n                cursor: 'ns-resize',\n                background: 'transparent',\n                opacity: controllable.top ? RESIZERS_OPACITY : RESIZERS_OPACITY_DISABLED,\n                borderTop: controllable.top ? border : borderDisabled,\n            },\n            bottom: {\n                bottom: offsetEm,\n                height: thicknessEm,\n                left:  controllable['bottom-left'] ? shiftEm : 0,\n                right:  controllable['bottom-right'] ? shiftEm : 0,\n                cursor: 'ns-resize',\n                background: 'transparent',\n                opacity: controllable.bottom ? RESIZERS_OPACITY : RESIZERS_OPACITY_DISABLED,\n                borderBottom: controllable.bottom ? border : borderDisabled,\n            },\n            left: {\n                top: controllable['top-left'] ? shiftEm : 0,\n                bottom: controllable['bottom-left'] ? shiftEm : 0,\n                left: offsetEm,\n                width: thicknessEm,\n                cursor: 'ew-resize',\n                background: 'transparent',\n                opacity: controllable.left ? RESIZERS_OPACITY : RESIZERS_OPACITY_DISABLED,\n                borderLeft: controllable.left ? border : borderDisabled,\n            },\n            right: {\n                top: controllable['top-right'] ? shiftEm : 0,\n                bottom: controllable['bottom-right'] ? shiftEm : 0,\n                right: offsetEm,\n                width: thicknessEm,\n                cursor: 'ew-resize',\n                background: 'transparent',\n                opacity: controllable.right ? RESIZERS_OPACITY : RESIZERS_OPACITY_DISABLED,\n                borderRight: controllable.right ? border : borderDisabled,\n            },\n            'top-left': {\n                top: squareShift,\n                height: squareWidthHeight,\n                left: squareShift,\n                width: squareWidthHeight,\n                cursor: 'nwse-resize',\n                background: color,\n                opacity: RESIZERS_OPACITY,\n            },\n            'top-right': {\n                top: squareShift,\n                height: squareWidthHeight,\n                right: squareShift,\n                width: squareWidthHeight,\n                cursor: 'nesw-resize',\n                background: color,\n                opacity: RESIZERS_OPACITY,\n            },\n            'bottom-left': {\n                bottom: squareShift,\n                height: squareWidthHeight,\n                left: squareShift,\n                width: squareWidthHeight,\n                cursor: 'nesw-resize',\n                background: color,\n                opacity: RESIZERS_OPACITY,\n            },\n            'bottom-right': {\n                bottom: squareShift,\n                height: squareWidthHeight,\n                right: squareShift,\n                width: squareWidthHeight,\n                cursor: 'nwse-resize',\n                background: color,\n                opacity: RESIZERS_OPACITY,\n            },\n        };\n\n        const style = {\n            position: 'absolute',\n            zIndex: 1001,\n        };\n\n        return Object.keys(handlers).map((key: string) => {\n            const handler = (handlers as Record<string, Handler>)[key];\n            if (!(controllable as Record<string, boolean>)[key]) {\n                if (key.includes('-')) {\n                    return null;\n                }\n                handler.cursor = 'default';\n            }\n\n            return <div\n                key={key}\n                className=\"vis-editmode-resizer\"\n                style={Object.assign(handler as React.CSSProperties, style)}\n                onMouseDown={handler.opacity === RESIZERS_OPACITY ? e => this.onResizeStart(e, key as Resize) : undefined}\n            />;\n        });\n    }\n\n    // eslint-disable-next-line react/no-unused-class-component-methods\n    isUserMemberOfGroup(user: string, userGroups: string[]) {\n        if (!userGroups) {\n            return true;\n        }\n        if (!Array.isArray(userGroups)) {\n            userGroups = [userGroups];\n        }\n\n        return !!userGroups.find(groupId => {\n            const group = this.props.context.userGroups[`system.group.${groupId}`];\n            return group?.common?.members?.length && group.common.members.includes(`system.user.${user}`);\n        });\n    }\n\n    static isWidgetFilteredOutStatic(viewsActiveFilter: any, widgetData: any, view: string, editMode: boolean): boolean {\n        if (!viewsActiveFilter) {\n            console.warn(`viewsActiveFilter is not defined in ${view}, data: ${JSON.stringify(widgetData)}`);\n            return false;\n        }\n\n        const vf = viewsActiveFilter[view];\n        if (!editMode && widgetData?.filterkey && vf?.length) {\n            if (vf[0] === '$') {\n                return true;\n            }\n\n            let filterKeys = widgetData.filterkey;\n\n            if (typeof filterKeys === 'string') {\n                filterKeys = filterKeys.split(',').map(f => f.trim()).filter(f => f);\n            }\n\n            // we cannot use here find as filterkey could be observable (can) and is not normal array\n            for (let f = 0; f < filterKeys.length; f++) {\n                if (vf.includes(filterKeys[f])) {\n                    return false; // widget is not hidden\n                }\n            }\n            return true;\n        }\n\n        return false;\n    }\n\n    // eslint-disable-next-line react/no-unused-class-component-methods\n    isWidgetFilteredOut(widgetData: any) {\n        return VisBaseWidget.isWidgetFilteredOutStatic(\n            this.props.viewsActiveFilter,\n            widgetData,\n            this.props.view,\n            this.state.editMode,\n        );\n    }\n\n    // eslint-disable-next-line react/no-unused-class-component-methods\n    static isWidgetHidden(widgetData: any, states: any, id: string) {\n        const oid = widgetData['visibility-oid'];\n        const condition = widgetData['visibility-cond'];\n\n        if (oid) {\n            if (!Object.keys(states).includes(`${oid}.val`)) {\n                // if we don't have state information yet - hide to prevent shortly showing widget during render\n                return true;\n            }\n\n            let val = states[`${oid}.val`];\n\n            if (val === undefined || val === null) {\n                return condition === 'not exist';\n            }\n\n            let value = widgetData['visibility-val'];\n\n            if (!condition || value === undefined || value === null) {\n                return condition === 'not exist';\n            }\n\n            if (val === 'null' && condition !== 'exist' && condition !== 'not exist') {\n                return false;\n            }\n\n            const t = typeof val;\n            if (t === 'boolean' || val === 'false' || val === 'true') {\n                value = value === 'true' || value === true || value === 1 || value === '1';\n            } else if (t === 'number') {\n                value = parseFloat(value);\n            } else if (t === 'object') {\n                val = JSON.stringify(val);\n            }\n\n            // Take care: return true if the widget is hidden!\n            switch (condition) {\n                case '==':\n                    value = value.toString();\n                    val = val.toString();\n                    if (val === '1') val = 'true';\n                    if (value === '1') value = 'true';\n                    if (val === '0') val = 'false';\n                    if (value === '0') value = 'false';\n                    return value !== val;\n                case '!=':\n                    value = value.toString();\n                    val = val.toString();\n                    if (val === '1') val = 'true';\n                    if (value === '1') value = 'true';\n                    if (val === '0') val = 'false';\n                    if (value === '0') value = 'false';\n                    return value === val;\n                case '>=':\n                    return val < value;\n                case '<=':\n                    return val > value;\n                case '>':\n                    return val <= value;\n                case '<':\n                    return val >= value;\n                case 'consist':\n                    value = value.toString();\n                    val = val.toString();\n                    return !val.toString().includes(value);\n                case 'not consist':\n                    value = value.toString();\n                    val = val.toString();\n                    return val.toString().includes(value);\n                case 'exist':\n                    return val === 'null';\n                case 'not exist':\n                    return val !== 'null';\n                default:\n                    console.log(`[${id}] Unknown visibility condition: ${condition}`);\n                    return false;\n            }\n        } else {\n            return condition && condition === 'not exist';\n        }\n    }\n\n    /**\n     * Render the widget body\n     *\n     * @param _props\n     */\n    // eslint-disable-next-line class-methods-use-this,no-unused-vars\n    renderWidgetBody(_props: VisBaseWidgetProps): React.JSX.Element | null {\n        // Default render method. Normally it should be overwritten\n        return <div\n            style={{\n                width: '100%',\n                height: '100%',\n                overflow: 'hidden',\n                background: 'repeating-linear-gradient(45deg, #333, #333 10px, #666 10px, #666 20px)',\n                color: '#FFF',\n            }}\n        >\n            <div style={{ color: '#FF0000', paddingLeft: 10 }}>{I18n.t('Unknown widget type \"%s\"', this.props.tpl)}</div>\n            <pre>{JSON.stringify(this.state.data, null, 2)}</pre>\n        </div>;\n    }\n\n    // eslint-disable-next-line react/no-unused-class-component-methods\n    changeOrder(e: React.MouseEvent, dir: number) {\n        e.stopPropagation();\n        e.preventDefault();\n        if (this.state.multiViewWidget || !this.state.editMode) {\n            return;\n        }\n\n        const order = [...this.props.relativeWidgetOrder];\n\n        const pos = order.indexOf(this.props.id);\n        if (dir > 0) {\n            if (pos === order.length - 1) {\n                return;\n            }\n            const nextId = order[pos + 1];\n            order[pos + 1] = this.props.id;\n            order[pos] = nextId;\n        } else if (!pos) {\n            return;\n        } else {\n            const nextId = order[pos - 1];\n            order[pos - 1] = this.props.id;\n            order[pos] = nextId;\n        }\n\n        this.props.context.onWidgetsChanged(null, this.props.view, { order });\n    }\n\n    static formatValue(value: any, decimals: any, _format: any) {\n        if (typeof decimals !== 'number') {\n            decimals = 2;\n            _format = decimals;\n        }\n        const format = _format === undefined ? '.,' : _format;\n        if (typeof value !== 'number') {\n            value = parseFloat(value);\n        }\n        return Number.isNaN(value) ? '' : value.toFixed(decimals || 0).replace(format[0], format[1]).replace(/\\B(?=(\\d{3})+(?!\\d))/g, format[0]);\n    }\n\n    formatIntervalHelper(value: any, type: any) {\n        let singular;\n        let plural;\n        let special24;\n        if (this.props.context.lang === 'de') {\n            if (type === 'seconds') {\n                singular = 'Sekunde';\n                plural   = 'Sekunden';\n            } else if (type === 'minutes') {\n                singular = 'Minute';\n                plural   = 'Minuten';\n            } else if (type === 'hours') {\n                singular = 'Stunde';\n                plural   = 'Stunden';\n            } else if (type === 'days') {\n                singular = 'Tag';\n                plural   = 'Tagen';\n            }\n        } else if (this.props.context.lang === 'ru') {\n            if (type === 'seconds') {\n                singular  = '';\n                plural    = '';\n                special24 = '';\n            } else if (type === 'minutes') {\n                singular  = '';\n                plural    = '';\n                special24 = '';\n            } else if (type === 'hours') {\n                singular  = '';\n                plural    = '';\n                special24 = '';\n            } else if (type === 'days') {\n                singular  = '';\n                plural    = '';\n                special24 = '';\n            }\n        } else if (type === 'seconds') {\n            singular = 'second';\n            plural   = 'seconds';\n        } else if (type === 'minutes') {\n            singular = 'minute';\n            plural   = 'minutes';\n        } else if (type === 'hours') {\n            singular = 'hour';\n            plural   = 'hours';\n        } else if (type === 'days') {\n            singular = 'day';\n            plural   = 'days';\n        }\n\n        if (value === 1) {\n            if (this.props.context.lang === 'de') {\n                if (type === 'days') {\n                    return `einem ${singular}`;\n                }\n                return `einer ${singular}`;\n            }\n\n            if (this.props.context.lang === 'ru') {\n                if (type === 'days' || type === 'hours') {\n                    return ` ${singular}`;\n                }\n                return ` ${singular}`;\n            }\n\n            return `one ${singular}`;\n        }\n\n        if (this.props.context.lang === 'de') {\n            return `${value} ${plural}`;\n        }\n\n        if (this.props.context.lang === 'ru') {\n            const d = value % 10;\n            if (d === 1 && value !== 11) {\n                return `${value} ${singular}`;\n            }\n            if (d >= 2 && d <= 4 && (value > 20 || value < 10)) {\n                return `${value} ${special24}`;\n            }\n\n            return `${value} ${plural}`;\n        }\n\n        return `${value} ${plural}`;\n    }\n\n    formatInterval(timestamp: number, isMomentJs: boolean) {\n        if (isMomentJs) {\n            // init moment\n            return this.props.context.moment(new Date(timestamp)).fromNow();\n        }\n        let diff = Date.now() - timestamp;\n        diff = Math.round(diff / 1000);\n        let text;\n        if (diff <= 60) {\n            if (this.props.context.lang === 'de') {\n                text = `vor ${this.formatIntervalHelper(diff, 'seconds')}`;\n            } else if (this.props.context.lang === 'ru') {\n                text = `${this.formatIntervalHelper(diff, 'seconds')} `;\n            } else {\n                text = `${this.formatIntervalHelper(diff, 'seconds')} ago`;\n            }\n        } else if (diff < 3600) {\n            const m = Math.floor(diff / 60);\n            const s = diff - m * 60;\n            text = '';\n            if (this.props.context.lang === 'de') {\n                text = `vor ${this.formatIntervalHelper(m, 'minutes')}`;\n            } else if (this.props.context.lang === 'ru') {\n                text = this.formatIntervalHelper(m, 'minutes');\n            } else {\n                text = this.formatIntervalHelper(m, 'minutes');\n            }\n\n            if (m < 5) {\n                // add seconds\n                if (this.props.context.lang === 'de') {\n                    text += ` und ${this.formatIntervalHelper(s, 'seconds')}`;\n                } else if (this.props.context.lang === 'ru') {\n                    text += `  ${this.formatIntervalHelper(s, 'seconds')}`;\n                } else {\n                    text += ` and ${this.formatIntervalHelper(s, 'seconds')}`;\n                }\n            }\n\n            if (this.props.context.lang === 'de') {\n                // nothing\n            } else if (this.props.context.lang === 'ru') {\n                text += ' ';\n            } else {\n                text += ' ago';\n            }\n        } else if (diff < 3600 * 24) {\n            const h = Math.floor(diff / 3600);\n            const m = Math.floor((diff - h * 3600) / 60);\n            text = '';\n            if (this.props.context.lang === 'de') {\n                text = `vor ${this.formatIntervalHelper(h, 'hours')}`;\n            } else if (this.props.context.lang === 'ru') {\n                text = this.formatIntervalHelper(h, 'hours');\n            } else {\n                text = this.formatIntervalHelper(h, 'hours');\n            }\n\n            if (h < 10) {\n                // add seconds\n                if (this.props.context.lang === 'de') {\n                    text += ` und ${this.formatIntervalHelper(m, 'minutes')}`;\n                } else if (this.props.context.lang === 'ru') {\n                    text += `  ${this.formatIntervalHelper(m, 'minutes')}`;\n                } else {\n                    text += ` and ${this.formatIntervalHelper(m, 'minutes')}`;\n                }\n            }\n\n            if (this.props.context.lang === 'de') {\n                // nothing\n            } else if (this.props.context.lang === 'ru') {\n                text += ' ';\n            } else {\n                text += ' ago';\n            }\n        } else {\n            const d = Math.floor(diff / (3600 * 24));\n            const h = Math.floor((diff - d * (3600 * 24)) / 3600);\n            text = '';\n            if (this.props.context.lang === 'de') {\n                text = `vor ${this.formatIntervalHelper(d, 'days')}`;\n            } else if (this.props.context.lang === 'ru') {\n                text = this.formatIntervalHelper(d, 'days');\n            } else {\n                text = this.formatIntervalHelper(d, 'days');\n            }\n\n            if (d < 3) {\n                // add seconds\n                if (this.props.context.lang === 'de') {\n                    text += ` und ${this.formatIntervalHelper(h, 'hours')}`;\n                } else if (this.props.context.lang === 'ru') {\n                    text += `  ${this.formatIntervalHelper(h, 'hours')}`;\n                } else {\n                    text += ` and ${this.formatIntervalHelper(h, 'hours')}`;\n                }\n            }\n\n            if (this.props.context.lang === 'de') {\n                // nothing\n            } else if (this.props.context.lang === 'ru') {\n                text += ' ';\n            } else {\n                text += ' ago';\n            }\n        }\n        return text;\n    }\n\n    startUpdateInterval() {\n        this.updateInterval = this.updateInterval || setInterval(() => {\n            const timeIntervalEl = (this.widDiv || this.refService.current)?.querySelector('.time-interval') as HTMLElement;\n            if (timeIntervalEl) {\n                const time = parseInt(timeIntervalEl.dataset.time as string, 10);\n                timeIntervalEl.innerHTML = this.formatInterval(time, timeIntervalEl.dataset.moment === 'true');\n            }\n        }, 10_000);\n    }\n\n    // eslint-disable-next-line react/no-unused-class-component-methods\n    formatDate(dateObj: any, format: any, interval: any, isMomentJs: boolean, forRx: any) {\n        if (typeof format === 'boolean') {\n            interval = format;\n            format = 'auto';\n        }\n\n        if (format === 'auto') {\n            format = `${this.props.context.dateFormat || 'DD.MM.YYYY'} hh:mm:ss`;\n        }\n\n        format = format || this.props.context.dateFormat || 'DD.MM.YYYY';\n\n        if (!dateObj) {\n            return '';\n        }\n        const text = typeof dateObj;\n        if (text === 'string') {\n            dateObj = new Date(dateObj);\n        }\n        if (text !== 'object') {\n            if (isVarFinite(dateObj)) {\n                const i = parseInt(dateObj, 10);\n                // if greater than 2000.01.01 00:00:00\n                if (i > 946681200000) {\n                    dateObj = new Date(dateObj);\n                } else {\n                    dateObj = new Date(dateObj * 1000);\n                }\n            } else {\n                dateObj = new Date(dateObj);\n            }\n        }\n        if (interval) {\n            this.startUpdateInterval();\n            if (forRx) {\n                return <span className=\"time-interval\" data-time={dateObj.getTime()} data-moment={isMomentJs || false} title={dateObj.toLocaleString()}>\n                    {this.formatInterval(dateObj.getTime(), isMomentJs)}\n                </span>;\n            }\n\n            return `<span class=\"time-interval\" data-time=\"${dateObj.getTime()}\" data-moment=\"${isMomentJs || false}\">${this.formatInterval(dateObj.getTime(), isMomentJs)}</span>`;\n        }\n\n        let v;\n\n        // Year\n        if (format.includes('YYYY') || format.includes('JJJJ') || format.includes('')) {\n            v = dateObj.getFullYear();\n            format = format.replace('YYYY', v);\n            format = format.replace('JJJJ', v);\n            format = format.replace('', v);\n        } else if (format.includes('YY') || format.includes('JJ') || format.includes('')) {\n            v = dateObj.getFullYear() % 100;\n            format = format.replace('YY', v);\n            format = format.replace('JJ', v);\n            format = format.replace('', v);\n        }\n        // Month\n        if (format.includes('MM') || format.includes('')) {\n            v = dateObj.getMonth() + 1;\n            if (v < 10) {\n                v = `0${v}`;\n            }\n            format = format.replace('MM', v);\n            format = format.replace('', v);\n        } else if (format.includes('M') || format.includes('')) {\n            v = dateObj.getMonth() + 1;\n            format = format.replace('M', v);\n            format = format.replace('', v);\n        }\n\n        // Day\n        if (format.includes('DD') || format.includes('TT') || format.includes('')) {\n            v = dateObj.getDate();\n            if (v < 10) {\n                v = `0${v}`;\n            }\n            format = format.replace('DD', v);\n            format = format.replace('TT', v);\n            format = format.replace('', v);\n        } else if (format.includes('D') || format.includes('TT') || format.includes('')) {\n            v = dateObj.getDate();\n            format = format.replace('D', v);\n            format = format.replace('T', v);\n            format = format.replace('', v);\n        }\n\n        // hours\n        if (format.includes('hh') || format.includes('SS') || format.includes('')) {\n            v = dateObj.getHours();\n            if (v < 10) {\n                v = `0${v}`;\n            }\n            format = format.replace('hh', v);\n            format = format.replace('SS', v);\n            format = format.replace('', v);\n        } else if (format.includes('h') || format.includes('S') || format.includes('')) {\n            v = dateObj.getHours();\n            format = format.replace('h', v);\n            format = format.replace('S', v);\n            format = format.replace('', v);\n        }\n\n        // minutes\n        if (format.includes('mm') || format.includes('')) {\n            v = dateObj.getMinutes();\n            if (v < 10) {\n                v = `0${v}`;\n            }\n            format = format.replace('mm', v);\n            format = format.replace('', v);\n        } else if (format.includes('m') ||  format.includes('')) {\n            v = dateObj.getMinutes();\n            format = format.replace('m', v);\n            format = format.replace('v', v);\n        }\n\n        // milliseconds\n        if (format.includes('sss') || format.includes('')) {\n            v = dateObj.getMilliseconds();\n            if (v < 10) {\n                v = `00${v}`;\n            } else if (v < 100) {\n                v = `0${v}`;\n            }\n            format = format.replace('sss', v);\n            format = format.replace('', v);\n        }\n\n        // seconds\n        if (format.includes('ss') || format.includes('')) {\n            v =  dateObj.getSeconds();\n            if (v < 10) {\n                v = `0${v}`;\n            }\n            format = format.replace('ss', v);\n            format = format.replace('cc', v);\n        } else if (format.includes('s') || format.includes('')) {\n            v = dateObj.getHours();\n            format = format.replace('s', v);\n            format = format.replace('', v);\n        }\n\n        return format;\n    }\n\n    onToggleRelative(e: React.MouseEvent) {\n        e.stopPropagation();\n        e.preventDefault();\n\n        const widget = this.props.context.views[this.props.view].widgets[this.props.id];\n\n        this.props.context.onWidgetsChanged([{\n            wid: this.props.id,\n            view: this.props.view,\n            style: {\n                position: this.props.isRelative ? 'absolute' : 'relative',\n                width: this.props.isRelative ? widget.style.absoluteWidth || '100px' : '100%',\n                absoluteWidth: !this.props.isRelative ? widget.style.width : null,\n                noPxToPercent: true, // special command\n            },\n        }]);\n    }\n\n    onToggleWidth(e: React.MouseEvent) {\n        e.stopPropagation();\n        e.preventDefault();\n        const widget = this.props.context.views[this.props.view].widgets[this.props.id];\n\n        this.props.context.onWidgetsChanged([{\n            wid: this.props.id,\n            view: this.props.view,\n            style: {\n                width: widget.style.width === '100%' ? widget.style.absoluteWidth || '100px' : '100%',\n                absoluteWidth: widget.style.width !== '100%' ? widget.style.width : null,\n                noPxToPercent: true, // special command\n            },\n        }]);\n    }\n\n    onToggleLineBreak(e: React.MouseEvent) {\n        e.stopPropagation();\n        e.preventDefault();\n\n        const widget = this.props.context.views[this.props.view].widgets[this.props.id];\n\n        this.props.context.onWidgetsChanged([{\n            wid: this.props.id,\n            view: this.props.view,\n            style: { newLine: !widget.style.newLine },\n        }]);\n    }\n\n    static correctStylePxValue(value: any) {\n        if (typeof value === 'string') {\n            // eslint-disable-next-line no-restricted-properties\n            if (isVarFinite(value)) {\n                return parseFloat(value);\n            }\n        }\n\n        return value;\n    }\n\n    renderRelativeMoveMenu() {\n        if (this.props.context.runtime || !this.state.editMode) {\n            return null;\n        }\n\n        return <VisOrderMenu\n            anchorEl={this.state.showRelativeMoveMenu ? this.relativeMoveMenu : undefined}\n            order={this.props.relativeWidgetOrder}\n            wid={this.props.id}\n            view={this.props.view}\n            views={this.props.context.views}\n            themeType={this.props.context.themeType}\n            onClose={(order: any) => {\n                this.props.onIgnoreMouseEvents(false);\n                this.setState({ showRelativeMoveMenu: false });\n                order && this.props.context.onWidgetsChanged(null, this.props.view, { order });\n            }}\n        />;\n    }\n\n    render() {\n        const widget = this.props.context.views[this.props.view].widgets[this.props.id];\n        if (!widget || typeof widget !== 'object') {\n            console.error(`EMPTY Widget: ${this.props.id}`);\n            return null;\n        }\n\n        const style: Record<string, any> = {\n            boxSizing: 'border-box',\n        };\n        const selected = !this.state.multiViewWidget && this.state.editMode && this.props.selectedWidgets?.includes(this.props.id);\n        const classNames = selected ? ['vis-editmode-selected'] : ['vis-editmode-overlay-not-selected'];\n        if (selected && this.state.widgetHint === 'hide') {\n            classNames.push('vis-editmode-selected-background');\n        }\n\n        if (this.state.editMode && !(widget.groupid && !this.props.selectedGroup)) {\n            if (!this.props.isRelative && Object.prototype.hasOwnProperty.call(this.state.style, 'top')) {\n                style.top = VisBaseWidget.correctStylePxValue(this.state.style.top);\n            }\n            if (!this.props.isRelative && Object.prototype.hasOwnProperty.call(this.state.style, 'left')) {\n                style.left = VisBaseWidget.correctStylePxValue(this.state.style.left);\n            }\n            if (Object.prototype.hasOwnProperty.call(this.state.style, 'width')) {\n                style.width = VisBaseWidget.correctStylePxValue(this.state.style.width);\n            }\n            if (Object.prototype.hasOwnProperty.call(this.state.style, 'height')) {\n                style.height = VisBaseWidget.correctStylePxValue(this.state.style.height);\n            }\n            if (!this.props.isRelative && Object.prototype.hasOwnProperty.call(this.state.style, 'right')) {\n                style.right = VisBaseWidget.correctStylePxValue(this.state.style.right);\n            }\n            if (!this.props.isRelative && Object.prototype.hasOwnProperty.call(this.state.style, 'bottom')) {\n                style.bottom = VisBaseWidget.correctStylePxValue(this.state.style.bottom);\n            }\n\n            style.position = this.props.isRelative ? 'relative' : 'absolute';\n            style.userSelect = 'none';\n\n            if (selected) {\n                if (this.props.moveAllowed &&\n                    this.state.draggable !== false &&\n                    !this.props.isRelative &&\n                    (!this.props.selectedGroup || this.props.selectedGroup !== this.props.id)\n                ) {\n                    style.cursor = 'move';\n                } else {\n                    style.cursor = 'default';\n                }\n            } else if (widget.data?.locked) {\n                style.cursor = 'default';\n            } else if (this.props.selectedGroup !== this.props.id && !this.state.multiViewWidget) {\n                style.cursor = 'pointer';\n            }\n\n            if (this.props.tpl?.toLowerCase().includes('image')) {\n                classNames.push('vis-editmode-helper');\n            }\n        }\n\n        const props = {\n            className: '',\n            overlayClassNames: classNames,\n            style,\n            id: `rx_${this.props.id}`,\n            refService: this.refService,\n            widget,\n        };\n\n        // If the resizable flag can be controlled dynamically by settings, and it is now not resizable\n        let doNotTakeWidth = false;\n        let doNotTakeHeight = false;\n        if (this.visDynamicResizable && !this.isResizable()) {\n            if (this.visDynamicResizable.desiredSize === false) {\n                doNotTakeWidth = true;\n                doNotTakeHeight = true;\n                delete style.width;\n                delete style.height;\n            } else if (typeof this.visDynamicResizable.desiredSize === 'object') {\n                if (this.state.style.width) {\n                    style.width = VisBaseWidget.correctStylePxValue(this.visDynamicResizable.desiredSize.width);\n                } else {\n                    doNotTakeWidth = true;\n                    delete style.width;\n                }\n\n                if (this.state.style.height) {\n                    style.height = VisBaseWidget.correctStylePxValue(this.visDynamicResizable.desiredSize.height);\n                } else {\n                    doNotTakeHeight = true;\n                    delete style.height;\n                }\n            }\n        }\n\n        if (this.props.isRelative && isVarFinite(this.props.context.views[this.props.view].settings?.rowGap as string)) {\n            style.marginBottom = parseFloat(this.props.context.views[this.props.view].settings?.rowGap as string);\n        }\n\n        const rxWidget = this.renderWidgetBody(props as any);\n\n        if (doNotTakeWidth) {\n            delete style.width;\n        }\n        if (doNotTakeHeight) {\n            delete style.height;\n        }\n\n        // in group edit mode show it in the top left corner\n        if (this.props.id === this.props.selectedGroup) {\n            style.top = 0;\n            style.left = 0;\n        }\n\n        if (!this.props.isRelative) {\n            style.top = style.top || 0;\n            style.left = style.left || 0;\n        }\n\n        // convert string to number+'px'\n        ['top', 'left', 'width', 'height', 'right', 'bottom',\n            'borderRadius', 'paddingLeft', 'paddingTop',\n            'paddingRight', 'paddingBottom', 'marginTop',\n            'marginBottom', 'marginLeft', 'marginRight',\n        ].forEach(attr => {\n            if (style[attr] !== undefined && typeof style[attr] === 'string') {\n                // eslint-disable-next-line no-restricted-properties\n                if (isVarFinite(style[attr])) {\n                    style[attr] = parseFloat(style[attr]);\n                } else if (style[attr].includes('{')) {\n                    // try to steal style by rxWidget\n                    const value = (this.state.rxStyle as Record<string, string | undefined>)?.[attr];\n                    if (this.state.rxStyle && value !== undefined) {\n                        if (value && typeof value === 'string' && !value.includes('{')) {\n                            style[attr] = VisBaseWidget.correctStylePxValue(value);\n                        }\n                    } else if (this.props.context.allWidgets[this.props.id] &&\n                        this.props.context.allWidgets[this.props.id].style &&\n                        this.props.context.allWidgets[this.props.id].style[attr] !== undefined\n                    ) {\n                        // try to steal style by canWidget\n                        if (!(this.props.context.allWidgets[this.props.id].style[attr] as string).includes('{')) {\n                            style[attr] = VisBaseWidget.correctStylePxValue(this.props.context.allWidgets[this.props.id].style[attr]);\n                        }\n                    }\n                }\n            }\n        });\n\n        classNames.push('vis-editmode-overlay');\n\n        let widgetName = null;\n        let widgetMoveButtons = null;\n        if (this.state.widgetHint !== 'hide' &&\n            !this.state.hideHelper &&\n            this.state.editMode &&\n            (!widget.groupid || this.props.selectedGroup) &&\n            this.props.selectedGroup !== this.props.id &&\n            this.props.context.showWidgetNames !== false\n        ) {\n            // show widget name on widget body\n            const widgetNameBottom = !widget.usedInWidget && (this.refService.current?.offsetTop === 0 || (this.refService.current?.offsetTop && this.refService.current?.offsetTop < 15));\n\n            // come again when the ref is filled\n            if (!this.refService.current) {\n                setTimeout(() => this.forceUpdate(), 50);\n            }\n\n            const parts: (string | null)[] = this.state.multiViewWidget ? this.props.id.split('_') : [null, null];\n            const multiView: string | null = parts[0];\n            const multiId: AnyWidgetId | null = parts[1] as AnyWidgetId | null;\n\n            const resizable = !widget.usedInWidget && this.isResizable();\n\n            widgetName = <div\n                title={this.state.multiViewWidget ?\n                    I18n.t('Jump to widget by double click') :\n                    (this.props.tpl === '_tplGroup' ? I18n.t('Switch to group edit mode by double click') : undefined)}\n                className={Utils.clsx(\n                    'vis-editmode-widget-name',\n                    selected && 'vis-editmode-widget-name-selected',\n                    this.state.widgetHint,\n                    widgetNameBottom && 'vis-editmode-widget-name-bottom',\n                    this.props.isRelative && resizable && 'vis-editmode-widget-name-long',\n                )}\n            >\n                <span>{this.state.multiViewWidget ? I18n.t('%s from %s', multiId as string, multiView as string) : (widget.data?.name || this.props.id)}</span>\n                {this.state.multiViewWidget || widget.usedInWidget ? null :\n                    <AnchorIcon onMouseDown={e => this.onToggleRelative(e)} className={Utils.clsx('vis-anchor', this.props.isRelative ? 'vis-anchor-enabled' : 'vis-anchor-disabled')} />}\n                {this.state.multiViewWidget || !this.props.isRelative || !resizable || widget.usedInWidget ? null :\n                    <ExpandIcon onMouseDown={e => this.onToggleWidth(e)} className={Utils.clsx('vis-expand', widget.style.width === '100%' ? 'vis-expand-enabled' : 'vis-expand-disabled')} />}\n                {this.state.multiViewWidget || !this.props.isRelative || widget.usedInWidget ? null :\n                    <KeyboardReturn onMouseDown={e => this.onToggleLineBreak(e)} className={Utils.clsx('vis-new-line', widget.style.newLine ? 'vis-new-line-enabled' : 'vis-new-line-disabled')} />}\n            </div>;\n\n            if (this.props.isRelative && !this.state.multiViewWidget && !widget.usedInWidget) {\n                const pos = this.props.relativeWidgetOrder.indexOf(this.props.id);\n                const showUp = !!pos;\n                let showDown = pos !== this.props.relativeWidgetOrder.length - 1;\n                if (showDown && this.props.selectedGroup) {\n                    // Check if the next widget is relative\n                    const widget__ = this.props.context.views[this.props.view].widgets[this.props.relativeWidgetOrder[pos + 1]];\n                    if (widget__.style.position === 'absolute') {\n                        showDown = false;\n                    }\n                }\n\n                if (showUp || showDown) {\n                    widgetMoveButtons = <div\n                        className={Utils.clsx(\n                            'vis-editmode-widget-move-buttons',\n                            this.state.widgetHint,\n                            widgetNameBottom && 'vis-editmode-widget-name-bottom',\n                        )}\n                        style={{ width: !showUp || !showDown ? 30 : undefined }}\n                    >\n                        <div className=\"vis-editmode-widget-number\">{this.props.relativeWidgetOrder.indexOf(this.props.id) + 1}</div>\n                        {showUp ? <div\n                            className=\"vis-editmode-move-button\"\n                            title={I18n.t('Move widget up or press longer to open re-order menu')}\n                        >\n                            <UpIcon\n                                onMouseDown={e => {\n                                    e.stopPropagation();\n                                    e.preventDefault();\n                                    this.pressTimeout = setTimeout(target => {\n                                        this.props.onIgnoreMouseEvents(true);\n                                        this.relativeMoveMenu = target;\n                                        this.setState({ showRelativeMoveMenu: true });\n                                        this.pressTimeout = undefined;\n                                    }, 300, e.currentTarget);\n                                }}\n                                onMouseUp={e => this.changeOrder(e, -1)}\n\n                            />\n                        </div> : null}\n                        {showDown ? <div\n                            className=\"vis-editmode-move-button\"\n                            style={{ left: showUp ? 30 : undefined }}\n                            title={I18n.t('Move widget down or press longer to open re-order menu')}\n                        >\n                            <DownIcon\n                                onMouseDown={e => {\n                                    e.stopPropagation();\n                                    e.preventDefault();\n                                    this.pressTimeout = setTimeout(target => {\n                                        this.props.onIgnoreMouseEvents(true);\n                                        this.relativeMoveMenu = target;\n                                        this.setState({ showRelativeMoveMenu: true });\n                                        this.pressTimeout = undefined;\n                                    }, 300, e.currentTarget);\n                                }}\n                                onMouseUp={e => this.changeOrder(e, 1)}\n                            />\n                        </div> : null}\n                    </div>;\n                }\n            }\n\n            calculateOverflow(style);\n        }\n\n        // if multi-view widget and it is not \"canJS\", dim it in edit mode\n        if (!this.isCanWidget && this.state.multiViewWidget && this.state.editMode) {\n            if (style.opacity === undefined || style.opacity === null || style.opacity > 0.5) {\n                style.opacity = 0.5;\n            }\n        }\n\n        const overlay =\n            !this.state.hideHelper &&                        // if the helper isn't hidden\n            !widget.usedInWidget &&                          // not used in another widget, that has own overlay\n            this.state.editMode &&                           // if edit mode\n            !widget.data.locked &&                           // if not locked\n            (!widget.groupid || this.props.selectedGroup) && // if not in group or in the edit group mode\n            (this.props.selectedGroup !== this.props.id) ?   // and it does not the edited group itself\n                <div\n                    className={classNames.join(' ')}\n                    onMouseDown={e => !!this.props.context.setSelectedWidgets && this.onMouseDown(e)}\n                /> : null;\n\n        let groupInstructions = null;\n\n        // Show border of the group if in group edit mode\n        if (this.props.selectedGroup === this.props.id) {\n            style.borderBottom = '1px dotted #888';\n            style.borderRight = '1px dotted #888';\n            groupInstructions = <div\n                style={{\n                    position: 'absolute',\n                    bottom: -24,\n                    left: 0,\n                    fontSize: 10,\n                    fontStyle: 'italic',\n                    opacity: 0.5,\n                    width: 350,\n                    cursor: 'pointer',\n                }}\n                onClick={e => {\n                    e.stopPropagation();\n                    this.props.context.setSelectedWidgets([this.props.id]);\n                }}\n            >\n                {I18n.t('group_size_hint')}\n            </div>;\n        }\n\n        const signals = this.renderSignals ? this.renderSignals() : null;\n\n        const lastChange = this.renderLastChange ? this.renderLastChange(style) : null;\n\n        return <div\n            id={props.id}\n            className={props.className}\n            ref={this.refService}\n            style={style}\n        >\n            {signals}\n            {lastChange}\n            {widgetName}\n            {widgetMoveButtons}\n            {overlay}\n            {this.getResizeHandlers(selected, widget)}\n            {rxWidget}\n            {groupInstructions}\n            {this.state.showRelativeMoveMenu && this.renderRelativeMoveMenu()}\n        </div>;\n    }\n}\n\nexport default VisBaseWidget;\n","/**\n *  ioBroker.vis\n *  https://github.com/ioBroker/ioBroker.vis\n *\n *  Copyright (c) 2022-2024 Denis Haev https://github.com/GermanBluefox,\n *  Creative Common Attribution-NonCommercial (CC BY-NC)\n *\n *  http://creativecommons.org/licenses/by-nc/4.0/\n *\n * Short content:\n * Licensees may copy, distribute, display and perform the work and make derivative works based on it only if they give the author or licensor the credits in the manner specified by these.\n * Licensees may copy, distribute, display, and perform the work and make derivative works based on it only for noncommercial purposes.\n * (Free for non-commercial use).\n */\n\nimport React from 'react';\nimport {\n    Card,\n    CardContent,\n} from '@mui/material';\n\nimport { type LegacyConnection, I18n, Icon } from '@iobroker/adapter-react-v5';\n\nimport {\n    Project, AnyWidgetId, RxWidgetInfo,\n    WidgetData, VisRxWidgetStateValues, RxWidgetInfoGroup,\n    StateID, RxWidgetInfoAttributesFieldSelectSimple,\n} from '@/types';\nimport { deepClone, calculateOverflow } from '@/Utils/utils';\n// eslint-disable-next-line import/no-cycle\nimport VisBaseWidget, {\n    VisBaseWidgetProps,\n    VisBaseWidgetState,\n    WidgetStyleState,\n    VisWidgetCommand,\n} from './visBaseWidget';\nimport VisView from './visView';\nimport { addClass, getUsedObjectIDsInWidget } from './visUtils';\n\nconst POSSIBLE_MUI_STYLES = [\n    'background-color',\n    'border',\n    'background',\n    'background-image',\n    'background-position',\n    'background-repeat',\n    'background-size',\n    'background-clip',\n    'background-origin',\n    'color',\n    'box-sizing',\n    'border-width',\n    'border-style',\n    'border-color',\n    'border-radius',\n    'box-shadow',\n    'text-align',\n    'text-shadow',\n    'font-family',\n    'font-size',\n    'font-weight',\n    'line-height',\n    'font-style',\n    'font-variant',\n    'letter-spacing',\n    'word-spacing',\n];\n\ntype VisRxWidgetProps = VisBaseWidgetProps\n\ninterface RxData {\n    _originalData: any;\n    filterkey: any;\n    /** If value is hide widget should be hidden if user not in groups, else disabled */\n    'visibility-groups-action': 'hide' | 'disabled';\n    /** If entry in an array but user not in array, apply visibility-groups-action logic */\n    'visibility-groups': string[];\n}\n\n/** TODO move to VisBaseWidget when ported */\n// interface VisBaseWidgetState {\n//     data: any;\n//     style: any;\n//     applyBindings: boolean;\n//     editMode: boolean;\n//     multiViewWidget: any;\n//     selected: any;\n//     selectedOne: any;\n//     resizable: boolean;\n//     resizeHandles: string[];\n//     widgetHint:any;\n//     isHidden: any;\n//     gap: number;\n//     rxStyle: any;\n//     visible: boolean;\n//     draggable: boolean;\n//     disabled: boolean;\n// }\n\nexport interface CustomWidgetProperties {\n    context: {\n        socket: LegacyConnection;\n        projectName: string;\n        instance: number;\n        adapterName: string;\n        views: Project;\n    };\n    selectedView: string;\n    selectedWidgets: AnyWidgetId[];\n    selectedWidget: AnyWidgetId;\n}\n\nexport interface VisRxWidgetState extends VisBaseWidgetState {\n    rxData: RxData;\n    values: VisRxWidgetStateValues;\n    visible: boolean;\n    disabled?: boolean;\n}\n\nclass VisRxWidget<TRxData extends Record<string, any>, TState extends Partial<VisRxWidgetState> = VisRxWidgetState> extends VisBaseWidget<VisRxWidgetState & TState & { rxData: TRxData }> {\n    static POSSIBLE_MUI_STYLES = POSSIBLE_MUI_STYLES;\n\n    private linkContext: {\n        IDs: string[];\n        bindings: Record<string, any>;\n        visibility: Record<string, any>;\n        lastChanges: Record<string, any>;\n        signals: Record<string, any>;\n        widgetAttrInfo: any;\n    };\n\n    /** Method called when state changed */\n    private readonly onStateChangedBind: (id: StateID, state: ioBroker.State, doNotApplyState?: any) => void;\n\n    /** If resizing is currently locked */\n    protected resizeLocked: boolean;\n\n    // private newState?: Partial<VisRxWidgetState & TState & { rxData: TRxData }> | null;\n    private newState?: Partial<VisRxWidgetState & TState & { rxData: TRxData }> | null;\n\n    private wrappedContent?: boolean;\n\n    private updateTimer?: ReturnType<typeof setTimeout>;\n\n    private ignoreMouseEvents?: boolean;\n\n    private mouseDownOnView?: any;\n\n    private bindingsTimer?: ReturnType<typeof setTimeout>;\n\n    private informIncludedWidgets?:  ReturnType<typeof setTimeout>;\n\n    private filterDisplay?: any;\n\n    constructor(props: VisRxWidgetProps) {\n        super(props);\n\n        const options: RxWidgetInfo = this.getWidgetInfo() as RxWidgetInfo;\n\n        const widgetAttrInfo: Record<string, any> = {};\n        // collect all attributes (only types)\n        if (Array.isArray(options.visAttrs)) {\n            options.visAttrs.forEach((group: RxWidgetInfoGroup) =>\n                group.fields && group.fields.forEach(item => {\n                    widgetAttrInfo[item.name] = { type: (item as RxWidgetInfoAttributesFieldSelectSimple).type || '' };\n                }));\n        }\n\n        this.linkContext = {\n            IDs: [],\n            bindings: {},\n            visibility: {},\n            lastChanges: {},\n            signals: {},\n            widgetAttrInfo,\n        };\n\n        getUsedObjectIDsInWidget(props.context.views, props.view, props.id, this.linkContext);\n\n        // do not change it to lambda function as onStateChanged could be inherited.\n        this.onStateChangedBind = this.onStateChanged.bind(this);\n\n        // apply bindings and modifications\n        const newState = this.onStateChanged(null, null, true);\n\n        if (newState) {\n            newState.visible = this.checkVisibility(newState.rxData?.['visibility-oid'], newState);\n        }\n\n        this.resizeLocked = !!options.visResizeLocked;\n\n        // find in fields visResizable name\n        // if resizable exists, take the resizable from data\n        const visResizable = VisRxWidget.findField(options, 'visResizable');\n        if (visResizable) {\n            this.visDynamicResizable = {\n                default: visResizable.default !== undefined ? visResizable.default : true,\n                desiredSize: visResizable.desiredSize,\n            };\n        } else {\n            this.visDynamicResizable = null;\n        }\n\n        this.state = {\n            ...this.state,\n            resizable: options.resizable === undefined ? (options.visResizable === undefined ? true : options.visResizable) : options.resizable,\n            draggable: options.visDraggable === undefined ? true : options.visDraggable,\n            resizeHandles: options.resizeHandles === undefined ? (options.visResizeHandles === undefined ? ['n', 'e', 's', 'w', 'nw', 'ne', 'sw', 'se'] : options.visResizeHandles) : options.resizeHandles,\n            // @ts-expect-error fix later\n            rxData: newState.rxData,\n            // @ts-expect-error fix later\n            rxStyle: newState.rxStyle,\n            /** @type {Record<string, any>} */\n            values: {},\n            // @ts-expect-error fix later\n            visible: newState.visible,\n            disabled: false,\n        };\n    }\n\n    static findField(widgetInfo: Record<string, any>, name: string) {\n        if (!widgetInfo.visAttrs) {\n            return null;\n        }\n        for (let g = 0; g < widgetInfo.visAttrs.length; g++) {\n            const group = widgetInfo.visAttrs[g];\n            if (group.fields) {\n                for (let f = 0; f < group.fields.length; f++) {\n                    if (group.fields[f].name === name) {\n                        return group.fields[f];\n                    }\n                }\n            }\n        }\n\n        return null;\n    }\n\n    static getI18nPrefix() {\n        return '';\n    }\n\n    static getText(text: string | ioBroker.Translated) {\n        if (typeof text === 'object') {\n            return text[I18n.getLanguage()] || text.en;\n        }\n\n        return text;\n    }\n\n    static t(key: string, ...args: string[]) {\n        if (this.getI18nPrefix) {\n            return I18n.t(`${this.getI18nPrefix()}${key}`,  ...args);\n        }\n\n        return I18n.t(key);\n    }\n\n    static getLanguage() {\n        return I18n.getLanguage();\n    }\n\n    onCommand(command: VisWidgetCommand, _option?: any) {\n        const result = super.onCommand(command);\n        if (result === false) {\n            if (command === 'collectFilters') {\n                return this.state.rxData?.filterkey;\n            }\n\n            if (command === 'changeFilter') {\n                const visible = this.checkVisibility();\n                if (visible !== this.state.visible) {\n                    this.setState({ visible });\n                }\n            }\n        }\n\n        return result;\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars,class-methods-use-this\n    onStateUpdated(id: string, state: ioBroker.State) {\n\n    }\n\n    onIoBrokerStateChanged = (id: StateID, state: ioBroker.State | null | undefined) => {\n        this.onStateChanged(id, state);\n    };\n\n    /**\n     * Called if ioBroker state changed\n     *\n     * @param state state object\n     * @param doNotApplyState if state should not be set\n     */\n    onStateChanged(\n        id?: StateID | null,\n        state?: ioBroker.State | null | undefined,\n        /** if state should not be set */\n        doNotApplyState?: boolean,\n    ) {\n        if (!this.newState) {\n            // @ts-expect-error fix later\n            this.newState = {\n                values: deepClone(this.state.values || {}),\n                rxData: { ...this.state.data } as unknown as TRxData,\n                rxStyle: { ...this.state.style } as WidgetStyleState,\n                editMode: this.props.editMode,\n                applyBindings: false,\n            };\n        }\n\n        if (!this.newState) {\n            return null;\n        }\n\n        if (this.newState.rxData) {\n            delete this.newState.rxData._originalData;\n        }\n        if (this.newState.rxStyle) {\n            delete this.newState.rxStyle._originalData;\n        }\n\n        if (id && state) {\n            // @ts-expect-error fix later\n            Object.keys(state).forEach(attr => this.newState.values[`${id}.${attr}`] = state[attr]);\n            // wait till the state is saved in this.newState.values\n            setTimeout(() => this.onStateUpdated(id, state), 60);\n        }\n\n        // @ts-expect-error fix later\n        Object.keys(this.linkContext.bindings).forEach(_id => this.applyBinding(_id, this.newState));\n\n        if (id === this.newState.rxData?.['visibility-oid']) {\n            this.newState.visible = this.checkVisibility(id, this.newState);\n        }\n\n        if (this.newState.rxData) {\n            const userGroups = this.newState.rxData['visibility-groups'];\n            this.newState.disabled = false;\n\n            if (this.newState.rxData.filterkey && typeof this.newState.rxData.filterkey === 'string') {\n                this.newState.rxData.filterkey = this.newState.rxData.filterkey.split(/[;,]+/).map(f => f.trim()).filter(f => f);\n            }\n\n            if (userGroups?.length && !this.isUserMemberOfGroup(this.props.context.user, userGroups)) {\n                if (this.newState.rxData['visibility-groups-action'] === 'disabled') {\n                    this.newState.disabled = true;\n                } else {\n                    this.newState.visible = false;\n                }\n            }\n        }\n\n        if (doNotApplyState) {\n            const newState = this.newState;\n            this.newState = null;\n            return newState;\n        }\n\n        this.updateTimer && clearTimeout(this.updateTimer);\n\n        // compare\n        if (JSON.stringify(this.state.values) !== JSON.stringify(this.newState.values) ||\n            JSON.stringify(this.state.rxData) !== JSON.stringify(this.newState.rxData) ||\n            JSON.stringify(this.state.rxStyle) !== JSON.stringify(this.newState.rxStyle) ||\n            JSON.stringify(this.state.applyBindings) !== JSON.stringify(this.newState.applyBindings)\n        ) {\n            this.updateTimer = setTimeout(() => {\n                this.updateTimer = undefined;\n                const newState = this.newState ?? null;\n                this.newState = null;\n                // @ts-expect-error fix later\n                newState && this.setState(newState);\n            }, 50);\n        } else {\n            this.newState = null;\n        }\n\n        return null;\n    }\n\n    applyBinding(stateId: string, newState: typeof this.state) {\n        // @ts-expect-error fix later\n        this.linkContext.bindings[stateId] && this.linkContext.bindings[stateId].forEach(item => {\n            const value = this.props.context.formatUtils.formatBinding({\n                format: item.format,\n                view: item.view,\n                wid: this.props.id,\n                widget: this.props.context.views[item.view].widgets[this.props.id],\n                widgetData: newState.rxData as WidgetData,\n                values: newState.values,\n                moment: this.props.context.moment,\n            });\n\n            if (item.type === 'data') {\n                // @ts-expect-error fix later\n                newState.rxData[item.attr] = value;\n            } else if (newState.rxStyle) {\n                // @ts-expect-error fix later\n                newState.rxStyle[item.attr] = value;\n            }\n        });\n    }\n\n    async componentDidMount() {\n        super.componentDidMount();\n        for (let i = 0; i < this.linkContext.IDs.length; i++) {\n            await this.props.context.socket.subscribeState(this.linkContext.IDs[i], this.onIoBrokerStateChanged);\n        }\n    }\n\n    // eslint-disable-next-line no-unused-vars,class-methods-use-this\n    onRxDataChanged(_prevRxData: typeof this.state.rxData) {\n\n    }\n\n    // eslint-disable-next-line no-unused-vars,class-methods-use-this\n    onRxStyleChanged(_prevRxStyle: typeof this.state.rxStyle) {\n\n    }\n\n    componentDidUpdate(prevProps: VisRxWidgetProps, prevState: typeof this.state) {\n        if (prevState) {\n            if (JSON.stringify(this.state.rxData) !== JSON.stringify(prevState.rxData)) {\n                this.onRxDataChanged(prevState.rxData);\n            }\n            if (JSON.stringify(this.state.rxStyle) !== JSON.stringify(prevState.rxStyle)) {\n                this.onRxStyleChanged(prevState.rxStyle);\n            }\n        }\n    }\n\n    componentWillUnmount() {\n        if (this.linkContext.IDs.length) {\n            for (let i = 0; i < this.linkContext.IDs.length; i++) {\n                this.props.context.socket.unsubscribeState(this.linkContext.IDs[i], this.onIoBrokerStateChanged);\n            }\n        }\n        super.componentWillUnmount();\n    }\n\n    /**\n     * Check if the logged-in user's group has visibility permissions for this widget\n     */\n    isWidgetVisibleForGroup(newState: typeof this.newState): boolean {\n        // @ts-expect-error fix later\n        const userGroups = newState.rxData['visibility-groups'];\n\n        // @ts-expect-error fix later\n        if (newState.rxData['visibility-groups-action'] === 'hide') {\n            if (userGroups?.length && !this.isUserMemberOfGroup(this.props.context.user, userGroups)) {\n                return false;\n            }\n        }\n\n        return true;\n    }\n\n    /**\n     * Checks if widget is visible according to the state id\n     *\n     * @param stateId state id to check visibility for\n     * @param newState the new state\n     */\n    checkVisibility(stateId?: string | null, newState?: typeof this.newState) {\n        newState = newState || this.state;\n\n        if (!this.isWidgetVisibleForGroup(newState)) {\n            return false;\n        }\n\n        if (!this.state.editMode) {\n            if (!this.isWidgetFilteredOut(newState.rxData)) {\n                if (stateId) {\n                    if (this.linkContext.visibility[stateId]) {\n                        return !VisBaseWidget.isWidgetHidden(newState.rxData, newState.values, this.props.id);\n                    }\n                } else {\n                    // check if visible\n                    return !VisBaseWidget.isWidgetHidden(newState.rxData, newState.values, this.props.id);\n                }\n            } else {\n                return false;\n            }\n        }\n\n        return true;\n    }\n\n    async onPropertiesUpdated() {\n        const oldIDs = this.linkContext.IDs;\n        this.linkContext = {\n            IDs: [],\n            bindings: {},\n            visibility: {},\n            lastChanges: {},\n            signals: {},\n            widgetAttrInfo: this.linkContext.widgetAttrInfo,\n        };\n\n        const context = this.props.context;\n\n        // extract bindings anew as data or style was changes\n        getUsedObjectIDsInWidget(\n            context.views,\n            this.props.view,\n            this.props.id,\n            this.linkContext,\n        );\n\n        // subscribe on some new IDs and remove old IDs\n        const unsubscribe = oldIDs.filter(id => !this.linkContext.IDs.includes(id));\n        if (unsubscribe.length) {\n            // legacy connection can process arrays\n            context.socket.unsubscribeState(unsubscribe, this.onIoBrokerStateChanged);\n        }\n\n        const subscribe = this.linkContext.IDs.filter(id => !oldIDs.includes(id));\n        if (subscribe.length) {\n            // legacy connection can process arrays\n            context.socket.subscribeState(subscribe, this.onIoBrokerStateChanged);\n        }\n\n        this.onStateChanged();\n    }\n\n    formatValue(value: number | string, round: number) {\n        if (typeof value === 'number') {\n            if (round === 1) {\n                value = Math.round(value * 10) / 10;\n            } else if (round === 0) {\n                value = Math.round(value);\n            } else {\n                value = Math.round(value * 100) / 100;\n            }\n            if (this.props.context.systemConfig?.common?.isFloatComma) {\n                value = value.toString().replace('.', ',');\n            }\n        }\n\n        return value === undefined || value === null ? '' : value.toString();\n    }\n\n    // eslint-disable-next-line no-unused-vars\n    wrapContent(content: any, addToHeader: any, cardContentStyle: any, headerStyle: any, onCardClick: any, components: any) {\n        if (this.props.context.views[this.props.view].widgets[this.props.id].usedInWidget) {\n            return content;\n        }\n\n        const MyCard = components?.Card || Card;\n        const MyCardContent = components?.CardContent || CardContent;\n\n        const style = {\n            width: 'calc(100% - 8px)',\n            height: 'calc(100% - 8px)',\n            margin: 4,\n            ...this.props.customSettings?.viewStyle?.visCard,\n        };\n\n        // apply style from the element\n        Object.keys(this.state.rxStyle as Record<string, any>).forEach(attr => {\n            const value = (this.state.rxStyle as Record<string, any>)[attr];\n            if (value !== null &&\n                value !== undefined &&\n                POSSIBLE_MUI_STYLES.includes(attr)\n            ) {\n                attr = attr.replace(\n                    /(-\\w)/g,\n                    text => text[1].toUpperCase(),\n                );\n                style[attr] = value;\n            }\n        });\n\n        this.wrappedContent = true;\n\n        return <MyCard\n            className=\"vis_rx_widget_card\"\n            style={style}\n            onClick={onCardClick}\n        >\n            <MyCardContent\n                className=\"vis_rx_widget_card_content\"\n                style={{\n                    display: 'flex',\n                    flexDirection: 'column',\n                    alignItems: 'center',\n                    height: 'calc(100% - 32px)',\n                    paddingBottom: 16,\n                    position: 'relative',\n                    ...cardContentStyle,\n                }}\n            >\n                {this.state.rxData.widgetTitle ? <div\n                    className=\"vis_rx_widget_card_name\"\n                    style={{\n                        display: 'flex',\n                        justifyContent: 'space-between',\n                        width: '100%',\n                        alignItems: 'center',\n                    }}\n                >\n                    <div\n                        className=\"vis_rx_widget_card_name_div\"\n                        style={{\n                            fontSize: 24,\n                            paddingTop: 0,\n                            paddingBottom: 4,\n                            ...headerStyle,\n                        }}\n                    >\n                        {this.state.rxData.widgetTitle}\n                    </div>\n                    {addToHeader || null}\n                </div> : (addToHeader || null)}\n                {content}\n            </MyCardContent>\n        </MyCard>;\n    }\n\n    renderWidgetBody(props: any): React.JSX.Element | null {\n        props.id = this.props.id;\n\n        props.className = `vis-widget${this.state.rxData.class ? ` ${this.state.rxData.class}` : ''}`;\n\n        if (!this.state.editMode && this.state.disabled) {\n            props.className = addClass(props.className, 'vis-user-disabled');\n        }\n\n        Object.keys(this.state.rxStyle as Record<string, any>).forEach(attr => {\n            const value = (this.state.rxStyle as Record<string, any>)[attr];\n            if (value !== null && value !== undefined) {\n                if (!this.wrappedContent || !POSSIBLE_MUI_STYLES.includes(attr)) {\n                    attr = attr.replace(\n                        /(-\\w)/g,\n                        text => text[1].toUpperCase(),\n                    );\n\n                    props.style[attr] = value;\n                }\n            }\n        });\n\n        if (this.props.isRelative) {\n            props.style.position = this.state.rxStyle?.position || 'relative';\n            delete props.style.top;\n            delete props.style.left;\n        } else {\n            props.style.position = 'absolute';\n        }\n\n        if (this.state.editMode) {\n            const zIndex = this.state.rxStyle ? parseInt(((this.state.rxStyle['z-index'] as unknown as string) || '0'), 10) : 0;\n            if (this.state.selected) {\n                // move widget to foreground\n                props.style.zIndex = 800 + zIndex;\n            } else {\n                props.style.zIndex = zIndex;\n            }\n        }\n\n        return null;\n    }\n\n    getWidgetView(view: any, props: any) {\n        const context = this.props.context;\n        const VisViewComponent = context.VisView as VisView;\n        props = props || {};\n\n        // @ts-expect-error I don't know how to solve it\n        return <VisViewComponent\n            context={this.props.context}\n            viewsActiveFilter={this.props.viewsActiveFilter}\n            activeView={view}\n            editMode={false}\n            key={`${this.props.id}_${view}`}\n            askView={this.props.askView}\n            view={view}\n            visInWidget\n            {...props}\n        />;\n    }\n\n    // eslint-disable-next-line no-unused-vars\n    getWidgetInWidget(view: any, wid: AnyWidgetId, props: any) {\n        props = props || {};\n\n        // old (can) widgets require props.refParent\n        return VisView.getOneWidget(props.index || 0, this.props.context.views[view].widgets[wid], {\n            // custom attributes\n            context: this.props.context,\n            editMode: this.state.editMode,\n            id: wid,\n            isRelative: props.isRelative !== undefined ? props.isRelative : true,\n            mouseDownOnView: this.mouseDownOnView,\n            moveAllowed: false,\n            ignoreMouseEvents: this.state.editMode ? true : this.ignoreMouseEvents,\n            onIgnoreMouseEvents: this.props.onIgnoreMouseEvents,\n            refParent: props.refParent,\n            askView: this.props.askView,\n            relativeWidgetOrder: [wid],\n            selectedGroup: this.props.selectedGroup,\n            // @ts-expect-error fix later\n            selectedWidgets: this.movement?.selectedWidgetsWithRectangle || this.props.selectedWidgets,\n            view,\n            viewsActiveFilter: this.props.viewsActiveFilter,\n            customSettings: this.props.customSettings,\n        });\n    }\n\n    isSignalVisible(index: number) {\n        const oid = this.state.rxData[`signals-oid-${index}`];\n\n        if (oid) {\n            /** The state value */\n            let val = this.state.values[`${oid}.val`];\n\n            const condition = this.state.rxData[`signals-cond-${index}`] ?? '==';\n            /** The value the state value needs to match */\n            let targetValue = this.state.rxData[`signals-val-${index}`] ?? 'true';\n\n            if (val === undefined || val === null) {\n                return condition === 'not exist';\n            }\n\n            if (!condition || targetValue === undefined || targetValue === null) {\n                return condition === 'not exist';\n            }\n\n            if (val === 'null' && condition !== 'exist' && condition !== 'not exist') {\n                return false;\n            }\n\n            const valueType = typeof val;\n\n            if (valueType === 'boolean' || val === 'false' || val === 'true') {\n                targetValue = targetValue === 'true' || targetValue === true || targetValue === 1 || targetValue === '1';\n            } else if (valueType === 'number') {\n                targetValue = parseFloat(targetValue);\n            } else if (valueType === 'object') {\n                val = JSON.stringify(val);\n            }\n\n            switch (condition) {\n                case '==':\n                    targetValue = targetValue.toString();\n                    val = val.toString();\n                    if (val === '1') val = 'true';\n                    if (targetValue === '1') targetValue = 'true';\n                    if (val === '0') val = 'false';\n                    if (targetValue === '0') targetValue = 'false';\n                    return targetValue === val;\n                case '!=':\n                    targetValue = targetValue.toString();\n                    val = val.toString();\n                    if (val === '1') val = 'true';\n                    if (targetValue === '1') targetValue = 'true';\n                    if (val === '0') val = 'false';\n                    if (targetValue === '0') targetValue = 'false';\n                    return targetValue !== val;\n                case '>=':\n                    return val >= targetValue;\n                case '<=':\n                    return val <= targetValue;\n                case '>':\n                    return val > targetValue;\n                case '<':\n                    return val < targetValue;\n                case 'consist':\n                    targetValue = targetValue.toString();\n                    val = val.toString();\n                    return val.toString().includes(targetValue);\n                case 'not consist':\n                    targetValue = targetValue.toString();\n                    val = val.toString();\n                    return !val.toString().includes(targetValue);\n                case 'exist':\n                    return targetValue !== 'null';\n                case 'not exist':\n                    return targetValue === 'null';\n                default:\n                    console.log(`Unknown signals condition for ${this.props.id}: ${condition}`);\n                    return false;\n            }\n        } else {\n            return false;\n        }\n    }\n\n    static text2style(textStyle: string, style: any) {\n        if (textStyle) {\n            style = style || {};\n            const parts = textStyle.split(';');\n            parts.forEach(part => {\n                const [attr, value] = part.split(':');\n                if (attr && value) {\n                    // convert attr into camelCase notation\n                    const attrParts = attr.trim().split('-');\n                    for (let p = 1; p < attrParts.length; p++) {\n                        attrParts[p] = attrParts[p][0].toUpperCase() + attrParts[p].substring(1);\n                    }\n\n                    style[attrParts.join('')] = value.trim();\n                }\n            });\n        }\n        return style;\n    }\n\n    renderSignal(index: number) {\n        const oid = this.state.rxData[`signals-oid-${index}`];\n        if (!oid || oid === 'nothing_selected') {\n            return null;\n        }\n        if (this.props.editMode && this.state.rxData[`signals-hide-edit-${index}`]) {\n            return null;\n        }\n\n        // check value\n        if (this.props.editMode || this.isSignalVisible(index)) {\n            let icon = this.state.rxData[`signals-smallIcon-${index}`];\n            let color;\n            if (icon) {\n                color = this.state.rxData[`signals-color-${index}`];\n            } else {\n                icon = this.state.rxData[`signals-icon-${index}`];\n            }\n\n            const style = {\n                color,\n                position: 'absolute',\n                top: `${parseInt(this.state.rxData[`signals-vert-${index}`], 10) || 0}%`,\n                left: `${parseInt(this.state.rxData[`signals-horz-${index}`], 10) || 0}%`,\n                zIndex: 10,\n                textAlign: 'center',\n                // make it possible to click through signal if in front of widget\n                pointerEvents: 'none',\n            };\n            if (icon) {\n                const imageStyle = {\n                    width: parseFloat(this.state.rxData[`signals-icon-size-${index}`]) || 32,\n                    height: 'auto',\n                };\n                icon = <Icon src={icon} style={imageStyle} className=\"vis-signal-icon\" />;\n            }\n            VisRxWidget.text2style(this.state.rxData[`signals-icon-style-${index}`], style);\n            let text = this.state.rxData[`signals-text-${index}`];\n            if (text) {\n                const textStyle = {\n                    color: this.state.rxData[`signals-color-${index}`],\n                };\n                VisRxWidget.text2style(this.state.rxData[`signals-text-style-${index}`], textStyle);\n                text = <div\n                    className=\"vis-signal-text\"\n                    style={textStyle}\n                >\n                    {this.state.rxData[`signals-text-${index}`]}\n                </div>;\n            } else {\n                text = null;\n            }\n\n            // class name only to address the icon by user's CSS\n            // @ts-expect-error fix later\n            return <div style={style} className={this.state.rxData[`signals-blink-${index}`] ? 'vis-signals-blink' : null}>\n                {icon}\n                {text}\n            </div>;\n        }\n        return null;\n    }\n\n    renderLastChange(widgetStyle: any) {\n        const oid = this.state.rxData['lc-oid'];\n        if (!oid || oid === 'nothing_selected') {\n            return null;\n        }\n        // show last change\n        const border = parseInt(this.state.rxData['lc-border-radius'], 10) || 0;\n        const style: Record<string, any> = {\n            backgroundColor: 'rgba(182, 182, 182, 0.6)',\n            fontFamily: 'Tahoma',\n            position: 'absolute',\n            zIndex: 0,\n            borderRadius: this.state.rxData['lc-position-horz'] === 'left' ?\n                `${border}px 0 0 ${border}px` :\n                (this.state.rxData['lc-position-horz'] === 'right' ? `0 ${border}px ${border}px 0` : border),\n            whiteSpace: 'nowrap',\n        };\n        const fontSize = this.state.rxData['lc-font-size'];\n        if (fontSize) {\n            if (fontSize.match(/\\D/)) {\n                style.fontSize = this.state.rxData['lc-font-size'];\n            } else {\n                style.fontSize = parseFloat(this.state.rxData['lc-font-size']);\n            }\n        }\n        if (this.state.rxData['lc-font-style']) {\n            style.fontStyle = this.state.rxData['lc-font-style'];\n        }\n        if (this.state.rxData['lc-font-family']) {\n            style.fontFamily = this.state.rxData['lc-font-family'];\n        }\n        if (this.state.rxData['lc-bkg-color']) {\n            style.backgroundColor = this.state.rxData['lc-bkg-color'];\n        }\n        if (this.state.rxData['lc-color']) {\n            style.color = this.state.rxData['lc-color'];\n        }\n        if (this.state.rxData['lc-border-width']) {\n            style.borderWidth = parseInt(this.state.rxData['lc-border-width'], 10) || 0;\n        }\n        if (this.state.rxData['lc-border-style']) {\n            style.borderStyle = this.state.rxData['lc-border-style'];\n        }\n        if (this.state.rxData['lc-border-color']) {\n            style.borderColor = this.state.rxData['lc-border-color'];\n        }\n        const padding = parseInt(this.state.rxData['lc-padding'], 10);\n        if (padding) {\n            style.padding = padding;\n        } else {\n            style.paddingTop = 3;\n            style.paddingBottom = 3;\n        }\n        if (this.state.rxData['lc-zindex']) {\n            style.zIndex = this.state.rxData['lc-zindex'];\n        }\n        if (this.state.rxData['lc-position-vert'] === 'top') {\n            style.top = parseInt(this.state.rxData['lc-offset-vert'], 10);\n        } else if (this.state.rxData['lc-position-vert'] === 'bottom') {\n            style.bottom = parseInt(this.state.rxData['lc-offset-vert'], 10);\n        } else if (this.state.rxData['lc-position-vert'] === 'middle') {\n            style.top = `calc(50% + ${parseInt(this.state.rxData['lc-offset-vert'], 10) - 10}px)`;\n        }\n        const offset = parseFloat(this.state.rxData['lc-offset-horz']) || 0;\n        if (this.state.rxData['lc-position-horz'] === 'left') {\n            style.right = `calc(100% - ${offset}px)`;\n            if (!padding) {\n                style.paddingRight = 10;\n                style.paddingLeft = 10;\n            }\n        } else if (this.state.rxData['lc-position-horz'] === 'right') {\n            style.left = `calc(100% + ${offset}px)`;\n            if (!padding) {\n                style.paddingRight = 10;\n                style.paddingLeft = 10;\n            }\n        } else if (this.state.rxData['lc-position-horz'] === 'middle') {\n            style.left = `calc(50% + ${offset}px)`;\n        }\n\n        const divLastChange = window.document.createElement('div');\n        // `<div class=\"vis-last-change\" data-type=\"${data['lc-type']}\" data-format=\"${data['lc-format']}\" data-interval=\"${data['lc-is-interval']}\">${this.binds.basic.formatDate(this.states.attr(`${data['lc-oid']}.${data['lc-type'] === 'last-change' ? 'lc' : 'ts'}`), data['lc-format'], data['lc-is-interval'], data['lc-is-moment'])}</div>`\n        divLastChange.className = '';\n\n        calculateOverflow(widgetStyle);\n\n        return <div\n            className=\"vis-last-change\" // just to have a possibility to address it in user's CSS\n            style={style}\n        >\n            {this.formatDate(\n                this.state.values[`${this.state.rxData['lc-oid']}.${this.state.rxData['lc-type'] === 'last-change' ? 'lc' : 'ts'}`],\n                this.state.rxData['lc-format'],\n                this.state.rxData['lc-is-interval'],\n                this.state.rxData['lc-is-moment'],\n                true,\n            )}\n        </div>;\n    }\n\n    renderSignals(): React.ReactNode {\n        const count = parseInt(this.state.rxData?.['signals-count'], 10) || 0;\n\n        if (!count) {\n            return null;\n        }\n\n        const result = [];\n        for (let i = 0; i < count; i++) {\n            result.push(this.renderSignal(i));\n        }\n\n        return result;\n    }\n\n    render() {\n        if (!this.state.visible && !this.state.editMode) {\n            return null;\n        }\n\n        if (this.state.applyBindings && !this.bindingsTimer) {\n            this.bindingsTimer = setTimeout(async () => {\n                this.bindingsTimer = undefined;\n                await this.onPropertiesUpdated();\n\n                const refs: any[] = [];\n                // if widget has included widgets => inform them about the new size or position\n                const oWidget = this.props.context.views[this.props.view].widgets[this.props.id];\n                const attrs = Object.keys(oWidget.data);\n                attrs.forEach(attr => {\n                    if (attr.startsWith('widget') && oWidget.data[attr]) {\n                        const ref = this.props.askView && this.props.askView('getRef', { id: oWidget.data[attr] });\n                        ref && refs.push(ref);\n                    }\n                });\n\n                this.informIncludedWidgets && clearTimeout(this.informIncludedWidgets);\n                if (refs) {\n                    this.informIncludedWidgets = setTimeout(() => {\n                        this.informIncludedWidgets = undefined;\n                        refs.forEach(ref => ref.onCommand('updatePosition'));\n                    }, 200);\n                }\n            }, 10);\n        }\n\n        // restore visibility in editMode\n        if (this.state.editMode && this.filterDisplay !== undefined && this.refService.current) {\n            this.refService.current.style.display = this.filterDisplay;\n            delete this.filterDisplay;\n        }\n\n        return super.render();\n    }\n\n    /**\n     * Get information about specific widget, needs to be implemented by widget class\n     */\n    // eslint-disable-next-line class-methods-use-this\n    getWidgetInfo(): Readonly<RxWidgetInfo> {\n        throw new Error('not implemented');\n    }\n}\n\nexport default VisRxWidget;\n","/**\n *  ioBroker.vis\n *  https://github.com/ioBroker/ioBroker.vis\n *\n *  Copyright (c) 2022-2023 Denis Haev https://github.com/GermanBluefox,\n *  Creative Common Attribution-NonCommercial (CC BY-NC)\n *\n *  http://creativecommons.org/licenses/by-nc/4.0/\n *\n * Short content:\n * Licensees may copy, distribute, display and perform the work and make derivative works based on it only if they give the author or licensor the credits in the manner specified by these.\n * Licensees may copy, distribute, display, and perform the work and make derivative works based on it only for noncommercial purposes.\n * (Free for non-commercial use).\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { calculateOverflow, isVarFinite, deepClone } from '@/Utils/utils';\nimport {\n    replaceGroupAttr,\n    addClass,\n    getUsedObjectIDsInWidget,\n} from './visUtils';\nimport VisBaseWidget from './visBaseWidget';\n\nconst analyzeDraggableResizable = (el, result, widgetStyle) => {\n    result = result || {};\n    result.resizable = true;\n    result.draggable = true;\n\n    if (el && el.dataset) {\n        let resizableOptions = el.dataset.visResizable;\n        if (resizableOptions) {\n            try {\n                resizableOptions = JSON.parse(resizableOptions);\n            } catch (error) {\n                console.error(`Cannot parse resizable options by ${el.getAttribute('id')}: ${resizableOptions}`);\n                resizableOptions = null;\n            }\n            if (resizableOptions) {\n                if (resizableOptions.disabled !== undefined) {\n                    result.resizable = !resizableOptions.disabled;\n                }\n                if (resizableOptions.handles !== undefined) {\n                    result.resizeHandles = resizableOptions.handles.split(',').map(h => h.trim());\n                }\n            }\n            if (widgetStyle && !result.resizable && (!widgetStyle.width || !widgetStyle.height)) {\n                result.virtualHeight = el.clientHeight;\n                result.virtualWidth = el.clientWidth;\n            }\n        }\n\n        let draggableOptions = el.dataset.visDraggable;\n        if (draggableOptions) {\n            try {\n                draggableOptions = JSON.parse(draggableOptions);\n            } catch (error) {\n                console.error(`Cannot parse draggable options by ${el.getAttribute('id')}: ${draggableOptions}`);\n                draggableOptions = null;\n            }\n            if (draggableOptions) {\n                if (draggableOptions.disabled !== undefined) {\n                    result.draggable = !draggableOptions.disabled;\n                }\n            }\n        }\n\n        result.hideHelper = el.dataset.visHideHelper === 'true';\n    }\n    return result;\n};\n\nclass VisCanWidget extends VisBaseWidget {\n    constructor(props) {\n        super(props);\n\n        this.refViews = {};\n\n        this.isCanWidget = true;\n\n        this.state = {\n            mounted: false,\n            legacyViewContainers: [],\n            hideHelper: false,\n            resizable: true,\n            draggable: true,\n            ...this.state,\n        };\n\n        this.setupSubscriptions();\n\n        this.props.context.linkContext.registerChangeHandler(this.props.id, this.changeHandler);\n\n        // legacy support\n        // if (props.tpl?.includes('materialdesign') && this.props.context.buildLegacyStructures) {\n        // event if no materialdesign widget used, the legacy structures must build,\n        // because the materialdesign set tries to call vis.subscribing.byViews\n        this.props.context.buildLegacyStructures();\n        // }\n    }\n\n    setupSubscriptions() {\n        this.bindings = {};\n\n        const linkContext = {\n            IDs: [],\n            bindings: this.bindings,\n            visibility: this.props.context.linkContext.visibility,\n            lastChanges: this.props.context.linkContext.lastChanges,\n            signals: this.props.context.linkContext.signals,\n        };\n\n        getUsedObjectIDsInWidget(this.props.context.views, this.props.view, this.props.id, linkContext);\n\n        this.IDs = linkContext.IDs;\n\n        // merge bindings\n        Object.keys(this.bindings).forEach(id => {\n            this.props.context.linkContext.bindings[id] = this.props.context.linkContext.bindings[id] || [];\n            this.bindings[id].forEach(item => this.props.context.linkContext.bindings[id].push(item));\n        });\n\n        // free mem\n        Object.keys(linkContext).forEach(attr => linkContext[attr] = null);\n    }\n\n    componentDidMount() {\n        super.componentDidMount();\n\n        this.props.context.linkContext.subscribe(this.IDs);\n\n        if (!this.widDiv) {\n            // link could be a ref or direct a div (e.g., by groups)\n            // console.log('Widget mounted');\n            this.renderWidget(() => {\n                const newState = { mounted: true };\n\n                if (this.props.context.allWidgets[this.props.id]) {\n                    // try to read resize handlers\n                    analyzeDraggableResizable(this.widDiv, newState, this.props.context.allWidgets[this.props.id].style);\n                }\n\n                this.setState(newState);\n            });\n        }\n    }\n\n    componentWillUnmount() {\n        super.componentWillUnmount();\n\n        if (this.props.context.linkContext) {\n            if (this.props.context.linkContext && this.props.context.linkContext.unregisterChangeHandler) {\n                this.props.context.linkContext.unregisterChangeHandler(this.props.id, this.changeHandler);\n            }\n        }\n\n        this.bindings = {};\n\n        if (this.props.context.linkContext) {\n            if (this.props.context.linkContext.unsubscribe) {\n                this.props.context.linkContext.unsubscribe(this.IDs);\n            }\n\n            // remove all bindings from prop.linkContexts\n            VisBaseWidget.removeFromArray(this.props.context.linkContext.visibility, this.IDs, this.props.view, this.props.id);\n            VisBaseWidget.removeFromArray(this.props.context.linkContext.lastChanges, this.IDs, this.props.view, this.props.id);\n            VisBaseWidget.removeFromArray(this.props.context.linkContext.signals, this.IDs, this.props.view, this.props.id);\n            VisBaseWidget.removeFromArray(this.props.context.linkContext.bindings, this.IDs, this.props.view, this.props.id);\n        }\n\n        this.destroy();\n    }\n\n    static applyStyle(el, style, isSelected, editMode) {\n        if (typeof style === 'string') {\n            // style is a string\n            // \"height: 10; width: 20\"\n            style = VisBaseWidget.parseStyle(style);\n            Object.keys(style).forEach(attr => {\n                if (!attr.startsWith('_')) {\n                    let value = style[attr];\n                    if (attr === 'top' || attr === 'left' || attr === 'width' || attr === 'height') {\n                        if (value !== '0' && value !== 0 && value !== null && value !== '' && value.toString().match(/^[+-]?([0-9]*[.])?[0-9]+$/)) {\n                            value = `${value}px`;\n                        }\n                    }\n\n                    if (attr.includes('-')) {\n                        console.log(`${attr} to ${value}`);\n                        attr = attr.replace(/-([a-z])/g, g => g[1].toUpperCase());\n                    }\n                    if (value) {\n                        el.style[attr] = value;\n                    } else if (el.style[attr]) { // delete style\n                        el.style[attr] = '';\n                    }\n                }\n            });\n        } else if (style) {\n            // style is an object\n            // {\n            //      height: 10,\n            // }\n            Object.keys(style).forEach(attr => {\n                if (attr && style[attr] !== undefined && style[attr] !== null && !attr.startsWith('_')) {\n                    let value = style[attr];\n                    if (attr === 'top' || attr === 'left' || attr === 'width' || attr === 'height') {\n                        if (value !== '0' && value !== 0 && value !== null && value !== '' && value.toString().match(/^[+-]?([0-9]*[.])?[0-9]+$/)) {\n                            value = `${value}px`;\n                        }\n                    }\n                    // a-b => aB\n                    if (attr.includes('-')) {\n                        attr = attr.replace(/-([a-z])/g, g => g[1].toUpperCase());\n                    }\n                    if (value) {\n                        el.style[attr] = value;\n                    } else if (el.style[attr]) { // delete style\n                        el.style[attr] = '';\n                    }\n                }\n            });\n\n            if (editMode) {\n                if (isSelected) {\n                    // z-index\n                    el.style.zIndex = (500 + (parseInt(style['z-index'], 10) || 0)).toString();\n                }\n\n                const zIndex = parseInt(el.style.zIndex, 10) || 0;\n                // apply zIndex to parent\n                const overlay = el.parentNode.querySelector(`#rx_${el.id}`);\n                if (overlay) {\n                    overlay.style.zIndex = zIndex + 1;\n                }\n                el.style.userSelect = 'none';\n                el.style.pointerEvents = 'none';\n            }\n\n            // absolute widgets must have top and left\n            if (el.style.position === 'absolute') {\n                if (!el.style.top) {\n                    el.style.top = '0px';\n                }\n                if (!el.style.left) {\n                    el.style.left = '0px';\n                }\n            }\n        }\n    }\n\n    // this method may be not in form onCommand = command => {}\n    onCommand(command, options) {\n        const result = super.onCommand(command, options);\n        if (result === false) {\n            if (command === 'updatePosition') {\n                // move by canJS widgets the name and overlapping div\n                if (this.refService.current && this.widDiv) {\n                    this.refService.current.style.width = `${this.widDiv.offsetWidth}px`;\n                    this.refService.current.style.height = `${this.widDiv.offsetHeight}px`;\n                    // Move helper to actual widget\n                    this.refService.current.style.left = `${this.widDiv.offsetLeft}px`;\n                    this.refService.current.style.top = `${this.widDiv.offsetTop}px`;\n                }\n            } else if (command === 'updateContainers') {\n                // try to find 'vis-view-container' in it\n                const containers = this.widDiv.querySelectorAll('.vis-view-container');\n                if (containers.length) {\n                    const legacyViewContainers = [];\n                    for (let v = 0; v < containers.length; v++) {\n                        const view = (containers[v].dataset.visContains || '').trim();\n                        if (view && view !== 'undefined' && view !== 'null') {\n                            legacyViewContainers.push(view);\n                            containers[v].className = addClass(containers[v].className, 'vis-editmode-helper');\n                        }\n                    }\n\n                    legacyViewContainers.sort();\n\n                    if (JSON.stringify(legacyViewContainers) !== JSON.stringify(this.state.legacyViewContainers)) {\n                        this.setState({ legacyViewContainers });\n                    }\n                }\n            } else if (command === 'changeFilter') {\n                if (!this.widDiv) {\n                    return null;\n                }\n\n                // if filter was disabled\n                if (!options || !options.filter.length) {\n                    // just show if it was hidden\n                    if (this.filterDisplay !== undefined) {\n                        this.widDiv.style.display = this.filterDisplay;\n                        if (this.widDiv._customHandlers?.onShow) {\n                            this.widDiv._customHandlers.onShow(this.widDiv, this.props.id);\n                        }\n                    }\n                } else if (options.filter[0] === '$') {\n                    // hide all\n                    if (this.props.context.allWidgets[this.props.id]?.data?.filterkey) {\n                        if (this.widDiv.style.display !== 'none') {\n                            this.filterDisplay = this.widDiv.style.display;\n                            this.widDiv.style.display = 'none';\n                            if (this.widDiv._customHandlers?.onHide) {\n                                this.widDiv._customHandlers.onHide(this.widDiv, this.props.id);\n                            }\n                        }\n                    }\n                } else {\n                    const wFilters = this.props.context.allWidgets[this.props.id]?.data.filterkey;\n\n                    if (wFilters) {\n                        // we cannot use \"find\", as it is \"can\" observable\n                        let found = false;\n                        for (let w = 0; w < wFilters.length; w++) {\n                            if (options.filter.includes(wFilters[w])) {\n                                found = true;\n                                break;\n                            }\n                        }\n\n                        // this widget was not found in desired filters\n                        if (!found) {\n                            // if it was not hidden\n                            if (this.widDiv.style.display !== 'none') {\n                                // remember display mode\n                                this.filterDisplay = this.widDiv.style.display;\n                                // hide it\n                                this.widDiv.style.display = 'none';\n                                if (this.widDiv._customHandlers?.onHide) {\n                                    this.widDiv._customHandlers?.onHide(this.widDiv, this.props.id);\n                                }\n                            }\n                        } else if (this.filterDisplay !== undefined && this.widDiv.style.display === 'none') {\n                            // if it was hidden => restore it\n                            this.widDiv.style.display = this.filterDisplay;\n                            if (this.widDiv._customHandlers?.onShow) {\n                                this.widDiv._customHandlers?.onShow(this.widDiv, this.props.id);\n                            }\n                        }\n                    }\n                }\n            } else if (command === 'collectFilters') {\n                return this.props.context.allWidgets[this.props.id]?.data?.filterkey;\n            }\n        }\n\n        return result;\n    }\n\n    componentDidUpdate(/* prevProps, prevState, snapshot */) {\n        if (this.state.legacyViewContainers.length) {\n            console.log('widget updated');\n            // place all views to corresponding containers\n            Object.keys(this.refViews).forEach(view => {\n                if (this.refViews[view].current) {\n                    const container = this.widDiv.querySelector(`.vis-view-container[data-vis-contains=\"${view}\"]`);\n                    const current = this.refViews[view].current;\n                    if (current && !current.refView?.current) {\n                        // it is just div\n                        if (current.parentNode !== container) {\n                            // current._originalParent = current.parentNode;\n                            // container.appendChild(current);\n                        }\n                    } else if (current?.refView?.current && container && current.refView.current.parentNode !== container) {\n                        current.refView.current._originalParent = current.refView.current.parentNode;\n                        container.appendChild(current.refView.current);\n                    }\n                }\n            });\n        }\n    }\n\n    destroy = update => {\n        // !update && console.log('destroy ' + this.props.id);\n        // destroy map\n        if (this.props.context.allWidgets[this.props.id]) {\n            delete this.props.context.allWidgets[this.props.id];\n        }\n\n        // do not destroy groups by update\n        if (this.widDiv && (!update || !this.props.id.startsWith('g'))) {\n            const $wid = this.props.context.jQuery(this.widDiv);\n            const destroy = $wid.data('destroy');\n\n            if (typeof destroy === 'function') {\n                destroy(this.props.id, $wid);\n                $wid.data('destroy', null);\n            }\n\n            // remove from DOM\n            this.widDiv.remove();\n            this.widDiv = null;\n        }\n    };\n\n    changeHandler = (type, item, stateId) => {\n        // console.log(`[${this.props.id}] update widget because of \"${type}\" \"${stateId}\": ${JSON.stringify(state)}`);\n        if (this.widDiv) {\n            if (type === 'style') {\n                if (this.props.context.allWidgets[this.props.id]) {\n                    // apply style from this.props.context.allWidgets.style\n                    VisCanWidget.applyStyle(this.widDiv, this.props.context.allWidgets[this.props.id].style, this.state.selected, this.state.editMode);\n                }\n            } else if (type === 'signal') {\n                this.updateSignal(item);\n            } else if (type === 'visibility') {\n                this.updateVisibility(item);\n            } else if (type === 'lastChange') {\n                this.updateLastChange();\n            } else if (type === 'binding') {\n                this.applyBinding(stateId);\n            }\n        }\n    };\n\n    updateSignal(item) {\n        if (this.widDiv) {\n            const signalDiv = this.widDiv.querySelector(`.vis-signal[data-index=\"${item.index}\"]`);\n            if (signalDiv) {\n                if (this.isSignalVisible(item.index)) {\n                    signalDiv.style.display = '';\n                } else {\n                    signalDiv.style.display = 'none';\n                }\n            }\n        }\n    }\n\n    updateLastChange() {\n        if (this.widDiv) {\n            const widgetData = this.props.context.allWidgets[this.props.id]?.data;\n            if (widgetData) {\n                const lcDiv = this.widDiv.querySelector('.vis-last-change');\n                if (lcDiv) {\n                    lcDiv.innerHTML = window.vis.binds.basic.formatDate(\n                        this.props.context.canStates.attr(`${widgetData['lc-oid']}.${widgetData['lc-type'] === 'last-change' ? 'lc' : 'ts'}`),\n                        widgetData['lc-format'],\n                        widgetData['lc-is-interval'],\n                        widgetData['lc-is-moment'],\n                    );\n                } else {\n                    console.warn(`[${this.props.id}] Last change not found!`);\n                }\n            }\n        }\n    }\n\n    updateVisibility() {\n        if (this.widDiv && !this.state.editMode) {\n            const widgetData = this.props.context.allWidgets[this.props.id]?.data;\n            if (widgetData) {\n                if (VisBaseWidget.isWidgetHidden(widgetData, this.props.context.canStates, this.props.id) || this.isWidgetFilteredOut(widgetData)) {\n                    this.widDiv._storedDisplay = this.widDiv.style.display;\n                    this.widDiv.style.display = 'none';\n\n                    if (this.widDiv\n                        && this.widDiv._customHandlers\n                        && this.widDiv._customHandlers.onHide\n                    ) {\n                        this.widDiv._customHandlers.onHide(this.widDiv, this.props.id);\n                    }\n                } else {\n                    this.widDiv.style.display = this.widDiv._storedDisplay || '';\n                    this.widDiv._storedDisplay = '';\n\n                    if (this.widDiv &&\n                        this.widDiv._customHandlers &&\n                        this.widDiv._customHandlers.onShow\n                    ) {\n                        this.widDiv._customHandlers.onShow(this.widDiv, this.props.id);\n                    }\n                }\n            }\n        }\n    }\n\n    addGestures(widgetData) {\n        // gestures\n        const gestures = ['swipeRight', 'swipeLeft', 'swipeUp', 'swipeDown', 'rotateLeft', 'rotateRight', 'pinchIn', 'pinchOut', 'swiping', 'rotating', 'pinching'];\n        const $$wid = this.props.context.$$(`#${this.props.id}`);\n        const $wid = this.props.context.jQuery(this.widDiv);\n        const offsetX = parseInt(widgetData['gestures-offsetX']) || 0;\n        const offsetY = parseInt(widgetData['gestures-offsetY']) || 0;\n\n        gestures.forEach(gesture => {\n            const oid = widgetData[`gestures-${gesture}-oid`];\n            if (widgetData && oid) {\n                const val = widgetData[`gestures-${gesture}-value`];\n                const delta = parseInt(widgetData[`gestures-${gesture}-delta`]) || 10;\n                const limit = parseFloat(widgetData[`gestures-${gesture}-limit`]) || false;\n                const max = parseFloat(widgetData[`gestures-${gesture}-maximum`]) || 100;\n                const min = parseFloat(widgetData[`gestures-${gesture}-minimum`]) || 0;\n\n                let newVal = null;\n                let valState = this.props.context.canStates.attr(`${oid}.val`);\n                let $indicator;\n                if (valState !== undefined && valState !== null) {\n                    $wid.on('touchmove', evt => evt.preventDefault());\n\n                    $wid.css({\n                        '-webkit-user-select': 'none',\n                        '-khtml-user-select': 'none',\n                        '-moz-user-select': 'none',\n                        '-ms-user-select': 'none',\n                        'user-select': 'none',\n                    });\n\n                    $$wid[gesture](data => {\n                        valState = this.props.context.canStates.attr(`${oid}.val`);\n\n                        if (val === 'toggle') {\n                            if (valState === true) {\n                                newVal = false;\n                            } else if (valState === false) {\n                                newVal = true;\n                            } else {\n                                newVal = null;\n                                return;\n                            }\n                        } else if (gesture === 'swiping' || gesture === 'rotating' || gesture === 'pinching') {\n                            if (newVal === null) {\n                                $indicator = this.$(`#${widgetData['gestures-indicator']}`);\n                                // create default indicator\n                                if (!$indicator.length) {\n                                    // noinspection JSJQueryEfficiency\n                                    $indicator = this.$('#gestureIndicator');\n                                    if (!$indicator.length) {\n                                        this.$('body').append('<div id=\"gestureIndicator\" style=\"position: absolute; pointer-events: none; z-index: 100; box-shadow: 2px 2px 5px 1px gray;height: 21px; border: 1px solid #c7c7c7; border-radius: 5px; text-align: center; padding-top: 6px; padding-left: 2px; padding-right: 2px; background: lightgray;\"></div>');\n                                        $indicator = this.$('#gestureIndicator');\n\n                                        // eslint-disable-next-line @typescript-eslint/no-this-alias\n                                        const that = this;\n                                        // eslint-disable-next-line func-names\n                                        $indicator.on('gestureUpdate', function (event, evData) {\n                                            const $el = that.$(this);\n                                            if (evData.val === null) {\n                                                $el.hide();\n                                            } else {\n                                                $el.html(evData.val);\n                                                $el.css({\n                                                    left: `${parseInt(evData.x) - $el.width() / 2}px`,\n                                                    top: `${parseInt(evData.y) - $el.height() / 2}px`,\n                                                }).show();\n                                            }\n                                        });\n                                    }\n                                }\n\n                                this.$(this.root).css({\n                                    '-webkit-user-select': 'none',\n                                    '-khtml-user-select': 'none',\n                                    '-moz-user-select': 'none',\n                                    '-ms-user-select': 'none',\n                                    'user-select': 'none',\n                                });\n\n                                this.$(document).on('mouseup.gesture touchend.gesture', () => {\n                                    if (newVal !== null) {\n                                        this.props.context.setValue(oid, newVal);\n                                        newVal = null;\n                                    }\n                                    $indicator.trigger('gestureUpdate', { val: null });\n                                    this.$(document).off('mouseup.gesture touchend.gesture');\n\n                                    this.$(this.root).css({\n                                        '-webkit-user-select': 'text',\n                                        '-khtml-user-select': 'text',\n                                        '-moz-user-select': 'text',\n                                        '-ms-user-select': 'text',\n                                        'user-select': 'text',\n                                    });\n                                });\n                            }\n                            let swipeDelta;\n                            let indicatorX;\n                            let indicatorY = 0;\n\n                            switch (gesture) {\n                                case 'swiping':\n                                    swipeDelta = Math.abs(data.touch.delta.x) > Math.abs(data.touch.delta.y) ? data.touch.delta.x : data.touch.delta.y * (-1);\n                                    swipeDelta = swipeDelta > 0 ? Math.floor(swipeDelta / delta) : Math.ceil(swipeDelta / delta);\n                                    indicatorX = data.touch.x;\n                                    indicatorY = data.touch.y;\n                                    break;\n\n                                case 'rotating':\n                                    swipeDelta = data.touch.delta;\n                                    swipeDelta = swipeDelta > 0 ? Math.floor(swipeDelta / delta) : Math.ceil(swipeDelta / delta);\n                                    if (data.touch.touches[0].y < data.touch.touches[1].y) {\n                                        indicatorX = data.touch.touches[1].x;\n                                        indicatorY = data.touch.touches[1].y;\n                                    } else {\n                                        indicatorX = data.touch.touches[0].x;\n                                        indicatorY = data.touch.touches[0].y;\n                                    }\n                                    break;\n\n                                case 'pinching':\n                                    swipeDelta = data.touch.delta;\n                                    swipeDelta = swipeDelta > 0 ? Math.floor(swipeDelta / delta) : Math.ceil(swipeDelta / delta);\n                                    if (data.touch.touches[0].y < data.touch.touches[1].y) {\n                                        indicatorX = data.touch.touches[1].x;\n                                        indicatorY = data.touch.touches[1].y;\n                                    } else {\n                                        indicatorX = data.touch.touches[0].x;\n                                        indicatorY = data.touch.touches[0].y;\n                                    }\n                                    break;\n\n                                default:\n                                    break;\n                            }\n\n                            newVal = (parseFloat(valState) || 0) + (parseFloat(val) || 1) * swipeDelta;\n                            newVal = Math.max(min, Math.min(max, newVal));\n                            $indicator.trigger('gestureUpdate', {\n                                val: newVal,\n                                x: indicatorX + offsetX,\n                                y: indicatorY + offsetY,\n                            });\n                            return;\n                        } else if (limit !== false) {\n                            newVal = (parseFloat(valState) || 0) + (parseFloat(val) || 1);\n                            if (parseFloat(val) > 0 && newVal > limit) {\n                                newVal = limit;\n                            } else if (parseFloat(val) < 0 && newVal < limit) {\n                                newVal = limit;\n                            }\n                        } else {\n                            newVal = val;\n                        }\n                        this.props.context.setValue(oid, newVal);\n                        newVal = null;\n                    });\n                }\n            }\n        });\n    }\n\n    isSignalVisible(index, widgetData) {\n        widgetData = widgetData || this.props.context.allWidgets[this.props.id].data;\n\n        if (!widgetData) {\n            return false;\n        }\n\n        if (this.state.editMode) {\n            return !widgetData[`signals-hide-edit-${index}`];\n        }\n\n        const oid = widgetData[`signals-oid-${index}`];\n\n        if (oid) {\n            let val = this.props.context.canStates.attr(`${oid}.val`);\n\n            const condition = widgetData[`signals-cond-${index}`];\n            let value = widgetData[`signals-val-${index}`];\n\n            if (val === undefined || val === null) {\n                return condition === 'not exist';\n            }\n\n            if (!condition || value === undefined || value === null) {\n                return condition === 'not exist';\n            }\n\n            if (val === 'null' && condition !== 'exist' && condition !== 'not exist') {\n                return false;\n            }\n\n            const t = typeof val;\n            if (t === 'boolean' || val === 'false' || val === 'true') {\n                value = value === 'true' || value === true || value === 1 || value === '1';\n            } else if (t === 'number') {\n                value = parseFloat(value);\n            } else if (t === 'object') {\n                val = JSON.stringify(val);\n            }\n\n            switch (condition) {\n                case '==':\n                    value = value.toString();\n                    val = val.toString();\n                    if (val === '1') val = 'true';\n                    if (value === '1') value = 'true';\n                    if (val === '0') val = 'false';\n                    if (value === '0') value = 'false';\n                    return value === val;\n                case '!=':\n                    value = value.toString();\n                    val = val.toString();\n                    if (val === '1') val = 'true';\n                    if (value === '1') value = 'true';\n                    if (val === '0') val = 'false';\n                    if (value === '0') value = 'false';\n                    return value !== val;\n                case '>=':\n                    return val >= value;\n                case '<=':\n                    return val <= value;\n                case '>':\n                    return val > value;\n                case '<':\n                    return val < value;\n                case 'consist':\n                    value = value.toString();\n                    val = val.toString();\n                    return val.toString().includes(value);\n                case 'not consist':\n                    value = value.toString();\n                    val = val.toString();\n                    return !val.toString().includes(value);\n                case 'exist':\n                    return value !== 'null';\n                case 'not exist':\n                    return value === 'null';\n                default:\n                    console.log(`[${this.props.id}] Unknown signals condition: ${condition}`);\n                    return false;\n            }\n        } else {\n            return false;\n        }\n    }\n\n    addSignalIcon(widgetData, index) {\n        widgetData = widgetData || this.props.context.allWidgets[this.props.id]?.data;\n        if (!widgetData) {\n            return;\n        }\n\n        // <div class=\"vis-signal ${data[`signals-blink-${index}`] ? 'vis-signals-blink' : ''} ${data[`signals-text-class-${index}`] || ''} \" data-index=\"${index}\" style=\"display: ${display}; pointer-events: none; position: absolute; z-index: 10; top: ${data[`signals-vert-${index}`] || 0}%; left: ${data[`signals-horz-${index}`] || 0}%\">\n        const divSignal = window.document.createElement('div');\n        divSignal.className = `vis-signal ${widgetData[`signals-blink-${index}`] ? 'vis-signals-blink' : ''} ${widgetData[`signals-text-class-${index}`] || ''}`;\n        divSignal.dataset.index = index;\n        divSignal.style.display = this.isSignalVisible(index) ? '' : 'none';\n        divSignal.style.pointerEvents = 'none';\n        divSignal.style.position = 'absolute';\n        divSignal.style.zIndex = '10';\n        divSignal.style.top = `${widgetData[`signals-vert-${index}`] || 0}%`;\n        divSignal.style.left = `${widgetData[`signals-horz-${index}`] || 0}%`;\n\n        // <img class=\"vis-signal-icon\" src=\"${data[`signals-icon-${index}`]}\" style=\"width: ${data[`signals-icon-size-${index}`] || 32}px; height: auto;${data[`signals-icon-style-${index}`] || ''}\"/>\n        const divIcon = window.document.createElement('img');\n        divIcon.className = 'vis-signal-icon';\n        let src = widgetData[`signals-icon-${index}`];\n        if (src) {\n            if (src.startsWith('/vis/')) {\n                src = src.substring(5);\n            } else if (src.startsWith('/vis-2/')) {\n                src = src.substring(5);\n            } else if (src.startsWith('/vis-2-beta/')) {\n                src = src.substring(12);\n            }\n        }\n        divIcon.src = src;\n        divIcon.style.width = `${widgetData[`signals-icon-size-${index}`] || 32}px`;\n        divIcon.style.height = 'auto';\n        VisCanWidget.applyStyle(divIcon, widgetData[`signals-icon-style-${index}`]);\n        divSignal.appendChild(divIcon);\n\n        // <div class=\"vis-signal-text \" style=\"${data[`signals-text-style-${index}`] || ''}\">${data[`signals-text-${index}`]}</div>\n        const text = widgetData[`signals-text-${index}`];\n        if (text) {\n            const divText = window.document.createElement('div');\n            divText.className = 'vis-signal-text';\n            VisCanWidget.applyStyle(divText, widgetData[`signals-text-style-${index}`]);\n            divText.innerHTML = text;\n            divSignal.appendChild(divText);\n        }\n\n        this.widDiv.appendChild(divSignal);\n    }\n\n    addLastChange(widgetData) {\n        // show last change\n        const border = `${parseInt(widgetData['lc-border-radius'], 10) || 0}px`;\n        const css = {\n            background: 'rgba(182,182,182,0.6)',\n            fontFamily: 'Tahoma',\n            position: 'absolute',\n            zIndex: 0,\n            borderRadius: widgetData['lc-position-horz'] === 'left' ? (`${border} 0 0 ${border}`) : (widgetData['lc-position-horz'] === 'right' ? `0 ${border} ${border} 0` : border),\n            whiteSpace: 'nowrap',\n        };\n        if (widgetData['lc-font-size']) {\n            css.fontSize = widgetData['lc-font-size'];\n        }\n        if (widgetData['lc-font-style']) {\n            css.fontStyle = widgetData['lc-font-style'];\n        }\n        if (widgetData['lc-font-family']) {\n            css.fontFamily = widgetData['lc-font-family'];\n        }\n        if (widgetData['lc-bkg-color']) {\n            css.background = widgetData['lc-bkg-color'];\n        }\n        if (widgetData['lc-color']) {\n            css.color = widgetData['lc-color'];\n        }\n        if (widgetData['lc-border-width']) {\n            css.borderWidth = parseInt(widgetData['lc-border-width'], 10) || 0;\n        }\n        if (widgetData['lc-border-style']) {\n            css.borderStyle = widgetData['lc-border-style'];\n        }\n        if (widgetData['lc-border-color']) {\n            css.borderColor = widgetData['lc-border-color'];\n        }\n        if (widgetData['lc-padding']) {\n            css.padding = widgetData['lc-padding'];\n        } else {\n            css.paddingTop = 3;\n            css.paddingBottom = 3;\n        }\n        if (widgetData['lc-zindex']) {\n            css.zIndex = widgetData['lc-zindex'];\n        }\n\n        if (widgetData['lc-position-vert'] === 'top') {\n            css.top = `${parseInt(widgetData['lc-offset-vert'], 10)}px`;\n        } else if (widgetData['lc-position-vert'] === 'bottom') {\n            css.bottom = `${parseInt(widgetData['lc-offset-vert'], 10)}px`;\n        } else if (widgetData['lc-position-vert'] === 'middle') {\n            css.top = `calc(50% + ${parseInt(widgetData['lc-offset-vert'], 10) - 10}px)`;\n        }\n        const offset = parseFloat(widgetData['lc-offset-horz']) || 0;\n        if (widgetData['lc-position-horz'] === 'left') {\n            css.right = `calc(100% - ${offset}px)`;\n            if (!widgetData['lc-padding']) {\n                css.paddingRight = 10;\n                css.paddingLeft = 10;\n            }\n        } else if (widgetData['lc-position-horz'] === 'right') {\n            css.left = `calc(100% + ${offset}px)`;\n            if (!widgetData['lc-padding']) {\n                css.paddingRight = 10;\n                css.paddingLeft = 10;\n            }\n        } else if (widgetData['lc-position-horz'] === 'middle') {\n            css.left = `calc(50% + ${offset}px)`;\n        }\n\n        const divLastChange = window.document.createElement('div');\n        // `<div class=\"vis-last-change\" data-type=\"${data['lc-type']}\" data-format=\"${data['lc-format']}\" data-interval=\"${data['lc-is-interval']}\">${this.binds.basic.formatDate(this.states.attr(`${data['lc-oid']}.${data['lc-type'] === 'last-change' ? 'lc' : 'ts'}`), data['lc-format'], data['lc-is-interval'], data['lc-is-moment'])}</div>`\n        divLastChange.className = 'vis-last-change';\n        divLastChange.innerHTML = this.formatDate(\n            this.props.context.canStates.attr(`${widgetData['lc-oid']}.${widgetData['lc-type'] === 'last-change' ? 'lc' : 'ts'}`),\n            widgetData['lc-format'],\n            widgetData['lc-is-interval'],\n            widgetData['lc-is-moment'],\n        );\n\n        Object.keys(css).forEach(attr => divLastChange.style[attr] = css[attr]);\n\n        this.widDiv.prepend(divLastChange);\n        calculateOverflow(this.widDiv.style);\n    }\n\n    addChart(widgetData) {\n        this.widDiv.onclick = () => {\n            // not yet implemented\n            console.log(`[${this.props.id}] Show dialog with chart for ${widgetData['echart-oid']}`);\n        };\n    }\n\n    visibilityOidBinding(binding, oid) {\n        // if attribute 'visibility-oid' contains binding\n        if (binding.attr === 'visibility-oid') {\n            // runs only if we have a valid id\n            if (oid && oid.length < 300 && (/^[^.]*\\.\\d*\\..*|^[^.]*\\.[^.]*\\.[^.]*\\.\\d*\\..*/).test(oid) && VisBaseWidget.FORBIDDEN_CHARS.test(oid)) {\n                const obj = {\n                    view: binding.view,\n                    widget: binding.widget,\n                };\n\n                // on runtime load oid, check if oid needs to be subscribed\n                Object.keys(this.props.context.linkContext.visibility).forEach(id => {\n                    const widgetIndex = this.props.context.linkContext.visibility[id].findIndex(x => x.widget === obj.widget);\n\n                    // remove or add widget to existing oid's in visibility list\n                    if (widgetIndex >= 0 && id !== oid) {\n                        // widget exists in the visibility list\n                        this.props.context.linkContext.visibility[id].splice(widgetIndex, 1);\n                    } else if (widgetIndex < 0 && id === oid) {\n                        // widget does not exist in the visibility list\n                        this.props.context.linkContext.visibility[id].push(obj);\n                    }\n                });\n\n                if (!this.props.context.linkContext.visibility[oid]) {\n                    // oid not exist in visibility list -> add oid and widget to the visibility list\n                    this.props.context.linkContext.visibility[oid] = [obj];\n                }\n\n                // on runtime load oid, check if oid does need to be subscribed\n                if (!this.state.editMode) {\n                    if (this.IDs.includes(oid)) {\n                        this.updateVisibility();\n                    } else {\n                        this.IDs.push(oid);\n                        const val = this.props.context.canStates.attr(`${oid}.val`);\n                        if (val !== undefined) {\n                            this.updateVisibility();\n                        }\n\n                        this.props.context.linkContext.subscribe([oid]);\n                    }\n                }\n            }\n        }\n    }\n\n    applyBindings(doNotApplyStyles, widgetData, widgetStyle) {\n        Object.keys(this.bindings).forEach(id =>\n            this.applyBinding(id, doNotApplyStyles, widgetData, widgetStyle));\n    }\n\n    applyBinding(stateId, doNotApplyStyles, widgetData, widgetStyle) {\n        const widgetContext = this.props.context.allWidgets[this.props.id];\n        if (!widgetContext && (!widgetData || !widgetStyle)) {\n            return;\n        }\n\n        const widget = this.props.context.views[this.props.view].widgets[this.props.id];\n\n        this.bindings[stateId].forEach(item => {\n            widgetStyle = widgetStyle || widgetContext.style;\n\n            const value = this.props.context.formatUtils.formatBinding({\n                format: item.format,\n                view: item.view,\n                wid: this.props.id,\n                widget,\n                widgetData: widgetData || widgetContext.data,\n                moment: this.props.context.moment,\n            });\n\n            if (item.type === 'data') {\n                if (widgetData) {\n                    widgetData[item.attr] = value;\n                } else if (widgetContext) {\n                    // trigger observable\n                    widgetContext.data.attr(item.attr, value);\n                }\n            } else if (item.type === 'style') {\n                if (widgetStyle) {\n                    widgetStyle[item.attr] = value;\n                    // update style\n                    !doNotApplyStyles && VisCanWidget.applyStyle(this.widDiv, widgetStyle, this.state.selected, this.state.editMode);\n                } else if (widgetContext) {\n                    // trigger observable\n                    widgetContext.style.attr(item.attr, value);\n                    // update style\n                    !doNotApplyStyles && VisCanWidget.applyStyle(this.widDiv, widgetContext.style, this.state.selected, this.state.editMode);\n                }\n            }\n            // TODO\n            // this.subscribeOidAtRuntime(value);\n            // this.visibilityOidBinding(binding, value);\n            // this.reRenderWidget(binding.view, binding.view, bid);\n        });\n    }\n\n    calcData(wid, widget, newWidgetData, newWidgetStyle) {\n        let widgetData;\n        let widgetStyle;\n        let isRelative;\n\n        try {\n            widgetData = { wid, ...(widget.data || {}) };\n            widgetStyle = deepClone(newWidgetStyle || widget.style || {});\n            // Replace _PRJ_NAME\n            Object.keys(widgetData).forEach(attr => {\n                if (attr &&\n                    widgetData[attr] &&\n                    typeof widgetData[attr] === 'string' &&\n                    (attr.startsWith('src') || attr.endsWith('src') || attr.includes('icon')) && widgetData[attr].startsWith('_PRJ_NAME')\n                ) {\n                    // \"_PRJ_NAME\".length = 9\n                    widgetData[attr] = `../${this.props.context.adapterName}.${this.props.context.instance}/${this.props.context.projectName}${widgetData[attr].substring(9)}`;\n                }\n            });\n            if (widgetStyle['background-image'] && widgetStyle['background-image'].startsWith('_PRJ_NAME')) {\n                widgetStyle['background-image'] = `../${this.props.context.adapterName}.${this.props.context.instance}/${this.props.context.projectName}${widgetStyle['background-image'].substring(9)}`;  // \"_PRJ_NAME\".length = 9\n            }\n\n            this.applyBindings(true, widgetData, widgetStyle);\n\n            if (widgetData.filterkey && typeof widgetData.filterkey === 'string') {\n                widgetData.filterkey = widgetData.filterkey.split(',')\n                    .map(f => f.trim())\n                    .filter(f => f);\n            }\n\n            isRelative = this.props.isRelative !== undefined ? this.props.isRelative :\n                widgetStyle && (\n                    widgetStyle.position === 'relative' ||\n                    widgetStyle.position === 'static' ||\n                    widgetStyle.position === 'sticky'\n                );\n\n            if (isRelative) {\n                delete widgetStyle.top;\n                delete widgetStyle.left;\n                if (isVarFinite(this.props.context.views[this.props.view].settings.rowGap)) {\n                    widgetStyle['margin-bottom'] = `${parseFloat(this.props.context.views[this.props.view].settings.rowGap)}px`;\n                }\n            }\n\n            // if multi-view widget dim it in edit mode\n            if (this.state.multiViewWidget && this.state.editMode) {\n                if (widgetStyle.opacity === undefined || widgetStyle.opacity === null || widgetStyle.opacity > 0.3) {\n                    widgetStyle.opacity = 0.3;\n                }\n            }\n        } catch (e) {\n            console.warn(`[${wid}] Cannot bind data of widget: ${e}`);\n            return { widgetData: null, widgetStyle: null, isRelative: false };\n        }\n\n        return { widgetData, widgetStyle, isRelative };\n    }\n\n    renderWidget(update, newWidgetData, newWidgetStyle, _count, cb) {\n        if (typeof update === 'function') {\n            cb = update;\n            update = false;\n        }\n        _count = _count || 0;\n        // console.log(`[${Date.now()}] Render widget`);\n        let parentDiv = this.props.refParent;\n        if (Object.prototype.hasOwnProperty.call(parentDiv, 'current')) {\n            parentDiv = parentDiv.current;\n        }\n\n        if (!parentDiv) {\n            if (_count < 5) {\n                setTimeout(() => this.renderWidget(update, newWidgetData, newWidgetStyle, _count + 1, cb), 50);\n            }\n            return;\n        }\n\n        const wid = this.props.id;\n        let widget = this.props.context.views[this.props.view].widgets[wid];\n        if (!widget || typeof widget !== 'object') {\n            return;\n        }\n\n        // replace groupAttrX in groups\n        if (widget?.groupid) {\n            // this widget belongs to group\n            const parentWidgetData = this.props.context.views[this.props.view].widgets[widget.groupid].data;\n            // extract attribute names\n            const names = Object.keys(parentWidgetData)\n                .map(attr => (attr.startsWith('attrType_') ? attr.substring(9) : null))\n                .filter(attr => attr);\n\n            if (names.length && widget.data) {\n                let copied = false;\n\n                Object.keys(widget.data).forEach(attr => {\n                    if (typeof widget.data[attr] === 'string' && names.find(a => widget.data[attr].includes(a))) {\n                        const result = replaceGroupAttr(widget.data[attr], parentWidgetData);\n                        if (result.doesMatch) {\n                            if (!copied) {\n                                copied = true;\n                                // create a copy as we will substitute the values\n                                widget = JSON.parse(JSON.stringify(widget));\n                            }\n                            widget.data[attr] = result.newString || '';\n                        }\n                    }\n                });\n            }\n        }\n\n        // calculate current styles and data (apply current bindings)\n        if (!update) {\n            const { isRelative, widgetData, widgetStyle } = this.calcData(wid, widget, newWidgetData, newWidgetStyle);\n            const newData = JSON.stringify(widgetData);\n            const newStyle = JSON.stringify(widgetStyle);\n            // detect if update required\n            if (this.widDiv) {\n                if (this.oldEditMode === this.state.editMode) {\n                    if (this.oldData === newData && !update) {\n                        if (this.oldStyle === newStyle || widgetData._no_style) {\n                            // ignore changes\n                            // console.log('Rerender ignored as no changes');\n                            return;\n                        }\n\n                        if (!this.updateOnStyle) {\n                            this.oldStyle = newStyle;\n                            // update global styles\n                            if (this.props.context.allWidgets[wid] && this.props.context.allWidgets[wid].style) {\n                                const mStyle = this.props.context.allWidgets[wid].style;\n                                Object.keys(widgetStyle).forEach(attr => {\n                                    if (mStyle[attr] !== widgetStyle[attr]) {\n                                        mStyle.attr(attr, widgetStyle[attr]);\n                                    }\n                                });\n                            }\n\n                            // apply new style changes directly on DOM\n                            VisCanWidget.applyStyle(this.widDiv, widgetStyle, this.state.selected, this.state.editMode);\n                            // fix position\n                            this.widDiv.style.position = isRelative ? (widgetStyle.position || 'relative') : 'absolute';\n                            console.log('Rerender ignored as only style applied');\n                            return;\n                        }\n                    }\n                }\n            }\n        }\n\n        this.destroy(update);\n\n        const oldIDs = this.IDs;\n\n        // remove all bindings from prop.linkContexts\n        VisBaseWidget.removeFromArray(this.props.context.linkContext.visibility, this.IDs, this.props.view, wid);\n        VisBaseWidget.removeFromArray(this.props.context.linkContext.lastChanges, this.IDs, this.props.view, wid);\n        VisBaseWidget.removeFromArray(this.props.context.linkContext.signals, this.IDs, this.props.view, wid);\n        VisBaseWidget.removeFromArray(this.props.context.linkContext.bindings, this.IDs, this.props.view, wid);\n\n        // here will be extracted new bindings\n        this.setupSubscriptions();\n\n        // subscribe on some new IDs and remove old IDs\n        const unsubscribe = oldIDs.filter(id => !this.IDs.includes(id));\n        if (unsubscribe.length) {\n            this.props.context.linkContext.unsubscribe(unsubscribe);\n        }\n\n        const subscribe = this.IDs.filter(id => !oldIDs.includes(id));\n        if (subscribe.length) {\n            this.props.context.linkContext.subscribe(subscribe);\n        }\n\n        // calculate new widgetData and widgetStyle\n        const { isRelative, widgetData, widgetStyle } = this.calcData(wid, widget, newWidgetData, newWidgetStyle);\n\n        const newData = JSON.stringify(widgetData);\n        const newStyle = JSON.stringify(widgetStyle);\n\n        this.oldEditMode = this.state.editMode;\n        this.oldData = newData; // with replaced bindings\n        this.oldStyle = newStyle; // with replaced bindings\n\n        widgetData.wid = wid; // legacy\n        // try to apply bindings to every attribute\n        this.props.context.allWidgets[wid] = {\n            style: new this.props.context.can.Map(widgetStyle),\n            data: new this.props.context.can.Map(widgetData),\n            wid, // legacy\n        };\n\n        // Add to the global array of widgets\n        let userGroups = widgetData['visibility-groups'];\n        if (!this.state.editMode && userGroups?.length) {\n            if (widgetData['visibility-groups-action'] === 'hide') {\n                if (!this.isUserMemberOfGroup(this.props.context.user, userGroups)) {\n                    return;\n                }\n                userGroups = null; // mark as processed\n            }\n        } else {\n            userGroups = null;\n        }\n\n        try {\n            // Append html element to view\n            if (this.props.tpl) {\n                if (!this.widDiv || !update || !widget?.data?.members.length) {\n                    const options = {\n                        data: this.props.context.allWidgets[wid].data,\n                        viewDiv: this.props.view,\n                        view: this.props.view,\n                        style: this.props.context.allWidgets[wid].style,\n                    };\n\n                    if (widgetData?.oid) {\n                        options.val = this.props.context.canStates.attr(`${widgetData.oid}.val`);\n                    }\n                    const widgetFragment = this.props.context.can.view(this.props.tpl, options);\n\n                    // replace all scripts in the widget\n                    const scripts = Array.from(widgetFragment.querySelectorAll('script'));\n                    for (let i = 0; i < scripts.length; i++) {\n                        const script = scripts[i];\n                        const newScript = document.createElement('script');\n                        newScript.innerHTML = script.innerHTML;\n                        script.parentNode.replaceChild(newScript, script);\n                    }\n\n                    if (isRelative) {\n                        // add widget according to the relativeWidgetOrder\n                        const pos = this.props.relativeWidgetOrder.indexOf(wid);\n                        if (pos === 0) {\n                            parentDiv.prepend(widgetFragment);\n                        } else if (pos === this.props.relativeWidgetOrder.length - 1) {\n                            parentDiv.appendChild(widgetFragment);\n                        } else {\n                            // find any existing prepending widget\n                            let div;\n                            for (let i = pos + 1; i < this.props.relativeWidgetOrder.length; i++) {\n                                div = parentDiv.querySelector(`#${this.props.relativeWidgetOrder[i]}`);\n                                if (div) {\n                                    parentDiv.insertBefore(widgetFragment, div);\n                                    break;\n                                }\n                            }\n                            // no existing prepending widgets found, so place first\n                            if (!div) {\n                                parentDiv.appendChild(widgetFragment);\n                            }\n                        }\n                    } else {\n                        parentDiv.appendChild(widgetFragment);\n                    }\n                }\n            } else {\n                console.error(`[${wid}] Widget is invalid. Please delete it.`);\n                return;\n            }\n\n            this.widDiv = parentDiv.querySelector(`#${wid}`);\n\n            if (this.widDiv) {\n                if (this.props.context.allWidgets[wid].style && !widgetData._no_style) {\n                    // fix position\n                    VisCanWidget.applyStyle(this.widDiv, this.props.context.allWidgets[wid].style, this.state.selected, this.state.editMode);\n                }\n\n                this.widDiv.style.position = isRelative ? (this.props.context.allWidgets[wid].style.position || 'relative') : 'absolute';\n\n                // by default, it is border-box\n                this.widDiv.style.boxSizing = 'border-box';\n\n                if (widgetData && widgetData.class) {\n                    this.widDiv.className = addClass(this.widDiv.className, widgetData.class);\n                }\n\n                // add template classes to div\n                const tplEl = window.document.getElementById(this.props.tpl);\n                const visName = tplEl.dataset.visName || (wid[0] === 'g' ? 'group' : 'noname');\n                const visSet = tplEl.dataset.visSet || 'noset';\n                this.updateOnStyle = tplEl.dataset.visUpdateStyle === 'true';\n                this.resizeLocked = tplEl.dataset.visResizeLocked === 'true';\n                this.widDiv.className = addClass(this.widDiv.className, `vis-tpl-${visSet}-${visName.replace(/\\s/g, '-')}`);\n\n                if (!this.state.editMode) {\n                    this.updateVisibility();\n\n                    // Processing of gestures\n                    if (this.props.context.$$) {\n                        this.addGestures(widgetData);\n                    }\n                } else if (this.props.context.allWidgets[this.props.id]) {\n                    const newState = analyzeDraggableResizable(this.widDiv, null, this.props.context.allWidgets[this.props.id].style);\n\n                    if (this.state.resizable !== newState.resizable ||\n                        this.state.hideHelper !== newState.hideHelper ||\n                        this.state.draggable !== newState.draggable\n                    ) {\n                        setTimeout(() =>\n                            this.setState(newState), 50);\n                    }\n                }\n\n                // processing of signals\n                let s = 0;\n                while (widgetData[`signals-oid-${s}`]) {\n                    this.addSignalIcon(widgetData, s);\n                    s++;\n                }\n\n                if (widgetData['lc-oid'] && widgetData['lc-oid'] !== 'nothing_selected') {\n                    this.addLastChange(widgetData);\n                }\n\n                if (!this.state.editMode && widgetData['echart-oid']) {\n                    this.addChart(widgetData);\n                }\n\n                if (userGroups && widget.data['visibility-groups-action'] === 'disabled' && !this.isUserMemberOfGroup(this.props.context.user, userGroups)) {\n                    this.widDiv.className = addClass(this.widDiv.className, 'vis-user-disabled');\n                }\n\n                if (this.refService.current) {\n                    setTimeout(() => {\n                        if (this.refService.current && this.widDiv) {\n                            this.refService.current.style.width = `${this.widDiv.offsetWidth}px`;\n                            this.refService.current.style.height = `${this.widDiv.offsetHeight}px`;\n                            // Move helper to actual widget\n                            if (isRelative) {\n                                this.refService.current.style.left = `${this.widDiv.offsetLeft}px`;\n                                this.refService.current.style.top = `${this.widDiv.offsetTop}px`;\n                            }\n                        }\n                    }, 50);\n                }\n\n                this.onCommand('updateContainers');\n            } else {\n                console.log('Div not yet rendered');\n            }\n\n            this.props.askView && this.props.askView('register', {\n                id: wid,\n                winDiv: this.widDiv || null,\n                refService: this.refService,\n                onMove: this.onMove,\n                onResize: this.onResize,\n                onTempSelect: this.onTempSelect,\n                onCommand: this.onCommandBound,\n            });\n        } catch (e) {\n            const lines = (e.toString() + e.stack.toString()).split('\\n');\n            const error = `can't render ${this.props.tpl} ${wid} on \"${this.props.view}\": `;\n            this.props.context.socket.log(error, 'error');\n            console.error(error);\n            for (let l = 0; l < lines.length; l++) {\n                const line = `${l} - ${lines[l]}`;\n                this.props.context.socket.log(line, 'error');\n                console.error(line);\n            }\n        }\n        cb && cb();\n    }\n\n    shouldComponentUpdate(nextProps, nextState) {\n        const lastState = JSON.stringify(nextState);\n        // if no widget yet rendered, we can update as frequent as we want\n        if (!this.widDiv) {\n            this.lastState = lastState;\n            return true;\n        }\n\n        if (!this.lastState || lastState !== this.lastState) {\n            this.lastState = lastState;\n            return true;\n        }\n\n        return false;\n    }\n\n    renderWidgetBody(props) {\n        if (this.state.applyBindings && !this.bindingsTimer) {\n            this.bindingsTimer = setTimeout(() => {\n                this.bindingsTimer = null;\n                this.renderWidget(true);\n            }, 10);\n        }\n\n        // this.widDiv is a body of normal can widget\n        // props.style is a style of overlay\n\n        if (this.widDiv && this.state.editMode && this.props.context.allWidgets[this.props.id]) {\n            const zIndexProp = this.props.context.allWidgets[this.props.id].style['z-index'];\n            const zIndex = parseInt((zIndexProp || 0), 10);\n            if (this.state.selected) {\n                // move widget overlay in foreground\n                this.widDiv.style.zIndex = 500 + (zIndex || 0);\n            } else if (zIndexProp !== undefined) {\n                // overlay must be always on top of the widget itself\n                this.widDiv.style.zIndex = parseInt((zIndexProp || 0), 10);\n            }\n\n            if (this.state.selected) {\n                props.style.zIndex = 500 + (zIndex || 0) + 1; // + 800\n            } else {\n                props.style.zIndex = (zIndex || 0) + 1; // + 800\n            }\n\n            this.widDiv.style.userSelect = 'none';\n            this.widDiv.style.pointerEvents = 'none';\n\n            // restore visibility\n            if (this.filterDisplay !== undefined) {\n                this.widDiv.style.display = this.filterDisplay;\n                delete this.filterDisplay;\n            }\n        }\n\n        // the helper div is always absolute\n        props.style.position = 'absolute';\n\n        // this code is used only to represent containers, but sometime all of them should be rewritten in React\n        const legacyViewContainers = this.state.legacyViewContainers.length ? this.state.legacyViewContainers.map(view => {\n            const context = this.props.context;\n            const VisView = context.VisView;\n            this.refViews[view] = this.refViews[view] || React.createRef();\n            const otherRef = context.linkContext.getViewRef(view);\n            if (otherRef && otherRef !== this.refViews[view]) {\n                console.log('View is not rendered as used somewhere else!');\n                return null;\n                /*\n                <div ref={this.refViews[view]} key={view + Math.random() * 10000}>\n                    View is not rendered as used somewhere else!\n                </div>;\n                */\n            }\n            if (view && context.views[view]) {\n                return <VisView\n                    context={context}\n                    activeView={view}\n                    editMode={false}\n                    key={view}\n                    ref={this.refViews[view]}\n                    askView={props.askView}\n                    view={view}\n                    visInWidget\n                />;\n            }\n            return null;\n        }) : null;\n\n        if (!this.state.editMode) {\n            props.style.display = 'none';\n        }\n\n        return legacyViewContainers;\n    }\n}\n\nVisCanWidget.propTypes = {\n    id: PropTypes.string.isRequired,\n    view: PropTypes.string.isRequired,\n    editMode: PropTypes.bool,\n    isRelative: PropTypes.bool,\n    refParent: PropTypes.object.isRequired,\n    selectedWidgets: PropTypes.array,\n    relativeWidgetOrder: PropTypes.array,\n    tpl: PropTypes.string.isRequired,\n};\n\nexport default VisCanWidget;\n","import React from 'react';\nimport { withStyles } from '@mui/styles';\n\nimport {\n    Divider,\n    IconButton,\n    List,\n    ListItem,\n    ListItemButton,\n    ListItemIcon,\n    ListItemText,\n    Tooltip,\n    Tabs,\n    Tab, type Theme,\n} from '@mui/material';\n\nimport {\n    ChevronLeft as ChevronLeftIcon,\n    Dashboard as DashboardIcon,\n} from '@mui/icons-material';\n\nimport { Utils, Icon } from '@iobroker/adapter-react-v5';\nimport { ViewSettings } from '@/types';\n\nconst MENU_WIDTH_FULL = 200;\nconst MENU_WIDTH_NARROW = 56;\nconst TOOLBAR_SIZE = 48;\n\nconst styles: Record<string, any> = (theme: Theme) => ({\n    root: {\n        width: '100%',\n        height: '100%',\n        display: 'flex',\n        position: 'relative',\n        // overflow: 'hidden',\n    },\n    rootHorizontal: {\n        width: '100%',\n        height: '100%',\n        display: 'flex',\n        position: 'relative',\n        flexDirection: 'column',\n        // overflow: 'hidden',\n    },\n    toolBar: {\n        width: '100%',\n        height: TOOLBAR_SIZE,\n        overflow: 'hidden',\n        lineHeight: `${TOOLBAR_SIZE}px`,\n        paddingLeft: 16,\n        fontSize: 20,\n        backgroundColor: theme.palette.primary.main,\n        color: theme.palette.primary.contrastText,\n        transition: 'padding-left 0.4s ease-in-out',\n        display: 'flex',\n        alignItems: 'center',\n        gap: 8,\n    },\n    toolbarIcon: {\n        height: 32,\n        width: 'auto',\n    },\n    verticalMenu: {\n        width: '100%',\n        top: 0,\n        left: 0,\n        height: TOOLBAR_SIZE,\n        overflow: 'hidden',\n        lineHeight: `${TOOLBAR_SIZE}px`,\n        backgroundColor: theme.palette.primary.main,\n        zIndex: 450,\n    },\n    toolBarWithClosedMenu: {\n        paddingLeft: 16 + TOOLBAR_SIZE,\n    },\n    viewContentWithToolbar: {\n        position: 'relative',\n        height: `calc(100% - ${TOOLBAR_SIZE}px)`,\n        width: '100%',\n    },\n    viewContentWithoutToolbar: {\n        position: 'relative',\n        height: '100%',\n        width: '100%',\n    },\n    openMenuButton: {\n        position: 'absolute',\n        top: 5,\n        width: TOOLBAR_SIZE,\n        height: TOOLBAR_SIZE,\n        zIndex: 999,\n        transition: 'all 0.3s ease-in-out',\n    },\n    openMenuButtonFull: {\n        left: MENU_WIDTH_FULL - TOOLBAR_SIZE,\n    },\n    openMenuButtonNarrow: {\n        left: 8,\n    },\n    openMenuButtonHidden: {\n        left: 8,\n        opacity: 0.5,\n    },\n    openMenuButtonIconHidden: {\n        transform: 'rotate(180deg)',\n        transformOrigin: 'center',\n        transition: 'all 0.3s ease-in-out',\n    },\n    menu: {\n        transition: 'width 0.4s ease-in-out, opacity 0.3s ease-in-out',\n    },\n    menuFull: {\n        width: MENU_WIDTH_FULL,\n        height: '100%',\n        display: 'inline-block',\n        overflow: 'hidden',\n        opacity: 1,\n    },\n    menuNarrow: {\n        width: MENU_WIDTH_NARROW,\n        height: '100%',\n        display: 'inline-block',\n        overflow: 'hidden',\n        opacity: 1,\n    },\n    menuHidden: {\n        width: 0,\n        height: '100%',\n        display: 'inline-block',\n        opacity: 0,\n    },\n    afterMenu: {\n        transition: 'width 0.4s ease-in-out',\n    },\n    afterMenuFull: {\n        width: `calc(100% - ${MENU_WIDTH_FULL}px)`,\n        height: '100%',\n        display: 'inline-block',\n    },\n    afterMenuNarrow: {\n        width: `calc(100% - ${MENU_WIDTH_NARROW}px)`,\n        height: '100%',\n        display: 'inline-block',\n    },\n    afterMenuHidden: {\n        width: '100%',\n        height: '100%',\n        display: 'inline-block',\n    },\n    menuList: {\n        width: '100%',\n        height: 'calc(100% - 49px)',\n        overflowY: 'auto',\n        overflowX: 'hidden',\n    },\n    menuItem: {\n        minHeight: TOOLBAR_SIZE,\n    },\n    listItemIcon: {\n        width: 24,\n        height: 24,\n    },\n    listItemIconText: {\n        paddingLeft: 8,\n        opacity: 1,\n        transition: 'opacity 0.3s ease-in-out',\n        position: 'absolute',\n        top: 12,\n        left: 16,\n    },\n    listItemText: {\n        whiteSpace: 'nowrap',\n        transition: 'all 0.3s ease-in-out',\n        opacity: 1,\n    },\n    listItemTextNarrow: {\n        opacity: 0,\n    },\n    selectedMenu: {\n        backgroundColor: theme.palette.secondary.main,\n        color: theme.palette.secondary.contrastText,\n    },\n    tooltip: {\n        pointerEvents: 'none',\n    },\n    menuToolbar: {\n        height: TOOLBAR_SIZE,\n        display: 'flex',\n        lineHeight: `${TOOLBAR_SIZE}px`,\n        verticalAlign: 'middle',\n        paddingLeft: 16,\n        fontSize: 20,\n        whiteSpace: 'nowrap',\n        transition: 'opacity 0.3s ease-in-out',\n    },\n    menuToolbarFull: {\n        opacity: 1,\n    },\n    menuToolbarNarrow: {\n        opacity: 0,\n    },\n    transparent: {\n        opacity: 0,\n    },\n});\n\ninterface VisNavigationProps {\n    context: Record<string, any>;\n    view: string;\n    activeView: string;\n    editMode: boolean;\n    menuWidth: string;\n    setMenuWidth: (width: string) => void;\n    classes: Record<string, any>;\n    visInWidget?: boolean;\n    children: React.ReactNode;\n}\n\ninterface VisNavigationState {\n    menuWidth: string;\n}\n\ninterface MenuItem {\n    text: string;\n    color: string;\n    icon: string;\n    noText: boolean;\n    order: number;\n    view: string;\n}\n\nclass VisNavigation extends React.Component<VisNavigationProps, VisNavigationState> {\n    renderMenu(settings: ViewSettings) {\n        const items: MenuItem[] = [];\n\n        Object.keys(this.props.context.views).forEach(view => {\n            if (view === '___settings') {\n                return;\n            }\n            const viewSettings = this.props.context.views[view].settings;\n            if (viewSettings.navigation) {\n                const item = {\n                    text: settings.navigationOrientation === 'horizontal' && viewSettings.navigationOnlyIcon ? null : (viewSettings.navigationTitle || view),\n                    color: viewSettings.navigationColor,\n                    icon: viewSettings.navigationIcon || viewSettings.navigationImage,\n                    noText: viewSettings.navigationOnlyIcon,\n                    order: parseInt(viewSettings.navigationOrder ?? '0'),\n                    view,\n                };\n\n                items.push(item);\n\n                if (item.icon?.startsWith('_PRJ_NAME/')) {\n                    item.icon = `../${this.props.context.adapterName}.${this.props.context.instance}/${this.props.context.projectName}${item.icon.substring(9)}`;  // \"_PRJ_NAME\".length = 9\n                }\n            }\n        });\n\n        items.sort((prevItem, nextItem) => (prevItem.order === nextItem.order ? 0 : prevItem.order < nextItem.order ? -1 : 1));\n\n        if (settings.navigationOrientation === 'horizontal') {\n            return <div\n                className={this.props.classes.verticalMenu}\n                style={{\n                    backgroundColor: settings.navigationBarColor || this.props.context.theme.palette.background.paper,\n                    opacity: this.props.editMode ? 0.4 : 1,\n                    position: this.props.editMode ? 'relative' : 'fixed',\n                }}\n            >\n                <Tabs\n                    value={this.props.activeView}\n                >\n                    {items.map((item, index) => <Tab\n                        iconPosition=\"start\"\n                        key={index}\n                        style={{ minHeight: 48, minWidth: item.noText ? 20 : undefined }}\n                        icon={item.icon ? <Icon src={item.icon} className={this.props.classes.listItemIcon} /> : undefined}\n                        onClick={() => this.props.context.changeView(item.view)}\n                        value={item.view}\n                        label={item.text}\n                    />)}\n                </Tabs>\n            </div>;\n        }\n\n        return <div\n            style={{\n                opacity: this.props.editMode ? 0.4 : 1,\n                backgroundColor: (settings.navigationBackground as string) || undefined,\n            }}\n            className={Utils.clsx(\n                this.props.classes.menu,\n                this.props.menuWidth === 'full' && this.props.classes.menuFull,\n                this.props.menuWidth === 'narrow' && this.props.classes.menuNarrow,\n                this.props.menuWidth === 'hidden' && this.props.classes.menuHidden,\n            )}\n        >\n            <div\n                style={{ color: (settings.navigationHeaderTextColor as string) || undefined }}\n                className={Utils.clsx(\n                    this.props.classes.menuToolbar,\n                    this.props.menuWidth === 'full' && this.props.classes.menuToolbarFull,\n                    this.props.menuWidth === 'narrow' && this.props.classes.menuToolbarNarrow,\n                    this.props.menuWidth === 'hidden' && this.props.classes.menuToolbarNarrow,\n                )}\n            >\n                {(settings.navigationHeaderText as string) || ''}\n            </div>\n            <Divider />\n            <div className={this.props.classes.menuList}>\n                <List>\n                    {items.map((item, index) => {\n                        const menuItem = <ListItem\n                            key={index}\n                            disablePadding\n                            className={Utils.clsx(this.props.classes.menuItem, this.props.activeView === item.view && this.props.classes.selectedMenu)}\n                            style={{ backgroundColor: this.props.activeView === item.view ? (settings.navigationSelectedBackground as string) : undefined }}\n                            onClick={async () => {\n                                if (settings.navigationHideOnSelection) {\n                                    await this.hideNavigationMenu();\n                                }\n                                await this.props.context.changeView(item.view);\n                            }}\n                        >\n                            <ListItemButton>\n                                <ListItemIcon>\n                                    {item.icon ? <Icon\n                                        src={item.icon}\n                                        style={{ color: this.props.activeView === item.view ? (settings.navigationSelectedColor as string) : (settings.navigationColor as string), backgroundColor: 'rgba(1,1,1,0)' }}\n                                        className={Utils.clsx(\n                                            this.props.classes.listItemIcon,\n                                            this.props.activeView === item.view && this.props.classes.selectedMenu,\n                                        )}\n                                    /> :\n                                        <>\n                                            <DashboardIcon\n                                                style={{ color: this.props.activeView === item.view ? (settings.navigationSelectedColor as string) : (settings.navigationColor as string), backgroundColor: 'rgba(1,1,1,0)' }}\n                                                className={Utils.clsx(\n                                                    this.props.activeView === item.view && this.props.classes.selectedMenu,\n                                                    this.props.menuWidth !== 'full' && this.props.classes.transparent,\n                                                )}\n                                            />\n                                            {item.text ? <span\n                                                style={{ color: this.props.activeView === item.view ? (settings.navigationSelectedColor as string) : (settings.navigationColor as string) }}\n                                                className={Utils.clsx(\n                                                    this.props.classes.listItemIconText,\n                                                    this.props.menuWidth === 'full' && this.props.classes.transparent,\n                                                )}\n                                            >\n                                                {item.text[0].toUpperCase()}\n                                            </span> : null}\n                                        </>}\n                                </ListItemIcon>\n                                <ListItemText\n                                    primary={item.text}\n                                    style={{ color: this.props.activeView === item.view ? (settings.navigationSelectedColor as string) : (settings.navigationColor as string) }}\n                                    classes={{\n                                        primary: Utils.clsx(\n                                            this.props.classes.listItemText,\n                                            this.props.activeView === item.view && !settings.navigationSelectedColor && this.props.classes.selectedMenu,\n                                            this.props.menuWidth === 'narrow' && this.props.classes.listItemTextNarrow,\n                                        ),\n                                    }}\n                                />\n                            </ListItemButton>\n                        </ListItem>;\n\n                        return <Tooltip\n                            title={this.props.menuWidth !== 'full' ? item.text : ''}\n                            key={index}\n                            classes={{ popper: this.props.classes.tooltip }}\n                        >\n                            {menuItem}\n                        </Tooltip>;\n                    })}\n                </List>\n            </div>\n        </div>;\n    }\n\n    renderToolbar(settings: ViewSettings) {\n        if (!settings.navigationBar) {\n            return null;\n        }\n        let style: React.CSSProperties;\n        if (settings.navigationBarColor) {\n            style = {\n                backgroundColor: settings.navigationBarColor as string,\n                color: Utils.getInvertedColor(settings.navigationBarColor as string, this.props.context.themeType, true),\n            };\n        } else {\n            style = {};\n        }\n        style.opacity = this.props.editMode ? 0.4 : 1;\n\n        let icon: string = (settings.navigationBarIcon || settings.navigationBarImage) as string;\n        if (icon?.startsWith('_PRJ_NAME/')) {\n            icon = `../${this.props.context.adapterName}.${this.props.context.instance}/${this.props.context.projectName}${icon.substring(9)}`;  // \"_PRJ_NAME\".length = 9\n        }\n\n        return <div\n            className={Utils.clsx(\n                this.props.classes.toolBar,\n                this.props.menuWidth === 'hidden' && this.props.classes.toolBarWithClosedMenu,\n            )}\n            style={style}\n        >\n            {icon ? <Icon\n                src={icon}\n                className={this.props.classes.toolbarIcon}\n            /> : null}\n            {(settings.navigationBarText as string) || this.props.activeView}\n        </div>;\n    }\n\n    /**\n     * Hide the navigation menu\n     */\n    async hideNavigationMenu() {\n        window.localStorage.setItem('vis.navOpened', 'hidden');\n        await this.props.setMenuWidth('hidden');\n    }\n\n    render() {\n        if (!this.props.context.views || !this.props.context.views[this.props.view]) {\n            return null;\n        }\n\n        const settings: ViewSettings = this.props.context.views[this.props.view].settings;\n\n        if (settings.navigation &&\n            !this.props.visInWidget &&\n            settings.navigationOrientation === 'horizontal' &&\n            this.props.view === this.props.activeView\n        ) {\n            return <div className={this.props.classes.rootHorizontal}>\n                {this.renderMenu(settings)}\n                <div\n                    className={this.props.classes.viewContentWithToolbar}\n                    style={{\n                        marginTop: this.props.editMode ? undefined : TOOLBAR_SIZE,\n                    }}\n                >\n                    {this.props.children}\n                </div>\n            </div>;\n        }\n\n        if (!settings.navigation && settings.navigationBar) {\n            return <div className={this.props.classes.afterMenuHidden}>\n                {this.renderToolbar(settings)}\n                <div className={this.props.classes.viewContentWithToolbar}>\n                    {this.props.children}\n                </div>\n            </div>;\n        }\n\n        return <div className={this.props.classes.root}>\n            {!settings.navigationHideMenu ? <div\n                className={Utils.clsx(\n                    this.props.classes.openMenuButton,\n                    this.props.menuWidth === 'full' && this.props.classes.openMenuButtonFull,\n                    this.props.menuWidth === 'narrow' && this.props.classes.openMenuButtonNarrow,\n                    this.props.menuWidth === 'hidden' && this.props.classes.openMenuButtonHidden,\n                )}\n                style={settings.navigationBar && this.props.menuWidth === 'hidden' ? { opacity: 1 } : undefined}\n            >\n                <IconButton\n                    onClick={() => {\n                        if (this.props.menuWidth === 'full') {\n                            window.localStorage.setItem('vis.navOpened', 'narrow');\n                            this.props.setMenuWidth('narrow');\n                        } else if (this.props.menuWidth === 'narrow') {\n                            if (!settings.navigationNoHide) {\n                                this.hideNavigationMenu();\n                            } else {\n                                window.localStorage.setItem('vis.navOpened', 'full');\n                                this.props.setMenuWidth('full');\n                            }\n                        } else {\n                            window.localStorage.setItem('vis.navOpened', 'full');\n                            this.props.setMenuWidth('full');\n                        }\n                    }}\n                    style={{\n                        backgroundColor: this.props.menuWidth === 'hidden' && settings.navigationButtonBackground ? settings.navigationButtonBackground || (this.props.context.themeType === 'dark' ? 'white' : 'black') : 'inherit',\n                        color: this.props.menuWidth === 'hidden' && settings.navigationButtonBackground ? settings.navigationButtonBackground || (this.props.context.themeType === 'dark' ? 'black' : 'white')  : 'inherit',\n                    }}\n                >\n                    <ChevronLeftIcon\n                        className={this.props.menuWidth === 'hidden' || (this.props.menuWidth === 'narrow' && settings.navigationNoHide) ? this.props.classes.openMenuButtonIconHidden : ''}\n                        style={settings.navigationBar && this.props.menuWidth === 'hidden' ? { color: settings.navigationChevronColor || (this.props.context.themeType === 'dark' ? '#000' : '#FFF') } : { color: (settings.navigationChevronColor as string) }}\n                    />\n                </IconButton>\n            </div> : null}\n            {!settings.navigationHideMenu ? this.renderMenu(settings) : null}\n            <div\n                className={Utils.clsx(\n                    this.props.classes.afterMenu,\n                    !settings.navigationHideMenu && this.props.menuWidth === 'full' && this.props.classes.afterMenuFull,\n                    !settings.navigationHideMenu && this.props.menuWidth === 'narrow' && this.props.classes.afterMenuNarrow,\n                    (settings.navigationHideMenu || this.props.menuWidth === 'hidden') && this.props.classes.afterMenuHidden,\n                )}\n            >\n                {this.renderToolbar(settings)}\n                <div className={settings.navigationBar ? this.props.classes.viewContentWithToolbar : this.props.classes.viewContentWithoutToolbar}>\n                    {this.props.children}\n                </div>\n            </div>\n        </div>;\n    }\n}\n\nexport default withStyles(styles)(VisNavigation);\n","/**\n *  ioBroker.vis\n *  https://github.com/ioBroker/ioBroker.vis\n *\n *  Copyright (c) 2022-2024 Denis Haev https://github.com/GermanBluefox,\n *  Creative Common Attribution-NonCommercial (CC BY-NC)\n *\n *  http://creativecommons.org/licenses/by-nc/4.0/\n *\n * Short content:\n * Licensees may copy, distribute, display and perform the work and make derivative works based on it only if they give the author or licensor the credits in the manner specified by these.\n * Licensees may copy, distribute, display, and perform the work and make derivative works based on it only for noncommercial purposes.\n * (Free for non-commercial use).\n */\n\nimport React from 'react';\nimport { ThemeProvider, StyledEngineProvider, createTheme } from '@mui/material/styles';\nimport { StylesProvider, createGenerateClassName, CSSProperties } from '@mui/styles';\n\nimport { Utils, Theme } from '@iobroker/adapter-react-v5';\n\nimport type VisRxWidget from '@/Vis/visRxWidget';\nimport {\n    AnyWidgetId, GroupWidget, GroupWidgetId,\n    SingleWidget, ViewSettings, VisContext,\n    WidgetStyle,\n} from '@/types';\nimport { hasWidgetAccess, isVarFinite } from '@/Utils/utils';\nimport { recalculateFields, selectView, store } from '@/Store';\nimport { Property } from 'csstype';\n\nimport VisBaseWidget from './visBaseWidget';\nimport { type VisWidgetCommand } from './visBaseWidget';\nimport VisCanWidget from './visCanWidget';\nimport { addClass, parseDimension } from './visUtils';\nimport VisNavigation from './visNavigation';\nimport VisWidgetsCatalog from './visWidgetsCatalog';\n\nconst generateClassNameEngine = createGenerateClassName({\n    productionPrefix: 'vis',\n});\n\nconst MAX_COLUMNS = 8;\n\nexport type ViewCommand = 'updateContainers' | 'changeFilter' | 'closeDialog' | 'openDialog' | 'collectFilters';\nexport type ViewCommandOptions = {\n    filter?: string[];\n} | null;\nexport type AskViewCommand = 'register' | 'unregister' | 'update' | 'getRef' | 'getViewClass';\n\nexport type WidgetReference = {\n    id: AnyWidgetId;\n    uuid?: string;\n    widDiv?: HTMLDivElement | null;\n    refService?: React.RefObject<HTMLElement>;\n    onMove?: (x?: number, y?: number, save?: boolean, calculateRelativeWidgetPosition?: null | ((...props: any[]) => void)) => void;\n    onResize?: undefined | (() => void);\n    onTempSelect?: (selected?: boolean) => void;\n    onCommand?: (command: VisWidgetCommand, options?: any) => any;\n    canHaveWidgets?: boolean;\n}\n\ndeclare global {\n    interface Window {\n        _lastAppliedStyle: string;\n    }\n}\n\ninterface VisViewMovement {\n    selectedWidgetsWithRectangle?: AnyWidgetId[];\n    moved?: boolean;\n    x: number;\n    y: number;\n    startX?: number;\n    startY?: number;\n    w?: number;\n    h?: number;\n    simpleMode?: boolean;\n    isResize?: boolean;\n    startWidget?: DOMRect;\n}\n\ninterface VisViewProps {\n    context: VisContext;\n    view: string;\n    activeView: string;\n    editMode: boolean;\n    selectedWidgets: AnyWidgetId[];\n    selectedGroup: GroupWidgetId;\n    viewsActiveFilter: Record<string, string[]>;\n    customSettings?: Record<string, any>;\n    onIgnoreMouseEvents?: (ignore: boolean) => void;\n    style?: React.CSSProperties;\n    visInWidget?: boolean;\n}\n\ninterface CreateWidgetOptions {\n    context: VisContext;\n    editMode: boolean;\n    id: AnyWidgetId;\n    isRelative: boolean;\n    mouseDownOnView: null | ((e: MouseEvent, wid: AnyWidgetId, isRelative: boolean, isResize: boolean, isDoubleClick: boolean) => void);\n    moveAllowed: boolean;\n    ignoreMouseEvents: boolean | undefined;\n    onIgnoreMouseEvents: (ignore: boolean) => void;\n    refParent: React.RefObject<HTMLElement>;\n    askView: (command: AskViewCommand, props?: WidgetReference) => any;\n    relativeWidgetOrder: AnyWidgetId[];\n    selectedGroup: GroupWidgetId;\n    selectedWidgets: AnyWidgetId[];\n    view: string;\n    viewsActiveFilter: Record<string, string[]>;\n    customSettings: Record<string, any> | undefined;\n}\n\ninterface VisViewState {\n    mounted: boolean;\n    rulers: { type: 'horizontal' | 'vertical'; value: number }[];\n    loadedjQueryTheme: string;\n    themeCode: string;\n    width: number;\n    menuWidth: string;\n}\n\nclass VisView extends React.Component<VisViewProps, VisViewState> {\n    // 1300 z-index is the React dialog\n    static Z_INDEXES = {\n        VIEW_SELECT_RECTANGLE: 1201,\n        WIDGET_SERVICE_DIV: 1200,\n    };\n\n    static themeCache: Record<string, string> = {};\n\n    private promiseToCollect: Promise<Record<string, VisRxWidget<any>>>;\n\n    private refView: React.RefObject<HTMLDivElement>;\n\n    private refRelativeView: React.RefObject<HTMLDivElement>;\n\n    private refRelativeColumnsView: React.RefObject<HTMLDivElement>[];\n\n    private widgetsRefs: Record<AnyWidgetId, WidgetReference>;\n\n    private selectDiv: HTMLDivElement | null;\n\n    private movement: VisViewMovement | null;\n\n    private theme: Record<string, any>;\n\n    private ignoreMouseEvents: boolean;\n\n    private oldFilter: string;\n\n    private registerDone = false;\n\n    private lastClick = 0;\n\n    private nextClickIsSteal: {\n        attr: string;\n        cb: (value: string | number | boolean | null) => void;\n    } | null = null;\n\n    private loadingTheme = false;\n\n    private moveTimer: ReturnType<typeof setTimeout> | null = null;\n\n    private keysHandlerInstalled = false;\n\n    constructor(props: VisViewProps) {\n        super(props);\n        this.promiseToCollect = VisWidgetsCatalog.collectRxInformation(props.context.socket, store.getState().visProject, props.context.changeProject);\n\n        this.state = {\n            mounted: false,\n            rulers: [],\n            loadedjQueryTheme: '',\n            themeCode: '',\n            width: 0,\n            menuWidth: window.localStorage.getItem('vis.menuWidth') || 'full',\n        };\n\n        this.refView = React.createRef();\n        this.refRelativeView = React.createRef();\n        this.refRelativeColumnsView = new Array(MAX_COLUMNS);\n        for (let r = 0; r < MAX_COLUMNS; r++) {\n            this.refRelativeColumnsView[r] = React.createRef();\n        }\n        this.widgetsRefs = {};\n        this.selectDiv = null;\n        this.movement = null;\n        this.theme = {}; // cache for custom themes\n        this.ignoreMouseEvents = false;\n\n        // remember filter\n        this.oldFilter = JSON.stringify((props.viewsActiveFilter && props.viewsActiveFilter[this.props.view]) || []);\n    }\n\n    async componentDidMount() {\n        this.updateViewWidth();\n\n        await this.promiseToCollect;\n        this.props.context.linkContext.registerViewRef(this.props.view, this.refView, this.onCommand);\n\n        await this.loadJqueryTheme(this.getJQueryThemeName());\n        this.setState({ mounted: true }, () =>\n            this.registerEditorHandlers());\n    }\n\n    componentWillUnmount() {\n        this.props.context.linkContext.unregisterViewRef(this.props.view, this.refView);\n\n        // @ts-expect-error it is a trick\n        if (this.refView.current?._originalParent) {\n            // @ts-expect-error it is a trick\n            this.refView.current._originalParent.appendChild(this.refView.current);\n            // @ts-expect-error it is a trick\n            this.refView.current._originalParent = null;\n        }\n\n        if (this.selectDiv) {\n            this.selectDiv.remove();\n            this.selectDiv = null;\n        }\n        this.widgetsRefs = {};\n        this.registerEditorHandlers(true);\n        this.uninstallKeyHandlers();\n    }\n\n    onCommand = (command: ViewCommand, options?: ViewCommandOptions) => {\n        if (command === 'updateContainers') {\n            // send to all widgets the command\n            Object.keys(this.widgetsRefs).forEach(wid => {\n                if (this.widgetsRefs[wid as AnyWidgetId]?.onCommand) {\n                    // @ts-expect-error I don't know\n                    this.widgetsRefs[wid as AnyWidgetId].onCommand('updateContainers');\n                }\n            });\n\n            return null;\n        }\n\n        if (command === 'changeFilter') {\n            this.changeFilter(options);\n            return null;\n        }\n\n        if (command === 'closeDialog' || command === 'openDialog') {\n            if (this.widgetsRefs[options as AnyWidgetId]?.onCommand) {\n                // @ts-expect-error I don't know\n                this.widgetsRefs[options as AnyWidgetId].onCommand(command);\n            }\n            return null;\n        }\n\n        if (command === 'collectFilters') {\n            const widgets = store.getState().visProject[this.props.view].widgets;\n            const filterList: string[] = [];\n\n            Object.keys(widgets).forEach(wid => {\n                let filterValues: string[] | string;\n                if (this.widgetsRefs[wid as AnyWidgetId]?.onCommand) {\n                    // take bound information\n                    // @ts-expect-error I don't know\n                    filterValues = this.widgetsRefs[wid as AnyWidgetId]?.onCommand('collectFilters') as string[];\n                } else {\n                    filterValues = widgets[wid as AnyWidgetId]?.data?.filterkey as string[] | string;\n                }\n                if (filterValues) {\n                    if (filterValues && typeof filterValues === 'string') {\n                        filterValues = filterValues.split(',').map((f: string) => f.trim()).filter(f => f);\n                    }\n                    (filterValues as string[]).forEach((f: string) => !filterList.includes(f) && filterList.push(f));\n                }\n            });\n\n            return filterList;\n        }\n        return null;\n    };\n\n    changeFilter(options?: ViewCommandOptions): null {\n        options = { filter: [], ...options };\n\n        // if (typeof options.filter === 'string') {\n        //     options.filter = options.filter.split(',').map(f => f.trim()).filter(f => f);\n        // }\n\n        if (options.filter) {\n            this.props.viewsActiveFilter[this.props.view] = options.filter;\n\n            // inform every widget about changed filter\n            Object.keys(this.widgetsRefs).forEach(wid => {\n                if (this.widgetsRefs[wid as AnyWidgetId]?.onCommand) {\n                    // @ts-expect-error I don't know\n                    this.widgetsRefs[wid as AnyWidgetId].onCommand('changeFilter');\n                }\n            });\n\n            // inform bars about changed filter\n            if (window.vis.binds.bars && window.vis.binds.bars.filterChanged) {\n                try {\n                    window.vis.binds.bars.filterChanged(this.props.view, options.filter.join(','));\n                } catch (error) {\n                    console.error(`Cannot change filter: ${error}`);\n                }\n            }\n        }\n\n        return null;\n    }\n\n    askView = (command: AskViewCommand, props?: WidgetReference): any => {\n        const widgetsRefs = this.widgetsRefs;\n        if (command === 'register') {\n            if (props) {\n                const id = props.id;\n                widgetsRefs[id] = props;\n            }\n        } else if (command === 'unregister') {\n            if (props && widgetsRefs[props.id] && widgetsRefs[props.id].uuid === props.uuid) {\n                delete widgetsRefs[props.id];\n            }\n        } else if (command === 'update') {\n            if (props && widgetsRefs[props.id] && widgetsRefs[props.id].uuid === props.uuid) {\n                Object.assign(widgetsRefs[props.id], props);\n            }\n        } else if (command === 'getRef') {\n            if (props) {\n                return widgetsRefs[props.id];\n            }\n        } else if (command === 'getViewClass') {\n            return this;\n        }\n        return null;\n    };\n\n    onMouseWindowDown = (e: MouseEvent) => {\n        if (!this.refView.current?.contains(e.target as Node)) {\n            // Clicked outside the box\n            this.cancelStealMode(null);\n        }\n    };\n\n    onStealStyle = (attr: string, cb: (value: string | number | boolean | null) => void): void => {\n        if (!attr) {\n            this.cancelStealMode(null);\n            return;\n        }\n        // next click will be processed as steal\n        this.nextClickIsSteal = {\n            attr,\n            cb,\n        };\n        Object.keys(this.widgetsRefs).forEach(wid => {\n            if (this.widgetsRefs[wid as AnyWidgetId]?.onCommand) {\n                // @ts-expect-error I don't know\n                this.widgetsRefs[wid as AnyWidgetId].onCommand('startStealMode');\n            }\n        });\n\n        window.document.addEventListener('mousedown', this.onMouseWindowDown);\n    };\n\n    cancelStealMode(result: string | number | boolean | null) {\n        if (this.nextClickIsSteal) {\n            window.document.removeEventListener('mousedown', this.onMouseWindowDown);\n            this.nextClickIsSteal.cb(result);\n            Object.keys(this.widgetsRefs).forEach(wid => {\n                const onCommand = this.widgetsRefs[wid as AnyWidgetId]?.onCommand;\n                if (onCommand) {\n                    onCommand('cancelStealMode');\n                }\n            });\n            this.nextClickIsSteal = null;\n        }\n    }\n\n    mouseDownLocal = this.props.context.runtime ? null : (e: React.MouseEvent<HTMLDivElement, MouseEvent>) => {\n        if (this.ignoreMouseEvents) {\n            return;\n        }\n        if (e.button === 2) {\n            return;\n        }\n\n        if (this.nextClickIsSteal) {\n            // click canceled\n            this.cancelStealMode(null);\n            return;\n        }\n\n        this.props.context.setSelectedWidgets([]);\n\n        this.onMouseViewMove && window.document.addEventListener('mousemove', this.onMouseViewMove);\n        this.onMouseViewUp && window.document.addEventListener('mouseup', this.onMouseViewUp);\n\n        const rect = this.refView.current?.getBoundingClientRect();\n\n        if (!rect) {\n            return;\n        }\n\n        this.movement = {\n            moved: false,\n            x: e.clientX - rect.left,\n            y: e.clientY - rect.top,\n            startX: e.pageX,\n            startY: e.pageY,\n            w: 0,\n            h: 0,\n            selectedWidgetsWithRectangle: [],\n            simpleMode: e.shiftKey || e.ctrlKey,\n        };\n    };\n\n    doubleClickOnView = () => {\n        if (this.props.editMode &&\n            this.props.selectedWidgets &&\n            this.props.selectedWidgets.length === 1 &&\n            store.getState().visProject[this.props.view].widgets[this.props.selectedWidgets[0]].tpl === '_tplGroup'\n        ) {\n            this.props.context.setSelectedGroup(this.props.selectedWidgets[0]);\n        }\n    };\n\n    getWidgetsInRect(rect: { top: number; left: number; bottom: number; right: number }, simpleMode: boolean): AnyWidgetId[] {\n        // take actual position\n        const widgets: (string | null)[] = Object.keys(this.widgetsRefs).filter(id => {\n            if (!store.getState().visProject[this.props.view].widgets[id as AnyWidgetId]) {\n                // orphaned widget\n                id !== 'fakeId' && console.warn(`Orphaned widget ${id} found!`);\n                return null;\n            }\n\n            if (store.getState().visProject[this.props.view].widgets[id as AnyWidgetId].groupid && !this.props.selectedGroup) {\n                return null;\n            }\n            const widDiv = this.widgetsRefs[id as AnyWidgetId].widDiv || this.widgetsRefs[id as AnyWidgetId].refService?.current;\n            if (widDiv) {\n                const wRect = widDiv.getBoundingClientRect();\n                if (simpleMode) {\n                    // top left corner\n                    if (wRect.top >= rect.top && wRect.top <= rect.bottom && wRect.left >= rect.left && wRect.left <= rect.right) {\n                        return true;\n                    }\n                    // bottom right corner\n                    if (wRect.bottom >= rect.top && wRect.bottom <= rect.bottom && wRect.right >= rect.left && wRect.right <= rect.right) {\n                        return true;\n                    }\n                    // top right corner\n                    if (wRect.top >= rect.top && wRect.top <= rect.bottom && wRect.right >= rect.left && wRect.right <= rect.right) {\n                        return true;\n                    }\n                    // bottom left corner\n                    if (wRect.bottom >= rect.top && wRect.bottom <= rect.bottom && wRect.left >= rect.left && wRect.left <= rect.right) {\n                        return true;\n                    }\n                } else if (wRect.top >= rect.top && wRect.top <= rect.bottom &&\n                    wRect.left >= rect.left && wRect.left <= rect.right &&\n                    wRect.bottom >= rect.top && wRect.bottom <= rect.bottom &&\n                    wRect.right >= rect.left && wRect.right <= rect.right\n                ) {\n                    return true;\n                }\n            }\n\n            return false;\n        });\n\n        widgets.sort();\n        return widgets as AnyWidgetId[];\n    }\n\n    calculateRelativeWidgetPosition = null;\n\n    onMouseViewMove = !this.props.context.runtime ? (e: MouseEvent) => {\n        if (this.ignoreMouseEvents || !this.movement) {\n            return;\n        }\n        if (!this.selectDiv && this.refView.current) {\n            // create selectDiv\n            this.selectDiv = window.document.createElement('div');\n            this.selectDiv.style.position = 'absolute';\n            this.selectDiv.style.zIndex = VisView.Z_INDEXES.VIEW_SELECT_RECTANGLE.toString();\n            this.selectDiv.className = 'vis-editmode-select-rect';\n            this.refView.current.appendChild(this.selectDiv);\n        }\n\n        this.movement.moved = true;\n        this.movement.w = e.pageX - (this.movement.startX || 0);\n        this.movement.h = e.pageY - (this.movement.startY || 0);\n\n        if (this.selectDiv) {\n            if (this.movement.w >= 0) {\n                this.selectDiv.style.left = `${this.movement.x}px`;\n                this.selectDiv.style.width = `${this.movement.w}px`;\n            } else {\n                this.selectDiv.style.left = `${this.movement.x + this.movement.w}px`;\n                this.selectDiv.style.width = `${-this.movement.w}px`;\n            }\n            if (this.movement.h >= 0) {\n                this.selectDiv.style.top = `${this.movement.y}px`;\n                this.selectDiv.style.height = `${this.movement.h}px`;\n            } else {\n                this.selectDiv.style.top = `${this.movement.y + this.movement.h}px`;\n                this.selectDiv.style.height = `${-this.movement.h}px`;\n            }\n            // get selected widgets\n            const widgets: AnyWidgetId[] = this.getWidgetsInRect(this.selectDiv.getBoundingClientRect(), this.movement.simpleMode || false);\n            if (this.movement.selectedWidgetsWithRectangle && JSON.stringify(widgets) !== JSON.stringify(this.movement.selectedWidgetsWithRectangle)) {\n                // select\n                widgets.forEach(id => {\n                    if (\n                        !this.movement?.selectedWidgetsWithRectangle?.includes(id) &&\n                        this.widgetsRefs[id as AnyWidgetId] &&\n                        !store.getState().visProject[this.props.view].widgets[id as AnyWidgetId].data.locked &&\n                        this.props.selectedGroup !== id\n                    ) {\n                        if (this.widgetsRefs[id as AnyWidgetId]?.onTempSelect) {\n                            // @ts-expect-error I don't know\n                            this.widgetsRefs[id as AnyWidgetId].onTempSelect(true);\n                        }\n                    }\n                });\n                // deselect\n                this.movement.selectedWidgetsWithRectangle.forEach(id => {\n                    if (!widgets.includes(id) && this.widgetsRefs[id]?.onTempSelect) {\n                        // @ts-expect-error I don't know\n                        this.widgetsRefs[id].onTempSelect(false);\n                    }\n                });\n                this.movement.selectedWidgetsWithRectangle = widgets.filter(widget => !store.getState().visProject[this.props.view].widgets[widget].data.locked);\n            }\n        }\n    } : null;\n\n    onMouseViewUp = !this.props.context.runtime ? (e: MouseEvent) => {\n        if (this.ignoreMouseEvents) {\n            return;\n        }\n        e && e.stopPropagation();\n        this.onMouseViewMove && window.document.removeEventListener('mousemove', this.onMouseViewMove);\n        this.onMouseViewUp && window.document.removeEventListener('mouseup', this.onMouseViewUp);\n        if (this.selectDiv) {\n            this.selectDiv.remove();\n            this.selectDiv = null;\n        }\n\n        // deselect widgets\n        this.movement?.selectedWidgetsWithRectangle && this.props.context.setSelectedWidgets(this.movement.selectedWidgetsWithRectangle);\n\n        this.movement = null;\n    } : null;\n\n    // Called from Widget\n    mouseDownOnView = this.props.context.runtime ? null : (e: MouseEvent, wid: AnyWidgetId, isRelative: boolean, isResize: boolean, isDoubleClick: boolean) => {\n        if (this.ignoreMouseEvents) {\n            return;\n        }\n        if (this.nextClickIsSteal) {\n            // send to App.js the stolen attribute\n\n            if (this.widgetsRefs[wid]) {\n                const ref = this.widgetsRefs[wid].widDiv || this.widgetsRefs[wid].refService?.current;\n                this.cancelStealMode(ref ? (ref.style as Record<string, any>)[this.nextClickIsSteal.attr] : null);\n            } else {\n                this.cancelStealMode(null);\n            }\n            return;\n        }\n\n        if (this.props.context.disableInteraction || this.props.context.lockDragging ||\n            this.props.selectedWidgets\n                .map(selectedWidget => store.getState().visProject[this.props.view].widgets[selectedWidget])\n                .find(widget => widget.data.locked)\n        ) {\n            return;\n        }\n\n        // detect double click\n        if ((this.lastClick && Date.now() - this.lastClick < 250) || isDoubleClick) {\n            this.lastClick = Date.now();\n            if (this.props.selectedWidgets.length === 1 &&\n                store.getState().visProject[this.props.view].widgets[this.props.selectedWidgets[0]].tpl === '_tplGroup'\n            ) {\n                this.props.context.setSelectedGroup(this.props.selectedWidgets[0]);\n            }\n            return;\n        }\n\n        this.lastClick = Date.now();\n\n        if (this.props.selectedWidgets.includes(this.props.selectedGroup) && !isResize) {\n            return;\n        }\n\n        this.onMouseWidgetMove && this.refView.current?.addEventListener('mousemove', this.onMouseWidgetMove);\n        this.onMouseWidgetUp && window.document.addEventListener('mouseup', this.onMouseWidgetUp);\n\n        this.movement = {\n            moved: false,\n            startX: e.pageX,\n            startY: e.pageY,\n            isResize,\n            x: 0,\n            y: 0,\n        };\n\n        const widgetsRefs = this.widgetsRefs;\n\n        this.props.selectedWidgets.forEach(selectedWidget => {\n            const widgetRect = widgetsRefs[selectedWidget].refService?.current?.getBoundingClientRect();\n            if (this.movement && widgetRect && e.pageX <= widgetRect.right && e.pageX >= widgetRect.left && e.pageY <= widgetRect.bottom && e.pageY >= widgetRect.top) {\n                this.movement.startWidget = widgetsRefs[selectedWidget].refService?.current?.getBoundingClientRect();\n            }\n        });\n\n        this.props.selectedWidgets.forEach(_wid => {\n            if (widgetsRefs[_wid]?.onMove) {\n                // @ts-expect-error I don't know\n                widgetsRefs[_wid].onMove(); // indicate the start of movement\n            }\n        });\n\n        // Indicate about movement start\n        Object.keys(widgetsRefs).forEach(_wid => {\n            if (widgetsRefs[_wid as AnyWidgetId]?.onCommand) {\n                // @ts-expect-error I don't know\n                widgetsRefs[_wid as AnyWidgetId].onCommand('startMove');\n            }\n        });\n    };\n\n    onIgnoreMouseEvents = (ignore: boolean) => {\n        if (this.props.editMode) {\n            this.ignoreMouseEvents = ignore;\n\n            this.props.context.onIgnoreMouseEvents(ignore);\n\n            if (ignore && this.movement) {\n                this.onMouseWidgetMove && this.refView.current?.removeEventListener('mousemove', this.onMouseWidgetMove);\n                this.onMouseWidgetUp && window.document.removeEventListener('mouseup', this.onMouseWidgetUp);\n                this.movement = null;\n            }\n        }\n    };\n\n    onMouseWidgetMove = !this.props.context.runtime ? (e: MouseEvent) => {\n        if (!this.movement || !this.refView.current || (this.props.selectedWidgets.includes(this.props.selectedGroup) && !this.movement.isResize)) {\n            return;\n        }\n        const widgetsRefs = this.widgetsRefs;\n        this.movement.moved = true;\n        this.movement.x = e.pageX - (this.movement.startX || 0);\n        this.movement.y = e.pageY - (this.movement.startY || 0);\n\n        const viewRect = this.refView.current.getBoundingClientRect();\n\n        if (!this.movement.isResize && store.getState().visProject[this.props.view].settings?.snapType === 2) {\n            const gridSize = parseInt((store.getState().visProject[this.props.view].settings?.gridSize || 0) as unknown as string, 10) || 10;\n            this.movement.x -= Math.ceil(((this.movement.startWidget?.left || 0) - viewRect.left + this.movement.x) % gridSize);\n            this.movement.y -= Math.ceil(((this.movement.startWidget?.top || 0) - viewRect.top + this.movement.y) % gridSize);\n        }\n\n        if (!this.movement.isResize && store.getState().visProject[this.props.view].settings?.snapType === 1) {\n            const left = (this.movement.startWidget?.left || 0) + this.movement.x;\n            const right = (this.movement.startWidget?.right || 0) + this.movement.x;\n            const top = (this.movement.startWidget?.top || 0) + this.movement.y;\n            const bottom = (this.movement.startWidget?.bottom || 0) + this.movement.y;\n            for (const wid in widgetsRefs) {\n                const widgetId = wid as AnyWidgetId;\n                // do not snap to itself\n                if (this.props.selectedWidgets.includes(widgetId)) {\n                    continue;\n                }\n                const widgetRect = widgetsRefs[widgetId].refService?.current?.getBoundingClientRect();\n\n                if (widgetRect) {\n                    if (Math.abs(widgetRect.top - bottom) <= 10 && left <= widgetRect.right && right >= widgetRect.left) {\n                        this.movement.y += Math.round(widgetRect.top - bottom);\n                        break;\n                    }\n                    if (Math.abs(widgetRect.bottom - top) <= 10 && left <= widgetRect.right && right >= widgetRect.left) {\n                        this.movement.y += Math.round(widgetRect.bottom - top);\n                        break;\n                    }\n                    if (Math.abs(widgetRect.left - right) <= 10 && top <= widgetRect.bottom && bottom >= widgetRect.top) {\n                        this.movement.x += Math.round(widgetRect.left - right);\n                        break;\n                    }\n                    if (Math.abs(widgetRect.right - left) <= 10 && top <= widgetRect.bottom && bottom >= widgetRect.top) {\n                        this.movement.x += Math.round(widgetRect.right - left);\n                        break;\n                    }\n                }\n            }\n        }\n\n        this.showRulers();\n\n        this.props.selectedWidgets.forEach(wid => {\n            const onMove = widgetsRefs[wid]?.onMove;\n            if (onMove && this.movement) {\n                onMove(this.movement.x, this.movement.y, false, this.calculateRelativeWidgetPosition);\n            }\n\n            // If widget has included widgets => inform them about the new size or position.\n            // This code could be disabled; as in the end, the widgets will be informed anyway.\n            const oWidget = store.getState().visProject[this.props.view].widgets[wid];\n            const attrs = Object.keys(oWidget.data);\n            attrs.forEach(attr => {\n                if (attr.startsWith('widget') && oWidget.data[attr]) {\n                    const onCommand =  widgetsRefs[oWidget.data[attr]]?.onCommand;\n                    if (onCommand) {\n                        onCommand('updatePosition');\n                    }\n                }\n            });\n        });\n\n        // if only one widget selected => check if it can be added to the other widget\n        if (this.props.selectedWidgets.length === 1 && widgetsRefs[this.props.selectedWidgets[0]]?.refService?.current) {\n            let found = false;\n            for (const wid in widgetsRefs) {\n                const widgetId = wid as AnyWidgetId;\n                // do not snap to itself\n                if (this.props.selectedWidgets.includes(widgetId) ||\n                    !widgetsRefs[widgetId] ||\n                    !widgetsRefs[widgetId].canHaveWidgets ||\n                    !widgetsRefs[widgetId].onCommand ||\n                    !widgetsRefs[widgetId].refService?.current\n                ) {\n                    continue;\n                }\n                const baseRect = widgetsRefs[this.props.selectedWidgets[0]].refService?.current?.getBoundingClientRect();\n                const rect = widgetsRefs[widgetId].refService?.current?.getBoundingClientRect();\n                const onCommand = widgetsRefs[widgetId]?.onCommand;\n                // check if widget can have other widgets inside\n                if (!found &&\n                    baseRect &&\n                    rect &&\n                    baseRect.top >= rect.top &&\n                    baseRect.left >= rect.left &&\n                    baseRect.right <= rect.right &&\n                    baseRect.bottom <= rect.bottom\n                ) {\n                    found = true;\n                    // we can add only to one widget\n                    if (onCommand) {\n                        onCommand('includePossible');\n                    }\n                } else if (onCommand) {\n                    // inform all other widgets that they do not have inclusion\n                    onCommand('includePossibleNOT');\n                }\n            }\n        }\n    } : null;\n\n    showRulers = (hide?: boolean) => {\n        const rulers: { type: 'horizontal' | 'vertical'; value: number }[] = [];\n        if (hide) {\n            this.setState({ rulers });\n            return;\n        }\n\n        const verticals = [];\n        const horizontals = [];\n\n        const viewRect = this.refView.current?.getBoundingClientRect();\n\n        if (!viewRect) {\n            return;\n        }\n\n        for (const wid of Object.keys(this.widgetsRefs)) {\n            const widgetId = wid as AnyWidgetId;\n            const { widgets } = selectView(store.getState(), this.props.view);\n            if (!this.props.selectedWidgets.includes(widgetId) &&\n                widgets[widgetId] &&\n                ((this.props.selectedGroup && widgets[this.props.selectedGroup].data.members.includes(widgetId)) || !this.props.selectedGroup) &&\n                (!widgets[widgetId].grouped || this.props.selectedGroup)\n            ) {\n                if (!this.widgetsRefs[widgetId].refService?.current) {\n                    console.error(`CHECK WHY!!! ${widgetId} has no refService.current`);\n                } else {\n                    const boundingRect = this.widgetsRefs[widgetId].refService?.current?.getBoundingClientRect();\n                    if (boundingRect) {\n                        horizontals.push(Math.round(boundingRect.top));\n                        horizontals.push(Math.round(boundingRect.bottom));\n                        verticals.push(Math.round(boundingRect.left));\n                        verticals.push(Math.round(boundingRect.right));\n                    }\n                }\n            }\n        }\n\n        const selectedHorizontals: number[] = [];\n        const selectedVerticals: number[] = [];\n        for (const wid of this.props.selectedWidgets) {\n            const { widgets } = selectView(store.getState(), this.props.view);\n            // check if not in group\n            if (widgets[wid] && (!widgets[wid].grouped || this.props.selectedGroup)) {\n                const boundingRect = this.widgetsRefs[wid].refService?.current?.getBoundingClientRect();\n                if (boundingRect) {\n                    selectedHorizontals.push(Math.round(boundingRect.top));\n                    selectedHorizontals.push(Math.round(boundingRect.bottom));\n                    selectedVerticals.push(Math.round(boundingRect.left));\n                    selectedVerticals.push(Math.round(boundingRect.right));\n                }\n            }\n        }\n\n        horizontals.forEach(horizontal => selectedHorizontals.forEach(selectedHorizontal => {\n            if (Math.abs(horizontal - selectedHorizontal) <= 0.3) {\n                rulers.push({ type: 'horizontal', value: horizontal - viewRect.top });\n            }\n        }));\n\n        verticals.forEach(vertical => selectedVerticals.forEach(selectedVertical => {\n            if (Math.abs(vertical - selectedVertical) <= 0.3) {\n                rulers.push({ type: 'vertical', value: vertical - viewRect.left });\n            }\n        }));\n\n        this.setState({ rulers });\n    };\n\n    onMouseWidgetUp = !this.props.context.runtime ? (e: MouseEvent) => {\n        const widgetsRefs = this.widgetsRefs;\n        e && e.stopPropagation();\n        this.onMouseWidgetMove && this.refView.current?.removeEventListener('mousemove', this.onMouseWidgetMove);\n        this.onMouseWidgetUp && window.document.removeEventListener('mouseup', this.onMouseWidgetUp);\n\n        if (this.movement?.moved) {\n            this.props.selectedWidgets.forEach(wid => {\n                const onMove = widgetsRefs[wid]?.onMove;\n                if (onMove && this.movement) {\n                    onMove(this.movement.x, this.movement.y, true); // indicate end of movement\n                }\n            });\n\n            store.dispatch(recalculateFields(true));\n        }\n\n        // Indicate every widget about movement stop\n        Object.keys(widgetsRefs).forEach(_wid => {\n            const onCommand = widgetsRefs[_wid as AnyWidgetId]?.onCommand;\n            if (onCommand) {\n                onCommand('stopMove');\n            }\n        });\n\n        // if only one widget selected => check if it can be added to another widget\n        if (this.props.selectedWidgets.length === 1 && widgetsRefs[this.props.selectedWidgets[0]]?.refService?.current) {\n            for (const wid in widgetsRefs) {\n                const widgetId = wid as AnyWidgetId;\n                // do not add to itself\n                if (this.props.selectedWidgets.includes(widgetId) ||\n                    !widgetsRefs[widgetId] ||\n                    !widgetsRefs[widgetId].canHaveWidgets ||\n                    !widgetsRefs[widgetId].onCommand ||\n                    !widgetsRefs[widgetId].refService?.current\n                ) {\n                    continue;\n                }\n                const baseRect = widgetsRefs[this.props.selectedWidgets[0]].refService?.current?.getBoundingClientRect();\n                const rect = widgetsRefs[widgetId].refService?.current?.getBoundingClientRect();\n                // check if widget can have other widgets inside\n                if (rect && baseRect &&\n                    baseRect.top >= rect.top &&\n                    baseRect.left >= rect.left &&\n                    baseRect.right <= rect.right &&\n                    baseRect.bottom <= rect.bottom\n                ) {\n                    this.props.context.askAboutInclude(this.props.selectedWidgets[0], widgetId, (_wid, toWid) => {\n                        const onCommand = widgetsRefs[toWid]?.onCommand;\n                        if (onCommand) {\n                            onCommand('include', _wid);\n                        }\n                    });\n                }\n            }\n        }\n\n        this.showRulers(true);\n    } : null;\n\n    editWidgetsRect(widget: AnyWidgetId): { top: number; left: number; width: number; height: number } | null {\n        if (!this.refView.current) {\n            return null;\n        }\n        const viewLeft = this.refView.current.offsetLeft;\n        const viewTop = this.refView.current.offsetTop;\n\n        // find common coordinates\n        const ref: HTMLElement | null | undefined = this.widgetsRefs[widget].widDiv || this.widgetsRefs[widget].refService?.current;\n\n        if (!ref) {\n            return null;\n        }\n        let top  = ref.offsetTop - viewTop;\n        let left = ref.offsetLeft - viewLeft;\n        // Maybe bug?\n        if (!left && !top) {\n            const style = store.getState().visProject[this.props.view].widgets[widget].style;\n            left = parseInt((style?.left as string) || '0', 10) + parseInt(ref.offsetLeft as unknown as string, 10);\n            top  = parseInt((style?.top as string)  || '0', 10) + parseInt(ref.offsetTop as unknown as string, 10);\n            left = left || 0;\n            top  = top || 0;\n        }\n\n        return {\n            top,\n            left,\n            width:  ref.clientWidth,\n            height: ref.clientHeight,\n        };\n    }\n\n    pxToPercent = (oldStyle: WidgetStyle, newStyle: WidgetStyle): null | WidgetStyle => {\n        if (!this.refView.current) {\n            return null;\n        }\n        const pRect = {\n            left: this.refView.current.clientLeft,\n            top: this.refView.current.clientTop,\n            height: this.refView.current.clientHeight,\n            width: this.refView.current.clientWidth,\n        };\n\n        if (oldStyle.position === 'relative') {\n            delete newStyle.top;\n            delete newStyle.left;\n            if (oldStyle.width === '100%') {\n                delete newStyle.width;\n            }\n            if (oldStyle.height === '100%') {\n                delete newStyle.height;\n            }\n        }\n\n        const resultStyle = { ...newStyle };\n        if (newStyle.top && parseDimension(oldStyle.top).dimension === '%' && parseDimension(newStyle.top).dimension !== '%') {\n            resultStyle.top    = (parseDimension(newStyle.top).value  * 100) / pRect.height;\n            resultStyle.top    = `${Math.round(resultStyle.top * 100) / 100}%`;\n        }\n        if (newStyle.left && parseDimension(oldStyle.left).dimension === '%' && parseDimension(newStyle.left).dimension !== '%') {\n            resultStyle.left   = (parseDimension(newStyle.left).value * 100) / pRect.width;\n            resultStyle.left   = `${Math.round(resultStyle.left * 100) / 100}%`;\n        }\n        if (newStyle.width && parseDimension(oldStyle.width).dimension === '%' && parseDimension(newStyle.width).dimension !== '%') {\n            resultStyle.width  = (parseDimension(newStyle.width).value  / pRect.width)  * 100;\n            resultStyle.width  = `${Math.round(resultStyle.width * 100) / 100}%`;\n        }\n        if (newStyle.height && parseDimension(oldStyle.height).dimension === '%' && parseDimension(newStyle.height).dimension !== '%') {\n            resultStyle.height = (parseDimension(newStyle.height).value / pRect.height) * 100;\n            resultStyle.height = `${Math.round(resultStyle.height * 100) / 100}%`;\n        }\n        return { ...oldStyle, ...resultStyle };\n    };\n\n    onPxToPercent = (\n        wids: AnyWidgetId[],\n        attr: string,\n        cb: (results: (string | null)[]) => void,\n    ): (string | null)[] => {\n        if (!this.refView.current) {\n            return [];\n        }\n        const pRect = {\n            // left: this.refView.current.clientLeft,\n            // top: this.refView.current.clientTop,\n            height: this.refView.current.clientHeight,\n            width: this.refView.current.clientWidth,\n        };\n\n        const results: (string | null)[] = wids.map(wid => {\n            const wRect = this.editWidgetsRect(wid);\n            if (!wRect) {\n                return null;\n            }\n            /*\n            if (isShift) {\n                wRect.top  -= pRect.top;\n                wRect.left -= pRect.left;\n            }\n            */\n            let value: number;\n            if (attr === 'top') {\n                value = (wRect.top * 100) / pRect.height;\n            } else if (attr === 'left') {\n                value = (wRect.left * 100) / pRect.width;\n            } else if (attr === 'width') {\n                value = (wRect.width  / pRect.width) * 100;\n            } else { // height\n                value = (wRect.height / pRect.height) * 100;\n            }\n\n            return `${Math.round(value * 100) / 100}%`;\n        });\n\n        cb && cb(results);\n\n        return results;\n    };\n\n    onPercentToPx = (\n        wids: AnyWidgetId[],\n        attr: string,\n        cb: (results: (string | null)[]) => void,\n    ): (string | null)[] => {\n        const results = wids.map(wid => {\n            const wRect = this.editWidgetsRect(wid);\n            if (!wRect) {\n                return null;\n            }\n\n            return `${Math.round((wRect as Record<string, number>)[attr])}px`;\n        });\n\n        cb && cb(results);\n\n        return results;\n    };\n\n    registerEditorHandlers(unregister?: boolean) {\n        if (this.props.context.registerEditorCallback) {\n            if (!unregister && this.props.activeView === this.props.view) {\n                if (!this.registerDone) {\n                    this.registerDone = true;\n                    this.props.context.registerEditorCallback('onStealStyle', this.props.view, this.onStealStyle);\n                    this.props.context.registerEditorCallback('onPxToPercent', this.props.view, this.onPxToPercent);\n                    this.props.context.registerEditorCallback('pxToPercent', this.props.view, this.pxToPercent);\n                    this.props.context.registerEditorCallback('onPercentToPx', this.props.view, this.onPercentToPx);\n                }\n            } else {\n                this.registerDone = false;\n                this.props.context.registerEditorCallback('onStealStyle', this.props.view);\n                this.props.context.registerEditorCallback('onPxToPercent', this.props.view);\n                this.props.context.registerEditorCallback('pxToPercent', this.props.view);\n                this.props.context.registerEditorCallback('onPercentToPx', this.props.view);\n            }\n        }\n    }\n\n    updateViewWidth() {\n        if (this.refRelativeView.current) {\n            if (this.refRelativeView.current.offsetWidth !== this.state.width) {\n                this.setState({ width: this.refRelativeView.current.offsetWidth });\n            }\n        }\n    }\n\n    componentDidUpdate() {\n        this.registerEditorHandlers();\n        this.updateViewWidth();\n        // detect filter changes\n        if (!this.props.editMode) {\n            const newFilter = JSON.stringify((this.props.viewsActiveFilter && this.props.viewsActiveFilter[this.props.view]) || []);\n            if (this.oldFilter !== newFilter) {\n                this.oldFilter = newFilter;\n                this.changeFilter({ filter: JSON.parse(newFilter) });\n            }\n        }\n    }\n\n    static renderGitter(step: number, color: string) {\n        color = color || '#D0D0D0';\n        step = step || 10;\n        const bigWidth = step * 5;\n        const smallWidth = step;\n\n        const gitterPattern = btoa(`<svg width=\"${bigWidth}\" height=\"${bigWidth}\" xmlns=\"http://www.w3.org/2000/svg\">\n    <defs>\n        <pattern id=\"grid\" width=\"${bigWidth}\" height=\"${bigWidth}\" patternUnits=\"userSpaceOnUse\">\n            <path d=\"M 0 ${smallWidth} L ${bigWidth} ${smallWidth} M ${smallWidth} 0 L ${smallWidth} ${bigWidth} M 0 ${2 * smallWidth} L ${bigWidth} ${2 * smallWidth} M ${2 * smallWidth} 0 L ${2 * smallWidth} ${bigWidth} M 0 ${3 * smallWidth} L ${bigWidth} ${3 * smallWidth} M ${3 * smallWidth} 0 L ${3 * smallWidth} ${bigWidth} M 0 ${4 * smallWidth} L ${bigWidth} ${4 * smallWidth} M ${4 * smallWidth} 0 L ${4 * smallWidth} ${bigWidth}\" fill=\"none\" stroke=\"${color}\" opacity=\"0.2\" stroke-width=\"1\"/>\n            <path d=\"M ${bigWidth} 0 L 0 0 0 ${bigWidth}\" fill=\"none\" stroke=\"${color}\" stroke-width=\"1\"/>\n        </pattern>\n    </defs>\n    <rect width=\"100%\" height=\"100%\" fill=\"url(#grid)\"/>\n</svg>`);\n        const backgroundImage = `url(data:image/svg+xml;base64,${gitterPattern})`;\n\n        return <div\n            style={{\n                opacity: 0.2,\n                zIndex: -1,\n                userSelect: 'none',\n                pointerEvents: 'none',\n                width: '100%',\n                height: '100%',\n                backgroundImage,\n                backgroundPosition: '-1px -1px',\n            }}\n        />;\n    }\n\n    static getOneWidget(index: number, widget: SingleWidget | GroupWidget, options: CreateWidgetOptions): React.JSX.Element | null {\n        if (!VisWidgetsCatalog.rxWidgets) {\n            return null;\n        }\n        // context, id, isRelative, refParent, askView, mouseDownOnView, view,\n        // relativeWidgetOrder, moveAllowed, editMode, multiView, ignoreMouseEvents, selectedGroup\n        // viewsActiveFilter, customSettings, onIgnoreMouseEvents\n        const Widget = (VisWidgetsCatalog.rxWidgets[widget.tpl] || (VisWidgetsCatalog.allWidgetsList?.includes(widget.tpl) ? VisCanWidget : VisBaseWidget));\n\n        // @ts-expect-error I don#t know how to solve it\n        return <Widget\n            key={`${index}_${options.id}`}\n            tpl={widget.tpl}\n            {...options}\n        />;\n    }\n\n    async loadJqueryTheme(jQueryTheme: string) {\n        if (VisView.themeCache[jQueryTheme] && this.props.view) {\n            let data = VisView.themeCache[jQueryTheme];\n            const _view = `visview_${this.props.view.replace(/\\s/g, '_')}`;\n            data = data.replace('.ui-helper-hidden', `\\n#${_view} .ui-helper-hidden`);\n            data = data.replace(/(}.)/g, `}\\n#${_view} .`);\n            data = data.replace(/,\\./g, `,#${_view} .`);\n            data = data.replace(/images/g, `../../lib/css/themes/jquery-ui/${jQueryTheme}/images`);\n\n            this.setState({ loadedjQueryTheme: jQueryTheme, themeCode: data });\n        } else {\n            try {\n                const resp = await fetch(`../../lib/css/themes/jquery-ui/${jQueryTheme}/jquery-ui.min.css`);\n                let data = await resp.text();\n                VisView.themeCache[jQueryTheme] = data;\n\n                const _view = `visview_${this.props.view.replace(/\\s/g, '_')}`;\n                data = data.replace('.ui-helper-hidden', `\\n#${_view} .ui-helper-hidden`);\n                data = data.replace(/(}.)/g, `}\\n#${_view} .`);\n                data = data.replace(/,\\./g, `,#${_view} .`);\n                data = data.replace(/images/g, `../../lib/css/themes/jquery-ui/${jQueryTheme}/images`);\n\n                this.setState({ loadedjQueryTheme: jQueryTheme, themeCode: data });\n            } catch (e) {\n                console.warn(`Cannot load jQueryUI theme \"${jQueryTheme}\": ${e.stack}`);\n            }\n        }\n\n        this.loadingTheme = false;\n    }\n\n    getJQueryThemeName() {\n        const settings = this.props.view && store.getState().visProject[this.props.view]?.settings;\n\n        return (settings as ViewSettings)?.theme || 'redmond';\n    }\n\n    installKeyHandlers() {\n        if (!this.keysHandlerInstalled) {\n            this.keysHandlerInstalled = true;\n            window.addEventListener('keydown', this.onKeyDown, false);\n        }\n    }\n\n    uninstallKeyHandlers() {\n        if (this.keysHandlerInstalled) {\n            this.keysHandlerInstalled = false;\n            window.removeEventListener('keydown', this.onKeyDown, false);\n        }\n    }\n\n    // eslint-disable-next-line react/no-unused-class-component-methods\n    moveWidgets = async (leftShift: number, topShift: number) => {\n        if (!this.moveTimer) {\n            this.movement = {\n                x: 0,\n                y: 0,\n            };\n            this.props.selectedWidgets.forEach(_wid => {\n                const onMove = this.widgetsRefs[_wid]?.onMove;\n                if (onMove) {\n                    onMove(); // indicate the start of movement\n                }\n            });\n\n            // Indicate about movement start\n            Object.keys(this.widgetsRefs).forEach(_wid => {\n                const onCommand = this.widgetsRefs[_wid as AnyWidgetId]?.onCommand;\n                if (onCommand) {\n                    onCommand('startMove');\n                }\n            });\n        }\n\n        if (!this.movement) {\n            return;\n        }\n        this.movement.x += leftShift;\n        this.movement.y += topShift;\n\n        this.props.selectedWidgets.forEach(wid => {\n            const widgetsRefs = this.widgetsRefs;\n            const onMove = widgetsRefs[wid]?.onMove;\n            if (onMove && this.movement) {\n                onMove(this.movement.x, this.movement.y, false, this.calculateRelativeWidgetPosition);\n            }\n        });\n\n        this.showRulers();\n\n        this.moveTimer && clearTimeout(this.moveTimer);\n        this.moveTimer = setTimeout(() => {\n            this.moveTimer = null;\n            this.showRulers(true);\n            store.dispatch(recalculateFields(true));\n\n            this.props.selectedWidgets.forEach(wid => {\n                const onMove = this.widgetsRefs[wid]?.onMove;\n                if (onMove && this.movement) {\n                    onMove(this.movement.x, this.movement.y, true, this.calculateRelativeWidgetPosition); // indicate end of movement\n                }\n            });\n            this.movement = null;\n\n            // Indicate about movement start\n            Object.keys(this.widgetsRefs).forEach(_wid => {\n                const onCommand = this.widgetsRefs[_wid as AnyWidgetId]?.onCommand;\n                if (onCommand) {\n                    onCommand('stopMove');\n                }\n            });\n        }, 800);\n    };\n\n    // eslint-disable-next-line react/no-unused-class-component-methods\n    resizeWidgets = async (widthShift: number, heightShift: number) => {\n        if (!this.moveTimer) {\n            this.movement = {\n                x: 0,\n                y: 0,\n                isResize: true,\n            };\n            // Indicate about movement start\n            Object.keys(this.widgetsRefs).forEach(_wid => {\n                const onCommand = this.widgetsRefs[_wid as AnyWidgetId]?.onCommand;\n                if (onCommand) {\n                    onCommand('startResize');\n                }\n            });\n\n            this.props.selectedWidgets.forEach(_wid => {\n                const onMove = this.widgetsRefs[_wid]?.onMove;\n                if (onMove) {\n                    onMove(); // indicate the start of resizing\n                }\n            });\n        }\n        if (!this.movement) {\n            return;\n        }\n\n        this.movement.x += widthShift;\n        this.movement.y += heightShift;\n\n        this.props.selectedWidgets.forEach(wid => {\n            const widgetsRefs = this.widgetsRefs;\n            const onMove = widgetsRefs[wid]?.onMove;\n            if (onMove && this.movement) {\n                onMove(this.movement.x, this.movement.y, false, this.calculateRelativeWidgetPosition);\n            }\n        });\n\n        this.showRulers();\n\n        this.moveTimer && clearTimeout(this.moveTimer);\n        this.moveTimer = setTimeout(() => {\n            this.moveTimer = null;\n            this.showRulers(true);\n\n            this.props.selectedWidgets.forEach(wid => {\n                const onMove = this.widgetsRefs[wid]?.onMove;\n                // indicate end of movement\n                if (onMove && this.movement) {\n                    onMove(this.movement.x, this.movement.y, true, this.calculateRelativeWidgetPosition);\n                }\n            });\n\n            // Indicate about movement start\n            Object.keys(this.widgetsRefs).forEach(_wid => {\n                const onCommand = this.widgetsRefs[_wid as AnyWidgetId]?.onCommand;\n                if (onCommand) {\n                    onCommand('stopResize');\n                }\n            });\n            this.movement = null;\n        }, 800);\n    };\n\n    onKeyDown = async (e: KeyboardEvent) => {\n        if (!this.props.editMode) {\n            return;\n        }\n        if (document.activeElement?.tagName === 'BODY') {\n            if (this.props.selectedWidgets.length) {\n                if (e.key === 'ArrowLeft') {\n                    e.preventDefault();\n                    await this[e.shiftKey ? 'resizeWidgets' : 'moveWidgets'](e.ctrlKey ? -10 : -1, 0);\n                }\n                if (e.key === 'ArrowRight') {\n                    e.preventDefault();\n                    await this[e.shiftKey ? 'resizeWidgets' : 'moveWidgets'](e.ctrlKey ? 10 : 1, 0);\n                }\n                if (e.key === 'ArrowUp') {\n                    e.preventDefault();\n                    await this[e.shiftKey ? 'resizeWidgets' : 'moveWidgets'](0, e.ctrlKey ? -10 : -1);\n                }\n                if (e.key === 'ArrowDown') {\n                    e.preventDefault();\n                    await this[e.shiftKey ? 'resizeWidgets' : 'moveWidgets'](0, e.ctrlKey ? 10 : 1);\n                }\n            }\n        }\n    };\n\n    renderScreenSize() {\n        const ww = parseInt((store.getState().visProject[this.props.view].settings?.sizex || 0) as unknown as string, 10);\n        const hh = parseInt((store.getState().visProject[this.props.view].settings?.sizey || 0) as unknown as string, 10);\n\n        if (!this.props.editMode || !this.props.view || !ww || !hh) {\n            return null;\n        }\n        return [\n            <div\n                key=\"black\"\n                style={{\n                    top: 0,\n                    left: 0,\n                    width: `${ww}px`,\n                    height: `${hh}px`,\n                    position: 'absolute',\n                    borderTopWidth: 0,\n                    borderLeftWidth: 0,\n                    borderRightWidth: 1,\n                    borderBottomWidth: 1,\n                    boxSizing: 'content-box',\n                    borderStyle: 'dashed',\n                    borderColor: 'black',\n                    zIndex: 1000,\n                    pointerEvents: 'none',\n                    userSelect: 'none',\n                    opacity: 0.7,\n                }}\n            ></div>,\n            <div\n                key=\"white\"\n                style={{\n                    top: 0,\n                    left: 0,\n                    width: `${ww + 1}px`,\n                    height: `${hh + 1}px`,\n                    position: 'absolute',\n                    borderTopWidth: 0,\n                    borderLeftWidth: 0,\n                    borderRightWidth: 1,\n                    borderBottomWidth: 1,\n                    boxSizing: 'content-box',\n                    borderStyle: 'dashed',\n                    borderColor: 'white',\n                    zIndex: 1000,\n                    pointerEvents: 'none',\n                    userSelect: 'none',\n                    opacity: 0.7,\n                }}\n            ></div>,\n        ];\n    }\n\n    getRelativeStyle(settings: ViewSettings, groupId: GroupWidgetId, limitScreenSize?: boolean) {\n        const relativeStyle: React.CSSProperties = {};\n        if (groupId) {\n            const groupWidgetStyle = store.getState().visProject[this.props.view].widgets[groupId].style;\n            relativeStyle.width = groupWidgetStyle?.width || '100%';\n            relativeStyle.height = groupWidgetStyle?.height || '100%';\n        } else {\n            // this was only if this.props.editMode\n            if (settings.sizex && !limitScreenSize) {\n                let ww: number | string = settings.sizex;\n                let hh: number | string = settings.sizey || 0;\n                if (isVarFinite(ww)) {\n                    ww = parseFloat(ww as unknown as string);\n                }\n                if (isVarFinite(hh)) {\n                    hh = parseFloat(hh as unknown as string);\n                }\n\n                if (typeof ww === 'number' || (ww as string).match(/\\d$/)) {\n                    ww = `${ww.toString()}px`;\n                }\n                if (typeof hh === 'number' || (hh as string).match(/\\d$/)) {\n                    hh = `${hh.toString()}px`;\n                }\n                relativeStyle.width = ww;\n                relativeStyle.height = hh;\n            } else {\n                relativeStyle.width = '100%';\n                relativeStyle.height = '100%';\n            }\n\n            relativeStyle.display = settings.style?.display || 'flex';\n\n            if (relativeStyle.display === 'flex') {\n                relativeStyle.flexWrap = 'wrap';\n                relativeStyle.columnGap = 8;\n\n                if (isVarFinite(settings.columnGap)) {\n                    relativeStyle.columnGap = parseInt(settings.columnGap as unknown as string, 10);\n                }\n            }\n        }\n        relativeStyle.position = 'absolute';\n        relativeStyle.top = 0;\n        relativeStyle.left = 0;\n\n        return relativeStyle;\n    }\n\n    getCountOfRelativeColumns(settings: ViewSettings, relativeWidgetsCount: number) {\n        // number of columns\n        const width = this.state.width;\n        if (width) {\n            if (settings.columnWidth && isVarFinite(settings.columnWidth)) {\n                return Math.floor(this.state.width / settings.columnWidth) + 1;\n            }\n\n            let columns;\n            if (width < 600) {\n                columns = 1;\n            } else if (width < 900) {\n                columns = 2;\n            } else if (width < 1200) {\n                columns = 3;\n            } else if (width < 2064) {\n                columns = 4;\n            } else {\n                columns = Math.floor(width / 500) + 1;\n            }\n\n            if (columns > relativeWidgetsCount) {\n                columns = relativeWidgetsCount;\n            }\n            if (columns > MAX_COLUMNS) {\n                columns = MAX_COLUMNS;\n            }\n\n            return columns;\n        }\n\n        return 1;\n    }\n\n    renderNavigation(content: React.JSX.Element) {\n        return <VisNavigation\n            context={this.props.context}\n            activeView={this.props.activeView}\n            view={this.props.view}\n            editMode={this.props.editMode}\n            menuWidth={this.state.menuWidth}\n            classes={{}}\n            setMenuWidth={menuWidth => {\n                window.localStorage.setItem('vis.menuWidth', menuWidth);\n                this.setState({ menuWidth });\n\n                return new Promise(resolve => {\n                // re-calculate the width of the view\n                    setTimeout(() => {\n                        this.updateViewWidth();\n                        resolve(null);\n                    }, 400);\n                });\n            }}\n        >\n            {content}\n        </VisNavigation>;\n    }\n\n    render() {\n        let rxAbsoluteWidgets: (React.JSX.Element | null)[] = [];\n        let rxRelativeWidgets: React.JSX.Element[] | null = [];\n        let rxGroupWidget;\n\n        const contextView = store.getState().visProject[this.props.view];\n\n        if (!this.props.view || !contextView) {\n            return null;\n        }\n\n        const settings = contextView.settings;\n\n        if (this.props.view === this.props.activeView && this.props.editMode && !this.keysHandlerInstalled) {\n            this.installKeyHandlers();\n        } else if ((this.props.view !== this.props.activeView || !this.props.editMode) && this.keysHandlerInstalled) {\n            this.uninstallKeyHandlers();\n        }\n\n        // wait till view has real div (ref), because of CanJS widgets. they really need a DOM div\n        // and wait for themes too\n        if (this.state.mounted && this.state.themeCode && this.refView.current) {\n            // save initial filter\n            if (!this.props.viewsActiveFilter?.[this.props.view]) {\n                this.props.viewsActiveFilter[this.props.view] = (contextView.settings?.filterkey || '')\n                    .split(',')\n                    .map(f => f.trim())\n                    .filter(f => f);\n            }\n\n            const widgets = contextView.widgets;\n            let moveAllowed = true;\n            if (widgets) {\n                /** @type {string[]} */\n                let relativeWidgetOrder: AnyWidgetId[] = [];\n\n                if (this.props.selectedGroup) {\n                    relativeWidgetOrder = [...(widgets[this.props.selectedGroup]?.data?.members ?? [])];\n                } else if (contextView.settings?.order) {\n                    relativeWidgetOrder = [...contextView.settings.order];\n                }\n\n                // by group editing first relative, then absolute\n                if (this.props.selectedGroup) {\n                    relativeWidgetOrder.sort((a, b) => {\n                        const widgetA = widgets[a];\n                        const widgetB = widgets[b];\n                        const isRelativeA = widgetA.style && (\n                            widgetA.style.position === 'relative' ||\n                            widgetA.style.position === 'static'   ||\n                            widgetA.style.position === 'sticky'\n                        );\n                        const isRelativeB = widgetB.style && (\n                            widgetB.style.position === 'relative' ||\n                            widgetB.style.position === 'static'   ||\n                            widgetB.style.position === 'sticky'\n                        );\n                        if (isRelativeA && isRelativeB) {\n                            return 0;\n                        }\n                        if (isRelativeA) {\n                            return -1;\n                        }\n                        return 1;\n                    });\n                }\n\n                const relativeWidgets = [];\n                const absoluteWidgets = [];\n                const unknownWidgets = [];\n\n                if (this.props.editMode && this.props.selectedWidgets?.length) {\n                    this.props.selectedWidgets.forEach(id => {\n                        const widget = contextView.widgets[id];\n                        if (!widget || (widget.groupid && !this.props.selectedGroup)) {\n                            return;\n                        }\n                        if (widget.style) {\n                            if (widget.style.position === 'relative') {\n                                relativeWidgets.push(id);\n                            } else if (!widget.style.position || widget.style.position === 'absolute') {\n                                absoluteWidgets.push(id);\n                            } else {\n                                unknownWidgets.push(id);\n                            }\n                        } else {\n                            absoluteWidgets.push(id);\n                        }\n                    });\n\n                    // sticky widgets cannot be moved\n                    if (unknownWidgets.length) {\n                        moveAllowed = false;\n                    } else if (relativeWidgets.length && absoluteWidgets.length) {\n                        // absolute and relative widgets cannot be moved together\n                        moveAllowed = false;\n                    }\n                }\n\n                const listRelativeWidgetsOrder: AnyWidgetId[] = [];\n                const listAbsoluteWidgetsOrder: AnyWidgetId[] = [];\n                const filterWidgets = contextView.filterWidgets;\n                const filterInvert = contextView.filterInvert;\n\n                // calculate the order of relative widgets\n                Object.keys(widgets).forEach(id => {\n                    // the group will be rendered apart\n                    if (id === this.props.selectedGroup) {\n                        return;\n                    }\n\n                    const widget = contextView.widgets[id as AnyWidgetId];\n                    // Ignore grouped widgets in non-group-edit mode. They will be rendered in BasicGroup\n                    if (!widget || (widget.grouped && !this.props.selectedGroup)) {\n                        return;\n                    }\n\n                    if (!this.props.selectedGroup && widget.usedInWidget) { // do not show built in widgets on view directly\n                        return;\n                    }\n\n                    if (!hasWidgetAccess({\n                        view: this.props.view,\n                        editMode: this.props.editMode,\n                        project: store.getState().visProject,\n                        user: store.getState().activeUser,\n                        wid: id as AnyWidgetId,\n                    })) {\n                        // do not show widget because user has no access\n                        return;\n                    }\n\n                    // if group edition, ignore all widgets from other groups\n                    if (this.props.selectedGroup &&\n                        id !== this.props.selectedGroup &&\n                        widget.groupid !== this.props.selectedGroup\n                    ) {\n                        return;\n                    }\n\n                    // filter out the widgets in edit mode\n                    if (this.props.editMode && filterWidgets?.length) {\n                        if (widget.data?.filterkey) {\n                            let filterValues: string[] | string = widget.data.filterkey;\n                            if (filterValues && typeof filterValues === 'string') {\n                                filterValues = filterValues.split(',').map(f => f.trim()).filter(f => f);\n                            }\n                            // if filterInvert, then show only widgets with filterkey\n                            if (filterInvert) {\n                                if (!filterWidgets.find(f => filterValues.includes(f))) {\n                                    return;\n                                }\n                            } else if (filterWidgets.find(f => filterValues.includes(f))) {\n                                // Else hide widgets with filterkey in filterWidgets\n                                return;\n                            }\n                        } else if (filterInvert) {\n                            return;\n                        }\n                    }\n\n                    const isRelative = widget.style && (\n                        widget.style.position === 'relative' ||\n                        widget.style.position === 'static' ||\n                        widget.style.position === 'sticky'\n                    );\n                    if (isRelative && id !== this.props.selectedGroup) {\n                        if (!listRelativeWidgetsOrder.includes(id as AnyWidgetId)) {\n                            listRelativeWidgetsOrder.push(id as AnyWidgetId);\n                        }\n                    } else {\n                        const pos = listRelativeWidgetsOrder.indexOf(id as AnyWidgetId);\n                        // if this widget is in relative order, remove it\n                        pos !== -1 && listRelativeWidgetsOrder.splice(pos, 1);\n\n                        if (!listAbsoluteWidgetsOrder.includes(id as AnyWidgetId)) {\n                            listAbsoluteWidgetsOrder.push(id as AnyWidgetId);\n                        }\n                    }\n                });\n\n                if (!this.props.selectedGroup) {\n                    for (let t = relativeWidgetOrder.length - 1; t >= 0; t--) {\n                        if (!contextView.widgets[relativeWidgetOrder[t]]) {\n                            relativeWidgetOrder.splice(t, 1);\n                        }\n                    }\n                }\n\n                // sort relative widgets according to order\n                listRelativeWidgetsOrder.sort((a, b) => {\n                    const posA = relativeWidgetOrder.indexOf(a);\n                    const posB = relativeWidgetOrder.indexOf(b);\n                    if (posA === -1 && posB === -1) {\n                        return 0;\n                    }\n                    if (posA === -1) {\n                        return 1;\n                    }\n                    if (posB === -1) {\n                        return -1;\n                    }\n                    return posA - posB;\n                });\n\n                const columns = this.props.selectedGroup || !settings ? 1 : this.getCountOfRelativeColumns(settings, listRelativeWidgetsOrder.length);\n                const wColumns = new Array(columns);\n                for (let w = 0; w < wColumns.length; w++) {\n                    wColumns[w] = [];\n                }\n\n                const view = this.props.view;\n\n                rxAbsoluteWidgets = listAbsoluteWidgetsOrder.map((id, index) =>\n                    VisView.getOneWidget(index, contextView.widgets[id], {\n                        context: this.props.context,\n                        editMode: this.props.editMode,\n                        id,\n                        isRelative: false,\n                        mouseDownOnView: this.mouseDownOnView,\n                        moveAllowed,\n                        ignoreMouseEvents: this.ignoreMouseEvents,\n                        onIgnoreMouseEvents: this.onIgnoreMouseEvents,\n                        refParent: this.props.selectedGroup ? this.refRelativeView : this.refView,\n                        askView: this.askView,\n                        relativeWidgetOrder,\n                        selectedGroup: this.props.selectedGroup,\n                        selectedWidgets: this.movement?.selectedWidgetsWithRectangle || this.props.selectedWidgets,\n                        view,\n                        viewsActiveFilter: this.props.viewsActiveFilter,\n                        customSettings: this.props.customSettings,\n                    }));\n\n                if (listRelativeWidgetsOrder.length) {\n                    let columnIndex = 0;\n\n                    listRelativeWidgetsOrder.forEach((id, index) => {\n                        const widget = store.getState().visProject[view].widgets[id];\n                        // if newLine, start from the beginning\n                        if (widget.style.newLine) {\n                            columnIndex = 0;\n                        }\n\n                        const w = VisView.getOneWidget(index, widget, {\n                            // custom attributes\n                            context: this.props.context,\n                            editMode: this.props.editMode, // relative widget cannot be multi-view\n                            id,\n                            isRelative: true,\n                            mouseDownOnView: this.mouseDownOnView,\n                            moveAllowed,\n                            ignoreMouseEvents: this.ignoreMouseEvents,\n                            onIgnoreMouseEvents: this.onIgnoreMouseEvents,\n                            refParent: this.props.selectedGroup ? this.refRelativeView : this.refRelativeColumnsView[columnIndex],\n                            askView: this.askView,\n                            relativeWidgetOrder: this.props.selectedGroup ? relativeWidgetOrder : listRelativeWidgetsOrder,\n                            selectedWidgets: this.movement?.selectedWidgetsWithRectangle || this.props.selectedWidgets,\n                            selectedGroup: this.props.selectedGroup,\n                            view,\n                            customSettings: this.props.customSettings,\n                            viewsActiveFilter: this.props.viewsActiveFilter,\n                        });\n                        wColumns[columnIndex].push(w);\n                        columnIndex++;\n                        if (columnIndex >= columns) {\n                            columnIndex = 0;\n                        }\n                    });\n\n                    if (this.props.selectedGroup) {\n                        rxRelativeWidgets = wColumns[0];\n                    } else {\n                        const style: React.CSSProperties = {};\n                        if (settings?.columnWidth && isVarFinite(settings.columnWidth)) {\n                            style.maxWidth = parseFloat(settings.columnWidth as unknown as string);\n                        }\n                        rxRelativeWidgets = wColumns.map((column, i) => <div\n                            ref={this.refRelativeColumnsView[i]}\n                            key={i}\n                            style={style}\n                            className={Utils.clsx('vis-view-column', this.props.editMode && 'vis-view-column-edit')}\n                        >\n                            {column}\n                        </div>);\n                    }\n                } else {\n                    rxRelativeWidgets = null;\n                }\n\n                // render group widget apart\n                if (this.props.selectedGroup) {\n                    rxGroupWidget = VisView.getOneWidget(0, contextView.widgets[this.props.selectedGroup], {\n                        context: this.props.context,\n                        editMode: this.props.editMode,\n                        id: this.props.selectedGroup,\n                        isRelative: false,\n                        mouseDownOnView: this.mouseDownOnView,\n                        moveAllowed,\n                        ignoreMouseEvents: this.ignoreMouseEvents,\n                        onIgnoreMouseEvents: this.onIgnoreMouseEvents,\n                        refParent: this.refView,\n                        askView: this.askView,\n                        relativeWidgetOrder,\n                        selectedGroup: this.props.selectedGroup,\n                        selectedWidgets: this.movement?.selectedWidgetsWithRectangle || this.props.selectedWidgets,\n                        view,\n                        viewsActiveFilter: this.props.viewsActiveFilter,\n                        customSettings: this.props.customSettings,\n                    });\n                }\n            }\n        }\n\n        let className = 'vis-view';\n        const style: React.CSSProperties = {\n            width: '100%',\n            height: '100%',\n        };\n\n        if (this.state.loadedjQueryTheme !== this.getJQueryThemeName() && this.props.view) {\n            if (!this.loadingTheme) {\n                this.loadingTheme = true;\n                setTimeout(() => this.loadJqueryTheme(this.getJQueryThemeName()), this.state.loadedjQueryTheme ? 50 : 0);\n            }\n        }\n        const backgroundStyle: React.CSSProperties = {};\n        const backgroundClass: string = settings?.style?.background_class || '';\n\n        settings?.style && Object.keys(settings.style).forEach(attr => {\n            if (attr === 'background_class') {\n                className = addClass(className, settings.style?.background_class);\n            } else {\n                const isBg = attr.startsWith('background');\n                if (!settings['bg-image'] || !isBg) {\n                    const value: string = (settings.style as Record<string, string>)[attr] as string;\n                    // convert background-color => backgroundColor\n                    attr = attr.replace(/(-\\w)/g, text => text[1].toUpperCase());\n                    (style as Record<string, string>)[attr] = value;\n                    if (isBg) {\n                        (backgroundStyle as Record<string, string>)[attr] = value;\n                    }\n                }\n            }\n        });\n\n        // Check if custom theme should be used\n        let theme = this.props.context.theme;\n        const customThemeType = this.props.customSettings?.themeType;\n        // if custom theme differs from the current one => create new theme\n        if (customThemeType && customThemeType !== theme.palette.mode) {\n            if (!this.theme[customThemeType]) {\n                // cache theme\n                this.theme[customThemeType] = Theme(customThemeType);\n            }\n            theme = this.theme[customThemeType];\n        }\n\n        if (!style.backgroundColor && !style.background) {\n            if (this.props.customSettings?.viewStyle?.backgroundColor) {\n                backgroundStyle.backgroundColor = this.props.customSettings.viewStyle.backgroundColor;\n            } else if (this.props.customSettings?.themeType === 'dark') {\n                backgroundStyle.backgroundColor = '#000';\n            } else {\n                backgroundStyle.backgroundColor = theme.palette.mode === 'dark' ? '#000' : '#fff';\n            }\n        }\n\n        if (!style.color) {\n            // override the text color from custom settings\n            if (this.props.customSettings?.viewStyle?.color) {\n                style.color = this.props.customSettings.viewStyle.color;\n            } else {\n                // or set according to theme\n                style.color = theme.palette.mode === 'dark' ? '#fff' : '#000';\n            }\n        }\n\n        // override font family from custom settings\n        if (!style.fontFamily && this.props.customSettings?.viewStyle?.fontFamily) {\n            style.fontFamily = this.props.customSettings.viewStyle.fontFamily;\n        }\n\n        if (this.props.customSettings?.viewStyle?.overrides) {\n            // override the theme with custom settings\n            theme = createTheme(theme, this.props.customSettings.viewStyle.overrides);\n        }\n\n        // if the current view is not active, so hide it and show only if it is active\n        if (this.props.view !== this.props.activeView) {\n            style.display = 'none';\n        }\n\n        if (this.props.context.container) {\n            style.overflow = 'hidden';\n        }\n\n        let gridDiv = null;\n        if (store.getState().visProject[this.props.view].settings?.snapType === 2 && this.props.editMode) {\n            gridDiv = VisView.renderGitter(contextView.settings?.gridSize as number, contextView.settings?.snapColor as string);\n        }\n\n        if (this.props.style) {\n            Object.assign(style, this.props.style);\n        }\n\n        // apply image\n        if (settings && settings['bg-image']) {\n            backgroundStyle.backgroundImage = `url(\"../${this.props.context.adapterName}.${this.props.context.instance}/${this.props.context.projectName}${settings['bg-image'].substring(9)}\")`;  // \"_PRJ_NAME\".length = 9\n            backgroundStyle.backgroundRepeat = 'no-repeat';\n            backgroundStyle.backgroundPosition = 'top left';\n            if (settings['bg-color']) {\n                backgroundStyle.backgroundColor = settings['bg-color'];\n            }\n            if (settings['bg-position-x']) {\n                // eslint-disable-next-line no-restricted-properties\n                backgroundStyle.backgroundPositionX = isVarFinite(settings['bg-position-x']) ? `${settings['bg-position-x']}px` : settings['bg-position-x'];\n            }\n            if (settings['bg-position-y']) {\n                // eslint-disable-next-line no-restricted-properties\n                backgroundStyle.backgroundPositionY = isVarFinite(settings['bg-position-y']) ? `${settings['bg-position-y']}px` : settings['bg-position-y'];\n            }\n            if (settings['bg-width'] && settings['bg-height']) {\n                // eslint-disable-next-line no-restricted-properties\n                const w = isVarFinite(settings['bg-width']) ? `${settings['bg-width']}px` : settings['bg-width'];\n                // eslint-disable-next-line no-restricted-properties\n                const h = isVarFinite(settings['bg-height']) ? `${settings['bg-height']}px` : settings['bg-height'];\n                backgroundStyle.backgroundSize = `${w} ${h}`;\n            } else if (settings['bg-width']) {\n                // eslint-disable-next-line no-restricted-properties\n                backgroundStyle.backgroundSize = `${isVarFinite(settings['bg-width']) ? `${settings['bg-width']}px` : settings['bg-width']} auto`;\n            } else if (settings['bg-height']) {\n                // eslint-disable-next-line no-restricted-properties\n                const w = isVarFinite(settings['bg-height']) ? `${settings['bg-height']}px` : settings['bg-height'];\n                backgroundStyle.backgroundSize = `auto ${w}`;\n            }\n        }\n        Object.assign(style, backgroundStyle);\n\n        let renderedWidgets;\n\n        let limitScreenStyle: CSSProperties | null = null;\n        // limit screen size of desired\n        if (settings && settings.limitScreen && ((window.screen.width >= 800 && window.screen.height >= 800) || !settings.limitScreenDesktop)) {\n            const ww = isVarFinite(settings.sizex) ? parseFloat(settings.sizex as unknown as string) : 0;\n            const hh = isVarFinite(settings.sizey) ? parseFloat(settings.sizey as unknown as string) : 0;\n            if (ww && hh) {\n                const borderWidth = parseFloat(settings.limitScreenBorderWidth as unknown as string) || 0;\n                const borderColor = settings.limitScreenBorderColor || '#333';\n                const borderStyle = settings.limitScreenBorderStyle || 'dotted';\n                const bgColor = settings.limitScreenBackgroundColor || null;\n\n                limitScreenStyle = {\n                    ...backgroundStyle,\n                    width: ww + borderWidth * 2,\n                    height: hh + borderWidth * 2,\n                    minWidth: ww + borderWidth * 2,\n                    minHeight: hh + borderWidth * 2,\n                    overflow: 'auto',\n                    position: 'relative',\n                    boxSizing: 'border-box',\n                    borderWidth,\n                    borderColor,\n                    borderStyle,\n                };\n                style.display = 'flex';\n                style.justifyContent = 'center';\n                style.alignItems = 'center';\n                style.backgroundColor = bgColor as Property.BackgroundColor;\n            }\n        }\n\n        if (this.props.selectedGroup) {\n            // draw all widgets in div, that has exact size of the group\n            renderedWidgets = rxGroupWidget;\n        } else if (settings) {\n            renderedWidgets = <>\n                {rxRelativeWidgets ? <div\n                    ref={this.refRelativeView}\n                    style={this.getRelativeStyle(settings, this.props.selectedGroup, !!limitScreenStyle)}\n                    className=\"vis-relative-view\"\n                >\n                    {rxRelativeWidgets}\n                </div> : null}\n                {rxAbsoluteWidgets}\n            </>;\n        }\n\n        if (limitScreenStyle) {\n            renderedWidgets = <div\n                style={limitScreenStyle}\n                className=\"vis-limit-screen\"\n            >\n                {renderedWidgets}\n            </div>;\n        }\n\n        let renderedView = <div\n            className={`${className} visview_${this.props.view.replace(/\\s/g, '_')}`}\n            ref={this.refView}\n            id={`visview_${this.props.view.replace(/\\s/g, '_')}`}\n            onMouseDown={!this.props.context.runtime ? e => this.props.editMode && this.mouseDownLocal && this.mouseDownLocal(e) : undefined}\n            onDoubleClick={this.props.context.runtime ? () => this.props.editMode && this.doubleClickOnView && this.doubleClickOnView() : undefined}\n            style={style}\n        >\n            <style>{this.state.themeCode}</style>\n            {gridDiv}\n            {limitScreenStyle ? null : this.renderScreenSize()}\n            {this.state.rulers.map((ruler, key) =>\n                <div\n                    key={key}\n                    style={{\n                        pointerEvents: 'none',\n                        userSelect: 'none',\n                        position: 'absolute',\n                        width: ruler.type === 'horizontal' ? '100%' : 10,\n                        height: ruler.type === 'horizontal' ? 10 : '100%',\n                        borderStyle: 'solid',\n                        borderColor: 'red',\n                        borderWidth: 0,\n                        borderLeftWidth: ruler.type === 'horizontal' ? 0 : 1,\n                        borderTopWidth: ruler.type === 'horizontal' ? 1 : 0,\n                        left: ruler.type === 'horizontal' ? 0 : ruler.value,\n                        top: ruler.type === 'horizontal' ? ruler.value : 0,\n                        zIndex: 1000,\n                    }}\n                />)}\n            {renderedWidgets}\n        </div>;\n\n        // render the menu if enabled and not in widget;\n        // only if the view is now active (not alwaysRender)\n        if (settings && (settings.navigation || settings.navigationBar) && this.props.view === this.props.activeView) {\n            renderedView = this.renderNavigation(renderedView);\n        }\n\n        // apply a view background to a whole document\n        if (!this.props.visInWidget && this.props.activeView === this.props.view) {\n            const bgStyle = JSON.stringify(backgroundStyle);\n            if (!window._lastAppliedStyle || window._lastAppliedStyle !== bgStyle) {\n                window._lastAppliedStyle = bgStyle;\n                window.document.documentElement.removeAttribute('style');\n                // apply background style to html\n                Object.keys(backgroundStyle).forEach(attr =>\n                    (window.document.documentElement.style as Record<string, any>)[attr] = (backgroundStyle as Record<string, any>)[attr]);\n            }\n            window.document.documentElement.className = backgroundClass;\n        }\n\n        return <StylesProvider generateClassName={generateClassNameEngine}>\n            <StyledEngineProvider injectFirst>\n                <ThemeProvider theme={theme}>\n                    {renderedView}\n                </ThemeProvider>\n            </StyledEngineProvider>\n        </StylesProvider>;\n    }\n}\n\nexport default VisView;\n"],"names":["ICON_TYPES","MaterialIconSelector","Component","constructor","props","super","this","list","index","iconType","window","localStorage","getItem","state","listLoaded","selectedIcon","filter","iconTypeLoaded","filtered","loading","page","maxPages","setStateAsync","Promise","resolve","setState","loadIconSet","type","fetch","customIcons","then","res","json","e","console","error","concat","icons","Object","keys","i","length","icon","applyFilter","loadList","async","componentWillUnmount","filterTimer","clearTimeout","timeout","undefined","setTimeout","toLowerCase","includes","_icon$unsupported_fam","_icon$tags","unsupported_families","name","tags","find","tag","map","Math","ceil","componentDidMount","onSelect","startsWith","onClose","renderIcons","iconStyle","customColor","color","push","_jsxs","className","Utils","clsx","classes","iconDiv","iconSelected","onClick","onDoubleClick","children","_jsx","Icon","src","style","iconName","replace","render","Dialog","open","maxWidth","fullWidth","paper","dialog","DialogTitle","marginRight","TextField","value","InputProps","startAdornment","InputAdornment","position","SearchIcon","endAdornment","ClearIcon","cursor","removeItem","variant","onChange","setItem","target","helperText","I18n","t","DialogContent","overflowY","height","width","display","verticalAlign","FormControl","RadioGroup","FormControlLabel","newState","control","Radio","label","typeName","paddingLeft","paddingBottom","textDecoration","href","rel","Grid","container","spacing","paddingTop","LinearProgress","textAlign","marginBottom","marginTop","Button","UploadFile","themeType","onUpload","data","maxSize","accept","DialogActions","marginLeft","Pagination","count","event","flexGrow","startIcon","EraseIcon","disabled","CheckIcon","_MaterialIconSelector","withStyles","theme","fontSize","overflow","textOverflow","margin","padding","borderRadius","backgroundColor","palette","secondary","main","text","primary","light","whiteSpace","VisMaterialIconSelector","IMAGE_TYPES","fileName","setFileName","useState","fileData","setFileData","working","setWorking","setError","onDrop","useCallback","acceptedFiles","fileRejections","reader","FileReader","onload","evt","result","readAsDataURL","errors","forEach","err","code","message","getRootProps","getInputProps","isDragActive","useDropzone","maxFiles","alignItems","justifyContent","boxSizing","borderStyle","borderWidth","borderColor","CircularProgress","_Fragment","endsWith","FolderZip","ext","alt","maxHeight","opacity","formatBytes","instruction","BasicBar","VisRxWidget","getWidgetInfo","id","visSet","visName","visPrev","visAttrs","fields","default","options","visDefaultStyle","extractWidth","css","multiplier","m","match","parseInt","getCalc","min","rxData","Number","max","val","parseFloat","values","oid","border","round","renderWidgetBody","orientation","reverse","left","bottom","float","shadow","boxShadow","BasicBulb","toggle","NOTHING_SELECTED","readOnly","oidTrue","urlTrue","oidTrueValue","oidFalseValue","urlFalse","oidFalse","finalMin","finalMax","oidTrueValueFinal","oidFalseValueFinal","f","toString","context","setValue","socket","getRawSocket","emit","isFalse","icon_off","icon_on","PinSvg","xmlns","viewBox","fill","d","BasicRedNumber","hidden","step","editMode","top","zIndex","background","html_prepend","dangerouslySetInnerHTML","__html","html_append_singular","html_append_plural","minWidth","fontFamily","DangerousHtmlWithScript","React","scriptElements","DOMParser","parseFromString","html","getElementsByTagName","existingScripts","Array","from","document","querySelectorAll","scriptElement","wid","scriptExists","script","createElement","innerHTML","body","appendChild","isDiv","otherProps","BasicHtml","interval","clearInterval","refreshInterval","setInterval","forceUpdate","onRxDataChanged","prevRxData","propTypes","PropTypes","isRequired","view","BasicValueString","visWidgetLabel","_this$state$rxData$ht","_this$state$rxData$ht2","test_html","substring","iconSize","html_append","BasicViewInWidget","visSetLabel","getViewOptions","project","arguments","parentId","level","___settings","folders","folder","renderViewSelector","views","option","IconButton","editModeComponentClass","onMouseDown","stopPropagation","preventDefault","onIgnoreMouseEvents","showViewSelector","EditIcon","key","MenuItem","onWidgetsChanged","contains_view","lineHeight","FileIcon","ListItemText","ListSubheader","FolderOpenedIcon","rxStyle","overflowX","getWidgetView","BasicViewInWidget8","viewArr","dateFormat","BasicGroup","listOfWidgets","members","attributes","_context$views$contex","widgetData","widgets","attr","ms","_attr","common","objects","groupFields","attrName","num","title","noTranslation","mounted","info","projectName","adapterName","instance","widget","_widget$data","selectedGroup","groupWidgets","rxGroupWidgets","sort","a","b","widgetA","widgetB","isRelativeA","isRelativeB","_widget","isRelative","VisView","getOneWidget","selectedWidgets","moveAllowed","mouseDownOnView","askView","refParent","refService","relativeWidgetOrder","viewsActiveFilter","customSettings","BasicSvgBool","onSvgClick","renderSvg","str","svg","svg_opacity","svg_false","svg_true","BasicSvgShape","circlePoints","radius","points","radian","PI","angle","point","x","sin","y","cos","rotate","scaleWidth","scaleHeight","strokeWidth","transform","svgType","vectorEffect","x1","y1","x2","y2","cx","cy","r","version","stroke","strokeColor","BasicScreenResolution","essentialData","onResize","defaultView","_this$props$context$v","_this$props$context$v2","_this$props$context$v3","_this$props$context$v4","activeView","settings","sizex","documentElement","clientWidth","sizey","clientHeight","vis","findNearestResolution","JSON","stringify","buildEssentialProjectData","viewId","_this$props$context$v5","_this$props$context$v6","_this$props$context$v7","_this$props$context$v8","_this$props$context$v9","_this$props$context$v10","useAsDefault","addEventListener","removeEventListener","createScreenText","fontWeight","generateInstance","alert","valueStyle","flexDirection","BasicSpeechToText","recognition","ignoreOnEnd","webkitSpeechRecognition","image","imageInactive","resultColor","keyWordColor","speechMode","startRecognition","tooltip","findKeyWord","words","keywords","split","found","wwords","w","pos","indexOf","offset","p","onend","stop","continuous","interimResults","maxAlternatives","startTimestamp","Date","now","timer","originalColor","finalTranscript","lastText","onstart","imageActive","onerror","timeStamp","onresult","interimTranscript","results","resultIndex","isFinal","transcript","imageStarted","foundKeyword","imageDetected","imageSent","textSentColor","lang","language","start","noImage","imageHeightPx","imageWidthPx","noText","noResults","BasicIFrame","frameRef","hashInstalled","onWakeUpInstalled","startedInterval","onHashChange","refreshIFrame","onPropertyUpdate","_this$frameRef$curren","_this$frameRef$curren2","refreshWithNoQuery","current","contentWindow","location","reload","isHidden","el","offsetParent","getParents","els","pel","parentNode","unshift","refreshOnViewChange","refreshOnWakeUp","parents","tagName","onWakeUp","overlayClassNames","scrollX","scrollY","ref","sandbox","noSandbox","seamless","BasicImage","imageRef","refreshImage","stretch","allowUserInteractions","touchAction","userSelect","BasicHtmlNav","onNavigate","nav_view","changeView","sub_view","FiltersEditorDialog","_window$vis","originalItems","items","item","uuid","filters","updateFilter","applyItems","selectIcon","selectImage","anchorEl","updateItems","parse","renderSelectIconDialog","renderFilterSelector","Menu","sx","renderSelectImageDialog","_value","SelectFileDialog","restrictToFolder","allowNonRestricted","allowUpload","allowDownload","allowCreateFolder","allowDelete","allowView","showToolbar","imagePrefix","selected","filterByType","onOk","selectedOrArray","_selected","_selected2","isArray","projectPrefix","renderTableRow","Draggable","draggableId","dragProvided","TableRow","rowEven","innerRef","draggableProps","TableCell","handlerCell","dragHandleProps","DragHandle","grab","cellText","InputLabelProps","shrink","cellImage","size","cell","ColorPicker","activeColor","cellButton","Checkbox","checked","multiple","_item","splice","Delete","renderTable","Table","stickyHeader","TableHead","Fab","currentTarget","Add","DragDropContext","onDragEnd","destination","removed","source","Droppable","droppableId","dropProvided","TableBody","droppableProps","minHeight","Check","Close","mode","processFilter","len","ff","trim","first","shift","ItemsEditor","setOpen","Edit","newItems","setData","BasicFilterDropdown","noBinding","component","_field","onDataChange","getItems","onCommand","command","renderDropdown","dropdownVariant","widgetTitle","InputLabel","Select","renderValue","noAllOption","autoFocus","noFilterText","renderButtons","ButtonGroup","buttonsVariant","contrastText","BasicLink","BasicImage8","changeData","store","dispatch","recalculateFields","indexFrom","indexTo","srcArr","join","getImage","images","JQuiButton","showDialog","show","dialogVisible","autoclose","hideTimeout","showPassword","password","refButton","refDialog","visOrder","buttontext_view","externalDialog","buttontext","url","html_dialog","jquery_style","no_style","desiredSize","closeOnClick","setId","findField","widgetInfo","componentDidUpdate","_jQueryDone","jQuery","button","_showDialog","dataset","dialogName","onPasswordEnter","Password","passwordError","renderPasswordDialog","onKeyUp","keyCode","setObjectWithState","setObjectType","_obj$common","obj","getObject","warn","passwordChecked","tpl","log","catch","renderRxDialog","dialogStyle","content","modal","dialogBackgroundColor","dialogTitleColor","hideCloseButton","right","paperStyle","Popper","Paper","renderJQueryDialog","preload","renderDialog","persistent","isVarFinite","dialog_width","dialog_height","innerWidth","innerHeight","dialog_class","invert_icon","imageHeight","iconSrc","buttonStyle","textTransform","POSSIBLE_MUI_STYLES","toUpperCase","buttonText","visResizable","navigationTitle","copyToClipboard","IconCopy","hash","slice","JQuiButtonBlank","newWidgetInfo","JQuiIconLink","JQuiWriteState","valueType","field","_obj$common2","_obj$common3","_obj$common4","changed","_obj$common5","_obj$common6","minmax","noSubscribe","icon_active","src_active","getState","onStateUpdated","getControlOid","click_id","value_oid","renderIcon","isActive","invertIcon","invert_icon_active","color_active","renderText","getIsActive","actualValue","desiredValue","oidValue","iterateInterval","iterateTimeout","delay","repeat_delay","repeat_interval","onMouseUp","JQuiIconInc","JQuiIconHttpGet","JQuiDialog","JQuiIconDialog","JQuiContainerDialog","JQuiButtonNavigation","JQuiIconNavigation","JQuiButtonPasswordNavigation","JQuiDialogExternal","JQuiButtonDialogClose","names","_widgets$widget$data","_widgets$widget$data2","_widgets$widget$data3","Autocomplete","freeSolo","onInputChange","inputValue","getOptionLabel","renderInput","params","dlgName","wids","j","_widgets$wids$j$data","getElementById","querySelector","viewName","JQuiContainerButtonDialog","JQuiContainerIconDialog","JQuiInput","input","focused","inputRef","unit","asString","focus","addClass","_this$object","_this$object2","_this$object2$common","object","_id","isNaN","withEnter","onFocus","selectAllOnFocus","select","onBlur","edge","KeyboardReturn","inputProps","JQuiInputSet","JQuiBinaryState","isOn","text_false","text_true","icon_false","src_false","icon_true","src_true","false_text","true_text","false_src","true_src","alt_false","false_alt","alt_true","true_alt","invert_icon_false","invert_icon_true","pushMode","onMyMouseDown","invert","onMyMouseUp","test","doNotFallback","imageHeight_true","icon_color_true","imageHeight_false","icon_color_false","getTextWidth","textsLengthCache","visibility","removeChild","on_text","color_true","off_text","color_false","equal_text_length","falseLength","trueLength","renderButton","renderFab","renderHtml","html_true","html_false","renderSwitch","on","textColorOn","off","textColorOff","onIcon","offIcon","Switch","renderCheckbox","renderRadio","notEqualLength","getElementsByClassName","textEl","bodyStyle","Tooltip","JQuiRadio","BUTTONS","AUTO","MANUAL","VACATION","PARTY","COOL","DRY","ECO","FAN_ONLY","HEAT","HEATING","OFF","BulkEditor","textRef","textDialogFocused","states","originalUnit","usePercents","steps","texts","colors","activeColors","tooltips","iconDialog","imageDialog","dialogDelete","getIcon","iconPromise","generateFields","percent","calculateFirst","useStates","numbers","renderDeleteDialog","renderMaterialDialog","renderImageDialog","isClose","onEnter","_this$state$editDialo","editDialog","add","_this$state$editDialo2","renderEditDialog","isUnique","v","onKeyDown","_this$state$editDialo3","renderLine","_this$textRef$i","urlPopper","origin","placement","transition","_ref","TransitionProps","Fade","clearPadding","fieldContent","gap","activeLine","labelPlacement","Clear","renderMinMaxDialog","minMaxDialog","buttons","Slider","valueLabelDisplay","marks","_step","_obj$common7","_","styles","JQuiState","percents","deepClone","value1","text1","value5","text5","value2","text2","value3","text3","value4","text4","controlTimeout","indexOrValue","immediately","getSelectedIndex","selectedIndex","renderMenuItem","_this$state$object","text0","icon0","image0","List","onChangeCommitted","FormLabel","JQuiRadioList","JQuiSelectList","JQuiIconStatePushButton","JQuiIconStateBool","iconFalse","JQuiRadioSteps","JQuiSlider","valueMax","min_distance","inverted","isMax","immediate","minDistance","lastChanged","shift_min_distance","oidMax","valueLabelFormat","disableSwap","activeThumb","Stack","direction","mb","JQuiSliderVertical","JQuiInputDate","EASY_DATE_FORMAT","LocalizationProvider","dateAdapter","AdapterDayjs","adapterLocale","DatePicker","asFullDate","dayjs","newValue","toDate","format","formatDensity","wideFormat","slotProps","textField","root","textRoot","clearable","onClear","disableFuture","disablePast","displayWeekNumber","JQuiInputDateTime","asDate","TimePicker","ampm","minutesStep","stepMinute","second","millisecond","JQuiToggle","colorTrue","TabsSliderTabs","visSetIcon","vertical","tabIndex","flex","tabs","show_tabs","Tab","iconPosition","wrapped","Tabs","TabIndicatorProps","scrollButtons","centered","Widget","moveCard","onDropped","useRef","handlerId","drop","useDrop","collect","monitor","getHandlerId","hover","_ref$current","dragIndex","hoverIndex","hoverBoundingRect","getBoundingClientRect","hoverMiddleY","clientOffset","getClientOffset","hoverClientY","isDragging","drag","useDrag","VisOrderMenu","widgetTypes","order","dragCard","getWidgetTypes","_this$imageRef$i$curr","getWidgetDiv","_widgetType$preview","_widgetType","foundWidgetType","widgetLabel","widgetColor","setColor","setLabel","set","widgetWithSetLabel","img","widgetBackColor","widgetIcon","preview","prev","widgetImage","getInvertedColor","marketplace","onMove","flexWrap","widgetName","widgetType","widgetNameText","coloredWidgetSet","fontStyle","DndProvider","backend","HTML5Backend","objectFit","transformOrigin","number","VisBaseWidget","_props$selectedWidget","_props$context$views$","_props$context$views$2","relativeMoveMenu","resize","random","widDiv","onCommandBound","updateInterval","pressTimeout","shadowDiv","stealCursor","beforeIncludeColor","lastClick","movement","resizeLocked","visDynamicResizable","isCanWidget","save","calculateRelativeWidgetPosition","multiViewWidget","isResizable","rect","offsetTop","offsetLeft","_storedOpacity","_this$refService$curr","resizers","draggable","createWidgetMovementShadow","_customHandlers","parentDiv","prototype","hasOwnProperty","call","insertBefore","remove","onTempSelect","_this$refService$curr2","removeClass","replacePRJ_NAME","applyBindings","selectedOne","resizable","resizeHandles","widgetHint","isWidgetFilteredOutStatic","hideHelper","rowGap","bind","_originalData","_option","_this$refService$curr3","overlay","_this$refService$curr4","_this$refService$curr5","_this$refService$curr6","_this$refService$curr7","_this$refService$curr8","_this$refService$curr9","_this$refService$curr10","getDerivedStateFromProps","_context$views$props$","_context$views$props$2","_state$style","_state$data","copied","groupid","parentWidgetData","entries","replaceGroupAttr","doesMatch","newString","styleStr","dataStr","runtime","styleObj","oldStyle","newStyle","dataObj","bindings","removeFromArray","IDs","parseStyle","isRxStyle","part","locked","parts","multiView","multiId","setSelectedWidgets","shiftKey","ctrlKey","setSelectedGroup","setAttribute","onResizeStart","getResizeHandlers","_this$props$selectedW","squareShift","squareWidthHeight","shiftEm","thicknessEm","offsetEm","widgetWidth100","widgetHeight100","borderDisabled","resizeHandlers","RESIZERS_OPACITY","RESIZERS_OPACITY_DISABLED","usedInWidget","controllable","handlers","borderTop","borderBottom","borderLeft","borderRight","handler","assign","isUserMemberOfGroup","user","userGroups","groupId","_group$common","_group$common$members","group","vf","filterkey","filterKeys","isWidgetFilteredOut","isWidgetHidden","condition","_props","changeOrder","dir","nextId","formatValue","decimals","_format","toFixed","formatIntervalHelper","singular","plural","special24","formatInterval","timestamp","isMomentJs","moment","fromNow","diff","floor","s","h","startUpdateInterval","_ref2","timeIntervalEl","time","formatDate","dateObj","forRx","getTime","toLocaleString","getFullYear","getMonth","getDate","getHours","getMinutes","getMilliseconds","getSeconds","onToggleRelative","absoluteWidth","noPxToPercent","onToggleWidth","onToggleLineBreak","newLine","correctStylePxValue","renderRelativeMoveMenu","showRelativeMoveMenu","_this$props$selectedW2","classNames","_this$props$tpl","doNotTakeWidth","doNotTakeHeight","rxWidget","_this$state$rxStyle","allWidgets","widgetMoveButtons","showWidgetNames","_this$refService$curr11","_this$refService$curr12","_this$refService$curr13","_widget$data2","widgetNameBottom","AnchorIcon","ExpandIcon","showUp","showDown","UpIcon","DownIcon","calculateOverflow","groupInstructions","signals","renderSignals","lastChange","renderLastChange","FORBIDDEN_CHARS","linkContext","onStateChangedBind","wrappedContent","updateTimer","ignoreMouseEvents","bindingsTimer","informIncludedWidgets","filterDisplay","onIoBrokerStateChanged","onStateChanged","widgetAttrInfo","lastChanges","getUsedObjectIDsInWidget","_newState$rxData","visible","checkVisibility","visResizeLocked","visDraggable","visResizeHandles","g","getI18nPrefix","getText","getLanguage","en","_len","args","_key","_this$state$rxData","doNotApplyState","_this$newState$rxData","applyBinding","_this$newState","stateId","formatUtils","formatBinding","subscribeState","_prevRxData","onRxStyleChanged","_prevRxStyle","prevProps","prevState","unsubscribeState","isWidgetVisibleForGroup","onPropertiesUpdated","oldIDs","unsubscribe","subscribe","_this$props$context$s","_this$props$context$s2","systemConfig","isFloatComma","wrapContent","addToHeader","cardContentStyle","headerStyle","onCardClick","components","_this$props$customSet","_this$props$customSet2","MyCard","Card","MyCardContent","CardContent","viewStyle","visCard","class","VisViewComponent","visInWidget","getWidgetInWidget","_this$movement","selectedWidgetsWithRectangle","isSignalVisible","_this$state$rxData2","_this$state$rxData3","targetValue","text2style","textStyle","attrParts","renderSignal","pointerEvents","imageStyle","widgetStyle","paddingRight","_this$state$rxData4","refs","oWidget","Error","analyzeDraggableResizable","resizableOptions","getAttribute","handles","virtualHeight","virtualWidth","draggableOptions","visHideHelper","VisCanWidget","destroy","update","$wid","changeHandler","applyStyle","updateSignal","updateVisibility","updateLastChange","refViews","legacyViewContainers","setupSubscriptions","registerChangeHandler","buildLegacyStructures","renderWidget","unregisterChangeHandler","isSelected","offsetWidth","offsetHeight","containers","visContains","_this$widDiv$_customH","_this$props$context$a","_this$props$context$a2","_this$widDiv$_customH2","onHide","_this$props$context$a3","wFilters","_this$widDiv$_customH3","_this$widDiv$_customH4","_this$widDiv$_customH5","_this$widDiv$_customH6","onShow","_this$props$context$a4","_this$props$context$a5","_current$refView","_current$refView2","refView","_originalParent","signalDiv","_this$props$context$a6","lcDiv","binds","basic","canStates","_this$props$context$a7","_storedDisplay","addGestures","$$wid","$$","offsetX","offsetY","gesture","delta","limit","$indicator","newVal","valState","$","append","that","evData","$el","hide","trigger","swipeDelta","indicatorX","indicatorY","abs","touch","touches","addSignalIcon","_this$props$context$a8","divSignal","divIcon","divText","addLastChange","divLastChange","prepend","addChart","onclick","visibilityOidBinding","binding","widgetIndex","findIndex","doNotApplyStyles","widgetContext","calcData","newWidgetData","newWidgetStyle","_count","cb","_userGroups","newData","oldEditMode","oldData","_no_style","updateOnStyle","mStyle","can","Map","_widget2","_widget2$data","viewDiv","widgetFragment","scripts","newScript","replaceChild","div","tplEl","visUpdateStyle","winDiv","lines","stack","l","line","shouldComponentUpdate","nextProps","nextState","lastState","zIndexProp","otherRef","getViewRef","TOOLBAR_SIZE","VisNavigation","renderMenu","viewSettings","navigation","_viewSettings$navigat","_item$icon","navigationOrientation","navigationOnlyIcon","navigationColor","navigationIcon","navigationImage","navigationOrder","prevItem","nextItem","verticalMenu","navigationBarColor","listItemIcon","navigationBackground","menu","menuWidth","menuFull","menuNarrow","menuHidden","navigationHeaderTextColor","menuToolbar","menuToolbarFull","menuToolbarNarrow","navigationHeaderText","Divider","menuList","menuItem","ListItem","disablePadding","selectedMenu","navigationSelectedBackground","navigationHideOnSelection","hideNavigationMenu","ListItemButton","ListItemIcon","navigationSelectedColor","DashboardIcon","transparent","listItemIconText","listItemText","listItemTextNarrow","popper","renderToolbar","_icon","navigationBar","navigationBarIcon","navigationBarImage","toolBar","toolBarWithClosedMenu","toolbarIcon","navigationBarText","setMenuWidth","rootHorizontal","viewContentWithToolbar","afterMenuHidden","navigationHideMenu","openMenuButton","openMenuButtonFull","openMenuButtonNarrow","openMenuButtonHidden","navigationNoHide","navigationButtonBackground","ChevronLeftIcon","openMenuButtonIconHidden","navigationChevronColor","afterMenu","afterMenuFull","afterMenuNarrow","viewContentWithoutToolbar","MENU_WIDTH_FULL","generateClassNameEngine","createGenerateClassName","productionPrefix","promiseToCollect","refRelativeView","refRelativeColumnsView","widgetsRefs","selectDiv","oldFilter","registerDone","nextClickIsSteal","loadingTheme","moveTimer","keysHandlerInstalled","_this$widgetsRefs","changeFilter","_this$widgetsRefs2","visProject","filterList","_this$widgetsRefs3","filterValues","_this$widgetsRefs4","_widgets","_widgets$data","onMouseWindowDown","_this$refView$current","contains","cancelStealMode","onStealStyle","_this$widgetsRefs5","mouseDownLocal","_this$refView$current2","onMouseViewMove","onMouseViewUp","moved","clientX","clientY","startX","pageX","startY","pageY","simpleMode","doubleClickOnView","Z_INDEXES","VIEW_SELECT_RECTANGLE","getWidgetsInRect","_this$movement$select","_this$widgetsRefs6","_this$widgetsRefs$id","_this$movement2","isResize","isDoubleClick","_this$refView$current3","_this$widgetsRefs$wid","disableInteraction","lockDragging","selectedWidget","onMouseWidgetMove","onMouseWidgetUp","_widgetsRefs$selected","_widgetsRefs$selected2","widgetRect","_widgetsRefs$selected3","_widgetsRefs$selected4","startWidget","_wid","_widgetsRefs$_wid","_widgetsRefs","ignore","_this$refView$current4","_store$getState$visPr","_store$getState$visPr3","_widgetsRefs$this$pro","_widgetsRefs$this$pro2","viewRect","snapType","_store$getState$visPr2","_this$movement$startW","_this$movement$startW2","gridSize","_this$movement$startW3","_this$movement$startW4","_this$movement$startW5","_this$movement$startW6","_widgetsRefs$widgetId","_widgetsRefs$widgetId2","widgetId","showRulers","_widgetsRefs$wid","_widgetsRefs$oWidget$","_widgetsRefs$widgetId3","_widgetsRefs$this$pro3","_widgetsRefs$this$pro4","_widgetsRefs$widgetId4","_widgetsRefs$widgetId5","_widgetsRefs$widgetId6","canHaveWidgets","baseRect","_this$refView$current5","rulers","verticals","horizontals","selectView","_this$widgetsRefs$wid2","grouped","_this$widgetsRefs$wid3","_this$widgetsRefs$wid4","boundingRect","selectedHorizontals","selectedVerticals","_this$widgetsRefs$wid5","_this$widgetsRefs$wid6","horizontal","selectedHorizontal","selectedVertical","_this$refView$current6","_this$movement3","_widgetsRefs$this$pro5","_widgetsRefs$this$pro6","_widgetsRefs$wid2","_widgetsRefs2","_widgetsRefs$widgetId7","_widgetsRefs$this$pro7","_widgetsRefs$this$pro8","_widgetsRefs$widgetId8","_widgetsRefs$widgetId9","askAboutInclude","toWid","_widgetsRefs$toWid","pxToPercent","clientLeft","clientTop","pRect","resultStyle","parseDimension","dimension","onPxToPercent","wRect","editWidgetsRect","onPercentToPx","moveWidgets","leftShift","topShift","_this$widgetsRefs$_wi","_this$widgetsRefs7","_widgetsRefs$wid3","_this$widgetsRefs$wid7","_this$widgetsRefs8","resizeWidgets","widthShift","heightShift","_this$widgetsRefs9","_this$widgetsRefs$_wi2","_widgetsRefs$wid4","_this$widgetsRefs$wid8","_this$widgetsRefs10","_document$activeEleme","activeElement","VisWidgetsCatalog","collectRxInformation","changeProject","loadedjQueryTheme","themeCode","updateViewWidth","registerViewRef","loadJqueryTheme","getJQueryThemeName","registerEditorHandlers","_this$refView$current7","unregisterViewRef","uninstallKeyHandlers","_this$widgetsRefs11","bars","filterChanged","_this$widgetsRefs12","_this$widgetsRefs$ref","_this$widgetsRefs$wid9","viewLeft","viewTop","unregister","registerEditorCallback","newFilter","renderGitter","bigWidth","smallWidth","gitterPattern","btoa","backgroundImage","backgroundPosition","_VisWidgetsCatalog$al","rxWidgets","allWidgetsList","jQueryTheme","themeCache","_view","resp","_store$getState$visPr4","installKeyHandlers","renderScreenSize","_store$getState$visPr5","_store$getState$visPr6","ww","hh","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","getRelativeStyle","limitScreenSize","relativeStyle","groupWidgetStyle","_settings$style","columnGap","getCountOfRelativeColumns","relativeWidgetsCount","columnWidth","columns","renderNavigation","_settings$style2","_this$props$customSet7","_this$props$customSet8","_this$props$customSet9","_this$props$customSet10","_store$getState$visPr7","rxGroupWidget","rxAbsoluteWidgets","rxRelativeWidgets","contextView","_this$props$viewsActi","_contextView$settings","_contextView$settings2","_widgets$this$props$s","_widgets$this$props$s2","_widgets$this$props$s3","relativeWidgets","absoluteWidgets","unknownWidgets","listRelativeWidgetsOrder","listAbsoluteWidgetsOrder","filterWidgets","filterInvert","hasWidgetAccess","activeUser","posA","posB","wColumns","_this$movement4","columnIndex","_this$movement5","column","_this$movement6","backgroundStyle","backgroundClass","background_class","_settings$style3","isBg","customThemeType","_this$props$customSet3","_this$props$customSet4","_this$props$customSet5","_this$props$customSet6","Theme","overrides","createTheme","gridDiv","_contextView$settings3","_contextView$settings4","snapColor","backgroundRepeat","backgroundPositionX","backgroundPositionY","backgroundSize","renderedWidgets","limitScreenStyle","limitScreen","screen","limitScreenDesktop","limitScreenBorderWidth","limitScreenBorderColor","limitScreenBorderStyle","bgColor","limitScreenBackgroundColor","renderedView","ruler","bgStyle","_lastAppliedStyle","removeAttribute","StylesProvider","generateClassName","StyledEngineProvider","injectFirst","ThemeProvider","WIDGET_SERVICE_DIV"],"sourceRoot":""}