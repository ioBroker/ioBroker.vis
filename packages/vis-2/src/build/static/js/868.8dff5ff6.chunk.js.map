{"version":3,"file":"static/js/868.8dff5ff6.chunk.js","mappings":"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","sources":["Store.tsx","Utils/utils.tsx","Vis/visLoadWidgets.tsx","Vis/visUtils.tsx","Vis/visWidgetsCatalog.tsx","Vis/visWords.tsx","Components/CustomAceEditor.jsx","Attributes/CSS.jsx","Attributes/Scripts.tsx","Attributes/ViewData.tsx","Attributes/View.tsx","Components/IODialog.jsx","Attributes/Widget/TextDialog.jsx","Attributes/Widget/WidgetField.jsx","Attributes/Widget/WidgetCSS.jsx","Attributes/Widget/WidgetJS.jsx","Vis/visFormatUtils.tsx","Attributes/Widget/WidgetBindingField.jsx","Attributes/Widget/index.jsx","Utils/usePrevious.tsx","Attributes/index.jsx","Components/WizardHelpers.jsx","Palette/Widget.jsx","Marketplace/MarketplacePalette.jsx","Palette/index.jsx","Toolbar/ViewsManager/Folder.jsx","Toolbar/ViewsManager/Root.jsx","Toolbar/ViewsManager/View.tsx","Toolbar/ViewsManager/ExportDialog.jsx","Utils.tsx","Toolbar/ViewsManager/ImportDialog.jsx","Toolbar/ViewsManager/FolderDialog.jsx","Toolbar/ViewsManager/index.jsx","Toolbar/MultiSelect.jsx","Toolbar/ToolbarItems.jsx","Toolbar/ViewsManager/ViewDialog.tsx","Toolbar/Views.jsx","Toolbar/WidgetImportDialog.tsx","Toolbar/WidgetExportDialog.jsx","Toolbar/WidgetFilterDialog.jsx","Toolbar/Widgets.jsx","Toolbar/Settings.jsx","Toolbar/ProjectsManager/ImportProjectDialog.jsx","Toolbar/ProjectsManager/ProjectDialog.jsx","Toolbar/ProjectsManager/PermissionsDialog.tsx","Toolbar/ProjectsManager/index.jsx","Toolbar/Projects.jsx","Toolbar/index.jsx","Components/CodeDialog.jsx","Components/CreateFirstProjectDialog.jsx","Components/IOContextMenu.tsx","Vis/visContextMenu.tsx","Vis/visEngine.jsx","Runtime.jsx","Marketplace/MarketplaceDialog.jsx","Editor.jsx","serviceWorker.jsx","theme.jsx","bootstrap.jsx"],"sourcesContent":["import {\n    createReducer, configureStore, createAction, createSelector,\n} from '@reduxjs/toolkit';\nimport type {\n    View, Project, AnyWidgetId, SingleWidgetId, SingleWidget, GroupWidget, GroupWidgetId,\n} from '@/types';\n\n/** This id is used by some special widgets to work with non-existing widgets */\nconst FAKE_ID = 'fakeId';\n\nexport const updateProject = createAction<Project>('project/update');\nexport const updateView = createAction<{ viewId: string; data: View }>('view/update');\nexport const updateWidget = createAction<{ viewId: string; widgetId: GroupWidgetId | SingleWidgetId | typeof FAKE_ID; data: SingleWidget }>('widget/update');\nexport const updateGroupWidget = createAction<{ viewId: string; widgetId: GroupWidgetId | typeof FAKE_ID; data: GroupWidget }>('group/update');\nexport const updateActiveUser = createAction<string>('activeUser/update');\nexport const recalculateFields = createAction<boolean>('attributes/recalculate');\n\nconst initialState = {\n    visProject: {} as Project,\n    /** If fields need to be recalculated on next render */\n    recalculateFields: false,\n    /** Logged in user */\n    activeUser: '',\n};\n\nconst reducer = createReducer(\n    initialState,\n    builder => {\n        builder\n            .addCase(updateProject, (state, action) => {\n                state.visProject = action.payload as Project;\n            })\n            .addCase(updateView, (state, action) => {\n                const { viewId, data } = action.payload;\n                state.visProject[viewId] = data;\n            })\n            .addCase(updateWidget, (state, action) => {\n                const { viewId, widgetId, data } = action.payload;\n                if (widgetId === FAKE_ID) {\n                    // Ignore it\n                    return;\n                }\n\n                if (!(viewId in state.visProject)) {\n                    console.error(`Cannot update widget \"${widgetId}\". The view \"${viewId}\" does not exist in the project.`);\n                    return;\n                }\n\n                state.visProject[viewId].widgets[widgetId as SingleWidgetId] = data;\n            })\n            .addCase(updateGroupWidget, (state, action) => {\n                const { viewId, widgetId, data } = action.payload;\n\n                if (widgetId === FAKE_ID) {\n                    // Ignore it\n                    return;\n                }\n\n                if (!(viewId in state.visProject)) {\n                    console.error(`Cannot update group widget \"${widgetId}\". The view \"${viewId}\" does not exist in the project.`);\n                    return;\n                }\n\n                state.visProject[viewId].widgets[widgetId] = data;\n            })\n            .addCase(updateActiveUser, (state, action) => {\n                state.activeUser = action.payload;\n            })\n            .addCase(recalculateFields, (state, action) => {\n                state.recalculateFields = action.payload;\n            });\n    },\n);\n\ntype StoreState = typeof initialState\n\nexport const selectProject = (state: StoreState) => state.visProject;\n\nexport const selectView = createSelector([\n    selectProject,\n    (_state: StoreState, viewName: string) => viewName,\n], (project, view) => project[view]);\n\nexport const selectWidget = createSelector([\n    selectView,\n    (_state: StoreState, _viewName: string, wid: AnyWidgetId) => wid,\n], (view, wid) => view.widgets[wid]);\n\nexport const store = configureStore({\n    reducer,\n});\n","/**\n * This file contains shared utils between edit and runtime\n */\nimport type { CSSProperties } from '@mui/styles';\nimport { store } from '@/Store';\nimport {\n    GroupWidget, Widget, Project, SingleWidget, SingleWidgetId, GroupWidgetId, AnyWidgetId, Permissions,\n} from '@/types';\n\n/** Default OID if no selected */\nexport const NOTHING_SELECTED = 'nothing_selected';\n\n/**\n * Adds an overflow visible attribute if no specific overflow is present,\n * else it deletes the general overflow, so the specific one can take effect\n *\n * @param style the style to modify\n */\nexport function calculateOverflow(style: CSSProperties): void {\n    if (!style.overflowX && !style.overflowY) {\n        style.overflow = 'visible';\n    } else if (style.overflow) {\n        delete style.overflow;\n    }\n}\n\n/**\n * Check, that given number is not Infinity or NaN\n *\n * @param numberOrString number or string to check\n */\nexport function isVarFinite(numberOrString: number | string | undefined): boolean {\n    // the difference between Number.isFinite and window.isFinite is that window.isFinite tries to convert the parameter to a number\n    // and Number.isFinite does not and just check against non NaN and non Infinity\n\n    // eslint-disable-next-line no-restricted-properties\n    return window.isFinite(numberOrString as number);\n}\n\n/**\n * Check if passed Widget is a group\n *\n * @param widget widget to check\n */\nexport function isGroup(widget: Widget): widget is GroupWidget {\n    return widget.tpl === '_tplGroup';\n}\n\n/**\n * Stringify-parse copy with type inference\n *\n * @param object The object which should be cloned\n */\nexport function deepClone<T extends Record<string, any>>(object: T): T {\n    return JSON.parse(JSON.stringify(object));\n}\n\n/**\n * Get next widgetId as a number\n *\n * @param isWidgetGroup if it is a group of widgets\n * @param project current project\n * @param offset offset if multiple widgets are created and not yet in project\n */\nexport function getNewWidgetIdNumber(isWidgetGroup: boolean, project: Project, offset = 0): number  {\n    const widgets: string[] = [];\n    project = project || store.getState().visProject;\n    Object.keys(project).forEach(view =>\n        project[view].widgets && Object.keys(project[view].widgets).forEach(widget =>\n            widgets.push(widget)));\n    let newKey = 1;\n    widgets.forEach(name => {\n        const matches = isWidgetGroup ? name.match(/^g([0-9]+)$/) : name.match(/^w([0-9]+)$/);\n        if (matches) {\n            const num = parseInt(matches[1], 10);\n            if (num >= newKey) {\n                newKey = num + 1;\n            }\n        }\n    });\n\n    return newKey + offset;\n}\n\n/**\n * Get new widget id from the project\n * @param project project to determine next widget id for\n * @param offset offset, if multiple widgets are created and not yet in the project\n */\nexport function getNewWidgetId(project: Project, offset = 0): SingleWidgetId {\n    const newKey = getNewWidgetIdNumber(false, project, offset);\n\n    return `w${(newKey).toString().padStart(6, '0')}`;\n}\n\n/**\n * Get new group id from the project\n * @param project project to determine next group id for\n * @param offset offset, if multiple groups are created and not yet in the project\n */\nexport function getNewGroupId(project: Project, offset = 0): GroupWidgetId {\n    const newKey = getNewWidgetIdNumber(true, project, offset);\n\n    return `g${newKey.toString().padStart(6, '0')}`;\n}\n\ninterface CopyWidgetOptions {\n    /** The widgets key, value object to copy the group to */\n    widgets: Record<string, Widget>;\n    /** The offset to use, if multiple groups are copied without saving */\n    offset?: number;\n    /** The project to calculate new widget ids from */\n    project: Project;\n}\n\ninterface CopySingleWidgetOptions extends CopyWidgetOptions {\n    /** The widget which should be copied */\n    widget: SingleWidget;\n    /** ID of the selected group if one is active */\n    selectedGroup?: GroupWidgetId;\n}\n\ninterface CopyGroupOptions extends CopyWidgetOptions {\n    /** The group which should be copied */\n    group: GroupWidget;\n    /** The group member widgets stored in the clipboard to paste from */\n    groupMembers: Record<string, Widget>;\n}\n\n/**\n * Paste a single widget into the given widgets key, value object\n * Returns the new widget id\n *\n * @param options selected group, widgets and offset information\n */\nexport function pasteSingleWidget(options: CopySingleWidgetOptions): string {\n    const  {\n        widgets, offset, project, widget, selectedGroup,\n    } = options;\n\n    const newKey = getNewWidgetId(project, offset);\n\n    if (selectedGroup && isGroup(widgets[selectedGroup])) {\n        widget.grouped = true;\n        widget.groupid = selectedGroup;\n        (widgets[selectedGroup] as GroupWidget).data.members.push(newKey);\n    }\n\n    widgets[newKey] = widget;\n\n    return newKey;\n}\n\n/**\n * Paste a group and all the members into the given widgets key, value object\n * Returns the new group id\n *\n * @param options group, widgets and offset information\n */\nexport function pasteGroup(options: CopyGroupOptions): string {\n    const  {\n        widgets, group, groupMembers, offset, project,\n    } = options;\n    const newGroupId = getNewGroupId(project, offset ?? 0);\n\n    for (let i = 0; i < group.data.members.length; i++) {\n        const wid = group.data.members[i];\n        const newMember = deepClone(groupMembers[wid]);\n\n        const newMemberId = getNewWidgetId(project, i);\n\n        newMember.groupid = newGroupId;\n        group.data.members[i] = newMemberId;\n        widgets[newMemberId] = newMember;\n    }\n\n    widgets[newGroupId] = group;\n\n    return newGroupId;\n}\n\n/**\n * Removes all special structures from the project\n *\n * @param project the project to remove special structures from\n */\nexport function unsyncMultipleWidgets(project: Project): Project {\n    project = deepClone(project || store.getState().visProject);\n    for (const  [viewName, view] of Object.entries(project)) {\n        if (viewName === '___settings') {\n            continue;\n        }\n\n        for (const widgetId of Object.keys(view.widgets)) {\n            if (widgetId.includes('_')) {\n                delete view.widgets[widgetId as AnyWidgetId];\n            }\n        }\n    }\n\n    return project;\n}\n\ninterface CheckAccessOptions {\n    /** The project the user wants to access */\n    project: Project;\n    /** The active user */\n    user: string;\n    /** True if running in edit mode */\n    editMode: boolean;\n}\n\n/** Default permissions if no given, user has full access */\nexport const DEFAULT_PERMISSIONS: Permissions = { read: true, write: true };\n\n/**\n * Check if the user has access to the project in given mode\n *\n * @param options project, user and mode information\n */\nexport function hasProjectAccess(options: CheckAccessOptions): boolean {\n    const { project, user, editMode } = options;\n\n    const permissions = project.___settings.permissions?.[user] ?? DEFAULT_PERMISSIONS;\n\n    if (editMode && permissions.write) {\n        return true;\n    }\n\n    return !editMode && permissions.read;\n}\n\ninterface CheckViewAccessOptions extends CheckAccessOptions{\n    /** Name of the view */\n    view: string;\n}\n\ninterface CheckWidgetAccessOptions extends CheckViewAccessOptions {\n    /** Widget ID */\n    wid: AnyWidgetId;\n}\n\n/**\n * Check if the user has access to the view in given mode\n *\n * @param options project, view, user and mode information\n */\nexport function hasViewAccess(options: CheckViewAccessOptions): boolean {\n    const {\n        project, user, editMode, view,\n    } = options;\n\n    const permissions = project[view]?.settings?.permissions?.[user] ?? DEFAULT_PERMISSIONS;\n\n    if (editMode && permissions.write) {\n        return true;\n    }\n\n    return !editMode && permissions.read;\n}\n\n/**\n * Check if the user has access to the widget in given mode\n *\n * @param options project, view, widget, user and mode information\n */\nexport function hasWidgetAccess(options: CheckWidgetAccessOptions): boolean {\n    const {\n        project, user, editMode, view, wid,\n    } = options;\n\n    const permissions = project[view]?.widgets[wid]?.permissions?.[user] ?? DEFAULT_PERMISSIONS;\n\n    if (editMode && permissions.write) {\n        return true;\n    }\n\n    return !editMode && permissions.read;\n}\n","/**\n *  ioBroker.vis\n *  https://github.com/ioBroker/ioBroker.vis\n *\n *  Copyright (c) 2024 Denis Haev https://github.com/GermanBluefox,\n *  Creative Common Attribution-NonCommercial (CC BY-NC)\n *\n *  http://creativecommons.org/licenses/by-nc/4.0/\n *\n * Short content:\n * Licensees may copy, distribute, display and perform the work and make derivative works based on it only if they give the author or licensor the credits in the manner specified by these.\n * Licensees may copy, distribute, display, and perform the work and make derivative works based on it only for noncommercial purposes.\n * (Free for non-commercial use).\n */\nimport { I18n, type LegacyConnection } from '@iobroker/adapter-react-v5';\nimport type VisRxWidget from '@/Vis/visRxWidget';\n\ntype WidgetSetName = string;\ntype PromiseName = `_promise_${WidgetSetName}`;\ndeclare global {\n    interface Window {\n        [promiseName: PromiseName]: Promise<any>;\n        [widgetSetName: WidgetSetName]: {\n            __initialized: boolean;\n            get: (module: string) => () => void;\n            init?: (shareScope: any) => Promise<void>;\n        };\n    }\n}\nconst getOrLoadRemote = (remote: string, shareScope: string | { default: any }, remoteFallbackUrl?: string): Promise<null> => {\n    window[`_promise_${remote}`] = window[`_promise_${remote}`] || new Promise((resolve, reject) => {\n        // check if remote exists on window\n        // search dom to see if remote tag exists, but might still be loading (async)\n        const existingRemote = document.querySelector(`[data-webpack=\"${remote}\"]`);\n        // when remote is loaded...\n        const onload = async () => {\n            // check if it was initialized\n            if (!window[remote]) {\n                if (remoteFallbackUrl && (remoteFallbackUrl.startsWith('http://') || remoteFallbackUrl.startsWith('https://'))) {\n                    console.error(`Cannot load remote from url \"${remoteFallbackUrl}\"`);\n                } else {\n                    reject(new Error(`Cannot load ${remote} from ${remoteFallbackUrl}`));\n                }\n                resolve(null);\n                return;\n            }\n            if (!window[remote].__initialized) {\n                // if share scope doesn't exist (like in webpack 4) then expect shareScope to be a manual object\n                // eslint-disable-next-line camelcase\n                // @ts-expect-error this is a trick\n                if (typeof __webpack_share_scopes__ === 'undefined' && window[remote].init) {\n                    // use the default share scope object, passed in manually\n                    // @ts-expect-error no idea why\n                    await window[remote].init((shareScope as { default: any })?.default);\n                } else if (window[remote].init) {\n                    // otherwise, init share scope as usual\n\n                    try {\n                        // eslint-disable-next-line camelcase, no-undef\n                        // @ts-expect-error this is a trick\n                        await window[remote].init(__webpack_share_scopes__[shareScope]);\n                    } catch (e) {\n                        console.error(`Cannot init remote \"${remote}\" with \"${shareScope}\"`);\n                        console.error(e);\n                        reject(new Error(`Cannot init remote \"${remote}\" with \"${shareScope}\"`));\n                        reject(e);\n                        return;\n                    }\n                } else {\n                    reject(new Error(`Remote init function not found for ${remote} from ${remoteFallbackUrl}`));\n                    return;\n                }\n                // mark remote as initialized\n                window[remote].__initialized = true;\n            }\n            // resolve promise so marking remote as loaded\n            resolve(null);\n        };\n        if (existingRemote) {\n            console.warn(`SOMEONE IS LOADING THE REMOTE ${remote}`);\n            // if existing remote but not loaded, hook into its onload and wait for it to be ready\n            // existingRemote.onload = onload;\n            // existingRemote.onerror = reject;\n            resolve(null);\n            // check if remote fallback exists as param passed to function\n            // TODO: should scan public config for a matching key if no override exists\n        } else if (remoteFallbackUrl) {\n            // inject remote if a fallback exists and call the same onload function\n            const d = document;\n            const script = d.createElement('script');\n            script.type = 'text/javascript';\n            // mark as data-webpack so runtime can track it internally\n            script.setAttribute('data-webpack', `${remote}`);\n            script.async = true;\n            script.onerror = () => {\n                if (!remoteFallbackUrl.includes('iobroker.net')) {\n                    reject(new Error(`Cannot load ${remote} from ${remoteFallbackUrl}`));\n                } else {\n                    resolve(null);\n                }\n            };\n            script.onload = onload;\n            script.src = remoteFallbackUrl;\n            d.getElementsByTagName('head')[0].appendChild(script);\n        } else {\n            // no remote and no fallback exist, reject\n            reject(new Error(`Cannot Find Remote ${remote} to inject`));\n        }\n    });\n\n    return window[`_promise_${remote}`];\n};\n\nexport const loadComponent = (remote: WidgetSetName, sharedScope: string, module: string, url: string): (() => any) =>\n    () => getOrLoadRemote(remote, sharedScope, url)\n        .then(() => window[remote] && window[remote].get(module))\n        .then(factory => factory && factory());\n\nfunction registerWidgetsLoadIndicator(cb: (process: number, max: number) => void) {\n    window.__widgetsLoadIndicator = cb;\n}\n\ninterface VisLoadComponentContext {\n    visWidgetsCollection: ioBroker.VisWidget;\n    countRef: { count: number; max: number };\n    dynamicWidgetInstance: ioBroker.InstanceObject;\n    i18nPrefix: string;\n    // List of custom React components\n    result: VisRxWidget<any>[];\n}\n\nfunction _loadComponentHelper(context: VisLoadComponentContext): Promise<void[]> {\n    // expected in context\n    // visWidgetsCollection\n    // countRef\n    // dynamicWidgetInstance\n    // i18nPrefix\n    // result\n    const promises: Promise<void>[] = [];\n\n    for (let i = 0; i < context.visWidgetsCollection.components.length; i++) {\n        ((index: number, _visWidgetsCollection) => {\n            context.countRef.max++;\n\n            const promise = loadComponent(_visWidgetsCollection.name, 'default', `./${_visWidgetsCollection.components[index]}`, _visWidgetsCollection.url)()\n                .then((CustomComponent: any) => {\n                    context.countRef.count++;\n\n                    if (CustomComponent.default) {\n                        CustomComponent.default.adapter = context.dynamicWidgetInstance._id.substring('system.adapter.'.length).replace(/\\.\\d*$/, '');\n                        CustomComponent.default.version = context.dynamicWidgetInstance.common.version;\n                        CustomComponent.default.url = _visWidgetsCollection.url;\n                        if (context.i18nPrefix) {\n                            CustomComponent.default.i18nPrefix = context.i18nPrefix;\n                        }\n                        context.result.push(CustomComponent.default);\n                    } else {\n                        console.error(`Cannot load widget ${context.dynamicWidgetInstance._id}. No default found`);\n                    }\n                    window.__widgetsLoadIndicator && window.__widgetsLoadIndicator(context.countRef.count, context.countRef.max);\n                })\n                .catch((e: any) => {\n                    console.error(`Cannot load widget ${context.dynamicWidgetInstance._id}: ${e.toString()}`);\n                    console.error(`Cannot load widget ${context.dynamicWidgetInstance._id}: ${JSON.stringify(e)}`);\n                });\n\n            promises.push(promise);\n        })(i, context.visWidgetsCollection);\n    }\n\n    return Promise.all(promises);\n}\n\nfunction getText(text: string | ioBroker.StringOrTranslated): string {\n    if (typeof text === 'object') {\n        return text[I18n.getLanguage()] || text.en || '';\n    }\n    return (text || '').toString();\n}\n\n/* Do not make this funktion async, because is optimized to simultaneously load the widget sets */\nfunction getRemoteWidgets(socket: LegacyConnection, onlyWidgetSets?: false | string[]): Promise<void | VisRxWidget<any>[]> {\n    return socket.getObjectViewSystem(\n        'instance',\n        'system.adapter.',\n        'system.adapter.\\u9999',\n    )\n        .then(objects => {\n            const result: VisRxWidget<any>[] = [];\n            const countRef = { count: 0, max: 0 };\n            const instances: ioBroker.InstanceObject[] = Object.values(objects as Record<string, ioBroker.InstanceObject>);\n            const dynamicWidgetInstances: ioBroker.InstanceObject[] = instances.filter(obj  => {\n                if (!(obj as ioBroker.InstanceObject).common.visWidgets) {\n                    return false;\n                }\n                const ignoreVersions: number[] = ((obj as ioBroker.InstanceObject).common.visWidgets as any).ignoreInVersions || [];\n                return !ignoreVersions.includes(2) &&\n                    (!onlyWidgetSets || onlyWidgetSets.includes(getText((obj as ioBroker.InstanceObject).common.name)));\n            });\n\n            const promises: Promise<void[] | void | null>[] = [];\n            for (let i = 0; i < dynamicWidgetInstances.length; i++) {\n                const dynamicWidgetInstance = dynamicWidgetInstances[i];\n                for (const widgetSetName in dynamicWidgetInstance.common.visWidgets) {\n                    // deprecated\n                    if (widgetSetName === 'i18n') {\n                        // ignore\n                        // find first widget set that is not i18n\n                        const _widgetSetName = Object.keys(dynamicWidgetInstance.common.visWidgets).find(name => name !== 'i18n');\n                        console.warn(`common.visWidgets.i18n is deprecated. Use common.visWidgets.${_widgetSetName}.i18n instead.`);\n                    } else {\n                        const visWidgetsCollection: ioBroker.VisWidget = dynamicWidgetInstance.common.visWidgets[widgetSetName];\n                        if (!visWidgetsCollection.url?.startsWith('http')) {\n                            visWidgetsCollection.url = `./widgets/${visWidgetsCollection.url}`;\n                        }\n                        if (visWidgetsCollection.components) {\n                            ((collection, instance) => {\n                                try {\n                                    let i18nPrefix = '';\n                                    let i18nPromiseWait: Promise<void | null> | undefined;\n\n                                    // 1. Load language file ------------------\n                                    // instance.common.visWidgets.i18n is deprecated\n                                    if (collection.url && collection.i18n === true) {\n                                        // load i18n from files\n                                        const pos = collection.url.lastIndexOf('/');\n                                        let i18nURL: string;\n                                        if (pos !== -1) {\n                                            i18nURL = collection.url.substring(0, pos);\n                                        } else {\n                                            i18nURL = collection.url;\n                                        }\n                                        const lang = I18n.getLanguage();\n\n                                        i18nPromiseWait = fetch(`${i18nURL}/i18n/${lang}.json`)\n                                            .then(data => data.json())\n                                            .then(json => {\n                                                countRef.count++;\n                                                I18n.extendTranslations(json, lang);\n                                                window.__widgetsLoadIndicator && window.__widgetsLoadIndicator(countRef.count, promises.length);\n                                            })\n                                            .catch(error => {\n                                                if (lang !== 'en') {\n                                                    // try to load English\n                                                    return fetch(`${i18nURL}/i18n/en.json`)\n                                                        .then(data => data.json())\n                                                        .then(json => {\n                                                            countRef.count++;\n                                                            I18n.extendTranslations(json, lang);\n                                                            window.__widgetsLoadIndicator && window.__widgetsLoadIndicator(countRef.count, promises.length);\n                                                        })\n                                                        .catch(_error => console.log(`Cannot load i18n \"${i18nURL}/i18n/${lang}.json\": ${_error}`));\n                                                }\n                                                console.log(`Cannot load i18n \"${i18nURL}/i18n/${lang}.json\": ${error}`);\n                                                return null;\n                                            });\n                                        promises.push(i18nPromiseWait);\n                                    } else if (collection.url && collection.i18n === 'component') {\n                                        // instance.common.visWidgets.i18n is deprecated\n                                        i18nPromiseWait = loadComponent(collection.name, 'default', './translations', collection.url)()\n                                            .then((translations: any) => {\n                                                countRef.count++;\n\n                                                // add automatic prefix to all translations\n                                                if (translations.default.prefix === true) {\n                                                    translations.default.prefix = `${instance.common.name}_`;\n                                                }\n                                                i18nPrefix = translations.default.prefix;\n\n                                                I18n.extendTranslations(translations.default);\n                                                window.__widgetsLoadIndicator && window.__widgetsLoadIndicator(countRef.count, promises.length);\n                                            })\n                                            .catch((error: string) =>\n                                                console.log(`Cannot load i18n \"${collection.name}\": ${error}`));\n                                    } else if (collection.i18n && typeof collection.i18n === 'object') {\n                                        try {\n                                            I18n.extendTranslations(collection.i18n);\n                                        } catch (error) {\n                                            console.error(`Cannot import i18n: ${error}`);\n                                        }\n                                    }\n\n                                    // 2. Load all components ------------------\n                                    if (collection.components) {\n                                        if (i18nPromiseWait) {\n                                            // we must wait for it as the flag i18nPrefix will be used in the component\n                                            promises.push(i18nPromiseWait\n                                                .then(() => _loadComponentHelper({\n                                                    visWidgetsCollection: collection,\n                                                    countRef,\n                                                    dynamicWidgetInstance: instance,\n                                                    i18nPrefix,\n                                                    result,\n                                                })));\n                                        } else {\n                                            // do not wait for languages\n                                            promises.push(_loadComponentHelper({\n                                                visWidgetsCollection: collection,\n                                                countRef,\n                                                dynamicWidgetInstance: instance,\n                                                i18nPrefix,\n                                                result,\n                                            }));\n                                        }\n                                    } else if (i18nPromiseWait) {\n                                        promises.push(i18nPromiseWait);\n                                    }\n                                } catch (e) {\n                                    console.error(e);\n                                }\n                            })(visWidgetsCollection, dynamicWidgetInstance);\n                        }\n                    }\n                }\n            }\n\n            return Promise.all(promises)\n                .then(() => result);\n        })\n        .catch(e => console.error('Cannot read instances', e));\n}\n\nexport {\n    getRemoteWidgets,\n    registerWidgetsLoadIndicator,\n};\n","/**\n *  ioBroker.vis\n *  https://github.com/ioBroker/ioBroker.vis\n *\n *  Copyright (c) 2022-2024 Denis Haev https://github.com/GermanBluefox,\n *  Creative Common Attribution-NonCommercial (CC BY-NC)\n *\n *  http://creativecommons.org/licenses/by-nc/4.0/\n *\n * Short content:\n * Licensees may copy, distribute, display and perform the work and make derivative works based on it only if they give the author or licensor the credits in the manner specified by these.\n * Licensees may copy, distribute, display, and perform the work and make derivative works based on it only for noncommercial purposes.\n * (Free for non-commercial use).\n */\nimport { type LegacyConnection } from '@iobroker/adapter-react-v5';\nimport {\n    Project,\n    AnyWidgetId,\n    GroupWidgetId,\n    VisStateUsage,\n    VisLinkContextBinding,\n    StateID, VisBindingOperation, VisBindingOperationArgument,\n    GroupData, WidgetData, VisBinding, VisBindingOperationType,\n    RxWidgetInfoAttributesFieldID,\n} from '@/types';\nimport { deepClone } from '@/Utils/utils';\nimport { store, updateView, updateWidget } from '@/Store';\n\ndeclare global {\n    interface Window {\n        __widgetsLoadIndicator: (process: number, max: number) => void;\n    }\n}\n\nfunction replaceGroupAttr(inputStr: string, groupAttrList: WidgetData): { doesMatch: boolean; newString: string } {\n    let newString = inputStr;\n    let match = false;\n    // old style: groupAttr0, groupAttr1, groupAttr2, ...\n    let ms = inputStr.match(/(groupAttr\\d+)+?/g);\n    if (ms) {\n        match = true;\n        ms.forEach(m => {\n            const val = groupAttrList[m];\n            if (val === null || val === undefined) {\n                newString = newString.replace(/groupAttr(\\d+)/, '');\n            } else {\n                newString = newString.replace(/groupAttr(\\d+)/, groupAttrList[m]);\n            }\n        });\n    }\n\n    // new style: %html%, %myAttr%, ...\n    ms = inputStr.match(/%([-_a-zA-Z\\d]+)+?%/g);\n    if (ms) {\n        match = true;\n        ms.forEach((m: string) => {\n            const attr = m.substring(1, m.length - 1);\n            const val = groupAttrList[attr];\n            if (val === null || val === undefined) {\n                newString = newString.replace(m, '');\n            } else {\n                newString = newString.replace(m, val);\n            }\n        });\n    }\n\n    return { doesMatch: match, newString };\n}\n\nfunction getWidgetGroup(views: Project, view: string, widget: AnyWidgetId): GroupWidgetId | undefined {\n    const widgets = views[view].widgets;\n    const groupId: GroupWidgetId | undefined = widgets[widget]?.groupid;\n    if (groupId && widgets[groupId]) {\n        return views[view].widgets[widget].groupid;\n    }\n    const widgetKeys: AnyWidgetId[] = Object.keys(widgets) as AnyWidgetId[];\n    return widgetKeys.find(w => widgets[w].data?.members?.includes(widget)) as GroupWidgetId;\n}\n\n/**\n * Determine if the string is of form identifier:ioBrokerId, like, val:hm-rpc.0.device.channel.state\n */\nfunction isIdBinding(\n    /** the possible assignment to check */\n    assignment: string,\n): boolean {\n    return !!assignment.match(/^[\\d\\w_]+:\\s?[-.\\d\\w_#]+$/);\n}\n\nfunction extractBinding(format: string): VisBinding[] | null {\n    const oid = format.match(/{(.+?)}/g);\n    let result: VisBinding[] | null = null;\n\n    if (oid) {\n        if (oid.length > 50) {\n            console.warn(`Too many bindings in one widget: ${oid.length}[max = 50]`);\n        }\n\n        for (let p = 0; p < oid.length && p < 50; p++) {\n            const _oid = oid[p].substring(1, oid[p].length - 1);\n            if (_oid[0] === '{') {\n                continue;\n            }\n            // If the first symbol is '\"' => it is JSON\n            if (_oid && _oid[0] === '\"') {\n                continue;\n            }\n            const parts = _oid.split(';');\n            result = result || [];\n            let systemOid = parts[0].trim();\n            let visOid = systemOid;\n\n            let test1 = visOid.substring(visOid.length - 4).trim();\n            let test2 = visOid.substring(visOid.length - 3).trim();\n\n            if (visOid && test1 !== '.val' && test2 !== '.ts' && test2 !== '.lc' && test1 !== '.ack') {\n                visOid += '.val';\n            }\n\n            const isSeconds = test2 === '.ts' || test2 === '.lc';\n\n            test1 = systemOid.substring(systemOid.length - 4);\n            test2 = systemOid.substring(systemOid.length - 3);\n\n            if (test1 === '.val' || test1 === '.ack') {\n                systemOid = systemOid.substring(0, systemOid.length - 4);\n            } else if (test2 === '.lc' || test2 === '.ts') {\n                systemOid = systemOid.substring(0, systemOid.length - 3);\n            }\n            let operations: VisBindingOperation[] | null = null;\n            const isEval = visOid.match(/^[\\d\\w_]+:\\s?[-._/ :!#$%&()+=@^{}|~\\p{Ll}\\p{Lu}\\p{Nd}]+$/u) || (!visOid.length && parts.length > 0); // (visOid.indexOf(':') !== -1) && (visOid.indexOf('::') === -1);\n\n            if (isEval) {\n                const xx = visOid.split(':', 2);\n                const yy = systemOid.split(':', 2);\n                visOid = xx[1].trim();\n                systemOid = yy[1].trim();\n                operations = [];\n                operations.push({\n                    op: 'eval',\n                    arg: [{\n                        name: xx[0],\n                        visOid,\n                        systemOid,\n                    }],\n                });\n\n                for (let u = 1; u < parts.length; u++) {\n                    // eval construction\n                    const trimmed = parts[u].trim();\n                    if (isIdBinding(trimmed)) { // parts[u].indexOf(':') !== -1 && parts[u].indexOf('::') === -1) {\n                        const argParts = trimmed.split(':', 2);\n                        let _visOid = argParts[1].trim();\n                        let _systemOid = _visOid;\n\n                        test1 = _visOid.substring(_visOid.length - 4);\n                        test2 = _visOid.substring(_visOid.length - 3);\n\n                        if (test1 !== '.val' && test2 !== '.ts' && test2 !== '.lc' && test1 !== '.ack') {\n                            _visOid += '.val';\n                        }\n\n                        test1 = _systemOid.substring(_systemOid.length - 4);\n\n                        if (test1 === '.val' || test1 === '.ack') {\n                            _systemOid = _systemOid.substring(0, _systemOid.length - 4);\n                        } else {\n                            test2 = _systemOid.substring(_systemOid.length - 3);\n                            if (test2 === '.lc' || test2 === '.ts') {\n                                _systemOid = _systemOid.substring(0, _systemOid.length - 3);\n                            }\n                        }\n\n                        (operations[0].arg as VisBindingOperationArgument[])?.push({\n                            name: argParts[0].trim(),\n                            visOid: _visOid,\n                            systemOid: _systemOid,\n                        });\n                    } else {\n                        parts[u] = parts[u].replace(/::/g, ':');\n                        if (operations[0].formula) {\n                            const n = deepClone(operations[0]);\n                            n.formula = parts[u];\n                            operations.push(n);\n                        } else {\n                            operations[0].formula = parts[u];\n                        }\n                    }\n                }\n            } else {\n                for (let u = 1; u < parts.length; u++) {\n                    const parse = parts[u].match(/([\\w\\s/+*-]+)(\\(.+\\))?/);\n                    if (parse && parse[1]) {\n                        const op = parse[1].trim();\n                        // operators requires parameter\n                        if (op === '*' ||\n                            op === '+' ||\n                            op === '-' ||\n                            op === '/' ||\n                            op === '%' ||\n                            op === 'min' ||\n                            op === 'max'\n                        ) {\n                            if (parse[2] === undefined) {\n                                console.log(`Invalid format of format string: ${format}`);\n                            } else {\n                                // try to extract number\n                                let argStr: string = (parse[2] || '').trim().replace(',', '.');\n                                argStr = argStr.substring(1, argStr.length - 1).trim();\n                                const arg: number = parseFloat(argStr);\n\n                                if (arg.toString() === 'NaN') {\n                                    console.log(`Invalid format of format string: ${format}`);\n                                } else {\n                                    operations = operations || [];\n                                    operations.push({ op, arg });\n                                }\n                            }\n                        } else if (op === 'date' || op === 'momentDate') {\n                            // date formatting\n                            operations = operations || [];\n                            let arg: string = (parse[2] || '').trim();\n                            // Remove braces from {momentDate(format)}\n                            arg = arg.substring(1, arg.length - 1);\n                            operations.push({ op, arg });\n                        } else if (op === 'array') {\n                            // returns array[value]. e.g.: {id.ack;array(ack is false,ack is true)}\n                            operations = operations || [];\n                            let param: string = (parse[2] || '').trim();\n                            param = param.substring(1, param.length - 1);\n                            operations.push({ op, arg: param.split(',') }); // xxx\n                        } else if (op === 'value') {\n                            // value formatting\n                            operations = operations || [];\n                            let arg: string = parse[2] === undefined ? '(2)' : (parse[2] || '');\n                            arg = arg.trim();\n                            arg = arg.substring(1, arg.length - 1);\n                            operations.push({ op, arg });\n                        } else if (op === 'pow' || op === 'round' || op === 'random') {\n                            // operators have optional parameter\n                            if (parse[2] === undefined) {\n                                operations = operations || [];\n                                operations.push({ op });\n                            } else {\n                                let argStr: string = (parse[2] || '').trim().replace(',', '.');\n                                argStr = argStr.substring(1, argStr.length - 1);\n                                const arg = parseFloat(argStr.trim());\n\n                                if (arg.toString() === 'NaN') {\n                                    console.log(`Invalid format of format string: ${format}`);\n                                } else {\n                                    operations = operations || [];\n                                    operations.push({ op, arg });\n                                }\n                            }\n                        } else if (op === 'json') {\n                            // json(objPropPath)  ex: json(prop1);  json(prop1.propA)\n                            operations = operations || [];\n                            let arg = (parse[2] || '').trim();\n                            arg = arg.substring(1, arg.length - 1);\n                            operations.push({ op, arg });\n                        } else {\n                            // operators without parameter\n                            operations = operations || [];\n                            operations.push({ op: op as VisBindingOperationType });\n                        }\n                    } else {\n                        console.log(`Invalid format ${format}`);\n                    }\n                }\n            }\n\n            result.push({\n                visOid,\n                systemOid,\n                token: oid[p],\n                operations: operations || undefined,\n                format,\n                isSeconds,\n            });\n        }\n    }\n\n    return result;\n}\n\n// outputs: {\n//    IDs: [],       //\n//    bindings: {},  //\n//    views: {},     //\n//    visibility: {} //\n//    signals: {}    //\n// }\nfunction getUsedObjectIDsInWidget(views: Project, view: string, wid: AnyWidgetId, linkContext: VisStateUsage) {\n    // Check all attributes\n    const widget = deepClone(views[view].widgets[wid]);\n\n    // fix error in naming\n    if (widget.groupped) {\n        widget.grouped = true;\n        delete widget.groupped;\n    }\n\n    // rename hqWidgets => hqwidgets\n    if (widget.widgetSet === 'hqWidgets') {\n        widget.widgetSet = 'hqwidgets';\n    }\n\n    // rename RGraph => rgraph\n    if (widget.widgetSet === 'RGraph') {\n        widget.widgetSet = 'rgraph';\n    }\n\n    // rename timeAndWeather => timeandweather\n    if (widget.widgetSet === 'timeAndWeather') {\n        widget.widgetSet = 'timeandweather';\n    }\n\n    // convert \"Show on Value\" to HTML\n    if (widget.tpl === 'tplShowValue') {\n        widget.tpl = 'tplHtml';\n        widget.data['visibility-oid'] = widget.data.oid;\n        widget.data['visibility-val'] = widget.data.value;\n        delete widget.data.oid;\n        delete widget.data.value;\n    }\n\n    // convert \"Hide on >0/True\" to HTML\n    if (widget.tpl === 'tplHideTrue') {\n        widget.tpl = 'tplHtml';\n        widget.data['visibility-cond'] = '!=';\n        widget.data['visibility-oid'] = widget.data.oid;\n        widget.data['visibility-val'] = true;\n        delete widget.data.oid;\n    }\n\n    // convert \"Hide on 0/False\" to HTML\n    if (widget.tpl === 'tplHide') {\n        widget.tpl = 'tplHtml';\n        widget.data['visibility-cond'] = '!=';\n        widget.data['visibility-oid'] = widget.data.oid;\n        widget.data['visibility-val'] = false;\n        delete widget.data.oid;\n    }\n\n    // convert \"Door/Window sensor\" to HTML\n    if (widget.tpl === 'tplHmWindow') {\n        widget.tpl = 'tplValueBool';\n        widget.data.html_false = widget.data.html_closed;\n        widget.data.html_true = widget.data.html_open;\n        delete widget.data.html_closed;\n        delete widget.data.html_open;\n    }\n\n    // convert \"Door/Window sensor\" to HTML\n    if (widget.tpl === 'tplHmWindowRotary') {\n        widget.tpl = 'tplValueListHtml8';\n        widget.data.count = 2;\n        widget.data.value0 = widget.data.html_closed;\n        widget.data.value1 = widget.data.html_open;\n        widget.data.value2 = widget.data.html_tilt;\n        delete widget.data.html_closed;\n        delete widget.data.html_open;\n        delete widget.data.html_tilt;\n    }\n\n    // convert \"tplBulbOnOff\" to tplBulbOnOffCtrl\n    if (widget.tpl === 'tplBulbOnOff') {\n        widget.tpl = 'tplBulbOnOffCtrl';\n        widget.data.readOnly = true;\n    }\n\n    // convert \"tplValueFloatBarVertical\" to tplValueFloatBar\n    if (widget.tpl === 'tplValueFloatBarVertical') {\n        widget.tpl = 'tplValueFloatBar';\n        widget.data.orientation = 'vertical';\n    }\n\n    let { data } = widget;\n    const { style } = widget;\n\n    // if widget is in the group => replace groupAttrX values\n    if (widget.grouped) {\n        // if groupid is not defined => fix it and find it\n        if (!widget.groupid) {\n            store.dispatch(updateWidget({\n                viewId: view,\n                widgetId: wid,\n                data: { ...widget, groupid: getWidgetGroup(views, view, wid) },\n            }));\n        }\n\n        // If the group, to which the widget belongs to does not exist, fix it\n        if (widget.groupid && !store.getState().visProject[view].widgets[widget.groupid]) {\n            store.dispatch(updateWidget({ viewId: view, widgetId: wid, data: { ...widget, groupid: getWidgetGroup(views, view, wid) } }));\n\n            if (!widget.groupid) {\n                // create a fictive group\n                let groupNum = 1;\n                let gId: GroupWidgetId = `g${groupNum.toString().padStart(5, '0')}`;\n                while (views[view].widgets[gId]) {\n                    groupNum++;\n                    gId = `g${groupNum.toString().padStart(5, '0')}`;\n                }\n\n                const currView = deepClone(views[view]);\n\n                currView.widgets[gId] = {\n                    tpl: '_tplGroup',\n                    data: {\n                        members: [wid],\n                    },\n                    style: {\n                        top: '100px',\n                        left: '100px',\n                        width: '200px',\n                        height: '200px',\n                    },\n                    widgetSet: null,\n                };\n\n                store.dispatch(updateView({ viewId: view, data: currView }));\n            }\n        }\n\n        if (widget.groupid) {\n            const parentWidgetData = views[view].widgets[widget.groupid]?.data;\n            if (parentWidgetData) {\n                let newGroupData: GroupData | undefined;\n\n                Object.keys(data).forEach(attr => {\n                    if (typeof data[attr] === 'string') {\n                        const result = replaceGroupAttr(data[attr], parentWidgetData);\n                        if (result.doesMatch) {\n                            newGroupData = newGroupData || (deepClone(data) as GroupData);\n                            newGroupData[attr] = result.newString || '';\n                        }\n                    }\n                });\n                if (newGroupData) {\n                    data = newGroupData;\n                }\n            } else {\n                console.error(`Invalid group id \"${widget.groupid}\" in widget \"${wid}\"`);\n            }\n        }\n    }\n\n    Object.keys(data || {}).forEach(attr => {\n        if (!attr) {\n            return;\n        }\n\n        if (typeof data[attr] === 'string') {\n            let m;\n            // Process bindings in data attributes\n            const OIDs: VisLinkContextBinding[] = extractBinding(data[attr]) as VisLinkContextBinding[];\n\n            if (OIDs) {\n                OIDs.forEach(item => {\n                    const systemOid: StateID = item.systemOid;\n                    if (systemOid) {\n                        // Save id for subscribing\n                        !linkContext.IDs.includes(systemOid) && linkContext.IDs.push(systemOid);\n\n                        if (linkContext.byViews && !linkContext.byViews[view].includes(systemOid)) {\n                            linkContext.byViews[view].push(systemOid);\n                        }\n\n                        linkContext.bindings[systemOid] = linkContext.bindings[systemOid] || [];\n                        item.type = 'data';\n                        item.attr = attr;\n                        item.view = view;\n                        item.widget = wid;\n\n                        linkContext.bindings[systemOid].push(item);\n                    }\n                    const operation0: VisBindingOperation | undefined = item.operations && item.operations[0];\n\n                    // If we have more than one argument\n                    if (operation0 && Array.isArray(operation0.arg)) {\n                        for (let ww = 0; ww < operation0.arg.length; ww++) {\n                            const arg: VisBindingOperationArgument = operation0.arg[ww] as VisBindingOperationArgument;\n                            const _systemOid = arg.systemOid;\n                            if (!_systemOid) {\n                                continue;\n                            }\n\n                            !linkContext.IDs.includes(_systemOid) && linkContext.IDs.push(_systemOid);\n\n                            if (linkContext.byViews && !linkContext.byViews[view].includes(_systemOid)) {\n                                linkContext.byViews[view].push(_systemOid);\n                            }\n\n                            linkContext.bindings[_systemOid] = linkContext.bindings[_systemOid] || [];\n                            if (!linkContext.bindings[_systemOid].includes(item)) {\n                                linkContext.bindings[_systemOid].push(item);\n                            }\n                        }\n                    }\n                });\n            } else if (attr !== 'oidTrueValue' && attr !== 'oidFalseValue' && data[attr] && data[attr] !== 'nothing_selected') {\n                let isID = !!attr.match(/oid\\d{0,2}$/);\n                if (attr.startsWith('oid')) {\n                    isID = true;\n                } else if (attr.startsWith('signals-oid-')) {\n                    isID = true;\n                } else if (linkContext.widgetAttrInfo) {\n                    const _attr = attr.replace(/\\d{0,2}$/, '');\n                    if ((linkContext.widgetAttrInfo[_attr] as RxWidgetInfoAttributesFieldID)?.type === 'id' && (linkContext.widgetAttrInfo[_attr] as RxWidgetInfoAttributesFieldID).noSubscribe !== true) {\n                        isID = true;\n                    }\n                }\n\n                if (isID) {\n                    if (!data[attr].startsWith('\"')) {\n                        if (!linkContext.IDs.includes(data[attr])) {\n                            linkContext.IDs.push(data[attr]);\n                        }\n                        if (linkContext.byViews && !linkContext.byViews[view].includes(data[attr])) {\n                            linkContext.byViews[view].push(data[attr]);\n                        }\n                    }\n\n                    // Visibility binding\n                    if (attr === 'visibility-oid') {\n                        let vid = data['visibility-oid'];\n\n                        if (widget.grouped) {\n                            const vGroup = getWidgetGroup(views, view, wid);\n                            if (vGroup) {\n                                if (views[view].widgets[vGroup]) {\n                                    const result1 = replaceGroupAttr(vid, views[view].widgets[vGroup].data);\n                                    if (result1.doesMatch) {\n                                        vid = result1.newString;\n                                    }\n                                } else {\n                                    console.warn(`Invalid group: ${vGroup} in ${view} / ${wid}`);\n                                }\n                            }\n                        }\n\n                        linkContext.visibility[vid] = linkContext.visibility[vid] || [];\n                        linkContext.visibility[vid].push({ view, widget: wid });\n                    } else if (attr.startsWith('signals-oid-')) {\n                        // Signal binding\n                        let sid = data[attr];\n                        if (widget.grouped) {\n                            const group = getWidgetGroup(views, view, wid);\n                            if (group) {\n                                const result2 = replaceGroupAttr(sid, views[view].widgets[group].data);\n                                if (result2.doesMatch) {\n                                    sid = result2.newString;\n                                }\n                            }\n                        }\n\n                        linkContext.signals[sid] = linkContext.signals[sid] || [];\n\n                        linkContext.signals[sid].push({\n                            view,\n                            widget: wid,\n                            index: parseInt(attr.substring(12), 10), // 'signals-oid-'.length = 12\n                        });\n                    } else if (attr === 'lc-oid') {\n                        let lcSid = data[attr];\n\n                        if (widget.grouped) {\n                            const gGroup = getWidgetGroup(views, view, wid);\n                            if (gGroup) {\n                                const result3 = replaceGroupAttr(lcSid, views[view].widgets[gGroup].data);\n                                if (result3.doesMatch) {\n                                    lcSid = result3.newString;\n                                }\n                            }\n                        }\n\n                        linkContext.lastChanges[lcSid] = linkContext.lastChanges[lcSid] || [];\n                        linkContext.lastChanges[lcSid].push({ view, widget: wid });\n                    }\n                } else if (data[attr] === 'id') {\n                    m = attr.match(/^attrType(\\d+)$/);\n                    if (m) {\n                        const _id = `groupAttr${m[1]}`;\n                        if (data[_id]) {\n                            if (!linkContext.IDs.includes(data[_id])) {\n                                linkContext.IDs.push(data[_id]);\n                            }\n                            if (linkContext.byViews && !linkContext.byViews[view].includes(data[_id])) {\n                                linkContext.byViews[view].push(data[_id]);\n                            }\n                        }\n                    }\n                }\n            }\n        }\n    });\n\n    // build bindings for styles\n    if (style) {\n        Object.keys(style).forEach(cssAttr => {\n            const styleValue = (style as Record<string, any>)[cssAttr];\n            if (cssAttr && styleValue && typeof styleValue === 'string') {\n                const OIDs: VisLinkContextBinding[] = extractBinding(styleValue) as VisLinkContextBinding[];\n                if (OIDs) {\n                    OIDs.forEach(item => {\n                        const systemOid = item.systemOid;\n                        if (systemOid) {\n                            !linkContext.IDs.includes(systemOid) && linkContext.IDs.push(systemOid);\n                            if (linkContext.byViews && linkContext.byViews[view].includes(systemOid)) {\n                                linkContext.byViews[view].push(systemOid);\n                            }\n\n                            linkContext.bindings[systemOid] = linkContext.bindings[systemOid] || [];\n\n                            item.type = 'style';\n                            item.attr = cssAttr;\n                            item.view = view;\n                            item.widget = wid;\n\n                            linkContext.bindings[systemOid].push(item);\n                        }\n\n                        const operation0: VisBindingOperation | undefined = item.operations && item.operations[0];\n\n                        if (operation0 && Array.isArray(operation0.arg)) {\n                            for (let w = 0; w < operation0.arg.length; w++) {\n                                const arg: VisBindingOperationArgument = operation0.arg[w] as VisBindingOperationArgument;\n                                const _systemOid = arg.systemOid;\n                                if (!_systemOid) {\n                                    continue;\n                                }\n\n                                !linkContext.IDs.includes(_systemOid) && linkContext.IDs.push(_systemOid);\n\n                                if (linkContext.byViews && !linkContext.byViews[view].includes(_systemOid)) {\n                                    linkContext.byViews[view].push(_systemOid);\n                                }\n                                linkContext.bindings[_systemOid] = linkContext.bindings[_systemOid] || [];\n                                if (!linkContext.bindings[_systemOid].includes) {\n                                    linkContext.bindings[_systemOid].push(item);\n                                }\n                            }\n                        }\n                    });\n                }\n            }\n        });\n    }\n\n    // as we are fixing the widget in this method, write it back to store\n    store.dispatch(updateWidget({ viewId: view, widgetId: wid, data: widget }));\n}\n\nfunction getUsedObjectIDs(views: Project, isByViews?: boolean): VisStateUsage | null {\n    if (!views) {\n        console.log('Check why views are not yet loaded!');\n        return null;\n    }\n\n    const linkContext: VisStateUsage = {\n        IDs: [],\n        visibility: {},\n        bindings: {},\n        lastChanges: {},\n        signals: {},\n    };\n\n    if (isByViews) {\n        linkContext.byViews = {};\n    }\n\n    Object.keys(views).forEach(view => {\n        if (view === '___settings') {\n            return;\n        }\n\n        if (linkContext.byViews) {\n            linkContext.byViews[view] = [];\n        }\n\n        Object.keys(views[view].widgets).forEach(wid => getUsedObjectIDsInWidget(views, view, wid as AnyWidgetId, linkContext));\n    });\n\n    if (isByViews) {\n        let changed;\n        do {\n            changed = false;\n            // Check containers\n            // eslint-disable-next-line no-loop-func\n            Object.keys(views).forEach(view => {\n                if (view === '___settings') {\n                    return;\n                }\n\n                Object.values(views[view].widgets).forEach(widget => {\n                    // Add all OIDs from this view to parent\n                    if (widget.tpl === 'tplContainerView' && widget.data.contains_view && linkContext.byViews) {\n                        const ids = linkContext.byViews[widget.data.contains_view];\n                        if (ids) {\n                            for (const id of ids) {\n                                if (id && !linkContext.byViews[view].includes(id)) {\n                                    linkContext.byViews[view].push(id);\n                                    changed = true;\n                                }\n                            }\n                        } else {\n                            console.warn(`View does not exist: \"${widget.data.contains_view}\"`);\n                        }\n                    }\n                });\n            });\n        } while (changed);\n    }\n\n    return linkContext;\n}\n\nfunction getUrlParameter(attr: string): string | true {\n    const sURLVariables = window.location.search.substring(1).split('&');\n\n    for (let i = 0; i < sURLVariables.length; i++) {\n        const sParameterName = sURLVariables[i].split('=');\n\n        if (sParameterName[0] === attr) {\n            return typeof sParameterName[1] === 'undefined' ? true : decodeURIComponent(sParameterName[1]);\n        }\n    }\n\n    return '';\n}\n\nasync function readFile(socket: LegacyConnection, id: string, fileName: string, withType?: boolean): Promise<string | { file: string; mimeType: string }> {\n    const file = await socket.readFile(id, fileName);\n    let mimeType = '';\n    let data = '';\n    if (typeof file === 'object') {\n        if (withType) {\n            // @ts-expect-error LegacyConnection delivers file.mimeType\n            mimeType = file.mimeType ? file.mimeType : (file.type ? file.type : '');\n        }\n        // @ts-expect-error LegacyConnection delivers file.data\n        data = file.file || file.data;\n    } else {\n        data = file;\n    }\n    if (withType) {\n        return { file: data, mimeType };\n    }\n    return data;\n}\n\nfunction addClass(actualClass: string, toAdd: string | undefined): string {\n    if (actualClass) {\n        const parts = actualClass.split(' ').map(cl => cl.trim()).filter(cl => cl);\n        if (toAdd && !parts.includes(toAdd)) {\n            parts.push(toAdd);\n        }\n        return parts.join(' ');\n    }\n\n    return toAdd || '';\n}\n\nfunction removeClass(actualClass: string, toRemove: string): string {\n    if (actualClass) {\n        const parts = actualClass.split(' ').map(cl => cl.trim()).filter(cl => cl);\n        const pos = parts.indexOf(toRemove);\n        if (pos !== -1) {\n            parts.splice(pos, 1);\n        }\n        return parts.join(' ');\n    }\n\n    return '';\n}\n\nfunction parseDimension(field: string | number | null | undefined): { value: number; dimension: string } {\n    const result = { value: 0, dimension: 'px' };\n    if (!field) {\n        return result;\n    }\n    const match = field.toString().match(/^([0-9-.]+)([a-z%]*)$/);\n    if (!match) {\n        return result;\n    }\n    result.value = parseInt(match[1]);\n    result.dimension = match[2] || 'px';\n    return result;\n}\n\nfunction findWidgetUsages(\n    views: Project,\n    view: string,\n    widgetId: AnyWidgetId,\n    _result: { view: string; wid: AnyWidgetId; attr: string }[],\n): { view: string; wid: AnyWidgetId; attr: string }[] {\n    if (view) {\n        _result = _result || [];\n        // search in specific view\n\n        Object.keys(views[view].widgets).forEach(wid => {\n            if (wid === widgetId) {\n                return;\n            }\n            const oWidget = views[view].widgets[wid as AnyWidgetId];\n            const attrs = Object.keys(oWidget.data);\n            attrs.forEach(attr => {\n                if (attr.startsWith('widget') && oWidget.data[attr] === widgetId) {\n                    _result.push({ view, wid: wid as AnyWidgetId, attr });\n                }\n            });\n        });\n        return _result;\n    }\n\n    // search in all views\n    const result: { view: string; wid: AnyWidgetId; attr: string }[] = [];\n    Object.keys(views).forEach(_view => _view !== '___settings' && findWidgetUsages(views, _view, widgetId, _result));\n    return result;\n}\n\nexport {\n    getUsedObjectIDs,\n    extractBinding,\n    getWidgetGroup,\n    replaceGroupAttr,\n    getUsedObjectIDsInWidget,\n    getUrlParameter,\n    parseDimension,\n    addClass,\n    removeClass,\n    readFile,\n    findWidgetUsages,\n};\n","import React from 'react';\n\nimport { type LegacyConnection } from '@iobroker/adapter-react-v5';\nimport {\n    GroupWidgetId,\n    Project,\n    RxWidgetInfoGroup,\n    SingleWidgetId,\n    CustomPaletteProperties,\n    RxWidgetInfoAttributesField, RxWidgetAttributeType,\n    WidgetData,\n    RxWidgetInfoCustomComponentProperties,\n} from '@/types';\nimport VisRxWidget from '@/Vis/visRxWidget';\n\nimport { getRemoteWidgets } from './visLoadWidgets';\n// eslint-disable-next-line import/no-cycle\nimport WIDGETS from './Widgets';\n\nconst DEFAULT_SET_COLORS: Record<string, string> = {\n    basic: '#f1f1f1',\n    bars: '#f6594e',\n    dwd: '#cb8928',\n    echarts: '#98B1C0',\n    eventlist: '#c52699',\n    hqwidgets: '#005067',\n    jqplot: '#00e753',\n    jqui: '#008be0',\n    metro: '#9f8ad8',\n    swipe: '#858585',\n    tabs: '#00d5a3',\n    'spotify-premium': '#00ae03',\n};\n\ntype RxWidgetInfoAttributesFieldAll = {\n    /** Field type */\n    type?: RxWidgetAttributeType;\n    /** Field default value */\n    default?: string | number | boolean;\n    /** if true, no edit button will be shown. Default is true. */\n    readonly noButton?: boolean;\n    /** if true, the text will not be translated  */\n    readonly noTranslation?: boolean;\n    /** this style will be applied to the text */\n    readonly style?: React.CSSProperties;\n    /** show multi-line editor */\n    readonly multiline?: boolean;\n    /** Do not write 'nothing_selected' into the field by creation */\n    readonly noInit?: boolean;\n    /** Do not subscribe on changes of the object */\n    readonly noSubscribe?: boolean;\n    /** Filter of objects (not JSON string, it is an object), like:\n     - `{common: {custom: true}}` - show only objects with some custom settings\n     - `{common: {custom: 'sql.0'}}` - show only objects with sql.0 custom settings (only of the specific instance)\n     - `{common: {custom: '_dataSources'}}` - show only objects of adapters `influxdb' or 'sql' or 'history'\n     - `{common: {custom: 'adapterName.'}}` - show only objects of the custom settings for specific adapter (all instances)\n     - `{type: 'channel'}` - show only channels\n     - `{type: ['channel', 'device']}` - show only channels and devices\n     - `{common: {type: 'number'}` - show only states of type 'number\n     - `{common: {type: ['number', 'string']}` - show only states of type 'number and string\n     - `{common: {role: 'switch']}` - show only states with roles starting from switch\n     - `{common: {role: ['switch', 'button]}` - show only states with roles starting from `switch` and `button`\n     */\n    filter?: {\n        readonly common?: {\n            readonly custom?: true | string | '_dataSources';\n            readonly type?: ioBroker.CommonType | ioBroker.CommonType[];\n            readonly role?: string | string[];\n        };\n        readonly type?: ioBroker.ObjectType | ioBroker.ObjectType[];\n    } | string;\n    /** Additionally, you can provide `adapter` to filter the instances of specific adapter. With special adapter name `_dataSources` you can get all adapters with flag `common.getHistory`. */\n    readonly adapter?: string;\n    /** In this case, only instance number (like `0`) is shown and not `history.0`. It can be set to true only with non-empty `adapter` setting. */\n    readonly iShort?: boolean;\n    /** Options for a select type */\n    options?: { readonly value: string; label: string }[] | string[];\n    /** Number min value */\n    min?: number;\n    /** Number max value */\n    max?: number;\n    /** Number step */\n    step?: number;\n    /** Slider marks?: array of possible marks. Like `[{value: 1, label: 'one'}, {value: 10}, {value: 100}] */\n    readonly marks?: { readonly value: number; label: string }[];\n    /** Controls when the value label is displayed: `auto` the value label will display when the thumb is hovered or focused. `on` will display persistently. `off` will never display. */\n    readonly valueLabelDisplay?: 'on' | 'off' | 'auto';\n    /** type of the widget, like `tplMaterial2Switches` */\n    readonly tpl?: string;\n    /** if true, all widgets of all views will be shown, not only from the current view. Default is false. */\n    readonly all?: boolean;\n    /**  if true, grouped widgets will be shown too. Default is false. */\n    readonly withGroups?: boolean;\n    /** if true, the current widget will be shown in the list too. */\n    readonly withSelf?: boolean;\n    /** if true, it will be checked if the widget is used somewhere else and user will be asked. */\n    readonly checkUsage?: boolean;\n    /** if true, only widgets will be shown, which are not used in some view. Default is false. */\n    readonly hideUsed?: boolean;\n    /** if false, only one view can be selected. Default is true. */\n    readonly multiple?: boolean;\n    /** if false, only one view can be selected. Default is true. */\n    component?: (\n        field: RxWidgetInfoAttributesField,\n        data: WidgetData,\n        onDataChange: (newData: WidgetData) => void,\n        props: RxWidgetInfoCustomComponentProperties,\n    ) => React.JSX.Element | React.JSX.Element[];\n\n    /** Name of the widget field */\n    name: string;\n    /** Field label (i18n) */\n    label?: string;\n    /** JS Function for conditional visibility */\n    hidden?: string | ((data: any) => boolean) | ((data: any, index: number) => boolean);\n    /** Tooltip (i18n) */\n    tooltip?: string;\n    /** JS Function for conditional disability */\n    disabled?: string | ((data: any) => boolean) | ((data: any, index: number) => boolean);\n    /** JS Function for error */\n    error?: string | ((data: any) => boolean) | ((data: any, index: number) => boolean);\n    /** Do not show binding symbol fot this field */\n    readonly noBinding?: boolean;\n    /** Callback called if the field value changed */\n    onChange?: (field: RxWidgetInfoAttributesField, data: Record<string, any>, changeData: (newData: Record<string, any>) => void, socket: LegacyConnection, index?: number) => Promise<void> | string;\n}\n\ninterface WidgetAttributeInfoStored extends RxWidgetInfoAttributesFieldAll {\n    onChangeFunc?: string;\n    filterFile?: string;\n    filterName?: string;\n    filterAttrs?: string;\n    removeName?: string;\n    singleName?: string;\n    set?: string;\n    index?: number;\n    indexFrom?: string | number;\n    indexTo?: string | number;\n    iterable?: {\n        group: string;\n        isFirst: boolean;\n        isLast: boolean;\n        indexTo: number | string | undefined;\n        indexFrom: number | string | undefined;\n    };\n}\n\ninterface WidgetAttributesGroupInfoStored {\n    name?: string;\n    label?: string;\n    singleName?: string;\n    index?: number;\n    fields?: RxWidgetInfoAttributesFieldAll[];\n    indexFrom?: number | string;\n    indexTo?: number | string;\n    iterable?: {\n        group: string;\n        isFirst: boolean;\n        isLast: boolean;\n        indexTo: number | string | undefined;\n        indexFrom: number | string | undefined;\n    };\n}\n\nexport interface WidgetType {\n    name: string;\n    title?: string;\n    label?: string;\n    preview?: string;\n    help?: string;\n    set?: string;\n    imageHTML?: string;\n    init?: string;\n    color?: string;\n    resizable?: boolean;\n    resizeLocked?: boolean;\n    draggable?: boolean;\n    params: string | readonly RxWidgetInfoGroup[];\n\n    setLabel?: string;\n    setColor?: string;\n    setIcon?: string;\n\n    order?: number;\n    hidden?: boolean;\n    style?: React.CSSProperties;\n    customPalette?: (context: CustomPaletteProperties) => React.JSX.Element;\n\n    adapter?: string;\n    version?: string;\n    rx?: boolean;\n    developerMode?: boolean;\n    i18nPrefix?: string;\n}\n\ninterface VisRxWidgetLoaded extends VisRxWidget<any> {\n    readonly i18nPrefix?: string | undefined;\n    readonly adapter?: string;\n    readonly version?: string;\n    readonly visHidden?: boolean;\n    readonly url?: string;\n}\n\nclass VisWidgetsCatalog {\n    static rxWidgets: Record<string, VisRxWidgetLoaded> | null = null;\n\n    static allWidgetsList: string[] | null = null;\n\n    static getUsedWidgetSets(project: Project): string[] | false {\n        let anyWithoutSet = false;\n        const widgetSets: string[] = [];\n\n        // load in runtime only used widget sets\n        const views = Object.keys(project);\n        for (let v = 0; v < views.length; v++) {\n            if (views[v] === '___settings') {\n                continue;\n            }\n            const widgets = project[views[v]].widgets;\n            const keys: (GroupWidgetId | SingleWidgetId)[] = Object.keys(widgets) as (GroupWidgetId | SingleWidgetId)[];\n            for (let w = 0; w < keys.length; w++) {\n                const widgetSet = widgets[keys[w]].widgetSet;\n                if (!widgetSet || widgets[keys[w]].set || widgets[keys[w]].wSet) {\n                    anyWithoutSet = true;\n                    break;\n                }\n                if (!widgetSets.includes(widgetSet)) {\n                    widgetSets.push(widgetSet);\n                }\n            }\n            if (anyWithoutSet) {\n                console.warn('Found widgets without widget set. Will load all widget sets');\n                break;\n            }\n        }\n        !anyWithoutSet && widgetSets.sort();\n\n        return anyWithoutSet ? false : widgetSets;\n    }\n\n    static setUsedWidgetSets(project: Project) {\n        // provide for all widgets the widget set and set\n        let views;\n        const widgetTypes = (window as any).visWidgetTypes as WidgetType[]; // getWidgetTypes();\n        const viewKeys = Object.keys(project);\n\n        for (let v = 0; v < viewKeys.length; v++) {\n            if (viewKeys[v] === '___settings') {\n                continue;\n            }\n            const widgets = project[viewKeys[v]].widgets;\n            const keys: (GroupWidgetId | SingleWidgetId)[] = Object.keys(widgets) as (GroupWidgetId | SingleWidgetId)[];\n            for (let w = 0; w < keys.length; w++) {\n                // remove deprecated attributes\n                if (widgets[keys[w]].set) {\n                    views = views || JSON.parse(JSON.stringify(project));\n                    delete views[viewKeys[v]].widgets[keys[w]].set;\n                }\n                if (widgets[keys[w]].wSet) {\n                    views = views || JSON.parse(JSON.stringify(project));\n                    delete views[viewKeys[v]].widgets[keys[w]].wSet;\n                }\n                if (widgets[keys[w]].widgetSet) {\n                    continue;\n                }\n                const tpl = widgets[keys[w]].tpl;\n\n                if (tpl === '_tplGroup') {\n                    views = views || JSON.parse(JSON.stringify(project));\n                    views[viewKeys[v]].widgets[keys[w]].widgetSet = 'basic';\n                } else {\n                    const tplWidget = widgetTypes.find(item => item.name === tpl);\n                    if (tplWidget) {\n                        views = views || JSON.parse(JSON.stringify(project));\n                        views[viewKeys[v]].widgets[keys[w]].widgetSet = tplWidget.set;\n                    }\n                }\n            }\n        }\n\n        return views;\n    }\n\n    static collectRxInformation(\n        socket: LegacyConnection,\n        project: Project,\n        changeProject?: (newProject: Project) => void,\n    ): Promise<Record<string, VisRxWidget<any>>> {\n        if (!VisWidgetsCatalog.rxWidgets) {\n            VisWidgetsCatalog.rxWidgets = {};\n            // collect all widget sets used in a project\n            let usedWidgetSets: string[] | false | null = null;\n            if (project) {\n                usedWidgetSets = VisWidgetsCatalog.getUsedWidgetSets(project);\n            }\n\n            return new Promise(resolve => {\n                setTimeout(() =>\n                    getRemoteWidgets(socket, !changeProject && usedWidgetSets ? usedWidgetSets : false)\n                        .then((widgetSets: void | VisRxWidget<any>[]) => {\n                            const collectedWidgets: VisRxWidget<any>[] = [...WIDGETS, ...(widgetSets || [])] as VisRxWidget<any>[];\n\n                            collectedWidgets.forEach((Widget: VisRxWidget<any>) => {\n                                if (!Widget?.getWidgetInfo) {\n                                    console.error(`Invalid widget without getWidgetInfo: ${Widget.constructor.name}`);\n                                } else {\n                                    const info = Widget.getWidgetInfo();\n                                    if (!info.visSet) {\n                                        console.error(`No visSet in info for \"${Widget.constructor.name}\"`);\n                                    }\n\n                                    if (!info.id) {\n                                        console.error(`No id in info for \"${Widget.constructor.name}\"`);\n                                    } else if (VisWidgetsCatalog.rxWidgets) {\n                                        VisWidgetsCatalog.rxWidgets[info.id] = Widget;\n                                    }\n                                }\n                            });\n\n                            // init all widgets\n                            if (changeProject) {\n                                // eslint-disable-next-line no-use-before-define\n                                getWidgetTypes();\n                            } else if (usedWidgetSets) {\n                                // eslint-disable-next-line no-use-before-define\n                                getWidgetTypes(usedWidgetSets);\n                            } else {\n                                // eslint-disable-next-line no-use-before-define\n                                getWidgetTypes();\n                            }\n\n                            if (usedWidgetSets === false && changeProject) {\n                                // some widgets without set found\n                                const newProject = VisWidgetsCatalog.setUsedWidgetSets(project);\n                                if (newProject) {\n                                    console.warn('Found widgets without widget set. Project updated');\n                                    changeProject(newProject);\n                                }\n                            }\n\n                            resolve(VisWidgetsCatalog.rxWidgets as Record<string, VisRxWidget<any>>);\n                        }), 0);\n            });\n        }\n\n        return Promise.resolve(VisWidgetsCatalog.rxWidgets);\n    }\n}\n\nexport const getWidgetTypes: (_usedWidgetSets?: string[]) => WidgetType[] = (usedWidgetSets?: string[]) => {\n    if (!(window as any).visWidgetTypes) {\n        (window as any).visSets = {};\n        VisWidgetsCatalog.allWidgetsList = [];\n\n        if (!VisWidgetsCatalog.rxWidgets) {\n            return [];\n        }\n\n        // Old CanJS widgets\n        (window as any).visWidgetTypes = Array.from(document.querySelectorAll('script[type=\"text/ejs\"]'))\n            .map(script => {\n                const name: string | null = script.getAttribute('id');\n                if (!name || !VisWidgetsCatalog.rxWidgets) {\n                    return null;\n                }\n                // only if RX widget with the same name not found\n                let info;\n                // @ts-expect-error we must check getWidgetInfo\n                if (VisWidgetsCatalog.rxWidgets[name]?.getWidgetInfo) {\n                    info = VisWidgetsCatalog.rxWidgets[name].getWidgetInfo();\n                    if (info?.visAttrs && typeof info.visAttrs !== 'string') {\n                        return null;\n                    }\n                }\n\n                const widgetSet = script.getAttribute('data-vis-set') || 'basic';\n                if (usedWidgetSets && !usedWidgetSets.includes(widgetSet)) {\n                    console.log(`Ignored ${widgetSet}/${name} because not used in project`);\n                    return null;\n                }\n\n                const color = script.getAttribute('data-vis-color');\n                (window as any).visSets[widgetSet] = (window as any).visSets[widgetSet] || {};\n                if (color) {\n                    (window as any).visSets[widgetSet].color = color;\n                } else if (!(window as any).visSets[widgetSet].color && DEFAULT_SET_COLORS[widgetSet]) {\n                    (window as any).visSets[widgetSet].color = DEFAULT_SET_COLORS[widgetSet];\n                }\n                const widgetObj: WidgetType = {\n                    name,\n                    title: info?.visName || script.getAttribute('data-vis-name') || undefined,\n                    label: info?.visWidgetLabel || info?.visWidgetLabel === '' ? info.visWidgetLabel : undefined, // new style with translation\n                    preview: info?.visPrev || script.getAttribute('data-vis-prev') || undefined,\n                    help: script.getAttribute('data-vis-help') || undefined,\n                    set: info?.visSet || widgetSet,\n                    imageHTML: script.getAttribute('data-vis-prev') || '',\n                    init: script.getAttribute('data-vis-init') || undefined,\n                    color: info?.visWidgetColor || undefined,\n                    params: info?.visAttrs || Object.values(script.attributes)\n                        .filter(attribute => attribute.name.startsWith('data-vis-attrs'))\n                        .map(attribute => attribute.value)\n                        .join(''),\n                    setLabel: info?.visSetLabel || undefined,\n                    setColor: info?.visSetColor || undefined,\n                    order: info?.visOrder === undefined || info?.visOrder === null ? 1000 : (typeof info.visOrder === 'string' ? parseInt(info.visOrder, 10) : info.visOrder),\n                    hidden: script.getAttribute('data-vis-no-palette') === 'true',\n                };\n\n                VisWidgetsCatalog.allWidgetsList?.push(widgetObj.name);\n\n                return widgetObj;\n            }).filter(w => w);\n\n        // React widgets\n        // We have here two types of widgets: native (from this repository - function) and loaded via getRemoteWidgets (objects)\n        const widgets = Object.values(VisWidgetsCatalog.rxWidgets) as VisRxWidgetLoaded[];\n        widgets.forEach(widget => {\n            const widgetInfo = widget.getWidgetInfo();\n            const i18nPrefix = widget.i18nPrefix || '';\n\n            const widgetObj: WidgetType = {\n                name: widgetInfo.id,\n                preview: widgetInfo.visPrev,\n                title: widgetInfo.visName, // old style without translation\n                params: widgetInfo.visAttrs,\n                set: widgetInfo.visSet,\n                style: widgetInfo.visDefaultStyle,\n                label: widgetInfo.visWidgetLabel ? i18nPrefix + widgetInfo.visWidgetLabel : (widgetInfo.visWidgetLabel === '' ? '' : undefined), // new style with translation\n                setLabel: widgetInfo.visSetLabel ? i18nPrefix + widgetInfo.visSetLabel : undefined, // new style with translation\n                setColor: widgetInfo.visSetColor,\n                setIcon: widgetInfo.visSetIcon,\n                color: widgetInfo.visWidgetColor,\n                resizable: widgetInfo.visResizable,\n                resizeLocked: widgetInfo.visResizeLocked,\n                draggable: widgetInfo.visDraggable,\n                adapter: widget.adapter || undefined,\n                version: widget.version || undefined,\n                hidden: widget.visHidden,\n                order: widgetInfo.visOrder === undefined ? 1000 : widgetInfo.visOrder,\n                // custom: widgetInfo.custom, not used\n                customPalette: widgetInfo.customPalette,\n                rx: true,\n                developerMode: widget.url?.startsWith('http://'),\n                i18nPrefix,\n            };\n            VisWidgetsCatalog.allWidgetsList && !VisWidgetsCatalog.allWidgetsList.includes(widgetObj.name) && VisWidgetsCatalog.allWidgetsList.push(widgetObj.name);\n\n            const index = (window as any).visWidgetTypes.findIndex((item: WidgetType) => item.name === widgetObj.name);\n            if (index > -1) {\n                (window as any).visWidgetTypes[index] = widgetObj; // replace old widget with RX widget\n            } else {\n                (window as any).visWidgetTypes.push(widgetObj);\n            }\n\n            if (i18nPrefix && typeof widgetInfo.visAttrs === 'object') {\n                widgetInfo.visAttrs.forEach(group => {\n                    if (group.label && !group.label.startsWith(i18nPrefix)) {\n                        (group as WidgetAttributesGroupInfoStored).label = i18nPrefix + group.label;\n                    }\n                    if (group.fields) {\n                        group.fields.forEach(field => {\n                            const _field = field as unknown as WidgetAttributeInfoStored;\n                            if (_field.label && !_field.label.startsWith(i18nPrefix)) {\n                                _field.label = i18nPrefix + _field.label;\n                            }\n                            if (_field.tooltip && !_field.tooltip.startsWith(i18nPrefix)) {\n                                _field.tooltip = i18nPrefix + _field.tooltip;\n                            }\n                            if (_field.options && !_field.noTranslation && Array.isArray(_field.options)) {\n                                _field.options.forEach(option => {\n                                    if (typeof option === 'object') {\n                                        if (option.label && !option.label.startsWith(i18nPrefix)) {\n                                            option.label = i18nPrefix + option.label;\n                                        }\n                                    }\n                                });\n                            }\n                        });\n                    }\n                });\n            }\n        });\n    }\n\n    return (window as any).visWidgetTypes;\n};\n\nconst deepClone = (obj: any[] | Record<string, any>) => {\n    if (Array.isArray(obj)) {\n        const newObj: any[] = [];\n        for (const key in obj as any[]) {\n            if (obj[key] !== undefined) {\n                if (Array.isArray(obj[key]) || typeof obj[key] === 'object') {\n                    // If it is ReactJS object\n                    if (Object.prototype.hasOwnProperty.call(obj, '$$typeof')) {\n                        newObj[key] = obj[key];\n                    } else {\n                        newObj[key] = deepClone(obj[key]);\n                    }\n                } else {\n                    newObj[key] = obj[key];\n                }\n            }\n        }\n        return newObj;\n    }\n\n    const newObj: Record<string, any> = {};\n    for (const key in obj as Record<string, any>) {\n        if (obj[key] !== undefined) {\n            if (Array.isArray(obj[key]) || typeof obj[key] === 'object') {\n                // If it is ReactJS object\n                if (Object.prototype.hasOwnProperty.call(obj, '$$typeof')) {\n                    newObj[key] = obj[key];\n                } else {\n                    newObj[key] = deepClone(obj[key]);\n                }\n            } else {\n                newObj[key] = obj[key];\n            }\n        }\n    }\n    return newObj;\n};\n\ninterface CommonGroups {\n    common: number;\n    [key: string]: number;\n}\n\nexport const parseAttributes = (\n    widgetParams: string | RxWidgetInfoGroup[],\n    widgetIndex?: number,\n    commonGroups?: CommonGroups,\n    commonFields?: Record<string, any>,\n    widgetSet?: string,\n    widgetData?: Record<string, any>,\n) => {\n    if (typeof widgetParams === 'string') {\n        let groupName = 'common';\n        let indexedGroups: { [key: number]: WidgetAttributesGroupInfoStored } = {};\n        let isIndexedGroup = false;\n        commonGroups = commonGroups || { common: 1 };\n        commonFields = commonFields || {};\n        const fields: WidgetAttributesGroupInfoStored[] = [{\n            name: 'common',\n            singleName: 'common',\n            fields: [],\n        }];\n        let currentGroup: WidgetAttributesGroupInfoStored | undefined = fields[0];\n        widgetIndex = widgetIndex || 0;\n\n        widgetParams.split(';').forEach(fieldString => {\n            if (!fieldString) {\n                return;\n            }\n\n            if (fieldString.split('/')[0].startsWith('group.')) {\n                groupName = fieldString.split('/')[0].split('.')[1];\n                if (widgetIndex !== undefined && widgetIndex > 0 && commonGroups && !commonGroups[groupName]) {\n                    return;\n                }\n                indexedGroups = {};\n                if (fieldString.split('/')[1] !== 'byindex') {\n                    currentGroup = fields.find(group => group.name === groupName);\n                    if (!currentGroup) {\n                        fields.push(\n                            {\n                                name: groupName,\n                                singleName: groupName,\n                                fields: [],\n                            },\n                        );\n                        currentGroup = fields[fields.length - 1];\n                    }\n                    if (commonGroups) {\n                        if (!commonGroups[groupName]) {\n                            commonGroups[groupName] = 0;\n                        }\n                        commonGroups[groupName]++;\n                    }\n                    isIndexedGroup = false;\n                } else {\n                    isIndexedGroup = true;\n                }\n            } else {\n                const match = fieldString.match(/([a-zA-Z0-9._-]+)(\\([a-zA-Z.0-9-_]*\\))?(\\[.*])?(\\/[-_,^~\\s:/.a-zA-Z0-9]+)?/);\n                if (!match) {\n                    console.warn(`Invalid attribute ${fieldString}`);\n                    return;\n                }\n\n                const repeats = match[2];\n                let type: RxWidgetAttributeType;\n                let onChangeFunc: string | undefined;\n                if (match[4]) {\n                    const parts = match[4].substring(1).split('/');\n                    type = parts[0] as RxWidgetAttributeType;\n                    onChangeFunc = parts[1];\n                } else {\n                    type = 'text';\n                }\n                const field: WidgetAttributeInfoStored = {\n                    name: match[1],\n                    default: match[3] ? match[3].substring(1, match[3].length - 1) : undefined, // remove []\n                    type,\n                    onChangeFunc,\n                };\n\n                if (field.type) {\n                    field.type = field.type\n                        .replace(//g, ';')\n                        .replace(/~/g, '/')\n                        .replace(/\\^/g, '\"')\n                        .replace(/\\^\\^/g, '^') as RxWidgetAttributeType;\n                }\n                if (typeof field.default === 'string') {\n                    field.default = field.default\n                        .replace(//g, ';')\n                        .replace(/~/g, '/')\n                        .replace(/\\^/g, '\"')\n                        .replace(/\\^\\^/g, '^');\n                }\n\n                // special case for Object ID filter\n                if (field.onChangeFunc && field.onChangeFunc.startsWith('filterType')) {\n                    field.filter = field.onChangeFunc.substring('filterType'.length).toLowerCase();\n                    delete field.onChangeFunc;\n                }\n\n                if (widgetIndex && widgetIndex > 0 && !repeats && commonFields && !commonFields[`${groupName}.${field.name}`]) {\n                    return;\n                }\n\n                if (field.name === 'oid' || field.name.match(/^oid-/)) {\n                    field.type = field.type || 'id';\n                } else if (field.name === 'color') {\n                    field.type = 'color';\n                } else if (field.name.match(/nav_view$/)) {\n                    field.type = 'views';\n                } else if (field.name === 'sound') {\n                    // field.type = 'sound';\n                    field.type = 'text';\n                } else if (field.name.includes('_effect')) {\n                    // field.type = 'effect';\n                    field.type = 'text';\n                } else if (field.name.includes('_eff_opt')) {\n                    // field.type = 'effect-options';\n                    field.type = 'text';\n                }\n\n                if (field.type && (field.type.startsWith('id,'))) {\n                    const options = field.type.split(',');\n                    field.type = options[0] as RxWidgetAttributeType;\n                    field.filter = options[1];\n                }\n                if (field.type && (field.type.startsWith('select,') || field.type.startsWith('nselect,') || field.type.startsWith('auto,'))) {\n                    const options = field.type.split(',');\n                    field.type = options[0] as RxWidgetAttributeType;\n                    field.options = options.slice(1);\n                }\n                if (field.type && (field.type.startsWith('slider,') || field.type.startsWith('number,'))) {\n                    const options = field.type.split(',');\n                    field.type = options[0] as RxWidgetAttributeType;\n                    field.min = parseInt(options[1]);\n                    field.max = parseInt(options[2]);\n                    field.step = parseInt(options[3]);\n                    if (!field.step) {\n                        field.step = (field.max - field.min / 100);\n                    }\n                }\n                if (field.type && field.type.startsWith('style,')) {\n                    const options = field.type.split(',');\n                    field.type = options[0] as RxWidgetAttributeType;\n                    field.filterFile = options[1];\n                    field.filterName = options[2];\n                    field.filterAttrs = options[3];\n                    field.removeName = options[4];\n                    if (!field.step && field.max !== undefined && field.min !== undefined) {\n                        field.step = (field.max - field.min / 100);\n                    }\n                }\n                // remove comma from type\n                if (field.type?.startsWith('style,')) {\n                    console.warn(`Attribute \"${field.name}\" of ${widgetSet} has wrong type: ${field.type}`);\n                    field.type = field.type.split(',')[0] as RxWidgetAttributeType;\n                }\n\n                field.singleName = field.name;\n                field.set = widgetSet;\n                if (repeats) {\n                    const repeatsMatch = repeats.match(/\\(([0-9a-z_]+)-([0-9a-z_]+)\\)/i);\n                    const name = field.name;\n                    if (repeatsMatch) {\n                        let from = 1;\n                        let to = 1;\n                        if (!repeatsMatch[1].match(/^[0-9]$/)) {\n                            from = widgetData ? parseInt(widgetData[repeatsMatch[1]]) : 0;\n                        }\n                        if (!repeatsMatch[2].match(/^[0-9]$/)) {\n                            to = widgetData ? parseInt(widgetData[repeatsMatch[2]]) : 0;\n                        }\n                        for (let i = from; i <= to; i++) {\n                            if (isIndexedGroup) {\n                                if (commonGroups && widgetIndex && widgetIndex > 0 && !commonGroups[`${groupName}-${i}`]) {\n                                    return;\n                                }\n                                if (commonFields && widgetIndex && widgetIndex > 0 && !commonFields[`${groupName}-${i}.${field.name}`]) {\n                                    return;\n                                }\n                                if (!indexedGroups[i]) {\n                                    currentGroup = {\n                                        name: `${groupName}-${i}`,\n                                        singleName: groupName,\n                                        index: i,\n                                        fields: [],\n                                    };\n                                    indexedGroups[i] = currentGroup;\n                                    fields.push(currentGroup);\n                                }\n                                if (commonGroups) {\n                                    if (!commonGroups[`${groupName}-${i}`]) {\n                                        commonGroups[`${groupName}-${i}`] = 0;\n                                    }\n                                    commonGroups[`${groupName}-${i}`]++;\n                                }\n\n                                field.name = `${name}${i}`;\n                                indexedGroups[i]?.fields?.push({ ...field });\n                                if (commonFields) {\n                                    if (!commonFields[`${groupName}-${i}.${field.name}`]) {\n                                        commonFields[`${groupName}-${i}.${field.name}`] = 0;\n                                    }\n                                    commonFields[`${groupName}-${i}.${field.name}`]++;\n                                }\n                            } else {\n                                field.name = `${name}${i}`;\n                                field.index = i;\n                                currentGroup?.fields?.push({ ...field });\n                                if (commonFields) {\n                                    if (!commonFields[`${groupName}.${field.name}`]) {\n                                        commonFields[`${groupName}.${field.name}`] = 0;\n                                    }\n                                    commonFields[`${groupName}.${field.name}`]++;\n                                }\n                            }\n                        }\n                    }\n                } else {\n                    currentGroup?.fields?.push(field);\n                    if (commonFields) {\n                        if (!commonFields[`${groupName}.${field.name}`]) {\n                            commonFields[`${groupName}.${field.name}`] = 0;\n                        }\n                        commonFields[`${groupName}.${field.name}`]++;\n                    }\n                }\n            }\n        });\n\n        return fields;\n    }\n\n    if (Array.isArray(widgetParams)) {\n        commonGroups = commonGroups || { common: 1 };\n        commonFields = commonFields || {};\n        const fields = deepClone(widgetParams) as WidgetAttributesGroupInfoStored[];\n        let groupIndex = fields.findIndex(group => typeof group.indexFrom === 'number');\n\n        // if enumerable\n        while (groupIndex > -1) {\n            const group = fields[groupIndex] as WidgetAttributesGroupInfoStored;\n            group.singleName = group.name;\n            let from: number;\n            let indexFrom;\n            if (Number.isInteger(group.indexFrom)) {\n                from = group.indexFrom as number;\n            } else {\n                from = parseInt(widgetData?.[group.indexFrom || 1]);\n                indexFrom = from;\n            }\n            let to: number;\n            let indexTo;\n            if (Number.isInteger(group.indexTo)) {\n                to = parseInt((group.indexTo as string) || '1', 10);\n            } else {\n                to = parseInt(widgetData?.[group.indexTo || 1]);\n                indexTo = group.indexTo;\n            }\n            delete group.indexFrom;\n            delete group.indexTo;\n            const indexedGroups = [];\n\n            for (let i = from; i <= to; i++) {\n                const indexedGroup: WidgetAttributesGroupInfoStored = {\n                    ...deepClone(group),\n                    index: i,\n                    name: `${group.singleName}-${i}`,\n                    iterable: {\n                        group: group.singleName || '',\n                        isFirst: i === from,\n                        isLast: i === to,\n                        indexTo,\n                        indexFrom,\n                    },\n                };\n                indexedGroup.fields?.forEach((field: WidgetAttributeInfoStored, ii) => {\n                    field.singleName = field.name;\n                    field.name = `${field.name}${i}`;\n                    field.index = i;\n                    if (group.fields && group.fields[ii]) {\n                        if (typeof group.fields[ii].hidden === 'function') {\n                            field.hidden = group.fields[ii].hidden;\n                        }\n                        if (typeof group.fields[ii].component === 'function') {\n                            field.component = group.fields[ii].component;\n                        }\n                        if (typeof group.fields[ii].onChange === 'function') {\n                            field.onChange = group.fields[ii].onChange;\n                        }\n                        if (typeof group.fields[ii].disabled === 'function') {\n                            field.disabled = group.fields[ii].disabled;\n                        }\n                        if (typeof group.fields[ii].error === 'function') {\n                            field.error = group.fields[ii].error;\n                        }\n                    }\n                });\n\n                indexedGroups.push(indexedGroup);\n            }\n            fields.splice(groupIndex, 1, ...indexedGroups);\n            groupIndex = fields.findIndex(_group => _group.indexFrom);\n        }\n\n        fields.forEach(group => {\n            if (!group.name) {\n                group.name = 'common';\n            }\n            if (!group.singleName) {\n                group.singleName = group.name;\n            }\n            if (commonGroups) {\n                if (!commonGroups[group.name]) {\n                    commonGroups[group.name] = 0;\n                }\n                commonGroups[group.name]++;\n            }\n            if (group.fields) {\n                // fields can be interable too\n                let fieldIndex = group.fields.findIndex((field: WidgetAttributeInfoStored) => field.indexFrom);\n                while (fieldIndex > -1) {\n                    const field = group.fields[fieldIndex] as WidgetAttributeInfoStored;\n                    field.singleName = field.name;\n                    let from = 1;\n                    let indexFrom;\n                    if (Number.isInteger(field.indexFrom)) {\n                        from = parseInt(field.indexFrom as string, 10);\n                    } else if (typeof field.indexFrom === 'string') {\n                        from = parseInt(widgetData?.[field.indexFrom]);\n                        indexFrom = from;\n                    }\n                    let to = 1;\n                    let indexTo;\n                    if (Number.isInteger(field.indexTo)) {\n                        to = parseInt(field.indexTo as string, 10);\n                    } else if (typeof field.indexTo === 'string') {\n                        to = parseInt(widgetData?.[field.indexTo]);\n                        indexTo = field.indexTo;\n                    }\n                    delete field.indexFrom;\n                    delete field.indexTo;\n                    const indexedFields = [];\n                    for (let i = from; i <= to; i++) {\n                        const indexedField = deepClone(field) as WidgetAttributeInfoStored;\n                        indexedField.index = i;\n                        indexedField.name = `${field.singleName}${i}`;\n                        indexedField.iterable = {\n                            group: field.singleName,\n                            isFirst: i === from,\n                            isLast: i === to,\n                            indexFrom,\n                            indexTo,\n                        };\n                        indexedFields.push(indexedField);\n                    }\n\n                    group.fields?.splice(fieldIndex, 1, ...indexedFields);\n\n                    fieldIndex = group.fields.findIndex((_field: WidgetAttributeInfoStored) => _field.indexFrom);\n                }\n\n                group.fields.forEach((field: WidgetAttributeInfoStored) => {\n                    if (!field.singleName) {\n                        field.singleName = field.name;\n                    }\n                    field.set = widgetSet;\n                    if (commonFields) {\n                        if (!commonFields[`${group.name}.${field.name}`]) {\n                            commonFields[`${group.name}.${field.name}`] = 0;\n                        }\n                        commonFields[`${group.name}.${field.name}`]++;\n                    }\n                });\n            }\n        });\n\n        return fields;\n    }\n\n    return null;\n};\n\nexport default VisWidgetsCatalog;\n","/**\n *  ioBroker.vis\n *  https://github.com/ioBroker/ioBroker.vis\n *\n *  Copyright (c) 2022-2023 Denis Haev https://github.com/GermanBluefox,\n *  Creative Common Attribution-NonCommercial (CC BY-NC)\n *\n *  http://creativecommons.org/licenses/by-nc/4.0/\n *\n * Short content:\n * Licensees may copy, distribute, display and perform the work and make derivative works based on it only if they give the author or licensor the credits in the manner specified by these.\n * Licensees may copy, distribute, display, and perform the work and make derivative works based on it only for noncommercial purposes.\n * (Free for non-commercial use).\n */\n(window as any).systemDictionary = {};\n(window as any).systemLang = 'en';\n\nfunction translateWord(text: string, lang?: ioBroker.Languages, dictionary?: Record<string, Record<ioBroker.Languages, string>>): string {\n    if (!text) {\n        return '';\n    }\n    lang = lang || (window as any).systemLang as ioBroker.Languages || 'en';\n    dictionary = dictionary || (window as any).systemDictionary || {};\n\n    if (dictionary && dictionary[text]) {\n        let newText = dictionary[text][lang];\n        if (newText) {\n            return newText;\n        }\n        if (lang !== 'en') {\n            newText = dictionary[text].en;\n            if (newText) {\n                return newText;\n            }\n        }\n    } else if (typeof text === 'string' && !text.match(/_tooltip$/)) {\n        // console.log(`\"${text}\": {en: \"${text}\", de: \"${text}\", ru: \"${text}\"},`);\n    } else if (typeof text !== 'string') {\n        console.warn(`Trying to translate non-text: ${text}`);\n    }\n\n    return text;\n}\n\n// make possible _('words to translate')\n(window as any)._ = (text: string, arg1?: boolean | number | string, arg2?: boolean | number | string, arg3?: boolean | number | string) => {\n    text = translateWord(text);\n\n    let pos = text.indexOf('%s');\n    if (pos !== -1) {\n        text = text.replace('%s', arg1?.toString() || '');\n    } else {\n        return text;\n    }\n\n    pos = text.indexOf('%s');\n    if (pos !== -1) {\n        text = text.replace('%s', arg2?.toString() || '');\n    } else {\n        return text;\n    }\n\n    pos = text.indexOf('%s');\n    if (pos !== -1) {\n        text = text.replace('%s', arg3?.toString() || '');\n    }\n\n    return text;\n};\n\n(window as any).addWords = (words: Record<string, Record<string, string>>) => Object.assign((window as any).systemDictionary || {}, words);\n\n(window as any).addWords({\n    'No connection to Server': {\n        en: 'No connection to Server',\n        de: 'Keine Verbindung zum Server',\n        ru: '   ',\n        pt: 'Nenhuma conexo ao servidor',\n        nl: 'Geen verbinding met server',\n        fr: 'Pas de connexion au serveur',\n        it: 'Nessuna connessione al server',\n        es: 'Sin conexin al servidor',\n        pl: 'Brak poczenia z serwerem',\n        uk: ' \\'  ',\n        'zh-cn': '',\n    },\n    'Loading Views...': {\n        en: 'Loading Views...',\n        de: 'Lade Views...',\n        ru: '  ...',\n        pt: 'Carregando pginas ...',\n        nl: 'Pagina\\'s laden ...',\n        fr: 'Chargement des pages ...',\n        it: 'Caricamento pagine ...',\n        es: 'Cargando pginas ...',\n        pl: 'adowanie stron ...',\n        uk: '  ...',\n        'zh-cn': '......',\n    },\n    'Connecting to Server...': {\n        en: 'Connecting to Server...',\n        de: 'Verbinde mit dem Server...',\n        ru: '  ...',\n        pt: 'Conectando ao servidor...',\n        nl: 'Verbinden met de server...',\n        fr: 'Connexion au serveur...',\n        it: 'Connessione al server...',\n        es: 'Conectando al servidor...',\n        pl: 'czenie z serwerem...',\n        uk: '\\'  ...',\n        'zh-cn': '...',\n    },\n    'Loading data objects...': {\n        en: 'Loading data...',\n        de: 'Lade Daten...',\n        ru: ' ...',\n        pt: 'Carregando dados...',\n        nl: 'Data laden...',\n        fr: 'Chargement des donnes...',\n        it: 'Caricamento dati...',\n        es: 'Cargando datos...',\n        pl: 'adowanie danych...',\n        uk: ' ...',\n        'zh-cn': '...',\n    },\n    'Loading data values...': {\n        en: 'Loading values...',\n        de: 'Lade Werte...',\n        ru: ' ...',\n        pt: 'Carregando valores ...',\n        nl: 'Waarden laden ...',\n        fr: 'Chargement des valeurs ...',\n        it: 'Caricamento valori ...',\n        es: 'Cargando valores ...',\n        pl: 'adowanie wartoci ...',\n        uk: '  ...',\n        'zh-cn': '...',\n    },\n    'error - View doesn\\'t exist': {\n        en: 'View doesn\\'t exist!',\n        de: 'View existiert nicht!',\n        ru: '  !',\n        pt: 'erro - a pgina no existe',\n        nl: 'error - Page bestaat niet',\n        fr: 'error - La page n\\'existe pas',\n        it: 'errore - La pagina non esiste',\n        es: 'error - la pgina no existe',\n        pl: 'bd - strona nie istnieje',\n        uk: ' -   ',\n        'zh-cn': ' - ',\n    },\n    'no views found!': {\n        en: 'No views found!',\n        de: 'Keine Views gefunden!',\n        ru: '  !',\n        pt: 'Nenhuma pgina encontrada!',\n        nl: 'Geen pagina\\'s gevonden!',\n        fr: 'Aucune page trouve!',\n        it: 'Nessuna pagina trovata!',\n        es: 'No se encontraron pginas!',\n        pl: 'Nie znaleziono stron!',\n        uk: '  !',\n        'zh-cn': '',\n    },\n    'No valid license found!': {\n        en: 'No valid vis license found! Please check vis settings.',\n        de: 'Keine gltige vis Lizenz gefunden! Bitte vis Einstellungen prfen.',\n        ru: '   ! ,  .',\n        pt: 'Nenhuma licena vlida encontrada! Por favor, verifique vis instance.',\n        nl: 'Geen geldige licentie gevonden! Controleer de vis-aankondiging.',\n        fr: 'Aucune licence valide trouve ! Veuillez vrifier vis instance.',\n        it: 'Nessuna licenza valida trovata! Si prega di controllare di persona.',\n        es: 'No se encontr ninguna licencia vlida! Por favor, compruebe la instancia de visita.',\n        pl: 'Nie znaleziono wanej licencji! Prosz sprawdzi vis instance.',\n        uk: '   !  ,   vis.',\n        'zh-cn': 'vis',\n    },\n    'No Views found on Server': {\n        en: 'No Views found on Server',\n        de: 'Keine Views am Server gefunden.',\n        ru: '     .',\n        pt: 'Nenhuma pgina encontrada no servidor',\n        nl: 'Geen pagina\\'s gevonden op server',\n        fr: 'Aucune page trouve sur le serveur',\n        it: 'Nessuna pagina trovata sul server',\n        es: 'No se encontraron pginas en el servidor',\n        pl: 'Nie znaleziono stron na serwerze',\n        uk: '     ',\n        'zh-cn': '',\n    },\n    'All changes are saved locally. To reset changes clear the cache.': {\n        en: 'All changes are saved locally. To reset changes clear the browser cache.',\n        de: 'Alle nderungen sind lokal gespeichert. Um nderungen zu lschen, lsche Browsercache.',\n        ru: '   .       .',\n        pt: 'Todas as alteraes so salvas localmente. Para redefinir as alteraes, limpe o cache do navegador.',\n        nl: 'Alle wijzigingen worden lokaal opgeslagen. Als u de wijzigingen opnieuw wilt instellen, wist u de cache van de browser.',\n        fr: 'Toutes les modifications sont enregistres localement. Pour rinitialiser les modifications, effacez le cache du navigateur.',\n        it: 'Tutte le modifiche sono salvate localmente. Per ripristinare le modifiche, cancellare la cache del browser.',\n        es: 'Todos los cambios se guardan localmente. Para restablecer los cambios borra el cach del navegador.',\n        pl: 'Wszystkie zmiany s zapisywane lokalnie. Aby zresetowa zmiany, wyczy pami podrczn przegldarki.',\n        uk: '   .   ,   .',\n        'zh-cn': '',\n    },\n    'please use /vis/edit.html instead of /vis/?edit': {\n        en: 'Please use /vis/edit.html instead of /vis/?edit',\n        de: 'Bitte geben Sie /vis/edit.html statt /vis/?edit',\n        ru: ' /vis/edit.html  /vis/?edit',\n        pt: 'Por favor, use /vis/edit.html em vez de /vis/?edit',\n        nl: 'Gebruik alsjeblieft /vis/edit.html in plaats van /vis/?edit',\n        fr: 'Veuillez utiliser /vis/edit.html au lieu de /vis/?edit',\n        it: 'Utilizza /vis/edit.html invece di /vis/?edit',\n        es: 'Utilice /vis/edit.html en lugar de /vis/?edit',\n        pl: 'Uyj /vis/edit.html zamiast /vis/?edit',\n        uk: ' ,  /vis/edit.html  /vis/?edit',\n        'zh-cn': '/vis/edit.html/vis/?edit',\n    },\n    'no views found on server.\\nCreate new %s ?': {\n        en: 'no views found on server.\\nCreate new %s?',\n        de: 'Keine Views am Server gefunden am.\\nErzeugen %s?',\n        ru: '     .  %s?',\n        pt: 'nenhuma vista encontrada no servidor.\\nCrie novos %s?',\n        nl: 'geen weergaven gevonden op server.\\nNieuwe %s maken?',\n        fr: 'aucune vue trouve sur le serveur.\\nCrer un nouveau %s?',\n        it: 'nessuna vista trovata sul server.\\nCrea nuovo %s?',\n        es: 'No se han encontrado vistas en el servidor.\\nCrear nuevo %s?',\n        pl: 'nie znaleziono widokw na serwerze.\\nUtwrz nowy %s?',\n        uk: '     .\\n  %s?',\n        'zh-cn': '\\n %s',\n    },\n    'Update found, loading new Files...': {\n        en: 'Update found.<br/>Loading new Files...',\n        de: 'Neue Version gefunden.<br/>Lade neue Dateien...',\n        ru: ' .<br/>  ...',\n        pt: 'Atualizao encontrada. <br/> Carregando novos arquivos ...',\n        nl: 'Update gevonden. <br/> Nieuwe bestanden laden ...',\n        fr: 'Mise  jour trouve. <br/> Chargement de nouveaux fichiers ...',\n        it: 'Aggiornamento trovato. <br/> Caricamento di nuovi file ...',\n        es: 'Actualizacin encontrada. <br/> Cargando nuevos archivos ...',\n        pl: 'Znaleziono aktualizacj. <br/> adowanie nowych plikw ...',\n        uk: ' . <br/>    ...',\n        'zh-cn': '<br/>...',\n    },\n    'Loading Widget-Sets...': {\n        en: 'Loading Widget-Sets...',\n        de: 'Lade Widget-Stze...',\n        ru: '  ...',\n        pt: 'Carregando Conjuntos de Widget ...',\n        nl: 'Widgetsets laden ...',\n        fr: 'Chargement des ensembles de widgets ...',\n        it: 'Caricamento widget-set ...',\n        es: 'Cargando conjuntos de widgets ...',\n        pl: 'adowanie zestaww widgetw ...',\n        uk: '   ...',\n        'zh-cn': 'Widget-Sets ...',\n    },\n    'error: view not found.': {\n        en: 'Error: view not found',\n        de: 'Fehler: View wurde nicht gefunden',\n        ru: ':   ',\n        pt: 'Erro: pgina no encontrada',\n        nl: 'Fout: pagina niet gevonden',\n        fr: 'Erreur: page non trouve',\n        it: 'Errore: pagina non trovata',\n        es: 'Error: pgina no encontrada',\n        pl: 'Bd: strona nie znaleziona',\n        uk: ':   ',\n        'zh-cn': '',\n    },\n    'error: view container recursion.': {\n        en: 'Error: view container recursion',\n        de: 'Fehler: View ist rekursiv',\n        ru: ':    ',\n        pt: 'Erro: recurso do continer de pgina',\n        nl: 'Fout: paginacontainer-recursie',\n        fr: 'Erreur: rcursivit du conteneur de page',\n        it: 'Errore: ricorsione del contenitore della pagina',\n        es: 'Error: pgina de recursin del contenedor.',\n        pl: 'Bd: rekursja kontenera strony',\n        uk: ':   ',\n        'zh-cn': '',\n    },\n    'Cannot execute %s for %s, because of insufficient permissions': {\n        en: 'Cannot execute %s for %s, because of insufficient permissions.',\n        de: 'Kann das Kommando \\'%s\\' fr %s nicht ausfhren, weil nicht gengend Zugriffsrechte vorhanden sind.',\n        ru: '   \\'%s\\'  %s,    .',\n        pt: 'No  possvel executar %s para %s, devido a permisses insuficientes.',\n        nl: 'Kan %s niet uitvoeren voor %s, vanwege onvoldoende machtigingen.',\n        fr: 'Impossible d\\'excuter %s pour %s en raison d\\'autorisations insuffisantes.',\n        it: 'Impossibile eseguire %s per %s, a causa di autorizzazioni insufficienti.',\n        es: 'No se puede ejecutar %s para %s, debido a permisos insuficientes.',\n        pl: 'Nie mona wykona %s dla %s, z powodu niewystarczajcych uprawnie.',\n        uk: '  %s  %s   .',\n        'zh-cn': 's%s',\n    },\n    'Insufficient permissions': {\n        en: 'Insufficient permissions',\n        de: 'Nicht gengend Zugriffsrechte',\n        ru: ' ',\n        pt: 'Permisses insuficientes',\n        nl: 'Onvoldoende rechten',\n        fr: 'Permissions insuffisantes',\n        it: 'Permessi insufficienti',\n        es: 'Permisos insuficientes',\n        pl: 'Niewystarczajce uprawnienia',\n        uk: ' ',\n        'zh-cn': '',\n    },\n    'View disabled for user %s': {\n        en: 'View disabled for user <b>%s</b>',\n        de: 'View ist fr Anwender <b>%s</b> deaktiviert',\n        ru: '    <b>%s</b>',\n        pt: 'Visualizao desativada para o usurio <b>%s</b>',\n        nl: 'Weergave uitgeschakeld voor gebruiker <b>%s</b>',\n        fr: 'Affichage dsactiv pour l\\'utilisateur <b>%s</b>',\n        it: 'Visualizza disabilitato per l\\'utente <b>%s</b>',\n        es: 'Vista deshabilitada para el usuario <b>%s</b>',\n        pl: 'Widok wyczony dla uytkownika <b>%s</b>',\n        uk: '    <b>%s</b>',\n        'zh-cn': '<b>%s</b>',\n    },\n    Today: {\n        en: 'Today',\n        de: 'Heute',\n        ru: 'C',\n        pt: 'Hoje',\n        nl: 'Vandaag',\n        fr: 'Aujourd\\'hui',\n        it: 'Oggi',\n        es: 'Hoy',\n        pl: 'Dzisiaj',\n        uk: '',\n        'zh-cn': '',\n    },\n    Yesterday: {\n        en: 'Yesterday',\n        de: 'Gestern',\n        ru: ' ',\n        pt: 'Ontem',\n        nl: 'Gisteren',\n        fr: 'Hier',\n        it: 'Ieri',\n        es: 'Ayer',\n        pl: 'Wczoraj',\n        uk: '',\n        'zh-cn': '',\n    },\n});\n","import { useEffect, useRef } from 'react';\nimport PropTypes from 'prop-types';\nimport AceEditor from 'react-ace';\nimport Ace from 'ace-builds';\n\nimport 'ace-builds/webpack-resolver';\nimport 'ace-builds/src-noconflict/ext-language_tools';\nimport 'ace-builds/src-noconflict/theme-clouds_midnight';\nimport 'ace-builds/src-noconflict/theme-chrome';\n\nimport 'ace-builds/src-noconflict/worker-css';\nimport 'ace-builds/src-noconflict/snippets/css';\nimport 'ace-builds/src-noconflict/mode-css';\n\nimport 'ace-builds/src-noconflict/worker-json';\nimport 'ace-builds/src-noconflict/snippets/json';\nimport 'ace-builds/src-noconflict/mode-json';\n\nimport 'ace-builds/src-noconflict/worker-javascript';\nimport 'ace-builds/src-noconflict/snippets/javascript';\nimport 'ace-builds/src-noconflict/mode-javascript';\n\nimport 'ace-builds/src-noconflict/worker-html';\nimport 'ace-builds/src-noconflict/snippets/html';\nimport 'ace-builds/src-noconflict/mode-html';\n\nimport { I18n } from '@iobroker/adapter-react-v5';\n\nAce.config.set('basePath', './lib/js/ace');\nAce.config.setModuleUrl('ace/ext/language_tools', './lib/js/ace/ext-language_tools.js');\nAce.config.setModuleUrl('ace/theme/clouds_midnight', './lib/js/ace/theme-clouds_midnight.js');\nAce.config.setModuleUrl('ace/theme/chrome', './lib/js/ace/theme-chrome.js');\nAce.config.setModuleUrl('ace/ext/searchbox', './lib/js/ace/ext-searchbox.js');\n\nAce.config.setModuleUrl('ace/snippets/html', './lib/js/ace/snippets/html.js');\nAce.config.setModuleUrl('ace/mode/html_worker', './lib/js/ace/worker-html.js');\nAce.config.setModuleUrl('ace/mode/html', './lib/js/ace/mode-html.js');\n\nAce.config.setModuleUrl('ace/snippets/css', './lib/js/ace/snippets/css.js');\nAce.config.setModuleUrl('ace/mode/css_worker', './lib/js/ace/worker-css.js');\nAce.config.setModuleUrl('ace/mode/css', './lib/js/ace/mode-css.js');\n\nAce.config.setModuleUrl('ace/snippets/javascript', './lib/js/ace/snippets/javascript.js');\nAce.config.setModuleUrl('ace/mode/javascript_worker', './lib/js/ace/worker-javascript.js');\nAce.config.setModuleUrl('ace/mode/javascript', './lib/js/ace/mode-javascript.js');\n\nAce.config.setModuleUrl('ace/snippets/html', './lib/js/ace/snippets/html.js');\nAce.config.setModuleUrl('ace/mode/html_worker', './lib/js/ace/worker-html.js');\nAce.config.setModuleUrl('ace/mode/html', './lib/js/ace/mode-html.js');\n\nconst CustomAceEditor = props => {\n    const refEditor = useRef();\n\n    useEffect(() => {\n        let content;\n        let timer;\n        const keyDown = e => {\n            if (e.key === 'f' && e.ctrlKey) {\n                // make translations\n                timer = setInterval(() => {\n                    const parent = content.parentNode;\n                    let el = parent.querySelector('.ace_search_field');\n                    if (el) {\n                        clearInterval(timer);\n                        timer = null;\n                    }\n                    if (el?.placeholder === 'Search for') {\n                        el.placeholder = I18n.t('ace_Search for');\n                    }\n                    el = parent.querySelector('.ace_searchbtn[action=\"findAll\"]');\n                    if (el?.innerHTML === 'All') {\n                        el.innerHTML = I18n.t('ace_All');\n                    }\n                    el = parent.querySelector('.ace_button[action=\"toggleRegexpMode\"]');\n                    if (el?.title === 'RegExp Search') {\n                        el.title = I18n.t('ace_RegExp Search');\n                    }\n                    el = parent.querySelector('.ace_button[action=\"toggleCaseSensitive\"]');\n                    if (el?.title === 'CaseSensitive Search') {\n                        el.title = I18n.t('ace_CaseSensitive Search');\n                    }\n                    el = parent.querySelector('.ace_button[action=\"toggleWholeWords\"]');\n                    if (el?.title === 'Whole Word Search') {\n                        el.title = I18n.t('ace_Whole Word Search');\n                    }\n                    el = parent.querySelector('.ace_button[action=\"searchInSelection\"]');\n                    if (el?.title === 'Search In Selection') {\n                        el.title = I18n.t('ace_Search In Selection');\n                    }\n                    el = parent.querySelector('.ace_button[action=\"toggleReplace\"]');\n                    if (el?.title === 'Toggle Replace mode') {\n                        el.title = I18n.t('ace_Toggle Replace mode');\n                    }\n\n                    content?.removeEventListener('keydown', keyDown);\n                    content = null;\n                }, 100);\n            }\n        };\n\n        if (I18n.getLanguage() !== 'en') {\n            setTimeout(() => {\n                content = window.document.querySelector('.ace_text-input');\n                content?.addEventListener('keydown', keyDown);\n            }, 200);\n        }\n\n        return () => {\n            timer && clearTimeout(timer);\n            timer = null;\n            content?.removeEventListener('keydown', keyDown);\n            content = null;\n        };\n    }, []);\n\n    return <div\n        style={{\n            width: props.width || '100%',\n            height: props.height || '100%',\n            border: props.error ? '1px solid #800' : '1px solid transparent',\n        }}\n        ref={refEditor}\n    >\n        <AceEditor\n            mode={props.type === 'text' ? 'html' : props.type}\n            theme={props.themeType === 'dark' ? 'clouds_midnight' : 'chrome'}\n            width=\"100%\"\n            height=\"100%\"\n            value={props.value}\n            onChange={newValue => props.onChange(newValue)}\n            readOnly={props.readOnly || false}\n            focus={props.focus}\n            ref={props.refEditor}\n            highlightActiveLine\n            enableBasicAutocompletion\n            enableLiveAutocompletion\n            enableSnippets\n        />\n    </div>;\n};\n\nCustomAceEditor.propTypes = {\n    onChange: PropTypes.func,\n    themeType: PropTypes.string,\n    type: PropTypes.string,\n    value: PropTypes.string,\n    readOnly: PropTypes.bool,\n    height: PropTypes.oneOfType([PropTypes.number, PropTypes.string]),\n    width: PropTypes.oneOfType([PropTypes.number, PropTypes.string]),\n    refEditor: PropTypes.func,\n    error: PropTypes.bool,\n};\n\nexport default CustomAceEditor;\n","import { useEffect, useState } from 'react';\nimport PropTypes from 'prop-types';\n\nimport {\n    MenuItem, Select, Dialog, DialogTitle, Button,\n    DialogContent, DialogActions, IconButton, CircularProgress,\n} from '@mui/material';\n\nimport { HelpOutline, Check as CheckIcon } from '@mui/icons-material';\n\nimport { I18n } from '@iobroker/adapter-react-v5';\n\nimport { readFile } from '../Vis/visUtils';\nimport CustomAceEditor from '../Components/CustomAceEditor';\n\nconst CSS = props => {\n    const [type, setType] = useState('global');\n\n    const [localCss, setLocalCss] = useState('');\n    const [globalCss, setGlobalCss] = useState('');\n    const [showHelp, setShowHelp] = useState(false);\n\n    const [localCssTimer, setLocalCssTimer] = useState(null);\n    const [globalCssTimer, setGlobalCssTimer] = useState(null);\n\n    const timers = {\n        global: {\n            timer: globalCssTimer,\n            setTimer: setGlobalCssTimer,\n            value: globalCss,\n            setValue: setGlobalCss,\n            directory: props.adapterId,\n            file: 'vis-common-user.css',\n        },\n        local: {\n            timer: localCssTimer,\n            setTimer: setLocalCssTimer,\n            value: localCss,\n            setValue: setLocalCss,\n            directory: props.adapterId,\n            file: `${props.projectName}/vis-user.css`,\n        },\n    };\n\n    useEffect(() => {\n        const load = async () => {\n            try {\n                const commonCss = await readFile(props.socket, props.adapterId, 'vis-common-user.css');\n                setGlobalCss(commonCss);\n            } catch (e) {\n                if (e !== 'Not exists') {\n                    console.warn(`Cannot loading global CSS: ${e}`);\n                }\n            }\n            try {\n                const userCss = await readFile(props.socket, props.adapterId, `${props.projectName}/vis-user.css`);\n                setLocalCss(userCss);\n            } catch (e) {\n                if (e !== 'Not exists') {\n                    console.warn(`Cannot load project CSS: ${e}`);\n                }\n            }\n            if (window.localStorage.getItem('CSS.type')) {\n                setType(window.localStorage.getItem('CSS.type'));\n            }\n        };\n\n        load()\n            .catch(e => console.error('Error loading CSS: ', e));\n    }, []);\n\n    const save = (value, saveType) => {\n        timers[saveType].setValue(value);\n        clearTimeout(timers[saveType].timer);\n        timers[saveType].setTimer(setTimeout(() => {\n            timers[saveType].setTimer(null);\n            // inform views about changed CSS\n            props.saveCssFile(timers[saveType].directory, timers[saveType].file, value);\n        }, 1000));\n    };\n\n    let value = type === 'global' ? globalCss : localCss;\n    if (typeof value === 'object') {\n        value = value.data;\n    }\n\n    return <>\n        <div style={{ display: 'flex', alignItems: 'center' }}>\n            {showHelp ? <Dialog\n                open={!0}\n                maxWidth={props.maxWidth || 'md'}\n            >\n                <DialogTitle>{I18n.t('Explanation')}</DialogTitle>\n                <DialogContent>\n                    {type === 'global' ? I18n.t('help_css_global') : I18n.t('help_css_project')}\n                </DialogContent>\n                <DialogActions>\n                    <Button\n                        color=\"grey\"\n                        variant=\"contained\"\n                        onClick={() => setShowHelp(false)}\n                        startIcon={<CheckIcon />}\n                    >\n                        {I18n.t('Ok')}\n                    </Button>\n                </DialogActions>\n            </Dialog> : null}\n            <Select\n                variant=\"standard\"\n                value={type}\n                onChange={e => {\n                    setType(e.target.value);\n                    window.localStorage.setItem('CSS.type', e.target.value);\n                }}\n            >\n                <MenuItem value=\"global\">{I18n.t('Global')}</MenuItem>\n                <MenuItem value=\"local\">{I18n.t('css_project')}</MenuItem>\n            </Select>\n            <IconButton onClick={() => setShowHelp(true)} size=\"small\"><HelpOutline /></IconButton>\n            {globalCssTimer || localCssTimer ? <CircularProgress size={20} /> : null}\n        </div>\n        <CustomAceEditor\n            type=\"css\"\n            themeType={props.themeType}\n            readOnly={!props.editMode}\n            value={value}\n            onChange={newValue => save(newValue, type)}\n            width=\"100%\"\n            focus\n            height=\"calc(100% - 34px)\"\n        />\n    </>;\n};\n\nCSS.propTypes = {\n    projectName: PropTypes.string,\n    socket: PropTypes.object,\n    saveCssFile: PropTypes.func.isRequired,\n    adapterId: PropTypes.string.isRequired,\n    adapterName: PropTypes.string.isRequired,\n};\n\nexport default CSS;\n","import React from 'react';\nimport { store } from '@/Store';\nimport CustomAceEditor from '../Components/CustomAceEditor';\n\ninterface ScriptsProps {\n    changeProject: (project: any) => void;\n    themeType: 'dark' | 'light';\n    editMode: boolean;\n}\n\nconst Scripts = (props: ScriptsProps) => <CustomAceEditor\n    type=\"javascript\"\n    themeType={props.themeType}\n    readOnly={!props.editMode}\n    value={store.getState().visProject.___settings.scripts as string}\n    onChange={newValue => {\n        const project = JSON.parse(JSON.stringify(store.getState().visProject));\n        project.___settings.scripts = newValue;\n        props.changeProject(project);\n    }}\n/>;\n\nexport default Scripts;\n","export const theme = [\n    { value: '', label: 'default' },\n    { value: 'black-tie', label: 'black-tie' },\n    { value: 'blitzer', label: 'blitzer' },\n    { value: 'cupertino', label: 'cupertino' },\n    { value: 'custom-dark', label: 'custom-dark' },\n    { value: 'custom-light', label: 'custom-light' },\n    { value: 'dark-hive', label: 'dark-hive' },\n    { value: 'dot-luv', label: 'dot-luv' },\n    { value: 'eggplant', label: 'eggplant' },\n    { value: 'excite-bike', label: 'excite-bike' },\n    { value: 'flick', label: 'flick' },\n    { value: 'hot-sneaks', label: 'hot-sneaks' },\n    { value: 'humanity', label: 'humanity' },\n    { value: 'overcast', label: 'overcast' },\n    { value: 'redmond', label: 'redmond' },\n    { value: 'smoothness', label: 'smoothness' },\n    { value: 'start', label: 'start' },\n    { value: 'sunny', label: 'sunny' },\n    { value: 'ui-darkness', label: 'ui-darkness' },\n    { value: 'ui-lightness', label: 'ui-lightness' },\n    { value: 'vader', label: 'vader' },\n] as const;\n\nexport const background = [\n    { value: '', label: 'not-specified' },\n    { value: 'fm-dark-background', label: 'Fm dark background' },\n    { value: 'fm-light-background', label: 'Fm light background' },\n    { value: 'no_background', label: 'No background' },\n    { value: 'hq-background-blue-marine-lines', label: 'Blue marine lines' },\n    { value: 'hq-background-blue-marine', label: 'Blue marine' },\n    { value: 'hq-background-radial-blue', label: 'Radial blue' },\n    { value: 'hq-background-gradient-box', label: 'Gradient box' },\n    { value: 'hq-background-h-gradient-black-0', label: 'H gradient black 0' },\n    { value: 'hq-background-h-gradient-black-1', label: 'H gradient black 1' },\n    { value: 'hq-background-h-gradient-black-2', label: 'H gradient black 2' },\n    { value: 'hq-background-h-gradient-black-3', label: 'H gradient black 3' },\n    { value: 'hq-background-h-gradient-black-4', label: 'H gradient black 4' },\n    { value: 'hq-background-h-gradient-black-5', label: 'H gradient black 5' },\n    { value: 'hq-background-h-gradient-orange-0', label: 'H gradient orange 0' },\n    { value: 'hq-background-h-gradient-orange-1', label: 'H gradient orange 1' },\n    { value: 'hq-background-h-gradient-orange-2', label: 'H gradient orange 2' },\n    { value: 'hq-background-h-gradient-orange-3', label: 'H gradient orange 3' },\n    { value: 'hq-background-h-gradient-blue-0', label: 'H gradient blue 0' },\n    { value: 'hq-background-h-gradient-blue-1', label: 'H gradient blue 1' },\n    { value: 'hq-background-h-gradient-blue-2', label: 'H gradient blue 2' },\n    { value: 'hq-background-h-gradient-blue-3', label: 'H gradient blue 3' },\n    { value: 'hq-background-h-gradient-blue-4', label: 'H gradient blue 4' },\n    { value: 'hq-background-h-gradient-blue-5', label: 'H gradient blue 5' },\n    { value: 'hq-background-h-gradient-blue-6', label: 'H gradient blue 6' },\n    { value: 'hq-background-h-gradient-blue-7', label: 'H gradient blue 7' },\n    { value: 'hq-background-h-gradient-yellow-0', label: 'H gradient yellow 0' },\n    { value: 'hq-background-h-gradient-yellow-1', label: 'H gradient yellow 1' },\n    { value: 'hq-background-h-gradient-yellow-2', label: 'H gradient yellow 2' },\n    { value: 'hq-background-h-gradient-yellow-3', label: 'H gradient yellow 3' },\n    { value: 'hq-background-h-gradient-green-0', label: 'H gradient green 0' },\n    { value: 'hq-background-h-gradient-green-1', label: 'H gradient green 1' },\n    { value: 'hq-background-h-gradient-green-2', label: 'H gradient green 2' },\n    { value: 'hq-background-h-gradient-green-3', label: 'H gradient green 3' },\n    { value: 'hq-background-h-gradient-green-4', label: 'H gradient green 4' },\n    { value: 'hq-background-gray-0', label: 'Gray 0' },\n    { value: 'hq-background-gray-1', label: 'Gray 1' },\n    { value: 'hq-background-h-gradient-gray-0', label: 'H gradient gray 0' },\n    { value: 'hq-background-h-gradient-gray-1', label: 'H gradient gray 1' },\n    { value: 'hq-background-h-gradient-gray-2', label: 'H gradient gray 2' },\n    { value: 'hq-background-h-gradient-gray-3', label: 'H gradient gray 3' },\n    { value: 'hq-background-h-gradient-gray-4', label: 'H gradient gray 4' },\n    { value: 'hq-background-h-gradient-gray-5', label: 'H gradient gray 5' },\n    { value: 'hq-background-h-gradient-gray-6', label: 'H gradient gray 6' },\n    { value: 'hq-background-aluminium1', label: 'Aluminium1' },\n    { value: 'hq-background-aluminium2', label: 'Aluminium2' },\n    { value: 'hq-background-colorful', label: 'Colorful' },\n    { value: 'hq-background-carbon-fibre1', label: 'Carbon fibre1' },\n    { value: 'hq-background-carbon-fibre', label: 'Carbon fibre' },\n    { value: 'hq-background-bricks', label: 'Bricks' },\n    { value: 'hq-background-lined-paper', label: 'Lined paper' },\n    { value: 'hq-background-blueprint-grid', label: 'Blueprint grid' },\n    { value: 'hq-background-blue-flowers', label: 'Blue flowers' },\n    { value: 'group-view-css-background', label: 'Group view css background' },\n] as const;\n","import PropTypes from 'prop-types';\nimport React, {\n    useEffect,\n    useRef,\n    useState,\n    useMemo, RefObject,\n} from 'react';\nimport { withStyles } from '@mui/styles';\n\nimport {\n    Accordion,\n    AccordionDetails,\n    AccordionSummary, Button,\n    Checkbox, Fade,\n    IconButton,\n    ListItemText,\n    MenuItem,\n    Paper,\n    Popper,\n    Select,\n    TextField,\n    Autocomplete,\n    Slider,\n    Input,\n    Tooltip,\n    type SelectChangeEvent,\n} from '@mui/material';\n\nimport {\n    ExpandMore as ExpandMoreIcon,\n    Close as CloseIcon,\n    Clear as ClearIcon,\n    Info as InfoIcon,\n} from '@mui/icons-material';\n\nimport {\n    ColorPicker,\n    Utils,\n    I18n,\n    IconPicker,\n    SelectFile as SelectFileDialog,\n    Confirm as ConfirmDialog,\n    TextWithIcon, Icon, type LegacyConnection,\n    type Connection,\n} from '@iobroker/adapter-react-v5';\n\nimport { store } from '@/Store';\nimport { deepClone } from '@/Utils/utils';\nimport { Project, View } from '@/types';\n\nimport { theme as ViewTheme, background } from './ViewData';\nimport MaterialIconSelector from '../Components/MaterialIconSelector';\n\nconst styles: Record<string, any> = {\n    backgroundClass: {\n        display: 'flex',\n        alignItems: 'center',\n    },\n    backgroundClassSquare: {\n        width: 40,\n        height: 40,\n        display: 'inline-block',\n        marginRight: 4,\n    },\n    clearPadding: {\n        '&&&&': {\n            padding: 0,\n            margin: 0,\n            minHeight: 'initial',\n        },\n    },\n    fieldTitle: {\n        width: 140,\n        fontSize: '80%',\n    },\n    fieldContent: {\n        '&&&&&&': {\n            fontSize: '80%',\n        },\n        '& svg': {\n            fontSize: '1rem',\n        },\n    },\n    fieldContentDiv: {\n        display: 'flex',\n        justifyContent: 'space-between',\n        width: '100%',\n        alignItems: 'center',\n    },\n    fieldContentColor: {\n        '&&&&&& label': {\n            display: 'none',\n        },\n        '&&&&&& input': {\n            fontSize: '80%',\n        },\n    },\n    groupSummary: {\n        '&&&&&&': {\n            marginTop: 10,\n            borderRadius: '4px',\n            padding: '2px',\n        },\n    },\n    groupSummaryExpanded: {\n        '&&&&&&': {\n            marginTop: 20,\n            borderTopRightRadius: '4px',\n            borderTopLeftRadius: '4px',\n            padding: '2px',\n        },\n    },\n    // lightedPanel: theme.classes.lightedPanel,\n    fieldContentSlider: {\n        display: 'inline',\n        width: 'calc(100% - 82px)',\n        marginRight: 8,\n    },\n    fieldContentSliderInput: {\n        display: 'inline',\n        width: 50,\n    },\n    fieldContentSliderClear: {\n        display: 'inline',\n        width: 32,\n    },\n    fieldHelpText: {\n        float: 'right',\n        fontSize: 16,\n    },\n};\n\nconst resolution = [\n    { value: 'none', label: 'not defined' },\n    { value: 'user', label: 'User defined' },\n    { value: '375x667', label: 'iPhone SE - Portrait' },\n    { value: '667x375', label: 'iPhone SE - Landscape' },\n    { value: '414x896', label: 'iPhone XR - Portrait' },\n    { value: '896x414', label: 'iPhone XR - Landscape' },\n    { value: '390x844', label: 'iPhone 12 Pro - Portrait' },\n    { value: '844x390', label: 'iPhone 12 Pro - Landscape' },\n    { value: '393x851', label: 'Pixel 5 - Portrait' },\n    { value: '851x393', label: 'Pixel 5 - Landscape' },\n    { value: '360x740', label: 'Samsung Galaxy S8+ - Portrait' },\n    { value: '740x360', label: 'Samsung Galaxy S8+ - Landscape' },\n    { value: '412x915', label: 'Samsung Galaxy S20 Ultra - Portrait' },\n    { value: '915x412', label: 'Samsung Galaxy S20 Ultra - Landscape' },\n    { value: '820x1180', label: 'iPad Air - Portrait' },\n    { value: '1180x820', label: 'iPad Air - Landscape' },\n    { value: '768x1024', label: 'iPad Mini - Portrait' },\n    { value: '1024x768', label: 'iPad Mini - Landscape' },\n    { value: '1024x1366', label: 'iPad Pro - Portrait' },\n    { value: '1366x1024', label: 'iPad Pro - Landscape' },\n    { value: '912x1368', label: 'Surface Pro 7 - Portrait' },\n    { value: '1368x912', label: 'Surface Pro 7 - Landscape' },\n    { value: '540x720', label: 'Surface Duo - Portrait' },\n    { value: '720x540', label: 'Surface Duo - Landscape' },\n    { value: '280x653', label: 'Galaxy Fold - Portrait' },\n    { value: '653x280', label: 'Galaxy Fold - Landscape' },\n    { value: '412x914', label: 'Samsung Galaxy A51/71 - Portrait' },\n    { value: '914x412', label: 'Samsung Galaxy A51/71 - Landscape' },\n    { value: '600x1024', label: 'Nest Hub - Portrait' },\n    { value: '1024x600', label: 'Nest Hub - Landscape' },\n    { value: '800x1280', label: 'Nest Hub Max - Portrait' },\n    { value: '1280x800', label: 'Nest Hub Max - Landscape' },\n    { value: '720x1280', label: 'HD - Portrait' },\n    { value: '1280x720', label: 'HD - Landscape' },\n    { value: '1080x1920', label: 'Full HD - Portrait' },\n    { value: '1920x1080', label: 'Full HD - Landscape' },\n];\n\nconst checkFunction = (\n    funcText: string | ((settings: Record<string, any>) => boolean),\n    settings: Record<string, any>,\n): boolean => {\n    try {\n        let _func: (dataSettings: Record<string, any>) => boolean;\n        if (typeof funcText === 'function') {\n            _func = funcText;\n        } else {\n            // eslint-disable-next-line no-new-func\n            _func = (new Function('data', `return ${funcText}`)) as (dataSettings: Record<string, any>) => boolean;\n        }\n        return _func(settings);\n    } catch (e) {\n        console.error(`Cannot execute hidden on \"${funcText}\": ${e}`);\n    }\n    return false;\n};\n\ninterface Field {\n    label: string;\n    attr: string;\n    type: string;\n    options?: { label: string; value: string }[];\n    field: string;\n    itemModify?: (item: any) => React.JSX.Element;\n    renderValue?: (value: string | number) => React.JSX.Element;\n    hidden?: boolean | string | ((settings: Record<string, any>) => boolean);\n    notStyle?: boolean;\n    applyToAll?: boolean;\n    groupApply?: boolean;\n    noTranslation?: boolean;\n    title?: string;\n    min?: number;\n    max?: number;\n    step?: number;\n    Component?: React.JSX.Element;\n    disabled?: boolean | string | ((settings: Record<string, any>) => boolean);\n    error?: string | ((settings: Record<string, any>) => boolean);\n    width?: number;\n    value?: any;\n    onChange?: (e: SelectChangeEvent<string | number>) => void;\n    marks?: boolean | {\n        value: number;\n        label?: string;\n    }[];\n    valueLabelDisplay?: 'on' | 'auto' | 'off';\n}\n\ninterface FieldGroup {\n    label: string;\n    fields: Field[];\n    hidden?: string | ((settings: Record<string, any>) => boolean);\n}\n\ninterface ApplyField extends Field {\n    group?: FieldGroup;\n}\n\nfunction isPropertySameInAllViews(\n    project: Project,\n    field: Field,\n    selectedView: string,\n    views: string[],\n) {\n    let value = (project[selectedView].settings as Record<string, any>)?.[field.attr];\n    views = views || Object.keys(project).filter(v => v !== '___settings' && v !== selectedView);\n    if (field.type === 'checkbox') {\n        value = !!value;\n    } else {\n        value = value || '';\n    }\n\n    if (!views.length) {\n        return true;\n    }\n\n    for (let v = 0; v < views.length; v++) {\n        let val = (project[views[v]].settings as Record<string, any>)?.[field.attr];\n        if (field.type === 'checkbox') {\n            val = !!val;\n        } else {\n            val = val || '';\n        }\n\n        if (val !== value) {\n            return false;\n        }\n    }\n\n    return true;\n}\n\ninterface ViewProps {\n    selectedView: string;\n    editMode: boolean;\n    changeProject: (project: Record<string, any>) => void;\n    classes: Record<string, any>;\n    triggerAllOpened: number;\n    triggerAllClosed: number;\n    isAllClosed: boolean;\n    setIsAllClosed: (closed: boolean) => void;\n    isAllOpened: boolean;\n    setIsAllOpened: (opened: boolean) => void;\n    userGroups: Record<string, ioBroker.GroupObject>;\n    adapterName: string;\n    themeType: string;\n    instance: number;\n    projectName: string;\n    socket: LegacyConnection;\n}\n\nconst ViewAttributes = (props: ViewProps) => {\n    if (!store.getState().visProject || !store.getState().visProject[props.selectedView]) {\n        return null;\n    }\n\n    const [triggerAllOpened, setTriggerAllOpened] = useState(0);\n    const [triggerAllClosed, setTriggerAllClosed] = useState(0);\n    const [showAllViewDialog, setShowAllViewDialog] = useState<ApplyField | null>(null);\n\n    const view: View = store.getState().visProject[props.selectedView];\n\n    let resolutionSelect = 'none';\n    if (!view.settings || (view.settings.sizex === undefined && view.settings.sizey === undefined)) {\n        resolutionSelect = 'none';\n    } else if (!resolution.find(item => item.value === resolutionSelect)) {\n        resolutionSelect = 'user';\n    } else {\n        resolutionSelect = `${view.settings.sizex}x${view.settings.sizey}`;\n    }\n\n    const fields: FieldGroup[] = useMemo(() => ([\n        {\n            label: 'CSS Common',\n            fields: [\n                {\n                    label: 'display',\n                    attr: 'display',\n                    type: 'select',\n                    options: [\n                        { label: 'flex', value: 'flex' },\n                        { label: 'block', value: 'block' },\n                    ],\n                    noTranslation: true,\n                    title: 'For widgets with relative position',\n                },\n                { label: 'Comment', attr: 'comment', notStyle: true },\n                { label: 'CSS Class', attr: 'class', notStyle: true },\n                {\n                    label: 'Initial filter', attr: 'filterkey', notStyle: true, type: 'filter',\n                },\n                {\n                    label: 'Only for groups',\n                    attr: 'group',\n                    notStyle: true,\n                    type: 'groups',\n                    title: 'This view will be shown only to defined groups',\n                },\n                {\n                    label: 'Theme',\n                    attr: 'theme',\n                    notStyle: true,\n                    type: 'select',\n                    options: ViewTheme,\n                    noTranslation: true,\n                },\n                {\n                    label: 'If user not in group',\n                    attr: 'group_action',\n                    notStyle: true,\n                    type: 'select',\n                    options: [\n                        { label: 'Disabled', value: 'disabled' },\n                        { label: 'Hide', value: 'hide' },\n                    ],\n                },\n            ] as Field[],\n        },\n        {\n            label: 'CSS background (background-...)',\n            fields: [\n                {\n                    label: 'Image',\n                    attr: 'bg-image',\n                    type: 'image',\n                    hidden: 'data.useBackground || (data.style && (!!data.style.background_class || !!data.style[\"background-color\"] || !!data.style[\"background-image\"] || !!data.style[\"background-size\"] || !!data.style[\"background-repeat\"] || !!data.style[\"background-position\"] || !!data.style[\"background-attachment\"]))',\n                    notStyle: true,\n                },\n                {\n                    label: 'Position left',\n                    attr: 'bg-position-x',\n                    type: 'slider',\n                    hidden: '!data[\"bg-image\"]',\n                    notStyle: true,\n                    min: -100,\n                    max: 500,\n                },\n                {\n                    label: 'Position top',\n                    attr: 'bg-position-y',\n                    type: 'slider',\n                    hidden: '!data[\"bg-image\"]',\n                    notStyle: true,\n                    min: -100,\n                    max: 500,\n                },\n                {\n                    label: 'Width',\n                    attr: 'bg-width',\n                    type: 'text',\n                    hidden: '!data[\"bg-image\"]',\n                    notStyle: true,\n                },\n                {\n                    label: 'Height',\n                    attr: 'bg-height',\n                    type: 'text',\n                    hidden: '!data[\"bg-image\"]',\n                    notStyle: true,\n                },\n                {\n                    label: 'Color',\n                    attr: 'bg-color',\n                    type: 'color',\n                    hidden: '!data[\"bg-image\"]',\n                    notStyle: true,\n                },\n                {\n                    label: 'Background class',\n                    type: 'select',\n                    options: background,\n                    attr: 'background_class',\n                    // eslint-disable-next-line react/no-unstable-nested-components\n                    itemModify: item => <>\n                        <span className={`${props.classes.backgroundClassSquare} ${item.value}`} />\n                        {I18n.t(item.label)}\n                    </>,\n                    renderValue: (value: string) => {\n                        const backItem = background.find(item => item?.value === value);\n                        return <div className={props.classes.backgroundClass}>\n                            <span className={`${props.classes.backgroundClassSquare} ${value}`} />\n                            {I18n.t(backItem?.label || value)}\n                        </div>;\n                    },\n                    hidden: '!!data[\"bg-image\"]',\n                },\n                {\n                    label: 'One parameter',\n                    type: 'checkbox',\n                    attr: 'useBackground',\n                    notStyle: true,\n                    hidden: '!!data.background_class || !!data[\"bg-image\"]',\n                },\n                { label: 'background', attr: 'background', hidden: '!data.useBackground || !!data.background_class || !!data[\"bg-image\"]'  },\n                {\n                    label: '-color', type: 'color', attr: 'background-color', hidden: 'data.useBackground || !!data.background_class || !!data[\"bg-image\"]',\n                },\n                { label: '-image', attr: 'background-image', hidden: 'data.useBackground || !!data.background_class || !!data[\"bg-image\"]' },\n                {\n                    label: '-repeat',\n                    type: 'autocomplete',\n                    attr: 'background-repeat',\n                    hidden: 'data.useBackground || !!data.background_class || !!data[\"bg-image\"]',\n                    options: [\n                        'repeat', 'repeat-x', 'repeat-y', 'no-repeat', 'initial', 'inherit',\n                    ],\n                },\n                {\n                    label: '-attachment',\n                    attr: 'background-attachment',\n                    type: 'autocomplete',\n                    hidden: 'data.useBackground || !!data.background_class || !!data[\"bg-image\"]',\n                    options: ['scroll', 'fixed', 'local', 'initial', 'inherit'],\n                },\n                {\n                    label: '-position',\n                    attr: 'background-position',\n                    type: 'autocomplete',\n                    hidden: 'data.useBackground || !!data.background_class || !!data[\"bg-image\"]',\n                    options: ['left top', 'left center', 'left bottom', 'right top', 'right center', 'right bottom', 'center top', 'center center', 'center bottom', 'initial', 'inherit'],\n                },\n                {\n                    label: '-size',\n                    attr: 'background-size',\n                    type: 'autocomplete',\n                    hidden: 'data.useBackground || !!data.background_class || !!data[\"bg-image\"]',\n                    options: ['auto', 'cover', 'contain', 'initial', 'inherit'],\n                },\n                {\n                    label: '-clip',\n                    attr: 'background-clip',\n                    type: 'autocomplete',\n                    hidden: 'data.useBackground || !!data.background_class || !!data[\"bg-image\"]',\n                    options: ['border-box', 'padding-box', 'content-box', 'initial', 'inherit'],\n                },\n                {\n                    label: '-origin',\n                    attr: 'background-origin',\n                    type: 'autocomplete',\n                    hidden: 'data.useBackground || !!data.background_class || !!data[\"bg-image\"]',\n                    options: ['border-box', 'padding-box', 'content-box', 'initial', 'inherit'],\n                },\n            ] as Field[],\n        },\n        {\n            label: 'CSS Font & Text',\n            fields: [\n                { label: 'color', type: 'color', attr: 'color' },\n                { label: 'text-shadow', attr: 'text-shadow' },\n                { label: 'font-family', attr: 'font-family' },\n                { label: 'font-style', attr: 'font-style' },\n                { label: 'font-variant', attr: 'font-variant' },\n                { label: 'font-weight', attr: 'font-weight' },\n                { label: 'font-size', attr: 'font-size' },\n                { label: 'line-height', attr: 'line-height' },\n                { label: 'letter-spacing', attr: 'letter-spacing' },\n                { label: 'word-spacing', attr: 'word-spacing' },\n            ] as Field[],\n        },\n        {\n            label: 'Options',\n            fields: [\n                {\n                    type: 'checkbox', label: 'Default', attr: 'useAsDefault', notStyle: true,\n                },\n                {\n                    type: 'checkbox', label: 'Render always', attr: 'alwaysRender', notStyle: true,\n                },\n                {\n                    type: 'select',\n                    label: 'Grid',\n                    attr: 'snapType',\n                    options: [\n                        { label: 'Disabled', value: 0 },\n                        { label: 'Elements', value: 1 },\n                        { label: 'Grid', value: 2 },\n                    ],\n                    notStyle: true,\n                },\n                {\n                    type: 'color',\n                    label: 'Grid color',\n                    attr: 'snapColor',\n                    hidden: 'data.snapType !== 2',\n                    notStyle: true,\n                },\n                {\n                    type: 'number',\n                    label: 'Grid size',\n                    attr: 'gridSize',\n                    notStyle: true,\n                    hidden: 'data.snapType !== 2',\n                },\n                {\n                    type: 'select',\n                    label: 'Resolution',\n                    options: resolution,\n                    width: 236,\n                    value: resolutionSelect,\n                    onChange: (e: React.ChangeEvent<HTMLSelectElement>) => {\n                        const project = JSON.parse(JSON.stringify(store.getState().visProject));\n                        if (e.target.value === 'none') {\n                            delete project[props.selectedView].settings.sizex;\n                            delete project[props.selectedView].settings.sizey;\n                        } else if (e.target.value === 'user') {\n                            project[props.selectedView].settings.sizex = project[props.selectedView].settings.sizex || 0;\n                            project[props.selectedView].settings.sizey = project[props.selectedView].settings.sizey || 0;\n                            const _resolutionSelect = `${project[props.selectedView].settings.sizex}x${project[props.selectedView].settings.sizey}`;\n                            if (resolution.find(item => item.value === _resolutionSelect)) {\n                                project[props.selectedView].settings.sizex++;\n                            }\n                        } else {\n                            const match = e.target.value.match(/^([0-9]+)x([0-9]+)$/);\n                            if (match) {\n                                project[props.selectedView].settings.sizex = match[1];\n                                project[props.selectedView].settings.sizey = match[2];\n                            }\n                        }\n                        props.changeProject(project);\n                    },\n                    notStyle: true,\n                },\n                {\n                    type: 'raw',\n                    label: 'Width x height (px)',\n                    hidden: 'data.sizex === undefined && data.sizey === undefined',\n                    Component: <span style={{ display: 'flex', alignItems: 'center' }}>\n                        <TextField\n                            variant=\"standard\"\n                            value={view.settings?.sizex === undefined ? '' : view.settings.sizex}\n                            disabled={!props.editMode || resolutionSelect !== 'user'}\n                            InputProps={{\n                                classes: {\n                                    input: Utils.clsx(props.classes.clearPadding, props.classes.fieldContent),\n                                },\n                            }}\n                            onChange={e => {\n                                const project = JSON.parse(JSON.stringify(store.getState().visProject));\n                                project[props.selectedView].settings.sizex = e.target.value;\n                                props.changeProject(project);\n                            }}\n                        />\n                        <CloseIcon\n                            fontSize=\"small\"\n                            style={{\n                                padding: '0px 10px',\n                            }}\n                        />\n                        <TextField\n                            variant=\"standard\"\n                            value={view.settings?.sizey === undefined ? '' : view.settings.sizey}\n                            disabled={!props.editMode || resolutionSelect !== 'user'}\n                            InputProps={{\n                                classes: {\n                                    input: Utils.clsx(props.classes.clearPadding, props.classes.fieldContent),\n                                },\n                            }}\n                            onChange={e => {\n                                const project = JSON.parse(JSON.stringify(store.getState().visProject));\n                                project[props.selectedView].settings.sizey = e.target.value;\n                                props.changeProject(project);\n                            }}\n                        />\n                    </span>,\n                    notStyle: true,\n                },\n                {\n                    type: 'checkbox',\n                    label: 'Limit screen',\n                    attr: 'limitScreen',\n                    hidden: 'data.sizex === undefined && data.sizey === undefined',\n                    notStyle: true,\n                },\n                {\n                    type: 'checkbox',\n                    label: 'Only for desktop',\n                    attr: 'limitScreenDesktop',\n                    hidden: '(data.sizex === undefined && data.sizey === undefined) || !data.limitScreen',\n                    notStyle: true,\n                },\n                {\n                    type: 'slider',\n                    label: 'Limit border width',\n                    attr: 'limitScreenBorderWidth',\n                    min: 0,\n                    max: 20,\n                    hidden: '(data.sizex === undefined && data.sizey === undefined) || !data.limitScreen',\n                    notStyle: true,\n                },\n                {\n                    type: 'color',\n                    label: 'Limit border color',\n                    attr: 'limitScreenBorderColor',\n                    hidden: '(data.sizex === undefined && data.sizey === undefined) || !data.limitScreen || !data.limitScreenBorderWidth',\n                    notStyle: true,\n                },\n                {\n                    type: 'select',\n                    label: 'Limit border style',\n                    attr: 'limitScreenBorderStyle',\n                    noTranslation: true,\n                    options: [\n                        { label: 'solid', value: 'solid' },\n                        { label: 'dotted', value: 'dotted' },\n                        { label: 'dashed', value: 'dashed' },\n                        { label: 'double', value: 'double' },\n                        { label: 'groove', value: 'groove' },\n                        { label: 'ridge', value: 'ridge' },\n                        { label: 'inset', value: 'inset' },\n                        { label: 'outset', value: 'outset' },\n                    ],\n                    hidden: '(data.sizex === undefined && data.sizey === undefined) || !data.limitScreen || !data.limitScreenBorderWidth',\n                    notStyle: true,\n                },\n                {\n                    type: 'color',\n                    label: 'Limit background color',\n                    attr: 'limitScreenBackgroundColor',\n                    hidden: '(data.sizex === undefined && data.sizey === undefined) || !data.limitScreen',\n                    notStyle: true,\n                },\n            ] as Field[],\n        },\n        {\n            label: 'Navigation',\n            fields: [\n                {\n                    type: 'checkbox', label: 'Show navigation', attr: 'navigation', notStyle: true, applyToAll: true, groupApply: true,\n                },\n                {\n                    type: 'text', label: 'Title', attr: 'navigationTitle', notStyle: true, hidden: '!data.navigation',\n                },\n                {\n                    type: 'number', label: 'Order', attr: 'navigationOrder', notStyle: true, hidden: '!data.navigation',\n                },\n                {\n                    type: 'icon64', label: 'Icon', attr: 'navigationIcon', notStyle: true, hidden: '!data.navigation || data.navigationImage',\n                },\n                {\n                    type: 'image', label: 'Image', attr: 'navigationImage', notStyle: true, hidden: '!data.navigation || data.navigationIcon',\n                },\n                {\n                    type: 'select',\n                    label: 'Orientation',\n                    attr: 'navigationOrientation',\n                    notStyle: true,\n                    default: 'vertical',\n                    hidden: '!data.navigation',\n                    applyToAll: true,\n                    options: [\n                        { value: 'vertical', label: 'Vertical' },\n                        { value: 'horizontal', label: 'Horizontal' },\n                    ],\n                },\n                {\n                    type: 'checkbox', label: 'Only icon', attr: 'navigationOnlyIcon', notStyle: true, default: true, hidden: '!data.navigation || data.navigationOrientation !== \"horizontal\"', applyToAll: true,\n                },\n                {\n                    type: 'color', label: 'Background color', attr: 'navigationBackground', notStyle: true, hidden: '!data.navigation || data.navigationOrientation === \"horizontal\"', applyToAll: true,\n                },\n                {\n                    type: 'color', label: 'Background color if selected', attr: 'navigationSelectedBackground', notStyle: true, hidden: '!data.navigation || data.navigationOrientation === \"horizontal\"', applyToAll: true,\n                },\n                {\n                    type: 'color', label: 'Text color if selected', attr: 'navigationSelectedColor', notStyle: true, hidden: '!data.navigation || data.navigationOrientation === \"horizontal\"', applyToAll: true,\n                },\n                {\n                    type: 'color', label: 'Menu header text color', attr: 'navigationHeaderTextColor', notStyle: true, hidden: '!data.navigation',\n                },\n                {\n                    type: 'color', label: 'Text color', attr: 'navigationColor', notStyle: true, hidden: '!data.navigation || data.navigationOrientation === \"horizontal\"', applyToAll: true,\n                },\n                {\n                    type: 'color', label: 'Chevron icon color', attr: 'navigationChevronColor', notStyle: true, hidden: '!data.navigation || data.navigationOrientation === \"horizontal\"', applyToAll: true,\n                },\n                {\n                    type: 'checkbox', label: 'Hide menu', attr: 'navigationHideMenu', notStyle: true, hidden: '!data.navigation || data.navigationOrientation === \"horizontal\"', applyToAll: true,\n                },\n                {\n                    type: 'checkbox', label: 'Hide after selection', attr: 'navigationHideOnSelection', notStyle: true, hidden: '!data.navigation || data.navigationOrientation === \"horizontal\"', applyToAll: true,\n                },\n                {\n                    type: 'text', label: 'Menu header text', attr: 'navigationHeaderText', notStyle: true, hidden: '!data.navigation || data.navigationOrientation === \"horizontal\" || !data.navigationBar', applyToAll: true,\n                },\n                {\n                    type: 'checkbox', label: 'Do not hide menu', attr: 'navigationNoHide', notStyle: true, hidden: '!data.navigation || data.navigationOrientation === \"horizontal\"', applyToAll: true,\n                },\n                {\n                    type: 'checkbox', label: 'Show background of button', attr: 'navigationButtonBackground', notStyle: true, hidden: '!data.navigation || data.navigationNoHide || data.navigationOrientation === \"horizontal\"', applyToAll: true,\n                },\n            ] as Field[],\n        },\n        {\n            label: 'App bar',\n            hidden: '!!data.navigation && data.navigationOrientation === \"horizontal\"',\n            fields: [\n                {\n                    type: 'checkbox', label: 'Show app bar', attr: 'navigationBar', notStyle: true, default: true, applyToAll: true, groupApply: true,\n                },\n                {\n                    type: 'color', label: 'Bar color', attr: 'navigationBarColor', notStyle: true, hidden: '!data.navigationBar', applyToAll: true,\n                },\n                {\n                    type: 'text', label: 'Bar text', attr: 'navigationBarText', notStyle: true, hidden: '!data.navigationBar', applyToAll: true,\n                },\n                {\n                    type: 'icon64', label: 'Bar icon', attr: 'navigationBarIcon', notStyle: true, hidden: '!data.navigationBar || !!data.navigationBarImage', applyToAll: true,\n                },\n                {\n                    type: 'image', label: 'Bar image', attr: 'navigationBarImage', notStyle: true, hidden: '!data.navigationBar || !!data.navigationBarIcon', applyToAll: true,\n                },\n            ] as Field[],\n        },\n        {\n            label: 'Responsive settings',\n            fields: [\n                /*\n                {\n                    type: 'select',\n                    label: 'Direction',\n                    attr: 'flexDirection',\n                    notStyle: true,\n                    options: [\n                        { label: 'Column', value: 'column' },\n                        { label: 'Row', value: 'row' },\n                    ],\n                },\n                {\n                    type: 'select',\n                    label: 'Wrap',\n                    attr: 'flexWrap',\n                    notStyle: true,\n                    options: [\n                        { label: 'Wrap', value: 'wrap' },\n                        { label: 'No wrap', value: 'nowrap' },\n                    ],\n                },\n                {\n                    type: 'select',\n                    label: 'Justify content',\n                    attr: 'justifyContent',\n                    notStyle: true,\n                    options: [\n                        { label: 'flex-start', value: 'flex-start' },\n                        { label: 'center', value: 'center' },\n                        { label: 'flex-end', value: 'flex-end' },\n                        { label: 'space-between', value: 'space-between' },\n                        { label: 'space-around', value: 'space-around' },\n                        { label: 'space-evenly', value: 'space-evenly' },\n                    ],\n                },\n                {\n                    type: 'select',\n                    label: 'Align items',\n                    attr: 'alignItems',\n                    notStyle: true,\n                    options: [\n                        { label: 'flex-start', value: 'flex-start' },\n                        { label: 'center', value: 'center' },\n                        { label: 'flex-end', value: 'flex-end' },\n                        { label: 'stretch', value: 'stretch' },\n                        { label: 'baseline', value: 'baseline' },\n                    ],\n                },\n                {\n                    type: 'select',\n                    label: 'Align content',\n                    attr: 'alignContent',\n                    hidden: data => data.flexWrap === 'nowrap',\n                    notStyle: true,\n                    options: [\n                        { label: 'flex-start', value: 'flex-start' },\n                        { label: 'center', value: 'center' },\n                        { label: 'flex-end', value: 'flex-end' },\n                        { label: 'stretch', value: 'stretch' },\n                        { label: 'space-between', value: 'space-between' },\n                        { label: 'space-around', value: 'space-around' },\n                    ],\n                },\n                */\n                {\n                    type: 'slider',\n                    label: 'Column width',\n                    attr: 'columnWidth',\n                    min: 200,\n                    max: 2000,\n                    step: 10,\n                    notStyle: true,\n                },\n                {\n                    type: 'slider',\n                    label: 'Column gap',\n                    attr: 'columnGap',\n                    min: 0,\n                    max: 200,\n                    step: 1,\n                    notStyle: true,\n                },\n                {\n                    type: 'slider',\n                    label: 'Row gap',\n                    attr: 'rowGap',\n                    min: 0,\n                    max: 200,\n                    step: 1,\n                    notStyle: true,\n                },\n            ] as Field[],\n        },\n    ]), [resolutionSelect, view.settings?.sizex, view.settings?.sizey, props.classes.backgroundClassSquare]);\n\n    const [accordionOpen, setAccordionOpen] = useState(\n        window.localStorage.getItem('attributesView')\n            ? JSON.parse(window.localStorage.getItem('attributesView') || '')\n            : fields.map(() => false),\n    );\n    const [showDialog, setShowDialog] = useState(false);\n    const [showDialog64, setShowDialog64] = useState(false);\n    const [textDialogFocused, setTextDialogFocused] = useState(false);\n    const [textDialogEnabled, setTextDialogEnabled] = useState(true);\n    const textRef: RefObject<HTMLDivElement> = useRef<HTMLDivElement>(null);\n\n    useEffect(() => {\n        const newAccordionOpen: Record<string, boolean> = {};\n        if (props.triggerAllOpened !== triggerAllOpened) {\n            fields.forEach((group, key) => newAccordionOpen[key] = true);\n            setTriggerAllOpened(props.triggerAllOpened || 0);\n            window.localStorage.setItem('attributesView', JSON.stringify(newAccordionOpen));\n            setAccordionOpen(newAccordionOpen);\n        }\n        if (props.triggerAllClosed !== triggerAllClosed) {\n            fields.forEach((group, key) => newAccordionOpen[key] = false);\n            setTriggerAllClosed(props.triggerAllClosed || 0);\n            window.localStorage.setItem('attributesView', JSON.stringify(newAccordionOpen));\n            setAccordionOpen(newAccordionOpen);\n        }\n    }, [props.triggerAllOpened, props.triggerAllClosed]);\n\n    const allOpened = !fields.find((group, key) => !accordionOpen[key]);\n    const allClosed = !fields.find((group, key) => accordionOpen[key]);\n\n    if (props.isAllClosed !== allClosed) {\n        setTimeout(() => props.setIsAllClosed(allClosed), 50);\n    }\n    if (props.isAllOpened !== allOpened) {\n        setTimeout(() => props.setIsAllOpened(allOpened), 50);\n    }\n\n    const viewList = Object.keys(store.getState().visProject).filter(v => v !== '___settings' && v !== props.selectedView);\n\n    let allViewDialog = null;\n    if (showAllViewDialog) {\n        const viewsToChange: string[] = [];\n        if (showAllViewDialog.groupApply && showAllViewDialog.group) {\n            // find all fields with applyToAll flag, and if any is not equal show button\n            for (let f = 0; f < showAllViewDialog.group.fields.length; f++) {\n                const field = showAllViewDialog.group.fields[f];\n                if (field.applyToAll && !field.groupApply) {\n                    let selectedViewValue: any = (store.getState().visProject[props.selectedView].settings as Record<string, any>)?.[field.attr];\n                    if (field.type === 'boolean') {\n                        selectedViewValue = !!selectedViewValue;\n                    } else {\n                        selectedViewValue = selectedViewValue || '';\n                    }\n                    viewList.forEach(_view => {\n                        const newView: View = store.getState().visProject[_view];\n                        if (newView.settings) {\n                            let viewValue: any = (newView.settings as Record<string, any>)[field.attr];\n                            if (field.type === 'boolean') {\n                                viewValue = !!viewValue;\n                            } else if (viewValue !== 0) {\n                                viewValue = viewValue || '';\n                            }\n\n                            if (newView.settings.navigation &&\n                                viewValue !== selectedViewValue &&\n                                !viewsToChange.includes(newView.name || _view)\n                            ) {\n                                viewsToChange.push(newView.name || _view);\n                            }\n                        }\n                    });\n                }\n            }\n        } else {\n            let selectedViewValue = (store.getState().visProject[props.selectedView].settings as Record<string, any>)?.[showAllViewDialog.attr];\n\n            if (showAllViewDialog.type === 'boolean') {\n                selectedViewValue = !!selectedViewValue;\n            } else {\n                selectedViewValue = selectedViewValue || '';\n            }\n            viewList.forEach(_view => {\n                const projView = store.getState().visProject[_view];\n                let viewValue = (projView.settings as Record<string, any>)?.[showAllViewDialog.attr];\n                if (showAllViewDialog.type === 'boolean') {\n                    viewValue = !!viewValue;\n                } else {\n                    viewValue = viewValue || '';\n                }\n                if (projView.settings?.navigation && viewValue !== selectedViewValue) {\n                    viewsToChange.push(projView.name || _view);\n                }\n            });\n        }\n\n        allViewDialog = <ConfirmDialog\n            title={I18n.t(showAllViewDialog.groupApply ? 'Apply ALL navigation properties to all views' : 'Apply to all views')}\n            text={I18n.t('Following views will be changed: %s', viewsToChange.join(', '))}\n            onClose={result => {\n                if (result) {\n                    const project = JSON.parse(JSON.stringify(store.getState().visProject));\n                    if (showAllViewDialog.groupApply && showAllViewDialog.group) {\n                        // find all fields with applyToAll flag, and if any is not equal show button\n                        for (let f = 0; f < showAllViewDialog.group.fields.length; f++) {\n                            const field = showAllViewDialog.group.fields[f];\n                            if (field.applyToAll && !field.groupApply) {\n                                viewList.forEach(_view => {\n                                    if (project[_view].settings.navigation) {\n                                        project[_view].settings[field.attr] = project[props.selectedView].settings[field.attr];\n                                    }\n                                });\n                            }\n                        }\n                    } else {\n                        viewList.forEach(_view => {\n                            if (project[_view].settings.navigation) {\n                                project[_view].settings[showAllViewDialog.attr] = project[props.selectedView].settings[showAllViewDialog.attr];\n                            }\n                        });\n                    }\n\n                    props.changeProject(project);\n                }\n                setShowAllViewDialog(null);\n            }}\n        />;\n    }\n\n    return <div style={{ height: '100%', overflowY: 'auto' }}>\n        {fields.map((group, key) => {\n            if (group.hidden && checkFunction(group.hidden, store.getState().visProject[props.selectedView]?.settings || {})) {\n                return null;\n            }\n            return <Accordion\n                classes={{\n                    root: props.classes.clearPadding,\n                    expanded: props.classes.clearPadding,\n                }}\n                square\n                key={key}\n                elevation={0}\n                expanded={accordionOpen[key]}\n                onChange={(e, expanded) => {\n                    const newAccordionOpen = JSON.parse(JSON.stringify(accordionOpen));\n                    newAccordionOpen[key] = expanded;\n                    window.localStorage.setItem('attributesView', JSON.stringify(newAccordionOpen));\n                    setAccordionOpen(newAccordionOpen);\n                }}\n            >\n                <AccordionSummary\n                    classes={{\n                        root: Utils.clsx(props.classes.clearPadding, accordionOpen[key]\n                            ? props.classes.groupSummaryExpanded : props.classes.groupSummary, props.classes.lightedPanel),\n                        content: props.classes.clearPadding,\n                        expanded: props.classes.clearPadding,\n                        expandIconWrapper: props.classes.clearPadding,\n                    }}\n                    expandIcon={<ExpandMoreIcon />}\n                >\n                    {I18n.t(group.label)}\n                </AccordionSummary>\n                {accordionOpen[key] ? <AccordionDetails style={{ flexDirection: 'column', padding: 0, margin: 0 }}>\n                    <table style={{ width: '100%' }}>\n                        <tbody>\n                            {group.fields.map((field, key2) => {\n                                let error;\n                                let disabled = false;\n                                if (field.hidden !== undefined) {\n                                    if (field.hidden === true) {\n                                        return null;\n                                    }\n                                    if (field.hidden !== false && checkFunction(field.hidden, store.getState().visProject[props.selectedView].settings || {})) {\n                                        return null;\n                                    }\n                                }\n                                if (field.error) {\n                                    error = checkFunction(field.error, store.getState().visProject[props.selectedView].settings || {});\n                                }\n                                if (field.disabled !== undefined) {\n                                    if (field.disabled === true) {\n                                        disabled = true;\n                                    } else if (field.disabled === false) {\n                                        disabled = false;\n                                    } else {\n                                        disabled = !!checkFunction(field.disabled, store.getState().visProject[props.selectedView].settings || {});\n                                    }\n                                }\n                                let value: any = field.notStyle ? (view.settings as Record<string, any>)?.[field.attr] : (view.settings as Record<string, any>)?.style[field.attr];\n                                if (value === null || value === undefined) {\n                                    value = '';\n                                }\n\n                                const change = (changeValue: boolean | number | string | null) => {\n                                    const project = deepClone(store.getState().visProject);\n                                    if (project[props.selectedView].settings) {\n                                        if (field.notStyle) {\n                                            (project[props.selectedView].settings as Record<string, any>)[field.attr] = changeValue;\n                                        } else {\n                                            (project[props.selectedView].settings as Record<string, any>).style[field.attr] = changeValue;\n                                        }\n                                    }\n                                    props.changeProject(project);\n                                };\n\n                                const urlPopper = field.type === 'image' && !disabled ? <Popper\n                                    open={textDialogFocused && textDialogEnabled && !!value && value.toString().startsWith(window.location.origin)}\n                                    anchorEl={textRef.current}\n                                    placement=\"bottom\"\n                                    transition\n                                >\n                                    {({ TransitionProps }) => <Fade {...TransitionProps} timeout={350}>\n                                        <Paper>\n                                            <Button\n                                                style={{ textTransform: 'none' }}\n                                                onClick={() => change(`.${value.toString().slice(window.location.origin.length)}`)}\n                                            >\n                                                {I18n.t('Replace to ')}\n                                                {`.${value.toString().slice(window.location.origin.length)}`}\n                                            </Button>\n                                            <IconButton size=\"small\" onClick={() => setTextDialogEnabled(false)}>\n                                                <ClearIcon fontSize=\"small\" />\n                                            </IconButton>\n                                        </Paper>\n                                    </Fade>}\n                                </Popper> : null;\n\n                                let result: React.JSX.Element | undefined;\n\n                                if (field.type === 'autocomplete' || field.type === 'filter') {\n                                    let options;\n                                    if (field.type === 'filter') {\n                                        options = window.vis ? window.vis.updateFilter() : [];\n                                        options.unshift('');\n                                    } else {\n                                        options = field.options || [];\n                                    }\n\n                                    result = <Autocomplete\n                                        freeSolo\n                                        options={options}\n                                        disabled={!props.editMode || disabled}\n                                        inputValue={value}\n                                        value={value}\n                                        onInputChange={(e, inputValue) => change(inputValue)}\n                                        onChange={(e, inputValue) => change(inputValue)}\n                                        classes={{\n                                            input: Utils.clsx(props.classes.clearPadding, props.classes.fieldContent),\n                                        }}\n                                        renderInput={params => (\n                                            <TextField\n                                                variant=\"standard\"\n                                                {...params}\n                                            />\n                                        )}\n                                    />;\n                                } else if (field.type === 'checkbox') {\n                                    result = <Checkbox\n                                        disabled={!props.editMode || disabled}\n                                        checked={!!value}\n                                        classes={{\n                                            root: Utils.clsx(props.classes.fieldContent, props.classes.clearPadding),\n                                        }}\n                                        size=\"small\"\n                                        onChange={e => change(e.target.checked)}\n                                    />;\n                                } else if (field.type === 'select') {\n                                    result = <Select\n                                        disabled={!props.editMode || disabled}\n                                        variant=\"standard\"\n                                        value={field.value ? field.value : value}\n                                        classes={{\n                                            root: props.classes.clearPadding,\n                                            select: Utils.clsx(props.classes.fieldContent, props.classes.clearPadding),\n                                        }}\n                                        onChange={field.onChange ? field.onChange : (e: SelectChangeEvent<string | number>) => change(e.target.value)}\n                                        renderValue={field.renderValue}\n                                        fullWidth\n                                    >\n                                        {field.options?.map(selectItem => <MenuItem\n                                            value={selectItem.value}\n                                            key={selectItem.value}\n                                        >\n                                            {field.itemModify ? field.itemModify(selectItem) : (field.noTranslation ? selectItem.label : I18n.t(selectItem.label))}\n                                        </MenuItem>)}\n                                    </Select>;\n                                } else if (field.type === 'multi-select') {\n                                    result = <Select\n                                        disabled={!props.editMode || disabled}\n                                        variant=\"standard\"\n                                        renderValue={selected => selected.join(', ')}\n                                        classes={{\n                                            root: props.classes.clearPadding,\n                                            select: Utils.clsx(props.classes.fieldContent, props.classes.clearPadding),\n                                        }}\n                                        value={value || []}\n                                        onChange={e => change(e.target.value)}\n                                        multiple\n                                        fullWidth\n                                    >\n                                        {field.options?.map(selectItem => <MenuItem\n                                            value={selectItem.value}\n                                            key={selectItem.value}\n                                        >\n                                            <Checkbox checked={value.includes(selectItem.value)} />\n                                            <ListItemText primary={field.noTranslation ? selectItem.label : I18n.t(selectItem.label)} />\n                                        </MenuItem>)}\n                                    </Select>;\n                                } else if (field.type === 'groups') {\n                                    result = <Select\n                                        variant=\"standard\"\n                                        disabled={!props.editMode || disabled}\n                                        value={value || []}\n                                        fullWidth\n                                        multiple\n                                        classes={{\n                                            root: props.classes.clearPadding,\n                                            select: Utils.clsx(props.classes.fieldContent, props.classes.clearPadding),\n                                        }}\n                                        renderValue={selected => <div style={{ display: 'flex' }}>\n                                            {Object.values(props.userGroups)\n                                                .filter(_group => selected.includes(_group._id.split('.')[2]))\n                                                .map(_group =>\n                                                    <span key={_group._id} style={{ padding: '4px 4px' }}>\n                                                        <TextWithIcon\n                                                            value={_group._id}\n                                                            lang={I18n.getLanguage()}\n                                                            list={[_group]}\n                                                        />\n                                                    </span>)}\n                                        </div>}\n                                        onChange={e => change(e.target.value)}\n                                    >\n                                        {Object.values(props.userGroups).map((_group, i) => <MenuItem\n                                            value={_group._id.split('.')[2]}\n                                            key={`${_group._id.split('.')[2]}_${i}`}\n                                        >\n                                            <Checkbox\n                                                disabled={disabled}\n                                                checked={(value || []).includes(_group._id.split('.')[2])}\n                                            />\n                                            <TextWithIcon\n                                                value={_group._id}\n                                                lang={I18n.getLanguage()}\n                                                list={[_group]}\n                                            />\n                                        </MenuItem>)}\n                                    </Select>;\n                                } else if (field.type === 'raw') {\n                                    result = field.Component;\n                                } else if (field.type === 'color') {\n                                    result = <ColorPicker\n                                        value={value}\n                                        className={props.classes.fieldContentColor}\n                                        disabled={!props.editMode || disabled}\n                                        onChange={color => change(color)}\n                                        openAbove\n                                    />;\n                                } else if (field.type === 'icon') {\n                                    result = <IconPicker\n                                        value={value}\n                                        onChange={fileBlob => change(fileBlob)}\n                                        previewClassName={props.classes.iconPreview}\n                                        disabled={!props.editMode || disabled}\n                                        // icon={ImageIcon}\n                                        // classes={props.classes}\n                                    />;\n                                } else if (field.type === 'image') {\n                                    let _value;\n                                    if (showDialog) {\n                                        _value = value;\n                                        if (_value.startsWith('../')) {\n                                            _value = _value.substring(3);\n                                        } else if (_value.startsWith('_PRJ_NAME')) {\n                                            _value = _value.replace('_PRJ_NAME', `../${props.adapterName}.${props.instance}/${props.projectName}/`);\n                                        }\n                                    }\n                                    result = <>\n                                        <TextField\n                                            variant=\"standard\"\n                                            fullWidth\n                                            error={!!error}\n                                            helperText={typeof error === 'string' ? I18n.t(error) : null}\n                                            disabled={!props.editMode || disabled}\n                                            InputProps={{\n                                                classes: { input: Utils.clsx(props.classes.clearPadding, props.classes.fieldContent) },\n                                                endAdornment: [\n                                                    value ?\n                                                        <IconButton key=\"clear\" onClick={() => change('')} size=\"small\"><ClearIcon /></IconButton> : null,\n                                                    <Button\n                                                        key=\"select\"\n                                                        disabled={!props.editMode || disabled}\n                                                        size=\"small\"\n                                                        onClick={() => setShowDialog(true)}\n                                                    >\n                                                        ...\n                                                    </Button>,\n                                                ],\n                                            }}\n                                            ref={textRef}\n                                            value={value}\n                                            onFocus={() => setTextDialogFocused(true)}\n                                            onBlur={() => setTextDialogFocused(false)}\n                                            onChange={e => change(e.target.value)}\n                                        />\n                                        {urlPopper}\n                                        {showDialog ? <SelectFileDialog\n                                            title={I18n.t('Select file')}\n                                            onClose={() => setShowDialog(false)}\n                                            restrictToFolder={`${props.adapterName}.${props.instance}/${props.projectName}`}\n                                            allowNonRestricted\n                                            allowUpload\n                                            allowDownload\n                                            allowCreateFolder\n                                            allowDelete\n                                            allowView\n                                            showToolbar\n                                            imagePrefix=\"../\"\n                                            selected={_value}\n                                            filterByType=\"images\"\n                                            onOk={selectedOrArray => {\n                                                let selected: string | undefined | null = Array.isArray(selectedOrArray) ? selectedOrArray[0] : selectedOrArray;\n                                                const projectPrefix = `${props.adapterName}.${props.instance}/${props.projectName}/`;\n                                                if (selected?.startsWith(projectPrefix)) {\n                                                    selected = `_PRJ_NAME/${selected.substring(projectPrefix.length)}`;\n                                                } else if (selected?.startsWith('/')) {\n                                                    selected = `..${selected}`;\n                                                } else if (selected && !selected.startsWith('.')) {\n                                                    selected = `../${selected}`;\n                                                } else if (!selected) {\n                                                    selected = null;\n                                                }\n                                                change(selected);\n                                                setShowDialog(false);\n                                            }}\n                                            socket={props.socket as any as Connection}\n                                        /> : null}\n                                    </>;\n                                } else if (field.type === 'slider') {\n                                    result = <div style={{ display: 'flex' }}>\n                                        <Slider\n                                            disabled={!props.editMode || disabled}\n                                            className={props.classes.fieldContentSlider}\n                                            size=\"small\"\n                                            onChange={(_e, newValue) => change(Array.isArray(newValue) ? newValue[0] : newValue)}\n                                            value={typeof value === 'number' ? value : 0}\n                                            min={field.min}\n                                            max={field.max}\n                                            step={field.step}\n                                            marks={field.marks}\n                                            valueLabelDisplay={field.valueLabelDisplay}\n                                        />\n                                        <Input\n                                            className={props.classes.fieldContentSliderInput}\n                                            value={value}\n                                            disabled={!props.editMode || disabled}\n                                            size=\"small\"\n                                            onChange={e => change(parseFloat(e.target.value))}\n                                            classes={{ input: Utils.clsx(props.classes.clearPadding, props.classes.fieldContent) }}\n                                            inputProps={{\n                                                step: field.step,\n                                                min: field.min,\n                                                max: field.max,\n                                                type: 'number',\n                                            }}\n                                        />\n                                        <IconButton disabled={!props.editMode || disabled} onClick={() => change(null)}><ClearIcon /></IconButton>\n                                    </div>;\n                                } else if (field.type === 'icon64') {\n                                    result = <div style={{ display: 'flex', width: '100%', alignItems: 'center' }}>\n                                        <TextField\n                                            fullWidth\n                                            size=\"small\"\n                                            variant=\"standard\"\n                                            value={value}\n                                            error={!!error}\n                                            disabled={!props.editMode || disabled}\n                                            onChange={e => change(e.target.value)}\n                                            InputProps={{\n                                                endAdornment: value ? <IconButton\n                                                    disabled={!props.editMode || disabled}\n                                                    size=\"small\"\n                                                    onClick={() => change('')}\n                                                >\n                                                    <ClearIcon />\n                                                </IconButton> : null,\n                                                classes: {\n                                                    input: Utils.clsx(props.classes.clearPadding, props.classes.fieldContent),\n                                                },\n                                            }}\n                                        />\n                                        <Button\n                                            disabled={!props.editMode || disabled}\n                                            variant={value ? 'outlined' : undefined}\n                                            // @ts-expect-error grey is a valid color\n                                            color={value ? 'grey' : undefined}\n                                            onClick={() => setShowDialog64(true)}\n                                        >\n                                            {value ? <Icon src={value} style={{ width: 36, height: 36 }} /> : '...'}\n                                        </Button>\n                                        {showDialog64 &&\n                                            <MaterialIconSelector\n                                                themeType={props.themeType}\n                                                value={value}\n                                                onClose={(icon: string | null) => {\n                                                    setShowDialog64(false);\n                                                    if (icon !== null) {\n                                                        change(icon);\n                                                    }\n                                                }}\n                                            />}\n                                    </div>;\n                                } else {\n                                    result = <TextField\n                                        disabled={!props.editMode || disabled}\n                                        variant=\"standard\"\n                                        fullWidth\n                                        InputProps={{\n                                            classes: {\n                                                input: Utils.clsx(props.classes.clearPadding, props.classes.fieldContent),\n                                            },\n                                        }}\n                                        value={value}\n                                        onChange={e => change(e.target.value)}\n                                        type={field.type}\n                                        error={!!error}\n                                        helperText={typeof error === 'string' ? I18n.t(error) : null}\n                                    />;\n                                }\n\n                                let helpText = null;\n                                if (field.title) {\n                                    helpText = <Tooltip title={I18n.t(field.title)}>\n                                        <InfoIcon className={props.classes.fieldHelpText} />\n                                    </Tooltip>;\n                                }\n\n                                if (field.applyToAll) {\n                                    if (field.groupApply) {\n                                        // find all fields with applyToAll flag, and if any is not equal show button\n                                        const isShow = group.fields.find(_field =>\n                                            _field.applyToAll &&\n                                            !isPropertySameInAllViews(store.getState().visProject, _field, props.selectedView, viewList));\n\n                                        if (isShow) {\n                                            result = <div style={{ display: 'flex', width: '100%' }}>\n                                                <div\n                                                    style={{\n                                                        flex: 1,\n                                                        lineHeight: '36px',\n                                                        marginRight: 4,\n                                                        display: 'flex',\n                                                        alignItems: 'center',\n                                                    }}\n                                                >\n                                                    {result}\n                                                </div>\n                                                <Tooltip title={I18n.t('Apply ALL navigation properties to all views')}>\n                                                    <span>\n                                                        <Button\n                                                            disabled={!props.editMode || disabled}\n                                                            variant=\"contained\"\n                                                            onClick={() => setShowAllViewDialog({ ...field, group })}\n                                                        >\n                                                            {I18n.t('apply_to_all')}\n                                                        </Button>\n                                                    </span>\n                                                </Tooltip>\n                                            </div>;\n                                        }\n                                    } else if (!isPropertySameInAllViews(store.getState().visProject, field, props.selectedView, viewList)) {\n                                        result = <div style={{ display: 'flex', width: '100%' }}>\n                                            <div\n                                                style={{\n                                                    flex: 1,\n                                                    lineHeight: '36px',\n                                                    marginRight: 4,\n                                                    display: 'flex',\n                                                    alignItems: 'center',\n                                                }}\n                                            >\n                                                {result}\n                                            </div>\n                                            <Tooltip title={I18n.t('Apply to all views')}>\n                                                <span>\n                                                    <Button\n                                                        disabled={!props.editMode || disabled}\n                                                        variant=\"outlined\"\n                                                        onClick={() => setShowAllViewDialog(field)}\n                                                    >\n                                                        {I18n.t('apply_to_all')}\n                                                    </Button>\n                                                </span>\n                                            </Tooltip>\n                                        </div>;\n                                    }\n                                }\n\n                                return <tr key={key2}>\n                                    <td\n                                        className={props.classes.fieldTitle}\n                                        title={!field.title ? undefined : I18n.t(field.title)}\n                                    >\n                                        {I18n.t(field.label)}\n                                        {helpText}\n                                    </td>\n                                    <td className={props.classes.fieldContent}>{result}</td>\n                                </tr>;\n                            })}\n                        </tbody>\n                    </table>\n                </AccordionDetails> : null}\n            </Accordion>;\n        })}\n        {allViewDialog}\n    </div>;\n};\n\nViewAttributes.propTypes = {\n    changeProject: PropTypes.func,\n    classes: PropTypes.object,\n    userGroups: PropTypes.object,\n    selectedView: PropTypes.string,\n    themeType: PropTypes.string,\n\n    setIsAllOpened: PropTypes.func,\n    setIsAllClosed: PropTypes.func,\n    isAllOpened: PropTypes.bool,\n    isAllClosed: PropTypes.bool,\n    triggerAllOpened: PropTypes.number,\n    triggerAllClosed: PropTypes.number,\n\n    adapterName: PropTypes.string,\n    instance: PropTypes.number,\n    projectName: PropTypes.string,\n};\n\nexport default withStyles(styles)(ViewAttributes);\n","import PropTypes from 'prop-types';\nimport {\n    Button, Dialog, DialogActions, DialogContent, DialogTitle,\n} from '@mui/material';\n\nimport { Close as CloseIcon } from '@mui/icons-material';\n\nimport { I18n } from '@iobroker/adapter-react-v5';\n\nconst IODialog = props => (props.open ? <Dialog\n    onClose={props.closeDisabled ? null : props.onClose}\n    open={!0}\n    fullScreen={!!props.fullScreen}\n    maxWidth={props.maxWidth || 'md'}\n>\n    <DialogTitle>{props.noTranslation ? props.title : I18n.t(props.title)}</DialogTitle>\n    <DialogContent\n        style={{ minWidth: props.minWidth || undefined }}\n        onKeyUp={e => {\n            if (props.action) {\n                if (!props.actionDisabled && !props.keyboardDisabled) {\n                    if (e.keyCode === 13) {\n                        props.action();\n                        if (!props.actionNoClose) {\n                            props.onClose();\n                        }\n                    }\n                }\n            }\n        }}\n    >\n        {props.children}\n    </DialogContent>\n    <DialogActions>\n        {props.dialogActions || null}\n        {props.actionTitle\n            ? <Button\n                variant=\"contained\"\n                onClick={() => {\n                    props.action();\n                    if (!props.actionNoClose) {\n                        props.onClose();\n                    }\n                }}\n                color={props.actionColor ? props.actionColor : 'primary'}\n                disabled={props.actionDisabled}\n                startIcon={props.ActionIcon ? <props.ActionIcon /> : undefined}\n            >\n                {props.noTranslation ? props.actionTitle : I18n.t(props.actionTitle)}\n            </Button> : null}\n        <Button\n            variant=\"contained\"\n            color=\"grey\"\n            onClick={props.onClose}\n            disabled={props.closeDisabled}\n            startIcon={<CloseIcon />}\n        >\n            {props.noTranslation && props.closeTitle ? props.closeTitle : I18n.t(props.closeTitle || 'Cancel')}\n        </Button>\n    </DialogActions>\n</Dialog> : null);\n\nIODialog.propTypes = {\n    ActionIcon: PropTypes.any,\n    action: PropTypes.func,\n    actionColor: PropTypes.string,\n    actionDisabled: PropTypes.bool,\n    actionNoClose: PropTypes.bool,\n    actionTitle: PropTypes.string,\n    children: PropTypes.any,\n    closeTitle: PropTypes.string,\n    closeDisabled: PropTypes.bool,\n    dialogActions: PropTypes.any,\n    keyboardDisabled: PropTypes.bool,\n    onClose: PropTypes.func,\n    open: PropTypes.bool,\n    title: PropTypes.string,\n    fullScreen: PropTypes.bool,\n    maxWidth: PropTypes.string,\n    minWidth: PropTypes.oneOfType([PropTypes.number, PropTypes.string]),\n    noTranslation: PropTypes.bool,\n};\n\nexport default IODialog;\n","import { useEffect, useState } from 'react';\nimport PropTypes from 'prop-types';\n\nimport IODialog from '../../Components/IODialog';\nimport CustomAceEditor from '../../Components/CustomAceEditor';\n\nconst TextDialog = props => {\n    const [value, changeValue] = useState('');\n\n    useEffect(() => {\n        changeValue(props.value);\n    }, [props.open]);\n\n    return props.open ? <IODialog\n        keyboardDisabled\n        title={props.type === 'json' ? 'JSON edit' : (props.type === 'html' ? 'HTML edit' : 'Text edit')}\n        open={!0}\n        actionTitle=\"Save\"\n        action={() => props.onChange(value)}\n        onClose={props.onClose}\n        minWidth={800}\n        actionDisabled={value === props.value}\n    >\n        <CustomAceEditor\n            type={props.type}\n            themeType={props.themeType}\n            value={value}\n            focus\n            height={400}\n            onChange={newValue => changeValue(newValue)}\n        />\n    </IODialog> : null;\n};\n\nTextDialog.propTypes = {\n    onChange: PropTypes.func,\n    onClose: PropTypes.func,\n    open: PropTypes.bool,\n    themeType: PropTypes.string,\n    type: PropTypes.string,\n    value: PropTypes.string,\n};\n\nexport default TextDialog;\n","import {\n    useEffect, useRef, useState,\n} from 'react';\nimport PropTypes from 'prop-types';\n\nimport {\n    Autocomplete, Box, Button, Checkbox, Fade, IconButton, Input, ListItemText,\n    ListSubheader, MenuItem, Paper, Popper, Select, Slider, TextField, FormControl,\n    FormHelperText, ListItemIcon, DialogActions,\n    Dialog, DialogTitle, DialogContent, DialogContentText,\n} from '@mui/material';\n\nimport {\n    InsertDriveFile as FileIcon,\n    Clear as ClearIcon,\n    Edit as EditIcon,\n    Check,\n    Close,\n} from '@mui/icons-material';\nimport { FaFolderOpen as FolderOpenedIcon } from 'react-icons/fa';\n\nimport {\n    I18n,\n    IconPicker,\n    Utils,\n    Icon,\n    TextWithIcon,\n    ColorPicker,\n    SelectID,\n    SelectFile as SelectFileDialog,\n} from '@iobroker/adapter-react-v5';\n\nimport TextDialog from './TextDialog';\nimport MaterialIconSelector from '../../Components/MaterialIconSelector';\nimport { findWidgetUsages } from '../../Vis/visUtils';\nimport { store, recalculateFields, selectWidget } from '../../Store';\nimport { deepClone } from '../../Utils/utils';\n\nconst POSSIBLE_UNITS = ['px', '%', 'em', 'rem', 'vh', 'vw', 'vmin', 'vmax', 'ex', 'ch', 'cm', 'mm', 'in', 'pt', 'pc'];\n\nfunction collectClasses() {\n    const result = [];\n    const sSheetList = document.styleSheets;\n    for (let sSheet = 0; sSheet < sSheetList.length; sSheet++) {\n        if (!document.styleSheets[sSheet]) {\n            continue;\n        }\n        try {\n            const ruleList = document.styleSheets[sSheet].cssRules;\n            if (ruleList) {\n                for (let rule = 0; rule < ruleList.length; rule++) {\n                    if (!ruleList[rule].selectorText) {\n                        continue;\n                    }\n                    const _styles = ruleList[rule].selectorText.split(',');\n                    for (let s = 0; s < _styles.length; s++) {\n                        const subStyles = _styles[s].trim().split(' ');\n                        const _style = subStyles[subStyles.length - 1].replace('::before', '').replace('::after', '').replace(':before', '').replace(':after', '');\n\n                        if (!_style || _style[0] !== '.' || _style.includes(':')) {\n                            continue;\n                        }\n\n                        let name = _style;\n                        name = name.replace(',', '');\n                        name = name.replace(/^\\./, '');\n\n                        const val  = name;\n                        name = name.replace(/^hq-background-/, '');\n                        name = name.replace(/^hq-/, '');\n                        name = name.replace(/^ui-/, '');\n                        name = name.replace(/[-_]/g, ' ');\n\n                        if (name.length > 0) {\n                            name = name[0].toUpperCase() + name.substring(1);\n                            let fff = document.styleSheets[sSheet].href;\n\n                            if (fff && fff.includes('/')) {\n                                fff = fff.substring(fff.lastIndexOf('/') + 1);\n                            }\n\n                            if (!result[val]) {\n                                if (subStyles.length > 1) {\n                                    result[val] = {\n                                        name, file: fff, attrs: ruleList[rule].style, parentClass: subStyles[0].replace('.', ''),\n                                    };\n                                } else {\n                                    result[val] = { name, file: fff, attrs: ruleList[rule].style };\n                                }\n                            }\n                        }\n                    }\n                }\n            }\n        } catch (e) {\n            if (e.toString().includes('Cannot access rules')) {\n                // ignore\n                console.warn(`[${sSheet}] Cannot access rules`);\n            } else {\n                console.error(`[${sSheet}] Error by rules collection: ${e}`);\n            }\n        }\n    }\n\n    return result;\n}\n\nfunction getStylesOptions(options) {\n    // Fill the list with styles\n    const _internalList = window.collectClassesValue;\n\n    options.filterName  = options.filterName  || '';\n    options.filterAttrs = options.filterAttrs || '';\n    options.filterFile  = options.filterFile  || '';\n\n    let styles = {};\n\n    if (options.styles) {\n        styles = { ...options.styles };\n    } else if (options.filterFile || options.filterName) {\n        // IF filter defined\n        const filters = options.filterName  ? options.filterName.split(' ')  : null;\n        const attrs   = options.filterAttrs ? options.filterAttrs.split(' ') : null;\n        const files   = options.filterFile  ? options.filterFile.split(' ')  : [''];\n\n        Object.keys(_internalList).forEach(style =>\n            files.forEach(file => {\n                if (!options.filterFile ||\n                        (_internalList[style].file && _internalList[style].file.includes(file))\n                ) {\n                    let isFound = !filters;\n\n                    isFound = isFound || (!!filters.find(filter => style.includes(filter)));\n\n                    if (isFound) {\n                        isFound = !attrs;\n                        if (!isFound) {\n                            isFound = attrs.find(attr => {\n                                const t = _internalList[style].attrs[attr];\n                                return t || t === 0;\n                            });\n                        }\n                    }\n\n                    if (isFound) {\n                        let n = _internalList[style].name;\n                        if (options.removeName) {\n                            n = n.replace(options.removeName, '');\n                            n = n[0].toUpperCase() + n.substring(1).toLowerCase();\n                        }\n                        styles[style] = {\n                            name:        n,\n                            file:        _internalList[style].file,\n                            parentClass: _internalList[style].parentClass,\n                        };\n                    }\n                }\n            }));\n    } else {\n        styles = { ...styles, ..._internalList };\n    }\n\n    return styles;\n}\n\nconst getViewOptions = (project, options = [], parentId = null, level = 0) => {\n    project.___settings.folders\n        .filter(folder => (folder.parentId || null) === parentId)\n        .forEach(folder => {\n            options.push({\n                type: 'folder',\n                folder,\n                level: level + 1,\n            });\n\n            getViewOptions(project, options, folder.id, level + 1);\n        });\n\n    const keys = Object.keys(project)\n        .filter(view => (project[view].parentId || null) === parentId && !view.startsWith('__'));\n\n    keys.forEach(view => {\n        options.push({\n            type: 'view',\n            view,\n            label: project[view].settings?.navigationTitle ? `${project[view].settings.navigationTitle} (${view})` : view,\n            level: level + 1,\n        });\n    });\n\n    return options;\n};\n\n// Optimize translation\nconst wordsCache = {};\n\nconst t = (word, ...args) => {\n    const hash = `${word}_${args.join(',')}`;\n    if (!wordsCache[hash]) {\n        wordsCache[hash] = I18n.t(word, ...args);\n    }\n    return wordsCache[hash];\n};\n\nfunction modifyWidgetUsages(project, usedInView, usedWidgetId, inNewWidgetId, inAttr) {\n    // find where it is used\n    const newProject = deepClone(project);\n    const usedIn = findWidgetUsages(newProject, usedInView, usedWidgetId);\n    usedIn.forEach(usage => {\n        newProject[usage.view].widgets[usage.wid].data[usage.attr] = '';\n    });\n    newProject[usedInView].widgets[inNewWidgetId].data[inAttr] = usedWidgetId;\n\n    return newProject;\n}\n\nconst WidgetField = props => {\n    const [idDialog, setIdDialog] = useState(false);\n\n    const [objectCache, setObjectCache] = useState(null);\n    const [askForUsage, setAskForUsage] = useState(null);\n\n    const {\n        field,\n        widget,\n        adapterName,\n        instance,\n        projectName,\n        isDifferent,\n        error,\n        disabled,\n        index,\n        widgetId,\n    } = props;\n\n    let customLegacyComponent = null;\n\n    if (field.type?.startsWith('custom,')) {\n        const options = field.type.split(',');\n        options.shift();\n        const funcs = options[0].split('.');\n        if (funcs[0] === 'vis') {\n            funcs.shift();\n        }\n        if (funcs[0] === 'binds') {\n            funcs.shift();\n        }\n\n        window._   = window.vis._; // for old widgets, else lodash overwrites it\n        window.vis.activeWidgets = [...props.selectedWidgets];\n        window.vis.activeView = props.selectedView;\n\n        if (funcs.length === 1) {\n            if (typeof window.vis.binds[funcs[0]] === 'function') {\n                try {\n                    customLegacyComponent = window.vis.binds[funcs[0]](field.name, options);\n                } catch (e) {\n                    console.error(`vis.binds.${funcs.join('.')}: ${e}`);\n                }\n            } else {\n                console.log(`No function: vis.binds.${funcs.join('.')}`);\n            }\n        } else if (funcs.length === 2) {\n            if (window.vis.binds[funcs[0]] && typeof window.vis.binds[funcs[0]][funcs[1]] === 'function') {\n                try {\n                    customLegacyComponent = window.vis.binds[funcs[0]][funcs[1]](field.name, options);\n                } catch (e) {\n                    console.error(`vis.binds.${funcs.join('.')}: ${e}`);\n                }\n            } else {\n                console.log(`No function: vis.binds.${funcs.join('.')}`);\n            }\n        } else if (funcs.length === 3) {\n            if (window.vis.binds[funcs[0]] && window.vis.binds[funcs[0]][funcs[1]] && typeof window.vis.binds[funcs[0]][funcs[1]][funcs[2]] === 'function') {\n                try {\n                    customLegacyComponent = window.vis.binds[funcs[0]][funcs[1]][funcs[2]](field.name, options);\n                } catch (e) {\n                    console.error(`vis.binds.${funcs.join('.')}: ${e}`);\n                }\n            } else {\n                console.log(`No function: vis.binds.${funcs.join('.')}`);\n            }\n        } else if (!funcs.length) {\n            console.log('Function name is too short: vis.binds');\n        } else {\n            console.log(`Function name is too long: vis.binds.${funcs.join('.')}`);\n        }\n    }\n\n    const [cachedValue, setCachedValue] = useState('');\n    const [instances, setInstances] = useState([]);\n\n    const cacheTimer = useRef(null);\n    const refCustom = useRef();\n\n    let onChangeTimeout;\n\n    const applyValue = newValues => {\n        const project = deepClone(store.getState().visProject);\n        props.selectedWidgets.forEach((selectedWidget, i) => {\n            const value = Array.isArray(newValues) && field.type !== 'groups' ? newValues[i] : newValues;\n\n            const data = props.isStyle\n                ? project[props.selectedView].widgets[selectedWidget].style\n                : project[props.selectedView].widgets[selectedWidget].data;\n\n            data[field.name] = value;\n\n            if (field.onChangeFunc && props.widgetType) {\n                try {\n                    window.vis.binds[props.widgetType.set][field.onChangeFunc](\n                        selectedWidget,\n                        props.selectedView,\n                        value,\n                        field.name,\n                        props.isStyle,\n                        props.isStyle ? widget.style[field.name] : widget.data[field.name],\n                        index,\n                    );\n                } catch (e) {\n                    console.error(`Cannot call onChangeFunc: ${e}`);\n                }\n            }\n            if (field.onChange) {\n                field.onChange(field, JSON.parse(JSON.stringify(data)), newData => {\n                    const _project = JSON.parse(JSON.stringify(store.getState().visProject));\n                    _project[props.selectedView].widgets[selectedWidget].data = newData;\n                    onChangeTimeout && clearTimeout(onChangeTimeout);\n                    onChangeTimeout = setTimeout(() => {\n                        onChangeTimeout = null;\n                        props.changeProject(_project);\n                    }, 100);\n                }, props.socket, index);\n            }\n        });\n\n        props.changeProject(project);\n    };\n\n    const change = changeValue => {\n        if (Array.isArray(changeValue) || field.immediateChange) {\n            // apply immediately\n            applyValue(changeValue);\n        } else {\n            setCachedValue(changeValue);\n            cacheTimer.current && clearTimeout(cacheTimer.current);\n            cacheTimer.current = setTimeout(() => {\n                cacheTimer.current = null;\n                applyValue(changeValue);\n            }, 300);\n        }\n    };\n\n    let propValue = props.isStyle ? widget.style?.[field.name] : widget.data?.[field.name];\n    if (propValue === undefined) {\n        propValue = null;\n    }\n\n    useEffect(() => {\n        if (propValue !== undefined) {\n            setCachedValue(propValue);\n        }\n        if (field.type === 'instance' || field.type === 'history') {\n            if (field.adapter === '_dataSources' || field.type === 'history') {\n                props.socket.getAdapterInstances('')\n                    .then(_instances => {\n                        const inst = _instances\n                            .filter(obj => obj.common.getHistory)\n                            .map(obj => ({\n                                id: obj._id.replace('system.adapter.', ''),\n                                idShort: obj._id.split('.').pop(),\n                                name: obj.common.name,\n                                icon: obj.common.icon,\n                            }));\n                        setInstances(inst);\n                    });\n            } else {\n                props.socket.getAdapterInstances(field.adapter || '')\n                    .then(_instances => {\n                        const inst = _instances.map(obj => ({\n                            id: obj._id.replace('system.adapter.', ''),\n                            idShort: obj._id.split('.').pop(),\n                            name: obj.common.name,\n                            icon: obj.common.icon,\n                        }));\n                        setInstances(inst);\n                    });\n            }\n        }\n    }, [propValue]);\n\n    let value = cachedValue;\n    if (value === undefined || value === null) {\n        if (field.default) {\n            value = field.default;\n        } else {\n            value = '';\n        }\n    }\n\n    if (!window.collectClassesValue) {\n        window.collectClassesValue = collectClasses();\n    }\n\n    const textRef = useRef();\n    const [textDialogFocused, setTextDialogFocused] = useState(false);\n    const [textDialogEnabled, setTextDialogEnabled] = useState(true);\n\n    const urlPopper = (!field.type || field.type === 'number' || field.type === 'password' || field.type === 'image') && !disabled ? <Popper\n        open={textDialogFocused && textDialogEnabled && !!value && value.toString().startsWith(window.location.origin)}\n        anchorEl={textRef.current}\n        placement=\"bottom\"\n        transition\n    >\n        {({ TransitionProps }) => <Fade {...TransitionProps} timeout={350}>\n            <Paper>\n                <Button\n                    style={{ textTransform: 'none' }}\n                    onClick={() => change(`.${value.toString().slice(window.location.origin.length)}`)}\n                >\n                    {I18n.t('Replace to ')}\n                    {`.${value.toString().slice(window.location.origin.length)}`}\n                </Button>\n                <IconButton size=\"small\" onClick={() => setTextDialogEnabled(false)}>\n                    <ClearIcon fontSize=\"small\" />\n                </IconButton>\n            </Paper>\n        </Fade>}\n    </Popper> : null;\n\n    // part for customLegacyComponent\n    useEffect(() => {\n        if (customLegacyComponent && refCustom.current && typeof customLegacyComponent.init === 'function') {\n            // take the first child in div\n            customLegacyComponent.init.call(refCustom.current.children[0] || refCustom.current, field.name, propValue);\n        }\n    }, []);\n\n    if (askForUsage) {\n        const usages = findWidgetUsages(store.getState().visProject, props.selectedView, askForUsage.wid);\n        // show dialog with usage\n        return <Dialog\n            open={!0}\n            onClose={() => setAskForUsage(null)}\n        >\n            <DialogTitle>{I18n.t('Usage of widget %s', askForUsage.wid)}</DialogTitle>\n            <DialogContent>\n                <DialogContentText>\n                    {I18n.t('This widget is already used in \"%s\"', usages[0].wid)}\n                    <br />\n                    {I18n.t('Should it be moved to new place?')}\n                </DialogContentText>\n            </DialogContent>\n            <DialogActions>\n                <Button\n                    color=\"primary\"\n                    variant=\"contained\"\n                    default\n                    onClick={() => {\n                        const cb = askForUsage.cb;\n                        setAskForUsage(null);\n                        cb();\n                    }}\n                    startIcon={<Check />}\n                >\n                    {I18n.t('Move to new place')}\n                </Button>\n                <Button\n                    color=\"grey\"\n                    variant=\"contained\"\n                    onClick={() => setAskForUsage(null)}\n                    startIcon={<Close />}\n                >\n                    {I18n.t('Keep on old place')}\n                </Button>\n            </DialogActions>\n        </Dialog>;\n    }\n\n    // start the rendering of different types of fields\n\n    if (customLegacyComponent) {\n        // console.log(customLegacyComponent.input);\n        if (customLegacyComponent.button) {\n            return <div style={{ width: '100%', display: 'flex' }}>\n                {/* eslint-disable-next-line react/no-danger */}\n                <div ref={refCustom} dangerouslySetInnerHTML={{ __html: customLegacyComponent.input }} />\n                <Button\n                    style={{\n                        width: 30,\n                        height: 30,\n                        minWidth: 30,\n                        minHeight: 30,\n                        marginLeft: 5,\n                    }}\n                    title={customLegacyComponent.button.title}\n                    onClick={e => {\n                        if (typeof customLegacyComponent.button.code === 'function') {\n                            customLegacyComponent.button.code(customLegacyComponent.button);\n                        }\n                        const $button = window.jQuery(e.target);\n                        $button.data('wdata', {\n                            attr: field.name,\n                            widgets: props.selectedWidgets,\n                            view: props.selectedView,\n                        });\n                        if (customLegacyComponent.button.data) {\n                            $button.data('data-custom', customLegacyComponent.button.data);\n                        }\n                        // initialize field\n                        if (window.vis.widgets[props.selectedWidgets[0]] &&\n                            window.vis.widgets[props.selectedWidgets[0]].data &&\n                            window.vis.widgets[props.selectedWidgets[0]].data[field.name] === undefined\n                        ) {\n                            window.vis.widgets[props.selectedWidgets[0]].data[field.name] = '';\n                        }\n\n                        customLegacyComponent.button.click.call(e.target);\n                    }}\n                >\n                    ...\n                </Button>\n            </div>;\n        }\n\n        // eslint-disable-next-line react/no-danger\n        return <div ref={refCustom} dangerouslySetInnerHTML={{ __html: customLegacyComponent.input }} />;\n    }\n\n    if (field.type === 'id' || field.type === 'hid') {\n        if (value && (!objectCache || value !== objectCache._id)) {\n            props.socket.getObject(value)\n                .then(objectData =>\n                    setObjectCache(objectData))\n                .catch(() => setObjectCache(null));\n        }\n        if (objectCache && !value) {\n            setObjectCache(null);\n        }\n\n        // Find filter\n        let customFilter = null;\n        let filters = null;\n        if (idDialog && !disabled) {\n            if (field.type === 'hid') {\n                customFilter = { common: { custom: '_dataSources' } };\n            } else if (\n                typeof field.filter === 'string' &&\n                field.filter !== 'chart' &&\n                field.filter !== 'channel' &&\n                field.filter !== 'device'\n            ) {\n                // detect role\n                if (field.filter.includes('.') || field.filter.startsWith('level') || field.filter.startsWith('value')) {\n                    filters = { role: field.filter };\n                } else {\n                    customFilter = { type: field.filter };\n                }\n            } else if (field.filter) {\n                if (typeof field.filter === 'function') {\n                    customFilter = field.filter(widget.data, index);\n                } else {\n                    customFilter = field.filter;\n                }\n            }\n        }\n\n        return <>\n            <TextField\n                variant=\"standard\"\n                fullWidth\n                placeholder={isDifferent ? t('different') : null}\n                InputProps={{\n                    classes: { input: Utils.clsx(props.classes.clearPadding, props.classes.fieldContent) },\n                    endAdornment: <Button disabled={disabled} size=\"small\" onClick={() => setIdDialog(true)}>...</Button>,\n                }}\n                error={!!error}\n                helperText={typeof error === 'string' ? I18n.t(error) : null}\n                disabled={disabled}\n                value={value}\n                onChange={e => change(e.target.value)}\n            />\n            <div style={{ fontStyle: 'italic' }}>\n                {objectCache ? (typeof objectCache.common.name === 'object' ? objectCache.common.name[I18n.lang] : objectCache.common.name) : null}\n            </div>\n            {idDialog && !disabled ? <SelectID\n                imagePrefix=\"../\"\n                selected={value}\n                onOk={selected => change(selected)}\n                onClose={() => setIdDialog(false)}\n                socket={props.socket}\n                types={field.filter === 'chart' || field.filter === 'channel' || field.filter === 'device' ? [field.filter] : null}\n                filters={filters}\n                expertMode={field.filter === 'chart' ? true : undefined}\n                customFilter={customFilter}\n            /> : null}\n        </>;\n    }\n\n    if (field.type === 'checkbox') {\n        return <FormControl\n            error={!!error}\n            component=\"fieldset\"\n            variant=\"standard\"\n        >\n            <Checkbox\n                disabled={disabled}\n                checked={!!value}\n                classes={{ root: Utils.clsx(props.classes.fieldContent, props.classes.clearPadding) }}\n                size=\"small\"\n                onChange={e => {\n                    store.dispatch(recalculateFields(true));\n                    change(e.target.checked);\n                }}\n            />\n            {typeof error === 'string' ? <FormHelperText>{I18n.t(error)}</FormHelperText> : null}\n        </FormControl>;\n    }\n\n    if (field.type === 'image') {\n        let _value;\n        if (idDialog) {\n            _value = value;\n            if (_value.startsWith('../')) {\n                _value = _value.substring(3);\n            } else if (_value.startsWith('_PRJ_NAME/')) {\n                _value = _value.replace('_PRJ_NAME/', `../${adapterName}.${instance}/${projectName}/`);\n            }\n        }\n\n        return <>\n            <TextField\n                variant=\"standard\"\n                fullWidth\n                placeholder={isDifferent ? t('different') : null}\n                error={!!error}\n                helperText={typeof error === 'string' ? I18n.t(error) : null}\n                disabled={disabled}\n                InputProps={{\n                    classes: { input: Utils.clsx(props.classes.clearPadding, props.classes.fieldContent) },\n                    endAdornment: <Button disabled={disabled} size=\"small\" onClick={() => setIdDialog(true)}>...</Button>,\n                }}\n                ref={textRef}\n                value={value}\n                onFocus={() => setTextDialogFocused(true)}\n                onBlur={() => setTextDialogFocused(false)}\n                onChange={e => change(e.target.value)}\n            />\n            {urlPopper}\n            {idDialog ? <SelectFileDialog\n                title={t('Select file')}\n                onClose={() => setIdDialog(false)}\n                restrictToFolder={`${adapterName}.${instance}/${projectName}`}\n                allowNonRestricted\n                allowUpload\n                allowDownload\n                allowCreateFolder\n                allowDelete\n                allowView\n                showToolbar\n                imagePrefix=\"../\"\n                selected={_value}\n                filterByType=\"images\"\n                onOk={selected => {\n                    const projectPrefix = `${adapterName}.${instance}/${projectName}/`;\n                    if (selected.startsWith(projectPrefix)) {\n                        selected = `_PRJ_NAME/${selected.substring(projectPrefix.length)}`;\n                    } else if (selected.startsWith('/')) {\n                        selected = `..${selected}`;\n                    } else if (!selected.startsWith('.')) {\n                        selected = `../${selected}`;\n                    }\n                    change(selected);\n                    setIdDialog(false);\n                }}\n                socket={props.socket}\n            /> : null}\n        </>;\n    }\n\n    if (field.type === 'dimension') {\n        const m = (value || '').toString().match(/^(-?[,.0-9]+)([a-z%]*)$/);\n        let customValue = !m;\n        let _value;\n        let unit;\n        if (m) {\n            _value = m[1];\n            unit = m[2] || 'px';\n            // eslint-disable-next-line no-restricted-properties\n            if (!window.isFinite(_value) || (m[2] && !POSSIBLE_UNITS.includes(m[2]))) {\n                customValue = true;\n            }\n        }\n\n        /** @type string[] */\n        const options = [];\n\n        if (isDifferent && value === '') {\n            for (const wid of props.selectedWidgets) {\n                const selectedWidget = selectWidget(store.getState(), props.selectedView, wid);\n                let val = selectedWidget.style[field.name];\n                val = typeof val === 'number' ? val.toString() : val;\n\n                if (val !== undefined && val !== '' && !options.includes(val)) {\n                    options.push(val);\n                }\n            }\n        }\n\n        const strValue = typeof value === 'number' ? value.toString() : value;\n\n        if (options.length && value !== '' && !options.includes(strValue)) {\n            options.push(strValue);\n        }\n\n        return <Autocomplete\n            options={options}\n            freeSolo\n            value={strValue}\n            onChange={((e, aVal) => change(aVal))}\n            renderInput={params => <TextField\n                {...params}\n                variant=\"standard\"\n                fullWidth\n                placeholder={isDifferent ? t('different') : null}\n                error={!!error}\n                helperText={typeof error === 'string' ? I18n.t(error) : null}\n                disabled={disabled}\n                InputProps={{\n                    ...params.InputProps,\n                    classes: { input: Utils.clsx(props.classes.clearPadding, props.classes.fieldContent) },\n                    endAdornment: !isDifferent && !customValue ? <Button\n                        size=\"small\"\n                        disabled={disabled}\n                        title={t('Convert %s to %s', unit, unit === '%' ? 'px' : '%')}\n                        onClick={() => {\n                            if (unit !== '%') {\n                                props.onPxToPercent(props.selectedWidgets, field.name, newValues => change(newValues[0]));\n                            } else {\n                                props.onPercentToPx(props.selectedWidgets, field.name, newValues => change(newValues[0]));\n                            }\n                        }}\n                    >\n                        {unit}\n                    </Button> : null,\n                }}\n                value={value}\n                onChange={e => change(e.target.value)}\n            />}\n        />;\n    }\n\n    if (field.type === 'color') {\n        return <ColorPicker\n            error={!!error}\n            helperText={typeof error === 'string' ? I18n.t(error) : null}\n            disabled={disabled}\n            value={value || ''}\n            className={props.classes.fieldContentColor}\n            onChange={color => change(color)}\n            openAbove\n        />;\n    }\n\n    if (field.type === 'eff_opt') {\n        return <>\n            {field.type}\n            /\n            {value}\n        </>;\n    }\n\n    if (field.type === 'slider') {\n        // make space before slider element, as if it is at minimum it overlaps with the label\n        return <div style={{ display: 'flex' }}>\n            <div style={{ width: 5 }}></div>\n            <Slider\n                disabled={disabled}\n                className={props.classes.fieldContentSlider}\n                size=\"small\"\n                onChange={(e, newValue) => change(newValue)}\n                value={typeof value === 'number' ? value : 0}\n                min={field.min}\n                max={field.max}\n                step={field.step}\n                marks={field.marks}\n                valueLabelDisplay={field.valueLabelDisplay}\n            />\n            <Input\n                className={props.classes.fieldContentSliderInput}\n                style={{ width: field.max > 100000 ? 70 : (field.max > 10000 ? 60 : 50) }}\n                value={value}\n                disabled={disabled}\n                size=\"small\"\n                onChange={e => (e.target.value === '' ? change('') : change(parseFloat(e.target.value)))}\n                classes={{ input: Utils.clsx(props.classes.clearPadding, props.classes.fieldContent) }}\n                inputProps={{\n                    step: field.step,\n                    min: field.min,\n                    max: field.max,\n                    type: 'number',\n                }}\n            />\n        </div>;\n    }\n\n    if (field.type === 'select' || field.type === 'nselect' || field.type === 'fontname' || field.type === 'effect' || field.type === 'widget') {\n        let { options } = field;\n\n        if (field.type === 'fontname') {\n            options = props.fonts;\n        }\n\n        if (field.type === 'effect') {\n            options = [\n                '',\n                'show',\n                'blind',\n                'bounce',\n                'clip',\n                'drop',\n                'explode',\n                'fade',\n                'fold',\n                'highlight',\n                'puff',\n                'pulsate',\n                'scale',\n                'shake',\n                'size',\n                'slide',\n            ];\n        }\n\n        if (field.type === 'widget') {\n            // take widgets from all views\n            if (field.all) {\n                options = [];\n                Object.keys(store.getState().visProject).forEach(view =>\n                    store.getState().visProject[view].widgets && Object.keys(store.getState().visProject[view].widgets)\n                        .filter(wid =>\n                            (field.withGroups || !store.getState().visProject[view].widgets[wid].grouped) &&\n                            (field.withSelf || wid !== widgetId) &&\n                            (!field.hideUsed || !store.getState().visProject[view].widgets[wid].usedInView))\n                        .forEach(wid => options.push({\n                            wid,\n                            view,\n                            tpl: store.getState().visProject[view].widgets[wid].tpl,\n                            name: store.getState().visProject[view].widgets[wid].name,\n                        })));\n            } else {\n                options = Object.keys(store.getState().visProject[props.selectedView].widgets)\n                    .filter(wid =>\n                        (field.withGroups || !store.getState().visProject[props.selectedView].widgets[wid].grouped) &&\n                        (field.withSelf || wid !== widgetId) &&\n                        (!field.hideUsed || !store.getState().visProject[props.selectedView].widgets[wid].usedInView))\n                    .map(wid => ({\n                        wid,\n                        view: props.selectedView,\n                        tpl: store.getState().visProject[props.selectedView].widgets[wid].tpl,\n                        name: store.getState().visProject[props.selectedView].widgets[wid].name,\n                    }));\n            }\n            if (field.tpl) {\n                if (field.tpl.includes('*')) {\n                    if (field.tpl.endsWith('*')) {\n                        const word = field.tpl.substring(0, field.tpl.length - 1);\n                        options = options.filter(item => item.tpl.startsWith(word));\n                    } else if (field.tpl.startsWith('*')) {\n                        const word = field.tpl.substring(1);\n                        options = options.filter(item => item.tpl.endsWith(word));\n                    } else {\n                        console.warn('\"*\" can be only at the beginning or at the end of \"tpl\" attribute');\n                    }\n                } else {\n                    options = options.filter(item => item.tpl === field.tpl);\n                }\n            }\n            options = options.map(item => ({\n                value: item.wid,\n                label: `${field.all ? `${item.view} / ` : ''}${item.wid} (${item.name || (item.tpl === '_tplGroup' ? t('group') : item.tpl)})`,\n            }));\n            options.unshift({ id: '', label: t('attr_none') });\n        }\n\n        const withIcons = !!options.find(item => item && item.icon);\n\n        return <Select\n            variant=\"standard\"\n            disabled={disabled || (field.checkUsage && props.selectedWidgets.length > 1)}\n            value={value}\n            placeholder={isDifferent ? t('different') : null}\n            defaultValue={field.default}\n            classes={{\n                root: props.classes.clearPadding,\n                select: Utils.clsx(props.classes.fieldContent, props.classes.clearPadding),\n            }}\n            onChange={e => {\n                if (field.type === 'widget' &&\n                    field.checkUsage &&\n                    e.target.value &&\n                    store.getState().visProject[props.selectedView].widgets[e.target.value]?.usedInWidget\n                ) {\n                    // Show dialog\n                    setAskForUsage({\n                        wid: e.target.value,\n                        cb: () => {\n                            const project = modifyWidgetUsages(store.getState().visProject, props.selectedView, e.target.value, props.selectedWidgets[0], field.name);\n                            props.changeProject(project);\n                            store.dispatch(recalculateFields(true));\n                        },\n                    });\n                } else {\n                    change(e.target.value);\n                    store.dispatch(recalculateFields(true));\n                }\n            }}\n            renderValue={_value => {\n                if (typeof options[0] === 'object') {\n                    const item = options.find(o => o.value === _value);\n                    const text = item ? (field.type === 'select' && !field.noTranslation ? t(item.label) : item.label) : _value;\n                    if (withIcons && item.icon) {\n                        return <>\n                            <Icon src={item.icon} style={{ width: 24, height: 24 }} />\n                            <span style={item.color ? { color: item.color } : null}>{text}</span>\n                        </>;\n                    }\n                    return text;\n                }\n                return field.type === 'select' && !field.noTranslation ? t(_value) : _value;\n            }}\n            fullWidth\n        >\n            {options.map((selectItem, i) => <MenuItem\n                value={typeof selectItem === 'object' ? selectItem.value : selectItem}\n                key={`${typeof selectItem === 'object' ? selectItem.value : selectItem}_${i}`}\n                style={{ fontFamily: field.type === 'fontname' ? selectItem : null }}\n            >\n                {selectItem.icon ? <ListItemIcon>\n                    <Icon src={selectItem.icon} style={{ width: 24, height: 24 }} />\n                </ListItemIcon>\n                    :\n                    (withIcons ? <ListItemIcon><div style={{ width: 24 }} /></ListItemIcon> : null)}\n                <ListItemText>\n                    {selectItem === '' ?\n                        <i>{t('attr_none')}</i>\n                        :\n                        (field.type === 'select' && !field.noTranslation ?\n                            (typeof selectItem === 'object' ?\n                                <span style={selectItem.color ? { color: selectItem.color } : null}>{field.noTranslation ? selectItem.label : t(selectItem.label)}</span> : t(selectItem)\n                            ) : (typeof selectItem === 'object' ?\n                                <span style={selectItem.color ? { color: selectItem.color } : null}>{selectItem.label}</span> : selectItem\n                            ))}\n                </ListItemText>\n            </MenuItem>)}\n        </Select>;\n    }\n\n    if (field.type === 'select-views') {\n        const options = getViewOptions(store.getState().visProject, [], null, 0, true)\n            .filter(option => option.type === 'folder' || option.view !== props.selectedView);\n\n        return <Select\n            variant=\"standard\"\n            disabled={disabled}\n            value={Array.isArray(value) ? value : (value || '').toString().split(',')}\n            placeholder={isDifferent ? t('different') : null}\n            multiple={field.multiple !== false}\n            renderValue={selected => {\n                if (Array.isArray(selected)) {\n                    return selected.join(', ');\n                }\n                return selected;\n            }}\n            classes={{\n                root: props.classes.clearPadding,\n                select: Utils.clsx(props.classes.fieldContent, props.classes.clearPadding),\n            }}\n            onChange={e => {\n                if (Array.isArray(e.target.value)) {\n                    const values = e.target.value.filter(tt => tt);\n                    if (values.length) {\n                        change(e.target.value.filter(tt => tt).join(','));\n                    } else {\n                        change(null);\n                    }\n                } else {\n                    change(e.target.value);\n                }\n            }}\n            fullWidth\n        >\n            {options.map((option, key) => (option.type === 'view' ?\n                <MenuItem\n                    value={option.view}\n                    key={key.toString()}\n                    style={{ paddingLeft: option.level * 16, lineHeight: '36px' }}\n                >\n                    <FileIcon style={{ verticalAlign: 'middle', marginRight: 4 }} />\n                    <span style={{ verticalAlign: 'middle' }}>{field.multiple !== false ? <Checkbox checked={(value || []).includes(option.view)} /> : null}</span>\n                    <ListItemText primary={option.label} style={{ verticalAlign: 'middle' }} />\n                </MenuItem>\n                :\n                <ListSubheader key={key} style={{ paddingLeft: option.level * 16 }} className={props.classes.listFolder}>\n                    <FolderOpenedIcon className={props.classes.iconFolder} />\n                    <span style={{ fontSize: '1rem' }}>{option.folder.name}</span>\n                </ListSubheader>))}\n        </Select>;\n    }\n\n    if (field.type === 'groups') {\n        return <Select\n            variant=\"standard\"\n            disabled={disabled}\n            value={value || []}\n            placeholder={isDifferent ? t('different') : null}\n            multiple\n            renderValue={selected => <div style={{ display: 'flex' }}>\n                {Object.values(props.userGroups)\n                    .filter(group => selected.includes(group._id.split('.')[2]))\n                    .map((group, key) =>\n                        <span key={key} style={{ padding: '4px 4px' }}>\n                            <TextWithIcon\n                                value={group._id}\n                                t={t}\n                                lang={I18n.getLanguage()}\n                                list={[group]}\n                            />\n                        </span>)}\n            </div>}\n            classes={{\n                root: props.classes.clearPadding,\n                select: Utils.clsx(props.classes.fieldContent, props.classes.clearPadding),\n            }}\n            onChange={e => change(e.target.value)}\n            fullWidth\n        >\n            {Object.values(props.userGroups).map((group, i) => <MenuItem\n                value={group._id.split('.')[2]}\n                key={`${group._id.split('.')[2]}_${i}`}\n            >\n                <Checkbox\n                    disabled={disabled}\n                    checked={(value || []).includes(group._id.split('.')[2])}\n                />\n                <TextWithIcon\n                    value={group._id}\n                    t={t}\n                    lang={I18n.getLanguage()}\n                    list={[group]}\n                />\n            </MenuItem>)}\n        </Select>;\n    }\n\n    if (field.type === 'auto' || field.type === 'class' || field.type === 'filters')  {\n        let options = field.options;\n        if (field.type === 'class') {\n            options = window.collectClassesValue.filter(cssClass => cssClass.match(/^vis-style-/));\n        } else if (field.type === 'filters') {\n            options = window.vis ? window.vis.updateFilter() : [];\n            options.unshift('');\n        }\n\n        return <Autocomplete\n            freeSolo\n            fullWidth\n            disabled={disabled}\n            placeholder={isDifferent ? t('different') : null}\n            options={options || []}\n            inputValue={value || ''}\n            value={value || ''}\n            onInputChange={(e, inputValue) => change(inputValue)}\n            onChange={(e, inputValue) => change(inputValue)}\n            classes={{ input: Utils.clsx(props.classes.clearPadding, props.classes.fieldContent) }}\n            renderOption={field.name === 'font-family' || field.type === 'lc-font-family' ?\n                (optionProps, option) => <div style={{ fontFamily: option }} {...optionProps}>{option}</div> : null}\n            renderInput={params => <TextField\n                variant=\"standard\"\n                error={!!error}\n                helperText={typeof error === 'string' ? I18n.t(error) : null}\n                disabled={disabled}\n                {...params}\n            />}\n        />;\n    }\n\n    if (field.type === 'views')  {\n        const options = getViewOptions(store.getState().visProject);\n\n        return <Autocomplete\n            freeSolo\n            fullWidth\n            disabled={disabled}\n            placeholder={isDifferent ? t('different') : null}\n            options={options || []}\n            inputValue={value || ''}\n            value={value || ''}\n            onInputChange={(e, inputValue) => {\n                if (typeof inputValue === 'object' && inputValue !== null) {\n                    inputValue = inputValue.type === 'view' ? inputValue.view : inputValue.folder.name;\n                }\n                change(inputValue);\n            }}\n            onChange={(e, inputValue) => {\n                if (typeof inputValue === 'object' && inputValue !== null) {\n                    inputValue = inputValue.type === 'view' ? inputValue.view : inputValue.folder.name;\n                }\n                change(inputValue);\n            }}\n            classes={{ input: Utils.clsx(props.classes.clearPadding, props.classes.fieldContent) }}\n            getOptionLabel={option => {\n                if (typeof option === 'string') {\n                    return option;\n                }\n                return option.type === 'view' ? option.label : option.folder.name;\n            }}\n            getOptionDisabled={option => option.type === 'folder'}\n            renderOption={(optionProps, option) =>\n                (option.type === 'view' ?\n                    <Box\n                        component=\"li\"\n                        style={{ paddingLeft: option.level * 16 }}\n                        {...optionProps}\n                        className={Utils.clsx(props.classes.menuItem, value === option.view ? props.classes.selected : null)}\n                        key={`view${option.view}`}\n                    >\n                        <FileIcon />\n                        {option.label}\n                    </Box>\n                    :\n                    <Box\n                        component=\"li\"\n                        style={{ paddingLeft: option.level * 16 }}\n                        {...optionProps}\n                        key={`folder${option.folder.id}`}\n                    >\n                        <FolderOpenedIcon style={{ color: '#00dc00', fontSize: 20 }} />\n                        {option.folder.name}\n                    </Box>)}\n            renderInput={params => <TextField\n                variant=\"standard\"\n                error={!!error}\n                helperText={typeof error === 'string' ? I18n.t(error) : null}\n                disabled={disabled}\n                {...params}\n                inputProps={{ ...params.inputProps }}\n            />}\n        />;\n    }\n\n    if (field.type === 'style') {\n        const stylesOptions = getStylesOptions({\n            filterFile:  field.filterFile,\n            filterName:  field.filterName,\n            filterAttrs: field.filterAttrs,\n            removeName:  field.removeName,\n        });\n\n        return <Select\n            variant=\"standard\"\n            value={value}\n            disabled={disabled}\n            placeholder={isDifferent ? t('different') : null}\n            defaultValue={field.default}\n            classes={{\n                root: props.classes.clearPadding,\n                select: Utils.clsx(props.classes.fieldContent, props.classes.clearPadding),\n            }}\n            onChange={e => change(e.target.value)}\n            renderValue={selectValue => <div className={props.classes.backgroundClass}>\n                <span className={stylesOptions[selectValue]?.parentClass}>\n                    <span className={`${props.classes.backgroundClassSquare} ${selectValue}`} />\n                </span>\n                {t(stylesOptions[selectValue]?.name)}\n            </div>}\n            fullWidth\n        >\n            {Object.keys(stylesOptions).map((styleName, i) => <MenuItem\n                value={styleName}\n                key={`${styleName}_${i}`}\n            >\n                <span className={stylesOptions[styleName].parentClass}>\n                    <span className={`${props.classes.backgroundClassSquare} ${styleName}`} />\n                </span>\n                {t(stylesOptions[styleName].name)}\n            </MenuItem>)}\n        </Select>;\n    }\n\n    if (field.type === 'custom') {\n        if (field.component) {\n            try {\n                return field.component(\n                    field,\n                    widget.data,\n                    newData => {\n                        const _project = deepClone(store.getState().visProject);\n                        props.selectedWidgets.forEach(selectedWidget => {\n                            Object.keys(newData)\n                                .forEach(attr => {\n                                    if (newData[attr] === null) {\n                                        delete _project[props.selectedView].widgets[selectedWidget].data[attr];\n                                    } else {\n                                        _project[props.selectedView].widgets[selectedWidget].data[attr] = newData[attr];\n                                    }\n                                });\n                        });\n                        props.changeProject(_project);\n                        store.dispatch(recalculateFields(true));\n                    },\n                    {\n                        context: {\n                            socket: props.socket,\n                            projectName,\n                            instance,\n                            adapterName,\n                            views: store.getState().visProject,\n                        },\n                        selectedView: props.selectedView,\n                        selectedWidgets: props.selectedWidgets,\n                        selectedWidget: props.selectedWidgets.length === 1 ? props.selectedWidgets[0] : props.selectedWidgets,\n                    },\n                );\n            } catch (e) {\n                console.error(`Cannot render custom field ${field.name}: ${e}`);\n            }\n        } else {\n            return <>\n                {field.type}\n                /\n                {value}\n            </>;\n        }\n    }\n\n    if (field.type === 'instance' || field.type === 'history') {\n        return <Select\n            variant=\"standard\"\n            value={value}\n            disabled={disabled}\n            placeholder={isDifferent ? t('different') : null}\n            defaultValue={field.default}\n            classes={{\n                root: props.classes.clearPadding,\n                select: Utils.clsx(props.classes.fieldContent, props.classes.clearPadding),\n            }}\n            onChange={e => change(e.target.value)}\n            renderValue={selectValue => selectValue}\n            fullWidth\n        >\n            {instances.map(_instance => <MenuItem\n                value={field.isShort ? _instance.idShort : _instance.id}\n                key={_instance.id}\n            >\n                <ListItemIcon>\n                    <Icon src={`../${_instance.name}.admin/${_instance.icon}`} style={{ width: 24, height: 24 }} alt={_instance.name} />\n                </ListItemIcon>\n                <ListItemText>{field.isShort ? _instance.idShort : _instance.id}</ListItemText>\n            </MenuItem>)}\n        </Select>;\n    }\n\n    if (field.type === 'icon') {\n        return <IconPicker\n            label=\"Icon\"\n            t={I18n.t}\n            lang={I18n.getLanguage()}\n            value={value}\n            disabled={disabled}\n            onChange={fileBlob => change(fileBlob)}\n            previewClassName={props.classes.iconPreview}\n        />;\n    }\n\n    if (field.type === 'icon64') {\n        return <div style={{ display: 'flex', width: '100%', alignItems: 'center' }}>\n            <TextField\n                fullWidth\n                size=\"small\"\n                placeholder={isDifferent ? t('different') : null}\n                variant=\"standard\"\n                value={value}\n                error={!!error}\n                disabled={disabled}\n                onChange={e => change(e.target.value)}\n                InputProps={{\n                    endAdornment: value ? <IconButton\n                        disabled={disabled}\n                        size=\"small\"\n                        onClick={() => change('')}\n                    >\n                        <ClearIcon />\n                    </IconButton> : null,\n                    classes: {\n                        input: Utils.clsx(props.classes.clearPadding, props.classes.fieldContent),\n                    },\n                }}\n            />\n            <Button\n                variant={value ? 'outlined' : undefined}\n                color={value ? 'grey' : undefined}\n                onClick={() => setIdDialog(true)}\n            >\n                {value ? <Icon src={value} style={{ width: 36, height: 36 }} /> : '...'}\n            </Button>\n            {idDialog &&\n                <MaterialIconSelector\n                    themeType={props.themeType}\n                    value={value}\n                    onClose={icon => {\n                        setIdDialog(false);\n                        if (icon !== null) {\n                            change(icon);\n                        }\n                    }}\n                />}\n        </div>;\n    }\n\n    if (field.type === 'html' || field.type === 'json' || (field.type === 'text' && field.noButton === false)) {\n        return <>\n            <TextField\n                size=\"small\"\n                placeholder={isDifferent ? t('different') : null}\n                variant=\"standard\"\n                value={value}\n                multiline={field.multiline}\n                fullWidth\n                error={!!error}\n                disabled={disabled}\n                helperText={typeof error === 'string' ? I18n.t(error) : null}\n                onChange={e => change(e.target.value)}\n                InputProps={{\n                    endAdornment: field.noButton ? null : <Button\n                        disabled={disabled}\n                        size=\"small\"\n                        onClick={() => setIdDialog(true)}\n                    >\n                        <EditIcon />\n                    </Button>,\n                    classes: {\n                        input: Utils.clsx(props.classes.clearPadding, props.classes.fieldContent),\n                    },\n                }}\n                rows={2}\n            />\n            {idDialog ? <TextDialog\n                open={!0}\n                value={value}\n                onChange={newValue => change(newValue)}\n                onClose={() => setIdDialog(false)}\n                themeType={props.themeType}\n                type={field.type}\n            /> : null}\n        </>;\n    }\n\n    if (!field.type || field.type === 'number' || field.type === 'password' || field.type === 'text' || field.type === 'url') {\n        return <>\n            <TextField\n                variant=\"standard\"\n                fullWidth\n                ref={textRef}\n                error={!!error}\n                disabled={disabled}\n                helperText={typeof error === 'string' ? I18n.t(error) : null}\n                onFocus={() => setTextDialogFocused(true)}\n                onBlur={() => {\n                    setTextDialogFocused(false);\n                    if (field.type === 'number' && value) {\n                        let _value = value;\n                        if (typeof _value === 'string') {\n                            _value = parseFloat(_value);\n                            if (field.min !== undefined) {\n                                if (_value < field.min) {\n                                    _value = field.min;\n                                }\n                            }\n                            if (field.max !== undefined) {\n                                if (_value > field.max) {\n                                    _value = field.max;\n                                }\n                            }\n                            change(_value);\n                            return;\n                        }\n                        if (field.min !== undefined) {\n                            if (_value < field.min) {\n                                change(field.min);\n                                return;\n                            }\n                        }\n                        if (field.max !== undefined) {\n                            if (_value > field.max) {\n                                change(field.max);\n                            }\n                        }\n                    }\n                }}\n                placeholder={isDifferent ? t('different') : null}\n                InputProps={{\n                    classes: { input: Utils.clsx(props.classes.clearPadding, props.classes.fieldContent) },\n                }}\n                value={value}\n                onChange={e => change(e.target.value)}\n                type={field.type ? field.type : 'text'}\n                // eslint-disable-next-line react/jsx-no-duplicate-props\n                inputProps={{\n                    min: field.min,\n                    max: field.max,\n                    step: field.step,\n                }}\n            />\n            {urlPopper}\n        </>;\n    }\n\n    return `${field.type}/${value}`;\n};\n\nWidgetField.propTypes = {\n    adapterName: PropTypes.string.isRequired,\n    changeProject: PropTypes.func,\n    classes: PropTypes.object,\n    field: PropTypes.object.isRequired,\n    fonts: PropTypes.array,\n    userGroups: PropTypes.object,\n    instance: PropTypes.number.isRequired,\n    isDifferent: PropTypes.bool,\n    isStyle: PropTypes.bool,\n    onPercentToPx: PropTypes.func,\n    onPxToPercent: PropTypes.func,\n    project: PropTypes.object,\n    projectName: PropTypes.string.isRequired,\n    selectedView: PropTypes.string,\n    selectedWidgets: PropTypes.array,\n    socket: PropTypes.object,\n    widget: PropTypes.object.isRequired,\n    error: PropTypes.oneOfType([PropTypes.string, PropTypes.bool]),\n    disabled: PropTypes.bool,\n    widgetType: PropTypes.object,\n};\n\nexport default WidgetField;\n","import PropTypes from 'prop-types';\nimport { useRef, useState } from 'react';\n\nimport {\n    Dialog, DialogTitle, DialogContent, DialogActions, Button,\n} from '@mui/material';\n\nimport { Close } from '@mui/icons-material';\n\nimport { I18n } from '@iobroker/adapter-react-v5';\n\nimport CustomAceEditor from '../../Components/CustomAceEditor';\n\nconst WidgetCSS = props => {\n    const [value, setValue] = useState(props.widget.css || '');\n    const timeout = useRef(null);\n\n    return <Dialog open={!0} onClose={props.onClose} fullWidth>\n        <DialogTitle>{I18n.t('Widget CSS')}</DialogTitle>\n        <DialogContent style={{ height: 400 }}>\n            <CustomAceEditor\n                type=\"css\"\n                themeType={props.themeType}\n                readOnly={!props.editMode}\n                value={value}\n                onChange={v => {\n                    setValue(v);\n                    if (timeout.current) {\n                        clearTimeout(timeout.current);\n                        timeout.current = null;\n                    }\n                    timeout.current = setTimeout(() => {\n                        timeout.current = null;\n                        props.onChange(v);\n                    }, 1000);\n                }}\n            />\n        </DialogContent>\n        <DialogActions>\n            <Button\n                onClick={props.onClose}\n                color=\"primary\"\n                variant=\"contained\"\n                startIcon={<Close />}\n            >\n                {I18n.t('Close')}\n            </Button>\n        </DialogActions>\n    </Dialog>;\n};\n\nWidgetCSS.propTypes = {\n    themeType: PropTypes.string,\n    editMode: PropTypes.bool,\n    onClose: PropTypes.func,\n    onChange: PropTypes.func,\n    widget: PropTypes.object,\n};\n\nexport default WidgetCSS;\n","import { useRef, useState } from 'react';\nimport PropTypes from 'prop-types';\n\nimport {\n    Dialog, DialogTitle, DialogContent, DialogActions, Button,\n} from '@mui/material';\n\nimport { Close } from '@mui/icons-material';\n\nimport { I18n } from '@iobroker/adapter-react-v5';\n\nimport CustomAceEditor from '../../Components/CustomAceEditor';\n\nconst WidgetJS = props => {\n    const [value, setValue] = useState(props.widget.js || '');\n    const timeout = useRef(null);\n\n    return <Dialog open={!0} onClose={props.onClose} fullWidth>\n        <DialogTitle>{I18n.t('Widget\\'s script')}</DialogTitle>\n        <DialogContent style={{ height: 400 }}>\n            <CustomAceEditor\n                type=\"javascript\"\n                themeType={props.themeType}\n                readOnly={!props.editMode}\n                value={value}\n                onChange={v => {\n                    setValue(v);\n                    if (timeout.current) {\n                        clearTimeout(timeout.current);\n                        timeout.current = null;\n                    }\n                    timeout.current = setTimeout(() => {\n                        timeout.current = null;\n                        props.onChange(v);\n                    }, 1000);\n                }}\n            />\n        </DialogContent>\n        <DialogActions>\n            <Button\n                onClick={props.onClose}\n                color=\"primary\"\n                variant=\"contained\"\n                startIcon={<Close />}\n            >\n                {I18n.t('Close')}\n            </Button>\n        </DialogActions>\n    </Dialog>;\n};\n\nWidgetJS.propTypes = {\n    themeType: PropTypes.string,\n    editMode: PropTypes.bool,\n    onClose: PropTypes.func,\n    onChange: PropTypes.func,\n    widget: PropTypes.object,\n};\n\nexport default WidgetJS;\n","/**\n *  ioBroker.vis\n *  https://github.com/ioBroker/ioBroker.vis\n *\n *  Copyright (c) 2022-2023 Denis Haev https://github.com/GermanBluefox,\n *  Creative Common Attribution-NonCommercial (CC BY-NC)\n *\n *  http://creativecommons.org/licenses/by-nc/4.0/\n *\n * Short content:\n * Licensees may copy, distribute, display and perform the work and make derivative works based on it only if they give the author or licensor the credits in the manner specified by these.\n * Licensees may copy, distribute, display, and perform the work and make derivative works based on it only for noncommercial purposes.\n * (Free for non-commercial use).\n */\nimport { type Moment } from 'moment';\nimport { deepClone } from '@/Utils/utils';\nimport {\n    VisLegacy, AnyWidgetId, WidgetData,\n    SingleWidget, GroupWidget, VisRxWidgetStateValues,\n} from '@/types';\n\nimport { extractBinding } from './visUtils';\n\ninterface VisFormatUtilsProps {\n    vis: VisLegacy;\n}\n\nclass VisFormatUtils {\n    private readonly vis: VisLegacy;\n\n    private readonly bindingsCache: Record<string, any>;\n\n    constructor(props: VisFormatUtilsProps) {\n        this.vis = props.vis;\n        this.bindingsCache = {};\n        // required options in vis\n        //      user\n        //      loginRequired\n        //      instance\n        //      language\n        //      dateFormat\n        //      _\n        //      editMode\n        //      states (originally canStates\n    }\n\n    // get value of Obj property PropPath. PropPath is string like \"Prop1\" or \"Prop1.Prop2\" ...\n    static getObjPropValue(obj: ioBroker.Object, propPath: string) {\n        if (!obj) {\n            return undefined;\n        }\n        const parts = propPath.split('.');\n        let _obj = obj as Record<string, any>;\n        for (const part of parts) {\n            _obj = _obj[part];\n            if (!_obj && _obj !== 0) {\n                return undefined;\n            }\n        }\n        return _obj;\n    }\n\n    getSpecialValues(name: string, view: string, wid: AnyWidgetId, widgetData: WidgetData) {\n        switch (name) {\n            case 'username.val':\n                return this.vis.user;\n            case 'login.val':\n                return this.vis.loginRequired;\n            case 'instance.val':\n                return this.vis.instance;\n            case 'language.val':\n                return this.vis.language;\n            case 'wid.val':\n                return wid;\n            case 'wname.val':\n                return widgetData?.name || wid;\n            case 'view.val':\n                return view;\n            default:\n                return undefined;\n        }\n    }\n\n    static formatValue(value: number | string, decimals?: number | string, _format?: string) {\n        if (typeof decimals !== 'number') {\n            decimals = 2;\n            _format = decimals as unknown as string;\n        }\n\n        // format = (_format === undefined) ? (this.vis.isFloatComma) ? \".,\" : \",.\" : _format;\n        // does not work...\n        // using default german...\n        const format = _format === undefined || _format === null ? '.,' : _format;\n\n        if (typeof value !== 'number') {\n            value = parseFloat(value);\n        }\n        return Number.isNaN(value) ? '' : value.toFixed(decimals || 0).replace(format[0], format[1]).replace(/\\B(?=(\\d{3})+(?!\\d))/g, format[0]);\n    }\n\n    formatMomentDate(dateObj: string | number | Date, _format?: string, useTodayOrYesterday?: boolean, moment?: any) {\n        useTodayOrYesterday = typeof useTodayOrYesterday !== 'undefined' ? useTodayOrYesterday : false;\n\n        if (!dateObj) {\n            return '';\n        }\n        let momentObject: Moment | undefined;\n        const type = typeof dateObj;\n        if (type === 'string') {\n            momentObject = moment(dateObj);\n        } else if (type !== 'object') {\n            const j = parseInt(dateObj as string, 10);\n            if (j === dateObj) {\n                // maybe this is an interval?\n                if (j < 946681200) {\n                    momentObject = moment(dateObj);\n                } else {\n                    // if less 2000.01.01 00:00:00\n                    momentObject = j < 946681200000 ? moment(j * 1000) : moment(j);\n                }\n            } else {\n                momentObject = moment(dateObj);\n            }\n        }\n        const format = _format || this.vis.dateFormat || 'DD.MM.YYYY';\n\n        let result;\n\n        if (useTodayOrYesterday && momentObject && moment) {\n            if (momentObject.isSame(moment(), 'day')) {\n                const todayStr = this.vis._('Today');\n                result = moment(momentObject).format(format.replace('dddd', todayStr).replace('ddd', todayStr).replace('dd', todayStr)) || '';\n            } if (momentObject.isSame(moment().subtract(1, 'day'), 'day')) {\n                const yesterdayStr = this.vis._('Yesterday');\n                result = moment(momentObject).format(format.replace('dddd', yesterdayStr).replace('ddd', yesterdayStr).replace('dd', yesterdayStr)) || '';\n            }\n        } else {\n            result = moment(momentObject).format(format) || '';\n        }\n\n        return result;\n    }\n\n    static _put(token: string, dateObj: Date, result: string) {\n        let v: string | number = '';\n\n        switch (token) {\n            case 'YYYY':\n            case 'JJJJ':\n            case '':\n            case 'YY':\n            case 'JJ':\n            case '':\n                v = dateObj.getFullYear();\n                if (token.length === 2) {\n                    v %= 100;\n                }\n                break;\n            case 'MM':\n            case 'M':\n            case '':\n            case '':\n                v = dateObj.getMonth() + 1;\n                if ((v < 10) && (token.length === 2)) {\n                    v = `0${v}`;\n                }\n                break;\n            case 'DD':\n            case 'TT':\n            case 'D':\n            case 'T':\n            case '':\n            case '':\n                v = dateObj.getDate();\n                if (v < 10 && token.length === 2) {\n                    v = `0${v}`;\n                }\n                break;\n            case 'hh':\n            case 'SS':\n            case 'h':\n            case 'S':\n            case '':\n            case '':\n                v = dateObj.getHours();\n                if (v < 10 && token.length === 2) {\n                    v = `0${v}`;\n                }\n                break;\n            case 'mm':\n            case 'm':\n            case '':\n            case '':\n                v = dateObj.getMinutes();\n                if (v < 10 && token.length === 2) {\n                    v = `0${v}`;\n                }\n                break;\n            case 'ss':\n            case 's':\n            case 'cc':\n            case 'c':\n                v = dateObj.getSeconds();\n                if (v < 10 && token.length === 2) {\n                    v = `0${v}`;\n                }\n                v = v.toString();\n                break;\n            case 'sss':\n            case '':\n                v = dateObj.getMilliseconds();\n                if (v < 10) {\n                    v = `00${v}`;\n                } else if (v < 100) {\n                    v = `0${v}`;\n                }\n                v = v.toString();\n                break;\n            default:\n                break;\n        }\n\n        result += v;\n        return result;\n    }\n\n    formatDate(dateObj: string | Date | number, isDuration?: boolean | string, _format?: string): string {\n        // copied from js-controller/lib/adapter.js\n        if ((typeof isDuration === 'string' && isDuration.toLowerCase() === 'duration') || isDuration === true) {\n            isDuration = true;\n        }\n        if (typeof isDuration !== 'boolean') {\n            _format = isDuration;\n            isDuration = false;\n        }\n\n        if (!dateObj) {\n            return '';\n        }\n        let realDateObj: Date | undefined;\n        const type = typeof dateObj;\n        if (type === 'string') {\n            realDateObj = new Date(dateObj);\n        } else if (type !== 'object') {\n            const j = parseInt(dateObj as string, 10);\n            if (j === dateObj) {\n                // maybe this is an interval\n                if (j < 946681200) {\n                    isDuration = true;\n                    realDateObj = new Date(dateObj);\n                } else {\n                    // if less 2000.01.01 00:00:00\n                    realDateObj = (j < 946681200000) ? new Date(j * 1000) : new Date(j);\n                }\n            } else {\n                realDateObj = new Date(dateObj);\n            }\n        }\n        let result = '';\n        if (realDateObj) {\n            const format = _format || this.vis.dateFormat || 'DD.MM.YYYY';\n\n            isDuration && realDateObj.setMilliseconds(realDateObj.getMilliseconds() + realDateObj.getTimezoneOffset() * 60 * 1000);\n\n            const validFormatChars = 'YJMDThSms';\n            let s = '';\n\n            for (let i = 0; i < format.length; i++) {\n                if (validFormatChars.includes(format[i])) {\n                    // combine format character\n                    s += format[i];\n                } else {\n                    result = VisFormatUtils._put(s, realDateObj, result);\n                    s = '';\n                    result += format[i];\n                }\n            }\n            result = VisFormatUtils._put(s, realDateObj, result);\n        }\n\n        return result;\n    }\n\n    extractBinding(format: string) {\n        if (!format) {\n            return null;\n        }\n        if (!this.vis.editMode && this.bindingsCache[format]) {\n            return deepClone(this.bindingsCache[format]);\n        }\n\n        const result = extractBinding(format);\n\n        // cache bindings\n        if (result && this.bindingsCache && !this.vis.editMode) {\n            this.bindingsCache[format] = deepClone(result);\n        }\n\n        return result;\n    }\n\n    /**\n     * Format given binding\n     */\n    formatBinding(options: {\n        format: string;\n        view: string;\n        wid: AnyWidgetId;\n        widget: SingleWidget | GroupWidget;\n        widgetData: WidgetData;\n        values?: VisRxWidgetStateValues;\n        moment: any;\n    }): string {\n        const {\n            view, wid, widget, widgetData, moment,\n        } = options;\n\n        let { format } = options;\n\n        const _values = options.values || this.vis.states;\n\n        const oids = this.extractBinding(options.format);\n\n        for (const oid of oids) {\n            let value: any;\n            if (oid.visOid) {\n                value = this.getSpecialValues(oid.visOid, view, wid, widgetData);\n                if (value === undefined || value === null) {\n                    value = (_values as Record<string, any>)[oid.visOid];\n                }\n            }\n\n            if (oid.operations) {\n                for (const operation of oid.operations) {\n                    switch (operation.op) {\n                        case 'eval': {\n                            let string = ''; // '(function() {';\n                            for (let a = 0; a < operation.arg.length; a++) {\n                                if (!operation.arg[a].name) {\n                                    continue;\n                                }\n                                value = this.getSpecialValues(operation.arg[a].visOid, view, wid, widgetData);\n\n                                if (value === undefined || value === null) {\n                                    value = operation.arg[a].visOid.startsWith('widgetOid.') ?\n                                        (_values as Record<string, any>)[operation.arg[a].visOid.replace(/^widgetOid\\./g, `${widget.data.oid}.`)] :\n                                        (_values as Record<string, any>)[operation.arg[a].visOid];\n                                }\n                                if (value === null) {\n                                    string += `const ${operation.arg[a].name} = null;`;\n                                } else if (value === undefined) {\n                                    string += `const ${operation.arg[a].name} = undefined;`;\n                                } else {\n                                    const type = typeof value;\n                                    if (type === 'string') {\n                                        try {\n                                            value = JSON.parse(value);\n                                            // if array or object, we format it correctly, else it should be a string\n                                            if (typeof value === 'object') {\n                                                string += `const ${operation.arg[a].name} = JSON.parse(\"${JSON.stringify(value).replace(/\\x22/g, '\\\\\\x22')}\");`;\n                                            } else {\n                                                string += `const ${operation.arg[a].name} = \"${value}\";`;\n                                            }\n                                        } catch (e) {\n                                            string += `const ${operation.arg[a].name} = \"${value}\";`;\n                                        }\n                                    } else if (type === 'object') {\n                                        string += `const ${operation.arg[a].name} = ${JSON.stringify(value)};`;\n                                    } else {\n                                        // boolean, number, ...\n                                        string += `const ${operation.arg[a].name} = ${value.toString()};`;\n                                    }\n                                }\n                            }\n\n                            const { formula } = operation;\n                            if (formula && formula.includes('widget.')) {\n                                const w = deepClone(widget);\n                                w.data = widgetData;\n                                string += `const widget = ${JSON.stringify(w)};`;\n                            }\n                            string += `return ${operation.formula};`;\n\n                            if (string.includes('\\\\\"')) {\n                                string = string.replace(/\\\\\"/g, '\"');\n                            }\n\n                            // string += '}())';\n                            try {\n                                // eslint-disable-next-line no-new-func\n                                value = new Function(string)();\n\n                                if (value && typeof value === 'object') {\n                                    value = JSON.stringify(value);\n                                }\n                            } catch (e) {\n                                console.error(`Error in eval[value]: ${format}`);\n                                console.error(`Error in eval[script]: ${string}`);\n                                console.error(`Error in eval[error]: ${e}`);\n                                value = 0;\n                            }\n                            break;\n                        }\n                        case '*':\n                            if (operation.arg !== undefined && operation.arg !== null) {\n                                value = parseFloat(value) * operation.arg;\n                            }\n                            break;\n                        case '/':\n                            if (operation.arg !== undefined && operation.arg !== null) {\n                                value = parseFloat(value) / operation.arg;\n                            }\n                            break;\n                        case '+':\n                            if (operation.arg !== undefined && operation.arg !== null) {\n                                value = parseFloat(value) + operation.arg;\n                            }\n                            break;\n                        case '-':\n                            if (operation.arg !== undefined && operation.arg !== null) {\n                                value = parseFloat(value) - operation.arg;\n                            }\n                            break;\n                        case '%':\n                            if (operation.arg !== undefined && operation.arg !== null) {\n                                value = parseFloat(value) % operation.arg;\n                            }\n                            break;\n                        case 'round':\n                            if (operation.arg === undefined) {\n                                value = Math.round(parseFloat(value));\n                            } else {\n                                value = parseFloat(value).toFixed(operation.arg);\n                            }\n                            break;\n                        case 'pow':\n                            if (operation.arg === undefined) {\n                                value = parseFloat(value) * parseFloat(value);\n                            } else {\n                                value = parseFloat(value) ** operation.arg;\n                            }\n                            break;\n                        case 'sqrt':\n                            value = Math.sqrt(parseFloat(value));\n                            break;\n                        case 'hex':\n                            value = Math.round(parseFloat(value)).toString(16);\n                            break;\n                        case 'hex2':\n                            value = Math.round(parseFloat(value)).toString(16);\n                            if (value.length < 2) {\n                                value = `0${value}`;\n                            }\n                            break;\n                        case 'HEX':\n                            value = Math.round(parseFloat(value)).toString(16).toUpperCase();\n                            break;\n                        case 'HEX2':\n                            value = Math.round(parseFloat(value)).toString(16).toUpperCase();\n                            if (value.length < 2) {\n                                value = `0${value}`;\n                            }\n                            break;\n                        case 'value':\n                            value = VisFormatUtils.formatValue(value, parseInt(operation.arg, 10));\n                            break;\n                        case 'array':\n                            value = operation.arg[parseInt(value, 10)];\n                            break;\n                        case 'date':\n                            value = this.formatDate(value, operation.arg);\n                            break;\n                        case 'momentDate':\n                            if (operation.arg !== undefined && operation.arg !== null) {\n                                const params = operation.arg.split(',');\n\n                                if (params.length === 1) {\n                                    value = this.formatMomentDate(value, params[0], false, moment);\n                                } else if (params.length === 2) {\n                                    value = this.formatMomentDate(value, params[0], params[1], moment);\n                                } else {\n                                    value = 'error';\n                                }\n                            }\n                            break;\n                        case 'min':\n                            value = parseFloat(value);\n                            value = (value < operation.arg) ? operation.arg : value;\n                            break;\n                        case 'max':\n                            value = parseFloat(value);\n                            value = (value > operation.arg) ? operation.arg : value;\n                            break;\n                        case 'random':\n                            if (operation.arg === undefined) {\n                                value = Math.random();\n                            } else {\n                                value = Math.random() * operation.arg;\n                            }\n                            break;\n                        case 'floor':\n                            value = Math.floor(parseFloat(value));\n                            break;\n                        case 'ceil':\n                            value = Math.ceil(parseFloat(value));\n                            break;\n                        case 'json':\n                            if (value && typeof value === 'string') {\n                                try {\n                                    value = JSON.parse(value);\n                                } catch (e) {\n                                    console.warn(`Cannot parse JSON string: ${value}`);\n                                }\n                            }\n                            if (value && typeof value === 'object') {\n                                value = VisFormatUtils.getObjPropValue(value, operation.arg);\n                            }\n                            break;\n                        default:\n                            // unknown condition\n                            console.warn(`Unknown operator: ${format}`);\n                            break;\n                    } // switch\n                }\n            } // if for\n            format = format.replace(oid.token, value);\n        } // for\n\n        format = format.replace(/{{/g, '{').replace(/}}/g, '}');\n\n        return format;\n    }\n}\n\nexport default VisFormatUtils;\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@mui/styles';\n\nimport {\n    Button, Checkbox,\n    Dialog,\n    DialogActions,\n    DialogContent,\n    DialogTitle, FormControlLabel,\n    IconButton, InputAdornment,\n    Switch,\n    TextField,\n} from '@mui/material';\n\nimport {\n    Cancel, Check,\n    Clear, Link as LinkIcon,\n} from '@mui/icons-material';\n\nimport { I18n, Utils, SelectID } from '@iobroker/adapter-react-v5';\n\nimport VisFormatUtils from '../../Vis/visFormatUtils';\nimport { store, recalculateFields } from '../../Store';\n\nconst styles = () => ({\n    dialog: {\n        height: 'calc(100% - 64px)',\n    },\n    content: {\n        width: 'calc(100% - 50px)',\n        height: 'calc(100% - 50px)',\n        overflow: 'hidden',\n    },\n    edit: {\n        display: 'inline-block',\n        width: '100%',\n        overflow: 'hidden',\n        verticalAlign: 'top',\n    },\n    help: {\n        marginLeft: 10,\n        display: 'inline-block',\n        width: '100%',\n        overflow: 'hidden',\n        verticalAlign: 'top',\n    },\n    space: {\n        marginLeft: 4,\n    },\n    code: {\n        fontFamily: 'monospace',\n    },\n    indent: {\n        paddingLeft: 40,\n    },\n    fieldContent: {\n        fontSize: '80%',\n        '&&&&&&': {\n            fontSize: '80%',\n        },\n    },\n    clickable: {\n        cursor: 'pointer',\n        textDecoration: 'underline',\n    },\n    valueTitle: {\n        fontFamily: 'monospace',\n        fontWeight: 'bold',\n    },\n    valueContent: {\n        fontFamily: 'monospace',\n    },\n});\n\nclass WidgetBindingField extends Component {\n    constructor(props) {\n        super(props);\n        let value = this.props.widget[this.props.isStyle ? 'style' : 'data'][this.props.field.name] || '';\n        if (value === undefined || value === null) {\n            value = '';\n        } else {\n            value = value.toString();\n        }\n\n        this.state = {\n            value,\n            editValue: value,\n            showSelectIdDialog: false,\n            showEditBindingDialog: false,\n            newStyle: true,\n            error: '',\n            values: {},\n        };\n\n        this.inputRef = React.createRef();\n    }\n\n    static getDerivedStateFromProps(props, state) {\n        let value = props.widget[props.isStyle ? 'style' : 'data']?.[props.field.name] || '';\n        if (value === undefined || value === null) {\n            value = '';\n        } else {\n            value = value.toString();\n        }\n\n        if (value !== state.value) {\n            return { value };\n        }\n\n        return null;\n    }\n\n    detectOldBindingStyle(value) {\n        this.visFormatUtils = this.visFormatUtils || new VisFormatUtils({ vis: window.vis });\n        const oids = this.visFormatUtils.extractBinding(value);\n        if (!oids) {\n            return false;\n        }\n        if (oids.find(it => it.token?.includes(':'))) {\n            return false;\n        }\n        return true;\n    }\n\n    async calculateValue(value) {\n        this.visFormatUtils = this.visFormatUtils || new VisFormatUtils({ vis: window.vis });\n        if (value === undefined || value === null) {\n            return '';\n        }\n        value = value.toString();\n\n        const oids = this.visFormatUtils.extractBinding(value);\n        if (!oids) {\n            return value;\n        }\n\n        // read all states\n        const stateOids = [];\n        oids.forEach(oid => {\n            if (oid.systemOid === 'widgetOid') {\n                const newOid = this.props.widget.data.oid;\n                oid.visOid = oid.visOid.replace(/^widgetOid\\./g, `${newOid}.`);\n                oid.systemOid = newOid;\n                oid.token = oid.token.replace(/:widgetOid;/g, `:${newOid};`);\n                oid.format = oid.format.replace(/:widgetOid;/g, `:${newOid};`);\n                for (const operation of oid.operations) {\n                    for (const arg of operation.arg) {\n                        arg.visOid = arg.visOid.replace(/^widgetOid\\./g, `${newOid}.`);\n                        arg.systemOid = newOid;\n                    }\n                }\n            }\n\n            const parts = oid.visOid.split('.');\n            if (parts[parts.length - 1] === 'val' || parts[parts.length - 1] === 'ts' || parts[parts.length - 1] === 'lc' || parts[parts.length - 1] === 'ack') {\n                parts.pop();\n            }\n            const id = parts.join('.');\n            if (!stateOids.includes(id)) {\n                stateOids.push(id);\n            }\n            if (oid.operations) {\n                for (let op = 0; op < oid.operations.length; op++) {\n                    const args = oid.operations[op].arg;\n                    if (args && args.length) {\n                        for (let a = 0; a < args.length; a++) {\n                            if (!stateOids.includes(args[a].systemOid)) {\n                                stateOids.push(args[a].systemOid);\n                            }\n                        }\n                    }\n                }\n            }\n        });\n\n        const values = {};\n        for (let i = 0; i < stateOids.length; i++) {\n            if (stateOids[i].includes('.')) {\n                const state = await this.props.socket.getState(stateOids[i]);\n                state && Object.keys(state).forEach(attr => {\n                    const name = `${stateOids[i]}.${attr}`;\n                    if (oids.find(it => it.visOid === name || it.operations?.find(op => op?.arg?.find(arg => arg.visOid === name)))) {\n                        values[name] = state[attr];\n                    }\n                });\n            }\n        }\n\n        return {\n            calculatedEditValue: this.visFormatUtils.formatBinding({\n                format: value,\n                view: this.props.selectedView,\n                wid: this.props.selectedWidgets[0],\n                widget: store.getState().visProject[this.props.selectedView].widgets[this.props.selectedWidgets[0]],\n                widgetData: store.getState().visProject[this.props.selectedView].widgets[this.props.selectedWidgets[0]].data,\n                values,\n            }),\n            values,\n        };\n    }\n\n    onChange(value) {\n        const project = JSON.parse(JSON.stringify(store.getState().visProject));\n        const field = this.props.field;\n\n        this.props.selectedWidgets.forEach(wid => {\n            const data = this.props.isStyle\n                ? project[this.props.selectedView].widgets[wid].style\n                : project[this.props.selectedView].widgets[wid].data;\n\n            data[field.name] = value;\n        });\n\n        this.props.changeProject(project);\n\n        // try to calculate binding\n        this.setState({ value });\n    }\n\n    renderSpecialNames() {\n        const classes = this.props.classes;\n        return <div>\n            <h4>Special bindings</h4>\n            <p>There are a number of different internal bindings to provide additional information in views:</p>\n            <ul>\n                <li>\n                    <b className={classes.clickable} onClick={() => this.insertInText('username')}>username</b>\n                    <span className={classes.space}>- shows logged-in user</span>\n                </li>\n                <li>\n                    <b className={classes.clickable} onClick={() => this.insertInText('view')}>view</b>\n                    <span className={classes.space}>- name of actual view</span>\n                </li>\n                <li>\n                    <b className={classes.clickable} onClick={() => this.insertInText('wname')}>wname</b>\n                    <span className={classes.space}>- widget name</span>\n                </li>\n                <li>\n                    <b className={classes.clickable} onClick={() => this.insertInText('widget')}>widget</b>\n                    <span className={classes.space}>\n                        - is an object with all data of widget. Can be used only in JS part, like\n                        <span className={`${classes.code} ${classes.space}`}>&#123;a:a;widget.data.name&#125;</span>\n                    </span>\n                </li>\n                <li>\n                    <b className={classes.clickable} onClick={() => this.insertInText('wid')}>wid</b>\n                    <span className={classes.space}>- name of actual widget</span>\n                </li>\n                <li>\n                    <b className={classes.clickable} onClick={() => this.insertInText('language')}>language</b>\n                    <span className={classes.space}>- can be</span>\n                    <b className={classes.space}>de</b>\n                    ,\n                    <b className={classes.space}>en</b>\n                    <span className={classes.space}>or</span>\n                    <b className={classes.space}>ru</b>\n                    .\n                </li>\n                <li>\n                    <b className={classes.clickable} onClick={() => this.insertInText('instance')}>instance</b>\n                    <span className={classes.space}>- browser instance</span>\n                </li>\n                <li>\n                    <b className={classes.clickable} onClick={() => this.insertInText('login')}>login</b>\n                    <span className={classes.space}>- if login required or not (e.g., to show/hide logout button)</span>\n                </li>\n                <li>\n                    <b className={classes.clickable} onClick={() => this.insertInText('local_')}>local_*</b>\n                    <span className={classes.space}>\n                        - if state name is started from\n                        <b className={classes.space}>local_</b>\n                        <span className={classes.space}>it will not be reported to ioBroker but will update all widgets, that depends on this state. (Local variable for current browser session)</span>\n                    </span>\n                </li>\n            </ul>\n        </div>;\n    }\n\n    renderHelpForNewStyle() {\n        const classes = this.props.classes;\n        return <div>\n            <h4>Bindings of objects</h4>\n            <p>Normally, most of the widgets have ObjectID attribute and this attribute can be bound with some value of object ID.</p>\n            <p>But there is another option for how to bind *any* attribute of widget to some ObjectID.</p>\n\n            <p>\n                Just write into attribute\n                <i className={classes.space}>&#123;object.id&#125;</i>\n                <span className={classes.space}>and it will be bound to this object&apos;s value.</span>\n            </p>\n            <p>If you use the special format, you can even make some simple operations with it, e.g., multiplying or formatting.</p>\n\n            <p>E.g., to calculate the hypotenuse of a triangle:</p>\n\n            <p className={classes.code}>&#123;h:javascript.0.myCustom.height;w:javascript.0.myCustom.width;Math.max(20, Math.sqrt(h*h + w*w))&#125;</p>\n            <p className={classes.space}>will be interpreted as function:</p>\n\n            <p className={classes.code}>\n                value = await (async function () &#123;\n                <br />\n                <span className={classes.indent}>var h = (await getState(&apos;javascript.0.myCustom.height&apos;)).val;</span>\n                <br />\n                <span className={classes.indent}>var w = (await getState(&apos;javascript.0.myCustom.width&apos;)).val;</span>\n                <br />\n                <span className={classes.indent}>return Math.max(20, Math.sqrt(h * h + w * w));</span>\n                <br />\n                &#125;)();\n            </p>\n\n            <p>or</p>\n\n            <p>\n                <span className={classes.code}>&#123;h:javascript.0.myCustom.height;w:javascript.0.myCustom.width;h*w&#125;</span>\n                <span className={classes.space}>will just multiply height with width.</span>\n            </p>\n\n            <p>You can use *any* javascript (browser) functions. Arguments must be defined with &apos;:&apos;, if not, it will be interpreted as formula.</p>\n\n            <p>Take care about types. All of them are defined as strings. To be sure, that value will be treated as number use parseFloat function.</p>\n\n            <p>So our Hypotenuse calculation will be:</p>\n            <p className={classes.code}>\n                &#123;h:javascript.0.myCustom.height;w:javascript.0.myCustom.width;Math.max(20, Math.sqrt(Math.pow(parseFloat(h), 2) + Math.pow(parseFloat(w), 2)))&#125;\n            </p>\n        </div>;\n    }\n\n    renderHelpForOldStyle() {\n        const classes = this.props.classes;\n        return <div>\n            <h4>Deprecated format</h4>\n            <p>Patten has the following format:</p>\n\n            <p>\n                <span className={classes.code}>&#123;objectID;operation1;operation2;...&#125;</span>\n            </p>\n\n            <p>The following operations are supported:</p>\n            <ul>\n                <li>\n                    <b\n                        className={classes.clickable}\n                        onClick={() => this.insertInText('*', {\n                            oldStyle: true,\n                            desc: 'Multiply with N',\n                            args: [{ type: 'number', label: 'N' }],\n                        })}\n                    >\n                        *(N)\n                    </b>\n                    - multiplying. Argument must be in brackets, like\n                    <i className={classes.space}>&quot;*(4)&quot;</i>\n                    .\n                    <span className={classes.space}>this sample, we multiply the value with 4.</span>\n                </li>\n                <li>\n                    <b\n                        className={classes.clickable}\n                        onClick={() => this.insertInText('+', {\n                            oldStyle: true,\n                            desc: 'Add to N',\n                            args: [{ type: 'number', label: 'N' }],\n                        })}\n                    >\n                        +(N)\n                    </b>\n                    - add. Argument must be in brackets, like\n                    <i className={classes.space}>&quot;+(4.5)&quot;</i>\n                    .\n                    <span className={classes.space}>In this sample we add to value 4.5.</span>\n                </li>\n                <li>\n                    <b\n                        className={classes.clickable}\n                        onClick={() => this.insertInText('-', {\n                            oldStyle: true,\n                            desc: 'Subtract N from value',\n                            args: [{ type: 'number', label: 'N' }],\n                        })}\n                    >\n                        -(N)\n                    </b>\n                    - subtract. Argument must be in brackets, like\n                    <i className={classes.space}>&quot;-(-674.5)&quot;</i>\n                    .\n                    <span className={classes.space}>In this sample we subtract from value -674.5.</span>\n                </li>\n                <li>\n                    <b\n                        className={classes.clickable}\n                        onClick={() => this.insertInText('/', {\n                            oldStyle: true,\n                            desc: 'Divide by D',\n                            args: [{ type: 'number', label: 'D' }],\n                        })}\n                    >\n                        /(D)\n                    </b>\n                    - dividing. Argument must be in brackets, like\n                    <i className={classes.space}>&quot;/(0.5)&quot;</i>\n                    .\n                    <span className={classes.space}>In this sample, we divide the value by 0.5.</span>\n                </li>\n                <li>\n                    <b\n                        className={classes.clickable}\n                        onClick={() => this.insertInText('%', {\n                            oldStyle: true,\n                            desc: 'Modulo with M',\n                            args: [{ type: 'number', label: 'M' }],\n                        })}\n                    >\n                        %(M)\n                    </b>\n                    - modulo. Argument must be in brackets, like\n                    <i className={classes.space}>&quot;%(5)&quot;</i>\n                    .\n                    <span className={classes.space}>In this sample, we take modulo of 5.</span>\n                </li>\n                <li>\n                    <b\n                        className={classes.clickable}\n                        onClick={() => this.insertInText('round', {\n                            oldStyle: true,\n                            desc: 'Round to integer',\n                        })}\n                    >\n                        round\n                    </b>\n                    - round the value.\n                </li>\n                <li>\n                    <b\n                        className={classes.clickable}\n                        onClick={() => this.insertInText('round', {\n                            oldStyle: true,\n                            desc: 'Round with R places after comma',\n                            args: [{ type: 'number', label: 'R' }],\n                        })}\n                    >\n                        round(R)\n                    </b>\n                    - round the value with N places after point, e.g.,\n                    <i>&quot;34.678;round(1) =&gt; 34.7&quot;</i>\n                </li>\n                <li>\n                    <b\n                        className={classes.clickable}\n                        onClick={() => this.insertInText('hex', {\n                            oldStyle: true,\n                            desc: 'convert value to hexadecimal value',\n                        })}\n                    >\n                        hex\n                    </b>\n                    <b>hex</b>\n                    - convert value to hexadecimal value. All letters are lower cased.\n                </li>\n                <li>\n                    <b\n                        className={classes.clickable}\n                        onClick={() => this.insertInText('hex2', {\n                            oldStyle: true,\n                            desc: 'Convert value to hexadecimal value. If value less 16, so the leading zero will be added',\n                        })}\n                    >\n                        hex2\n                    </b>\n                    <b>hex2</b>\n                    - convert value to hexadecimal value. All letters are lower cased. If value less 16, so the leading zero will be added.\n                </li>\n                <li>\n                    <b\n                        className={classes.clickable}\n                        onClick={() => this.insertInText('HEX', {\n                            oldStyle: true,\n                            desc: 'Convert value to hexadecimal value. All letters are upper cased',\n                        })}\n                    >\n                        HEX\n                    </b>\n                    <b>HEX</b>\n                    - same as hex, but upper-cased.\n                </li>\n                <li>\n                    <b\n                        className={classes.clickable}\n                        onClick={() => this.insertInText('HEX2', {\n                            oldStyle: true,\n                            desc: 'Convert value to hexadecimal value. All letters are upper cased. If value less 16, so the leading zero will be added',\n                        })}\n                    >\n                        HEX\n                    </b>\n                    <b>HEX2</b>\n                    - same as hex2, but upper-cased.\n                </li>\n                <li>\n                    <b\n                        className={classes.clickable}\n                        onClick={() => this.insertInText('min', {\n                            oldStyle: true,\n                            desc: 'if value is less than N, take the N, else take the value',\n                            args: [{ type: 'number', label: 'N' }],\n                        })}\n                    >\n                        min(N)\n                    </b>\n                    - if value is less than N, take the N, else value\n                </li>\n                <li>\n                    <b\n                        className={classes.clickable}\n                        onClick={() => this.insertInText('max', {\n                            oldStyle: true,\n                            desc: 'if value is greater than M, take the M, else take the value',\n                            args: [{ type: 'number', label: 'M' }],\n                        })}\n                    >\n                        max(N)\n                    </b>\n                    - if value is greater than M, take the M, else value\n                </li>\n                <li>\n                    <b\n                        className={classes.clickable}\n                        onClick={() => this.insertInText('sqrt', {\n                            oldStyle: true,\n                            desc: 'square root',\n                            args: [{ type: 'number', label: 'M' }],\n                        })}\n                    >\n                        sqrt\n                    </b>\n                    - square root\n                </li>\n                <li>\n                    <b\n                        className={classes.clickable}\n                        onClick={() => this.insertInText('pow', {\n                            oldStyle: true,\n                            desc: 'power of N',\n                            args: [{ type: 'number', label: 'n' }],\n                        })}\n                    >\n                        pow(n)\n                    </b>\n                    - power of N.\n                </li>\n                <li>\n                    <b\n                        className={classes.clickable}\n                        onClick={() => this.insertInText('pow', {\n                            oldStyle: true,\n                            desc: 'power of 2',\n                        })}\n                    >\n                        pow\n                    </b>\n                    - power of 2.\n                </li>\n                <li>\n                    <b\n                        className={classes.clickable}\n                        onClick={() => this.insertInText('floor', {\n                            oldStyle: true,\n                            desc: 'Math.floor',\n                        })}\n                    >\n                        floor\n                    </b>\n                    - Math.floor\n                </li>\n                <li>\n                    <b\n                        className={classes.clickable}\n                        onClick={() => this.insertInText('ceil', {\n                            oldStyle: true,\n                            desc: 'Math.ceil',\n                        })}\n                    >\n                        ceil\n                    </b>\n                    - Math.ceil\n                </li>\n                <li>\n                    <b\n                        className={classes.clickable}\n                        onClick={() => this.insertInText('ceil', {\n                            oldStyle: true,\n                            desc: 'Math.ceil',\n                        })}\n                    >\n                        ceil\n                    </b>\n                    <b className={classes.clickable} onClick={() => this.insertInText('*', true, true)}>random(R)</b>\n                    - Math.random() * R, or just Math.random() if no argument\n                </li>\n                <li>\n                    <b\n                        className={classes.clickable}\n                        onClick={() => this.insertInText('formatValue', {\n                            oldStyle: true,\n                            desc: 'format value according to system settings and use decimals',\n                            args: [{ type: 'number', label: 'decimals' }],\n                        })}\n                    >\n                        formatValue(decimals)\n                    </b>\n                    - format value according to system settings and use decimals\n                </li>\n                <li>\n                    <b\n                        className={classes.clickable}\n                        onClick={() => this.insertInText('date', {\n                            oldStyle: true,\n                            desc: 'format value as date. The format is like \"YYYY-MM-DD hh:mm:ss.sss\"',\n                            args: [{ type: 'string', label: 'format' }],\n                        })}\n                    >\n                        date(format)\n                    </b>\n                    - format value as date. The format is like:\n                    <i className={classes.space}>&quot;YYYY-MM-DD hh:mm:ss.sss&quot;</i>\n                    . Format is the same as in\n                    <a className={classes.space} href=\"https://github.com/iobroker/iobroker.javascript/blob/master/README.md#formatdate\" target=\"_blank\" rel=\"noreferrer\">\n                        iobroker.javascript\n                    </a>\n                    .\n                    <span className={classes.space}>If no format given, so the system date format will be used.</span>\n                </li>\n                <li>\n                    <b\n                        className={classes.clickable}\n                        onClick={() => this.insertInText('momentDate', {\n                            oldStyle: true,\n                            desc: 'format value as date using Moment.js',\n                            link: 'https://momentjs.com/docs/#/displaying/format/',\n                            args: [\n                                { type: 'string', label: 'format' },\n                                { type: 'boolean', label: 'Use today or yesterday' },\n                            ],\n                        })}\n                    >\n                        momentDate(format, useTodayOrYesterday)\n                    </b>\n                    - format value as date using Moment.js.\n                    <a className={classes.space} href=\"https://momentjs.com/docs/#/displaying/format/\" target=\"_blank\" rel=\"noreferrer\">\n                        formats must be entered according to the moment.js library\n                    </a>\n                    .\n                    <span className={classes.space}>With &apos;useTodayOrYesterday=true&apos; the &apos;moment.js&apos; format &apos;ddd&apos;/&apos;dddd&apos; are overwritten with today / yesterday</span>\n                </li>\n                <li>\n                    <b\n                        className={classes.clickable}\n                        onClick={() => this.insertInText('array', {\n                            oldStyle: true,\n                            desc: 'returns the element in given array according to index (converted from value)',\n                            args: [{ type: 'string', label: 'array elements divided by comma' }],\n                        })}\n                    >\n                        array(element1,element2[,element3,element4])\n                    </b>\n                    - returns the element of index. e.g.:\n                    <span className={`${classes.code} ${classes.space}`}>&#123;id.ack;array(ack is false,ack is true)&#125;</span>\n                </li>\n            </ul>\n\n            <p>You can use this pattern in any text, like</p>\n            <p className={classes.code}>\n                My calculations with &#123;objectID1;operation1;operation2;...&#125; are &#123;objectID2;operation3;operation4;...&#125;\n            </p>\n            <p>or color calculations:</p>\n            <p className={classes.code}>\n                #&#123;objectRed;/(100);*(255);HEX2&#125;&#123;objectGreen;HEX2&#125;&#123;objectBlue;HEX2&#125;\n            </p>\n            <p>\n                To show timestamp of object write\n                <b className={classes.space}>.ts</b>\n                <span className={classes.space}>or</span>\n                <b className={classes.space}>.lc</b>\n                <span className={classes.space}>(for last change) at the end of object id, e.g.:</span>\n            </p>\n            <p className={classes.code}>\n                Last change: &#123;objectRed.lc;date(hh:mm)&#125;\n            </p>\n        </div>;\n    }\n\n    getSelectedText() {\n        return this.state.editValue.substring(this.inputRef.current.selectionStart, this.inputRef.current.selectionEnd);\n    }\n\n    renderEditBindDialog() {\n        if (!this.state.showEditBindingDialog) {\n            return null;\n        }\n        const varValuesKeys = this.state.values ? Object.keys(this.state.values) : [];\n\n        return <Dialog\n            classes={{ paper: this.props.classes.dialog }}\n            open={!0}\n            maxWidth=\"lg\"\n            fullWidth\n            key=\"editDialog\"\n        >\n            <DialogTitle>{I18n.t('Edit binding')}</DialogTitle>\n            <DialogContent className={this.props.classes.content}>\n                <div className={this.props.classes.edit}>\n                    <TextField\n                        variant=\"standard\"\n                        label={this.props.label}\n                        value={this.state.editValue}\n                        inputRef={this.inputRef}\n                        autoFocus\n                        onKeyUp={e => {\n                            if (e.keyCode === 13) {\n                                this.setState({ showEditBindingDialog: false }, () => this.onChange(this.state.editValue));\n                            }\n                        }}\n                        InputProps={{\n                            endAdornment: this.state.editValue ? <InputAdornment position=\"end\">\n                                <IconButton\n                                    onClick={() => this.setState({ editValue: '' })}\n                                    edge=\"end\"\n                                >\n                                    <Clear />\n                                </IconButton>\n                            </InputAdornment> : null,\n                        }}\n                        style={{ width: 'calc(100% - 72px)' }}\n                        onChange={async e => this.setState({ editValue: e.target.value }, () => {\n                            this.calculateTimeout && clearTimeout(this.calculateTimeout);\n                            this.calculateTimeout = setTimeout(async () => {\n                                this.calculateTimeout = null;\n                                const { calculatedEditValue, values } = await this.calculateValue(e.target.value);\n                                this.setState({ calculatedEditValue, values });\n                            }, 200);\n                        })}\n                        helperText={<span>\n                            <span style={{ opacity: 0.6, marginRight: 4 }}>\n                                {I18n.t('Calculate values')}\n                                :\n                            </span>\n                            {this.state.calculatedEditValue}\n                        </span>}\n                    />\n                    <Button\n                        variant=\"contained\"\n                        color=\"primary\"\n                        style={{ marginLeft: 8 }}\n                        title={I18n.t('Insert object ID')}\n                        onClick={() => {\n                            this.setState({\n                                showSelectIdDialog: true,\n                                selectionValue: this.getSelectedText(),\n                                selectionStart: this.inputRef.current.selectionStart,\n                                selectionEnd: this.inputRef.current.selectionEnd,\n                            });\n                        }}\n                    >\n                        ...\n                    </Button>\n                </div>\n                {varValuesKeys.length ? <div className={this.props.classes.values}>\n                    {varValuesKeys.map(id => <div key={id}>\n                        <span className={this.props.classes.valueTitle}>{id}</span>\n                        <span>:</span>\n                        <span className={`${this.props.classes.space} ${this.props.classes.valueContent}`}>\n                            {`${this.state.values[id] === null || this.state.values[id] === undefined ? 'null' : this.state.values[id].toString()} [${typeof this.state.values[id]}]`}\n                        </span>\n                    </div>)}\n                </div> : null}\n                <div\n                    className={this.props.classes.help}\n                    style={{ height: `calc(100% - ${71 + 22 * varValuesKeys.length}px)` }}\n                >\n                    <div>\n                        {I18n.t('Old style')}\n                        <Switch\n                            checked={this.state.newStyle}\n                            onChange={e => this.setState({ newStyle: e.target.checked })}\n                        />\n                        {I18n.t('New style')}\n                    </div>\n                    <div style={{ height: 'calc(100% - 38px)', overflow: 'auto' }}>\n                        {this.renderSpecialNames()}\n                        {this.state.newStyle ? this.renderHelpForNewStyle() : this.renderHelpForOldStyle()}\n                    </div>\n                </div>\n            </DialogContent>\n            <DialogActions>\n                <Button\n                    variant=\"contained\"\n                    disabled={this.state.editValue === this.state.value}\n                    color=\"primary\"\n                    startIcon={<Check />}\n                    onClick={() => {\n                        this.setState({ showEditBindingDialog: false }, () => this.onChange(this.state.editValue));\n                        store.dispatch(recalculateFields(true));\n                    }}\n                >\n                    {I18n.t('Apply')}\n                </Button>\n                <Button\n                    variant=\"contained\"\n                    color=\"grey\"\n                    startIcon={<Cancel />}\n                    onClick={() => this.setState({ showEditBindingDialog: false })}\n                >\n                    {I18n.t('Cancel')}\n                </Button>\n            </DialogActions>\n        </Dialog>;\n    }\n\n    static isInBrackets(text, pos) {\n        let counter = 0;\n        for (let i = 0; i < pos; i++) {\n            if (text[i] === '{') {\n                counter++;\n            } else if (text[i] === '}') {\n                counter--;\n            }\n        }\n        return counter > 0;\n    }\n\n    renderDialogAskToModify() {\n        if (!this.state.askToModify) {\n            return null;\n        }\n        return <Dialog\n            open={!0}\n            key=\"modifyDialog\"\n            onClose={() => this.setState({ askToModify: null })}\n        >\n            <DialogTitle>{I18n.t('Edit binding')}</DialogTitle>\n            <DialogContent>\n                <div>\n                    {I18n.t('Do you want to modify the value or just use it as it is?')}\n                </div>\n            </DialogContent>\n            <DialogActions>\n                <Button\n                    variant=\"contained\"\n                    color=\"grey\"\n                    onClick={() => {\n                        const options = this.state.askToModify;\n                        options.modify = true;\n                        this.setState({ askToModify: null }, () =>\n                            this.insertInText(options.text, options));\n                    }}\n                >\n                    {I18n.t('Modify')}\n                </Button>\n                <Button\n                    variant=\"contained\"\n                    color=\"grey\"\n                    onClick={() => {\n                        const options = this.state.askToModify;\n                        options.modify = false;\n                        this.setState({ askToModify: null }, () =>\n                            this.insertInText(options.text, options));\n                    }}\n                >\n                    {I18n.t('Just use without modification')}\n                </Button>\n            </DialogActions>\n        </Dialog>;\n    }\n\n    renderDialogArguments() {\n        if (!this.state.askForArguments) {\n            return null;\n        }\n        return <Dialog\n            open={!0}\n            maxWidth=\"md\"\n            fullWidth\n            onClose={() => this.setState({ askForArguments: null })}\n            key=\"argsDialog\"\n        >\n            <DialogTitle>{I18n.t('Arguments')}</DialogTitle>\n            <DialogContent>\n                <div>\n                    {this.state.askForArguments.desc}\n                </div>\n                {this.state.askForArguments.args[0] ? <div>\n                    <TextField\n                        variant=\"standard\"\n                        label={this.state.askForArguments.args[0].label}\n                        value={this.state.askForArguments.arg1 === undefined ? '' : this.state.askForArguments.arg1}\n                        onKeyDown={e => {\n                            if (e.keyCode === 13) {\n                                const options = this.state.askForArguments;\n                                options.args = null;\n                                this.setState({ askForArguments: null }, () =>\n                                    this.insertInText(options.text, options));\n                            }\n                        }}\n                        InputProps={{\n                            endAdornment: this.state.askForArguments.arg1 ? <InputAdornment position=\"end\">\n                                <IconButton\n                                    onClick={() => this.setState({\n                                        askForArguments: {\n                                            ...this.state.askForArguments,\n                                            arg1: '',\n                                        },\n                                    })}\n                                    edge=\"end\"\n                                >\n                                    <Clear />\n                                </IconButton>\n                            </InputAdornment> : null,\n                        }}\n                        autoFocus\n                        onChange={e => this.setState({ askForArguments: { ...this.state.askForArguments, arg1: e.target.value } })}\n                    />\n                </div> : null}\n                {this.state.askForArguments.args[1] ? <div>\n                    <FormControlLabel\n                        variant=\"standard\"\n                        label={this.state.askForArguments.args[1].label}\n                        control={<Checkbox\n                            checked={!!this.state.askForArguments.arg2}\n                            onChange={e => this.setState({ askForArguments: { ...this.state.askForArguments, arg2: e.target.checked } })}\n                        />}\n                    />\n                </div> : null}\n            </DialogContent>\n            <DialogActions>\n                <Button\n                    variant=\"contained\"\n                    color=\"grey\"\n                    onClick={() => {\n                        const options = this.state.askForArguments;\n                        options.args = null;\n                        this.setState({ askForArguments: null }, () =>\n                            this.insertInText(options.text, options));\n                    }}\n                >\n                    {I18n.t('Apply')}\n                </Button>\n                <Button\n                    variant=\"contained\"\n                    color=\"grey\"\n                    onClick={() => this.setState({ askForArguments: null })}\n                >\n                    {I18n.t('Cancel')}\n                </Button>\n            </DialogActions>\n        </Dialog>;\n    }\n\n    async insertInText(text, options) {\n        options = options || {};\n        const selectionStart = options.selectionStart === undefined ? this.inputRef.current.selectionStart : options.selectionStart;\n        const selectionEnd = options.selectionEnd === undefined ? this.inputRef.current.selectionEnd : options.selectionEnd;\n\n        const isInBrackets = WidgetBindingField.isInBrackets(this.state.editValue, selectionStart);\n        if (!options.oldStyle && options.modify === undefined && !isInBrackets) {\n            // ask about do you want to modify value or not\n            this.setState({ askToModify: { ...options, text } });\n            return;\n        }\n        if (options.oldStyle && options.args) {\n            // show the argument dialog\n            this.setState({ askForArguments: { ...options, text } });\n            return;\n        }\n\n        let editValue = this.state.editValue;\n        if (editValue) {\n            if (!isInBrackets && !options.oldStyle) {\n                if (options.modify) {\n                    editValue = `${editValue.substring(0, selectionStart)}{v:${text};v * 1}${editValue.substring(selectionEnd)}`;\n                } else {\n                    editValue = `${editValue.substring(0, selectionStart)}{${text}}${editValue.substring(selectionEnd)}`;\n                }\n            } else if (options.oldStyle) {\n                if (options.arg1 !== undefined && options.arg2 !== undefined) {\n                    editValue = `${editValue.substring(0, selectionStart)};${text}(${options.arg1}, ${options.arg2})${editValue.substring(selectionEnd)}`;\n                } else if (options.arg1 !== undefined) {\n                    editValue = `${editValue.substring(0, selectionStart)};${text}(${options.arg1})${editValue.substring(selectionEnd)}`;\n                } else {\n                    editValue = `${editValue.substring(0, selectionStart)};${text}${editValue.substring(selectionEnd)}`;\n                }\n            } else {\n                editValue = editValue.substring(0, selectionStart) + text + editValue.substring(selectionEnd);\n            }\n        } else if (options.oldStyle) {\n            if (options.arg1 !== undefined && options.arg2 !== undefined) {\n                editValue = `{YOUR_OBJECT_ID;${text}(${options.arg1}, ${options.arg2})`;\n            } else if (options.arg1 !== undefined) {\n                editValue = `{YOUR_OBJECT_ID;${text}(${options.arg1})`;\n            } else {\n                editValue = `{YOUR_OBJECT_ID;${text}`;\n            }\n        } else if (options.modify) {\n            editValue = `{v:${text};v * 1}`;\n        } else {\n            editValue = `{${text}}`;\n        }\n        const { calculatedEditValue, values } = await this.calculateValue(editValue);\n\n        this.setState({ editValue, calculatedEditValue, values }, () => {\n            // set cursor on the same position\n            this.inputRef.current.focus();\n            if (this.inputRef.current.setSelectionRange) {\n                this.inputRef.current.setSelectionRange(selectionStart, selectionStart);\n            } else if (this.inputRef.current.createTextRange) {\n                const t = this.inputRef.current.createTextRange();\n                t.collapse(true);\n                t.moveEnd('character', selectionStart);\n                t.moveStart('character', selectionStart);\n                t.select();\n            }\n        });\n    }\n\n    renderSelectIdDialog() {\n        if (!this.state.showSelectIdDialog) {\n            return null;\n        }\n        return <SelectID\n            key=\"selectDialog\"\n            imagePrefix=\"../\"\n            selected={this.state.selectionValue}\n            onOk={async selected => {\n                // insert on cursor and replace selected text\n                await this.insertInText(selected, { selectionStart: this.state.selectionStart, selectionEnd: this.state.selectionEnd });\n            }}\n            onClose={() => this.setState({ showSelectIdDialog: false })}\n            socket={this.props.socket}\n        />;\n    }\n\n    render() {\n        return [\n            <TextField\n                key=\"text\"\n                variant=\"standard\"\n                className={this.props.classes.fieldContent}\n                fullWidth\n                placeholder={this.props.isDifferent ? I18n.t('different') : null}\n                InputProps={{\n                    classes: { input: Utils.clsx(this.props.classes.clearPadding, this.props.classes.fieldContent) },\n                    endAdornment: <Button\n                        title={I18n.t('Edit binding')}\n                        disabled={this.props.disabled}\n                        size=\"small\"\n                        variant=\"contained\"\n                        onClick={async () => {\n                            const { calculatedEditValue, values } = await this.calculateValue(this.state.value);\n                            this.setState({\n                                showEditBindingDialog: true,\n                                editValue: this.state.value,\n                                calculatedEditValue,\n                                values,\n                                newStyle: !this.detectOldBindingStyle(this.state.value),\n                            });\n                        }}\n                    >\n                        <LinkIcon />\n                    </Button>,\n                }}\n                error={!!this.state.error}\n                helperText={typeof this.state.error === 'string' ? I18n.t(this.state.error) : null}\n                disabled={this.props.disabled}\n                value={this.state.value}\n                onChange={e => this.onChange(e.target.value)}\n            />,\n            this.renderEditBindDialog(),\n            this.renderSelectIdDialog(),\n            this.renderDialogAskToModify(),\n            this.renderDialogArguments(),\n        ];\n    }\n}\n\nWidgetBindingField.propTypes = {\n    label: PropTypes.string,\n    field: PropTypes.object,\n    selectedView: PropTypes.string,\n    isStyle: PropTypes.bool,\n    selectedWidgets: PropTypes.array,\n    changeProject: PropTypes.func,\n    disabled: PropTypes.bool,\n    socket: PropTypes.object,\n    // adapterName: PropTypes.string,\n    // instance: PropTypes.number,\n    // projectName: PropTypes.string,\n    isDifferent: PropTypes.bool,\n};\n\nexport default withStyles(styles)(WidgetBindingField);\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@mui/styles';\n\nimport {\n    Accordion, AccordionDetails, AccordionSummary,\n    Checkbox, Divider, Button, IconButton,\n    Tooltip,\n} from '@mui/material';\n\nimport {\n    ArrowDownward,\n    ArrowUpward,\n    ExpandMore as ExpandMoreIcon,\n    Lock as LockIcon,\n    FilterAlt as FilterAltIcon,\n    Colorize as ColorizeIcon,\n    Code as CodeIcon,\n    Info as InfoIcon,\n    Delete,\n    Add,\n    LinkOff,\n    Link as LinkIcon,\n} from '@mui/icons-material';\n\nimport { I18n, Icon, Utils } from '@iobroker/adapter-react-v5';\nimport {\n    store, recalculateFields, updateWidget, selectWidget,\n} from '../../Store';\n\nimport WidgetField from './WidgetField';\nimport IODialog from '../../Components/IODialog';\nimport { getWidgetTypes, parseAttributes } from '../../Vis/visWidgetsCatalog';\nimport WidgetCSS from './WidgetCSS';\nimport WidgetJS from './WidgetJS';\nimport WidgetBindingField from './WidgetBindingField';\nimport { deepClone } from '../../Utils/utils';\n\nconst ICONS = {\n    'group.fixed': <FilterAltIcon fontSize=\"small\" />,\n    locked: <LockIcon fontSize=\"small\" />,\n};\n\nconst styles = theme => ({\n    backgroundClass: {\n        display: 'flex',\n        alignItems: 'center',\n    },\n    backgroundClassSquare: {\n        width: 40,\n        height: 40,\n        display: 'inline-block',\n        marginRight: 4,\n    },\n    clearPadding: {\n        '&&&&': {\n            padding: 0,\n            margin: 0,\n            minHeight: 'initial',\n        },\n    },\n    menuItem: {\n        cursor: 'pointer',\n    },\n    selected: {\n        backgroundColor: theme.palette.primary.main,\n        color: theme.palette.primary.contrastText,\n    },\n    checkBox: {\n        marginTop: '-4px !important',\n    },\n    emptyMoreIcon: {\n        width: 24,\n        height: 24,\n    },\n    fieldTitle: {\n        width: 190,\n        fontSize: '80%',\n        position: 'relative',\n        lineHeight: '21px',\n    },\n    fieldTitleDisabled: {\n        opacity: 0.8,\n    },\n    fieldTitleError: {\n        color: theme.palette.error.main,\n    },\n    colorize: {\n        display: 'none',\n        float: 'right',\n        right: 0,\n        cursor: 'pointer',\n        opacity: 0.3,\n        '&:hover': {\n            opacity: 1,\n        },\n        '&:active': {\n            transform: 'scale(0.8)',\n        },\n    },\n    fieldRow: {\n        '&:hover $colorize': {\n            display: 'initial',\n        },\n    },\n    fieldDivider: {\n        width: '100%',\n        height: 2,\n        backgroundColor: '#999999',\n    },\n    groupButton: {\n        width: 24,\n        height: 24,\n    },\n    grow: {\n        flexGrow: 1,\n    },\n    fieldContent: {\n        '&&&&&&': {\n            fontSize: '80%',\n        },\n        '& svg': {\n            fontSize: '1rem',\n        },\n    },\n    fieldInput: {\n        width: '100%',\n    },\n    fieldContentColor: {\n        '&&&&&& label': {\n            display: 'none',\n        },\n        '&&&&&& input': {\n            fontSize: '80%',\n        },\n    },\n    fieldContentSlider: {\n        display: 'inline',\n        width: 'calc(100% - 50px)',\n        marginRight: 8,\n    },\n    fieldContentSliderInput: {\n        display: 'inline',\n        width: 50,\n    },\n    groupSummary: {\n        '&&&&&&': {\n            marginTop: 20,\n            borderRadius: '4px',\n            padding: '2px',\n        },\n    },\n    groupSummaryExpanded: {\n        '&&&&&&': {\n            marginTop: 20,\n            borderTopRightRadius: '4px',\n            borderTopLeftRadius: '4px',\n            padding: '2px',\n        },\n    },\n    lightedPanel: theme.classes.lightedPanel,\n    infoIcon: {\n        verticalAlign: 'middle',\n        marginLeft: 3,\n    },\n    bindIconSpan: {\n        verticalAlign: 'middle',\n        marginLeft: 3,\n        float: 'right',\n        cursor: 'pointer',\n    },\n    bindIcon: {\n        width: 16,\n        height: 16,\n    },\n    smallImageDiv: {\n        width: 30,\n        height: 30,\n        display: 'inline-block',\n        float: 'right',\n    },\n    smallImage: {\n        maxWidth: '100%',\n        maxHeight: '100%',\n    },\n    widgetIcon: {\n        overflow: 'hidden',\n        width: 40,\n        height: 40,\n        display: 'inline-block',\n        marginRight: 4,\n    },\n    icon: {\n        width: '100%',\n        height: '100%',\n        objectFit: 'contain',\n    },\n    widgetImage: {\n        display: 'block',\n        width: 30,\n        height: 30,\n        transformOrigin: '0 0',\n    },\n    iconFolder: {\n        verticalAlign: 'middle',\n        marginRight: 6,\n        marginTop: -3,\n        fontSize: 20,\n        color: '#00dc00',\n    },\n    listFolder: {\n        backgroundColor: 'inherit',\n        lineHeight: '36px',\n    },\n    coloredWidgetSet: {\n        padding: '0 3px',\n        borderRadius: 3,\n    },\n    widgetName: {\n        verticalAlign: 'top',\n        display: 'inline-block',\n    },\n    widgetType: {\n        verticalAlign: 'top',\n        display: 'inline-block',\n        fontSize: 12,\n        fontStyle: 'italic',\n        marginLeft: 8,\n    },\n    widgetNameText: {\n        lineHeight: '20px',\n    },\n    fieldHelp: {\n        fontSize: 12,\n        fontStyle: 'italic',\n        paddingLeft: 16,\n        color: theme.palette.mode === 'dark' ? '#00931a' : '#014807',\n    },\n});\n\nconst WIDGET_ICON_HEIGHT = 34;\nconst IMAGE_TYPES = ['.png', '.jpg', '.svg', '.gif', '.apng', '.avif', '.webp'];\n\nclass Widget extends Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            cssDialogOpened: false,\n            jsDialogOpened: false,\n            clearGroup: null,\n            showWidgetCode: window.localStorage.getItem('showWidgetCode') === 'true',\n            triggerAllOpened: 0,\n            triggerAllClosed: 0,\n            accordionOpen: window.localStorage.getItem('attributesWidget') && window.localStorage.getItem('attributesWidget')[0] === '{'\n                ? JSON.parse(window.localStorage.getItem('attributesWidget'))\n                : {},\n            widgetsLoaded: props.widgetsLoaded,\n            widgetTypes: null,\n            fields: null,\n            transitionTime: 0,\n        };\n\n        this.fieldsBefore = Widget.getFieldsBefore();\n        this.fieldsSignals = [];\n        for (let i = 0; i <= 3; i++) {\n            this.fieldsSignals.push(Widget.getSignals(i, props.adapterName));\n        }\n\n        this.imageRef = React.createRef();\n    }\n\n    static getFieldsBefore() {\n        return [\n            {\n                name: 'fixed',\n                fields: [\n                    { name: 'name' },\n                    { name: 'comment' },\n                    { name: 'class', type: 'class' },\n                    { name: 'filterkey', type: 'filters' },\n                    { name: 'multi-views', type: 'select-views' },\n                    { name: 'locked', type: 'checkbox' },\n                ],\n            },\n            {\n                name: 'visibility',\n                fields: [{ name: 'visibility-oid', type: 'id' },\n                    {\n                        name: 'visibility-cond', type: 'select', options: ['==', '!=', '<=', '>=', '<', '>', 'consist', 'not consist', 'exist', 'not exist'], default: '==',\n                    },\n                    { name: 'visibility-val', default: 1 },\n                    { name: 'visibility-groups', type: 'groups' },\n                    {\n                        name: 'visibility-groups-action', type: 'select', options: ['hide', 'disabled'], default: 'hide',\n                    }],\n            },\n        ];\n    }\n\n    static getSignals(count /* , adapterName */) {\n        const result = {\n            name: 'signals',\n            fields: [\n                {\n                    name: 'signals-count',\n                    label: 'signals-count',\n                    type: 'select',\n                    // noTranslation: true,\n                    options: ['0', '1', '2', '3'],\n                    default: '0',\n                    immediateChange: true,\n                },\n            ],\n        };\n\n        for (let i = 0; i < count; i++) {\n            result.fields = result.fields.concat([\n                { type: 'delimiter' },\n                { name: `signals-oid-${i}`, type: 'id' },\n                {\n                    name: `signals-cond-${i}`,\n                    type: 'select',\n                    noTranslation: true,\n                    options: ['==', '!=', '<=', '>=', '<', '>', 'consist', 'not consist', 'exist', 'not exist'],\n                    default: '==',\n                },\n                { name: `signals-val-${i}`, default: true },\n                {\n                    name: `signals-icon-${i}`, type: 'image', default: '', hidden: `!!data[\"signals-smallIcon-${i}\"]`, // `${adapterName}/signals/lowbattery.png` },\n                },\n                {\n                    name: `signals-smallIcon-${i}`, type: 'icon64', default: '', label: `signals-smallIcon-${i}`, hidden: `!!data[\"signals-icon-${i}\"]`,\n                },\n                {\n                    name: `signals-color-${i}`, type: 'color', default: '', hidden: `!data[\"signals-smallIcon-${i}\"] && !data[\"signals-text-${i}\"]`,\n                }, // `${adapterName}/signals/lowbattery.png` },\n                {\n                    name: `signals-icon-size-${i}`, type: 'slider', min: 1, max: 120, step: 1, default: 0,\n                },\n                { name: `signals-icon-style-${i}` },\n                { name: `signals-text-${i}` },\n                { name: `signals-text-style-${i}` },\n                { name: `signals-text-class-${i}` },\n                { name: `signals-blink-${i}`, type: 'checkbox', default: false },\n                {\n                    name: `signals-horz-${i}`, type: 'slider', min: -20, max: 120, step: 1, default: 0,\n                },\n                {\n                    name: `signals-vert-${i}`, type: 'slider', min: -20, max: 120, step: 1, default: 0,\n                },\n                { name: `signals-hide-edit-${i}`, type: 'checkbox', default: false },\n            ]);\n        }\n\n        return result;\n    }\n\n    static getFieldsAfter(widget, widgets, fonts) {\n        return [\n            {\n                name: 'css_common',\n                isStyle: true,\n                fields: [\n                    { name: 'position', type: 'nselect', options: ['', 'relative', 'sticky'] },\n                    { name: 'display', type: 'nselect', options: ['', 'inline-block'] },\n                    ...(['relative', 'sticky'].includes(widget.style.position) ? [] :\n                        [\n                            { name: 'left', type: 'dimension' },\n                            { name: 'top', type: 'dimension' },\n                        ]),\n                    { name: 'width', type: 'dimension' },\n                    { name: 'height', type: 'dimension' },\n                    {\n                        name: 'z-index', type: 'number', min: -200, max: 200,\n                    },\n                    { name: 'overflow-x', type: 'nselect', options: ['', 'visible', 'hidden', 'scroll', 'auto', 'initial', 'inherit'] },\n                    { name: 'overflow-y', type: 'nselect', options: ['', 'visible', 'hidden', 'scroll', 'auto', 'initial', 'inherit'] },\n                    { name: 'opacity' },\n                    { name: 'cursor', type: 'auto', options: ['alias', 'all-scroll', 'auto', 'cell', 'col-resize', 'context-menu', 'copy', 'crosshair', 'default', 'e-resize', 'ew-resize', 'grab', 'grabbing', 'help', 'move', 'n-resize', 'ne-resize', 'nesw-resize', 'ns-resize', 'nw-resize', 'nwse-resize', 'no-drop', 'none', 'not-allowed', 'pointer', 'progress', 'row-resize', 's-resize', 'se-resize', 'sw-resize', 'text', 'vertical-text', 'w-resize', 'wait', 'zoom-in', 'zoom-out', 'initial', 'inherit'] },\n                    { name: 'transform' },\n                ],\n            },\n            {\n                name: 'css_font_text',\n                isStyle: true,\n                fields: [{ name: 'color', type: 'color' },\n                    { name: 'text-align', type: 'nselect', options: ['', 'left', 'right', 'center', 'justify', 'initial', 'inherit'] },\n                    { name: 'text-shadow' },\n                    {\n                        name: 'font-family',\n                        type: 'auto',\n                        options: fonts,\n                    },\n                    { name: 'font-style', type: 'nselect', options: ['', 'normal', 'italic', 'oblique', 'initial', 'inherit'] },\n                    { name: 'font-variant', type: 'nselect', options: ['', 'normal', 'small-caps', 'initial', 'inherit'] },\n                    { name: 'font-weight', type: 'auto', options: ['normal', 'bold', 'bolder', 'lighter', 'initial', 'inherit'] },\n                    { name: 'font-size', type: 'auto', options: ['medium', 'xx-small', 'x-small', 'small', 'large', 'x-large', 'xx-large', 'smaller', 'larger', 'initial', 'inherit'] },\n                    { name: 'line-height' },\n                    { name: 'letter-spacing' },\n                    { name: 'word-spacing' }],\n            },\n            {\n                name: 'css_background',\n                isStyle: true,\n                fields: [{ name: 'background' },\n                    { name: 'background-color', type: 'color' },\n                    { name: 'background-image' },\n                    { name: 'background-repeat', type: 'nselect', options: ['', 'repeat', 'repeat-x', 'repeat-y', 'no-repeat', 'initial', 'inherit'] },\n                    { name: 'background-attachment', type: 'nselect', options: ['', 'scroll', 'fixed', 'local', 'initial', 'inherit'] },\n                    { name: 'background-position' },\n                    { name: 'background-size' },\n                    { name: 'background-clip', type: 'nselect', options: ['', 'border-box', 'padding-box', 'content-box', 'initial', 'inherit'] },\n                    { name: 'background-origin', type: 'nselect', options: ['', 'padding-box', 'border-box', 'content-box', 'initial', 'inherit'] }],\n            },\n            {\n                name: 'css_border',\n                isStyle: true,\n                fields: [\n                    // { name: 'box-sizing', type: 'nselect', options: ['', 'border-box', 'content-box']  },\n                    { name: 'border-width' },\n                    { name: 'border-style', type: 'nselect', options: ['', 'dotted', 'dashed', 'solid', 'double', 'groove', 'ridge', 'inset', 'outset', 'hidden'] },\n                    { name: 'border-color', type: 'color' },\n                    { name: 'border-radius' }],\n            },\n            {\n                name: 'css_shadow_padding',\n                isStyle: true,\n                fields: [{ name: 'padding' },\n                    { name: 'padding-left' },\n                    { name: 'padding-top' },\n                    { name: 'padding-right' },\n                    { name: 'padding-bottom' },\n                    { name: 'box-shadow' },\n                    { name: 'margin-left' },\n                    { name: 'margin-top' },\n                    { name: 'margin-right' },\n                    { name: 'margin-bottom' }],\n            },\n            {\n                name: 'last_change',\n                fields: [\n                    { name: 'lc-oid', type: 'id' },\n                    {\n                        name: 'lc-type', type: 'select', options: ['last-change', 'timestamp'], default: 'last-change',\n                    },\n                    { name: 'lc-is-interval', type: 'checkbox', default: true },\n                    { name: 'lc-is-moment', type: 'checkbox', default: false },\n                    {\n                        name: 'lc-format', type: 'auto', options: ['YYYY.MM.DD hh:mm:ss', 'DD.MM.YYYY hh:mm:ss', 'YYYY.MM.DD', 'DD.MM.YYYY', 'YYYY/MM/DD hh:mm:ss', 'YYYY/MM/DD', 'hh:mm:ss'], default: '',\n                    },\n                    {\n                        name: 'lc-position-vert', type: 'select', options: ['top', 'middle', 'bottom'], default: 'top',\n                    },\n                    {\n                        name: 'lc-position-horz', type: 'select', options: ['left', /* 'middle', */'right'], default: 'right',\n                    },\n                    {\n                        name: 'lc-offset-vert', type: 'slider', min: -120, max: 120, step: 1, default: 0,\n                    },\n                    {\n                        name: 'lc-offset-horz', type: 'slider', min: -120, max: 120, step: 1, default: 0,\n                    },\n                    {\n                        name: 'lc-font-size', type: 'auto', options: ['', 'medium', 'xx-small', 'x-small', 'small', 'large', 'x-large', 'xx-large', 'smaller', 'larger', 'initial', 'inherit'], default: '12px',\n                    },\n                    {\n                        name: 'lc-font-family', type: 'auto', default: '', options: fonts,\n                    },\n                    {\n                        name: 'lc-font-style', type: 'auto', options: ['', 'normal', 'italic', 'oblique', 'initial', 'inherit'], default: '',\n                    },\n                    { name: 'lc-bkg-color', type: 'color', default: '' },\n                    { name: 'lc-color', type: 'color', default: '' },\n                    { name: 'lc-border-width', default: '0' },\n                    {\n                        name: 'lc-border-style', type: 'auto', options: ['', 'none', 'hidden', 'dotted', 'dashed', 'solid', 'double', 'groove', 'ridge', 'inset', 'outset', 'initial', 'inherit'], default: '',\n                    },\n                    { name: 'lc-border-color', type: 'color', default: '' },\n                    {\n                        name: 'lc-border-radius', type: 'slider', min: 0, max: 20, step: 1, default: 10,\n                    },\n                    {\n                        name: 'lc-padding', type: 'slider', min: 0, max: 20, step: 1, default: 3,\n                    },\n                    {\n                        name: 'lc-zindex', type: 'slider', min: -10, max: 20, step: 1, default: 0,\n                    },\n                ],\n            },\n        ];\n    }\n\n    static checkFunction(funcText, project, selectedView, selectedWidgets, index) {\n        try {\n            let _func;\n            if (typeof funcText === 'function') {\n                _func = funcText;\n            } else {\n                // eslint-disable-next-line no-new-func\n                _func = new Function('data', 'index', 'style', `return ${funcText}`);\n            }\n            const isHidden = [];\n            for (let i = 0; i < selectedWidgets.length; i++) {\n                const widget = project[selectedView].widgets[selectedWidgets[i]];\n                const data = widget?.data;\n                const style = widget?.style;\n                if (!widget) {\n                    // strange error\n                    console.warn(`Strange error, that widget ${selectedWidgets[i]} does not exists`);\n                    continue;\n                }\n                isHidden.push(_func(data || {}, index, style || {}));\n            }\n            let _isHdn = isHidden[0];\n            if (_isHdn && isHidden.find((hidden, i) => i > 0 && !hidden)) {\n                _isHdn = false;\n            }\n            if (_isHdn) {\n                return true;\n            }\n        } catch (e) {\n            console.error(`Cannot execute hidden on \"${funcText}\": ${e}`);\n        }\n        return false;\n    }\n\n    componentDidMount() {\n        if (this.state.widgetsLoaded) {\n            this.setState({ widgetTypes: getWidgetTypes() }, () => this.recalculateFields());\n        }\n        this.setAccordionState();\n    }\n\n    static getDerivedStateFromProps(props, state) {\n        let newState = null;\n        if (props.widgetsLoaded && !state.widgetsLoaded) {\n            newState = {};\n            newState.widgetsLoaded = true;\n            newState.widgetTypes = getWidgetTypes();\n            store.dispatch(recalculateFields(true));\n        }\n\n        return newState;\n    }\n\n    recalculateFields() {\n        if (!this.state.widgetTypes) {\n            return;\n        }\n        console.log('Recalculate fields');\n        const widgets = store.getState().visProject[this.props.selectedView]?.widgets;\n\n        let widget;\n        let widgetType;\n        const commonFields = {};\n        const commonGroups = { common: this.props.selectedWidgets.length };\n        const selectedWidgetsFields = [];\n\n        widgets && this.props.selectedWidgets.forEach((wid, widgetIndex) => {\n            widget = widgets[wid];\n            if (!widget) {\n                return;\n            }\n\n            widgetType = this.state.widgetTypes.find(type => type.name === widget.tpl);\n            if (!widgetType) {\n                return;\n            }\n\n            let params = widgetType.params;\n            if (typeof widgetType.params === 'function') {\n                params = widgetType.params(widget.data, null, {\n                    views: store.getState().visProject,\n                    view: this.props.selectedView,\n                    socket: this.props.socket,\n                    themeType: this.props.themeType,\n                    projectName: this.props.projectName,\n                    adapterName: this.props.adapterName,\n                    instance: this.props.instance,\n                    id: wid,\n                    widget,\n                });\n            }\n\n            const fields = parseAttributes(params, widgetIndex, commonGroups, commonFields, widgetType.set, widget.data);\n\n            selectedWidgetsFields.push(fields);\n        });\n\n        let fields;\n        const bindFields = [];\n        const commonValues = {};\n        const isDifferent = {};\n        const newState = {};\n\n        if (this.props.selectedWidgets.length > 1) {\n            fields = selectedWidgetsFields[0]?.filter(group => {\n                if (commonGroups[group.name] < this.props.selectedWidgets.length) {\n                    return false;\n                }\n                group.fields = group.fields.filter(field =>\n                    commonFields[`${group.name}.${field.name}`] === this.props.selectedWidgets.length);\n                return true;\n            }) || [];\n\n            this.props.selectedWidgets.forEach((wid, widgetIndex) => {\n                const currentWidget = widgets[wid];\n                if (!currentWidget) {\n                    return;\n                }\n                if (widgetIndex === 0) {\n                    commonValues.data = { ...currentWidget.data };\n                    commonValues.style = { ...currentWidget.style };\n                } else {\n                    Object.keys(commonValues.data).forEach(field => {\n                        if (commonValues.data[field] !== currentWidget.data[field]) {\n                            commonValues.data[field] = null;\n                            isDifferent[field] = true;\n                        }\n                    });\n                    Object.keys(commonValues.style).forEach(field => {\n                        if (commonValues.style[field] !== currentWidget.style[field]) {\n                            commonValues.style[field] = null;\n                            isDifferent[field] = true;\n                        }\n                    });\n\n                    currentWidget.data.bindings?.forEach(attr => !bindFields.includes(`data_${attr}`) && bindFields.push(`data_${attr}`));\n                    currentWidget.style.bindings?.forEach(attr => !bindFields.includes(`style_${attr}`) && bindFields.push(`style_${attr}`));\n                }\n            });\n        } else {\n            fields = selectedWidgetsFields[0];\n\n            widgets[this.props.selectedWidgets[0]].data.bindings?.forEach(attr => !bindFields.includes(`data_${attr}`) && bindFields.push(`data_${attr}`));\n            widgets[this.props.selectedWidgets[0]].style.bindings?.forEach(attr => !bindFields.includes(`style_${attr}`) && bindFields.push(`style_${attr}`));\n        }\n\n        newState.bindFields = bindFields.sort();\n        newState.customFields = fields;\n        newState.isDifferent = isDifferent;\n        newState.commonValues = commonValues;\n        newState.widget = widget;\n        newState.widgetType = widgetType;\n\n        let signalsCount = 3;\n\n        if (this.props.selectedWidgets.length === 1) {\n            const widgetData = widgets[this.props.selectedWidgets[0]].data;\n            signalsCount = 0;\n            // detect signals count\n            if (!widgetData['signals-count']) {\n                let i = 0;\n                while (widgetData[`signals-oid-${i}`]) {\n                    i++;\n                }\n                signalsCount = i + 1;\n                if (signalsCount > 1) {\n                    store.dispatch(updateWidget({ widgetId: this.props.selectedWidgets[0], viewId: this.props.selectedView, data: { ...widget, data: { ...widget.data, 'signals-count': signalsCount } } }));\n                }\n            } else {\n                signalsCount = parseInt(widgetData['signals-count'], 10);\n            }\n        }\n\n        newState.signalsCount = signalsCount;\n\n        const fieldsAfter = Widget.getFieldsAfter(\n            this.props.selectedWidgets.length === 1 ? widget : commonValues,\n            store.getState().visProject[this.props.selectedView].widgets,\n            this.props.fonts,\n        );\n        const fieldsSignals = this.fieldsSignals[signalsCount] || this.fieldsSignals[3];\n        if (fields) {\n            fields = [...this.fieldsBefore, ...fields, ...fieldsAfter, ...[fieldsSignals]];\n        }\n        newState.fields = fields;\n\n        widgets && fields?.forEach(group => {\n            const type = group.isStyle ? 'style' : 'data';\n            const found = this.props.selectedWidgets.find(selectedWidget => {\n                const fieldFound = group.fields.find(field => {\n                    const fieldValue = widgets[selectedWidget][type][field.name];\n                    if (fieldValue === undefined) {\n                        return false;\n                    }\n\n                    return true;\n                });\n                return fieldFound !== undefined;\n            });\n            group.hasValues = found !== undefined;\n        });\n\n        newState.transitionTime = 0;\n\n        this.setState(newState, () => this.setAccordionState());\n        store.dispatch(recalculateFields(false));\n    }\n\n    componentWillUnmount() {\n        this.recalculateTimer && clearTimeout(this.recalculateTimer);\n        this.recalculateTimer = null;\n\n        this.triggerTimer && clearTimeout(this.triggerTimer);\n        this.triggerTimer = null;\n    }\n\n    renderHeader(widgets) {\n        let list;\n        // If selected only one widget, show its icon\n        if (this.props.selectedWidgets.length === 1) {\n            const tpl = widgets[this.props.selectedWidgets[0]].tpl;\n            const _widgetType = this.state.widgetTypes.find(foundWidgetType => foundWidgetType.name === tpl);\n            let widgetLabel = _widgetType?.title || '';\n            let widgetColor = _widgetType?.setColor;\n            if (_widgetType?.label) {\n                widgetLabel = I18n.t(_widgetType.label);\n            }\n            // remove legacy stuff\n            widgetLabel = widgetLabel.split('<br')[0];\n            widgetLabel = widgetLabel.split('<span')[0];\n            widgetLabel = widgetLabel.split('<div')[0];\n\n            let setLabel = _widgetType?.set;\n            if (_widgetType?.setLabel) {\n                setLabel = I18n.t(_widgetType.setLabel);\n            } else if (setLabel) {\n                const widgetWithSetLabel = this.state.widgetTypes.find(w => w.set === setLabel && w.setLabel);\n                if (widgetWithSetLabel) {\n                    widgetColor = widgetWithSetLabel.setColor;\n                    setLabel = I18n.t(widgetWithSetLabel.setLabel);\n                }\n            }\n\n            let widgetIcon = _widgetType?.preview || '';\n            if (widgetIcon.startsWith('<img')) {\n                const prev = widgetIcon.match(/src=\"([^\"]+)\"/);\n                if (prev && prev[1]) {\n                    widgetIcon = prev[1];\n                }\n            }\n\n            let img;\n            if (_widgetType?.preview?.startsWith('<img')) {\n                const m = _widgetType?.preview.match(/src=\"([^\"]+)\"/) || _widgetType?.preview.match(/src='([^']+)'/);\n                if (m) {\n                    img = <img src={m[1]} className={this.props.classes.icon} alt={this.props.selectedWidgets[0]} />;\n                }\n            } else if (_widgetType?.preview && IMAGE_TYPES.find(ext => _widgetType.preview.toLowerCase().endsWith(ext))) {\n                img = <img src={_widgetType?.preview} className={this.props.classes.icon} alt={this.props.selectedWidgets[0]} />;\n            }\n\n            if (!img) {\n                img = <span\n                    className={this.props.classes.widgetImage}\n                    ref={this.imageRef}\n                    // eslint-disable-next-line react/no-danger\n                    dangerouslySetInnerHTML={\n                        { __html: _widgetType?.preview }\n                    }\n                />;\n            }\n\n            let widgetBackColor;\n            if (widgetColor) {\n                widgetBackColor = Utils.getInvertedColor(widgetColor, this.props.themeType, false);\n                if (widgetBackColor === '#DDD') {\n                    widgetBackColor = '#FFF';\n                } else if (widgetBackColor === '#111') {\n                    widgetBackColor = '#000';\n                }\n            }\n            if (tpl === '_tplGroup') {\n                widgetLabel = I18n.t('group');\n            }\n            if (widgets[this.props.selectedWidgets[0]].marketplace) {\n                setLabel = `${widgets[this.props.selectedWidgets[0]].marketplace.name}`;\n                widgetLabel = `${I18n.t('version')} ${widgets[this.props.selectedWidgets[0]].marketplace.version}`;\n            }\n            list = <div style={{ display: 'flex', flexWrap: 'wrap' }}>\n                {widgetIcon ? <div className={this.props.classes.widgetIcon}>{img}</div> : null}\n                <div className={this.props.classes.widgetName}>{this.props.selectedWidgets[0]}</div>\n                <div className={this.props.classes.widgetType}>\n                    <div\n                        style={{\n                            fontWeight: 'bold',\n                            color: widgetColor,\n                            backgroundColor: widgetBackColor,\n                        }}\n                        className={Utils.clsx(this.props.classes.widgetNameText, widgetBackColor && this.props.classes.coloredWidgetSet)}\n                    >\n                        {setLabel}\n                    </div>\n                    <div className={this.props.classes.widgetNameText}>{widgetLabel}</div>\n                </div>\n                {!widgets[this.props.selectedWidgets[0]].marketplace && <>\n                    {window.location.port === '3000' ? <Button onClick={() => this.setState({ cssDialogOpened: true })}>CSS</Button> : null}\n                    {window.location.port === '3000' ? <Button onClick={() => this.setState({ jsDialogOpened: true })}>JS</Button> : null}\n                    {this.state.cssDialogOpened ? <WidgetCSS\n                        onClose={() => this.setState({ cssDialogOpened: false })}\n                        widget={widgets[this.props.selectedWidgets[0]]}\n                        onChange={value => {\n                            const project = deepClone(store.getState().visProject);\n                            project[this.props.selectedView].widgets[this.props.selectedWidgets[0]].css = value;\n                            this.props.changeProject(project);\n                        }}\n                        editMode={this.props.editMode}\n                    /> : null}\n                    {this.state.jsDialogOpened ? <WidgetJS\n                        onClose={() => this.setState({ jsDialogOpened: false })}\n                        widget={widgets[this.props.selectedWidgets[0]]}\n                        onChange={value => {\n                            const project = deepClone(store.getState().visProject);\n                            project[this.props.selectedView].widgets[this.props.selectedWidgets[0]].js = value;\n                            this.props.changeProject(project);\n                        }}\n                        editMode={this.props.editMode}\n                    /> : null}\n                </>}\n            </div>;\n        } else {\n            list = this.props.selectedWidgets.join(', ');\n        }\n        return <div key=\"header\" style={{ width: '100%', overflow: 'hidden' }}>\n            {list}\n        </div>;\n    }\n\n    setAccordionState(accordionOpen, cb) {\n        if (!this.state.fields) {\n            return;\n        }\n\n        const _accordionOpen = accordionOpen || this.state.accordionOpen;\n        const allOpened = !this.state.fields.find(group => !_accordionOpen[group.name]);\n        const allClosed = !this.state.fields.find(group => _accordionOpen[group.name]);\n\n        if (this.props.isAllClosed !== allClosed) {\n            setTimeout(() => this.props.setIsAllClosed(allClosed), 50);\n        }\n        if (this.props.isAllOpened !== allOpened) {\n            setTimeout(() => this.props.setIsAllOpened(allOpened), 50);\n        }\n\n        if (accordionOpen && JSON.stringify(accordionOpen) !== JSON.stringify(this.state.accordionOpen)) {\n            window.localStorage.setItem('attributesWidget', JSON.stringify(accordionOpen));\n            this.setState({ accordionOpen }, cb ? () => cb() : undefined);\n        } else {\n            cb && cb();\n        }\n        setTimeout(() => this.setState({ transitionTime: 200 }), 500);\n    }\n\n    componentDidUpdate() {\n        // scale the old style HTML widget icon\n        if (this.imageRef.current?.children[0]) {\n            const height = this.imageRef.current.children[0].clientHeight;\n            if (height > WIDGET_ICON_HEIGHT) {\n                this.imageRef.current.style.transform = `scale(${WIDGET_ICON_HEIGHT / height})`;\n            }\n        }\n    }\n\n    onGroupMove(e, index, iterable, direction) {\n        e.stopPropagation();\n        const project = deepClone(store.getState().visProject);\n        const oldGroup = this.state.fields.find(f => f.name === `${iterable.group}-${index}`);\n        const _widgets = project[this.props.selectedView].widgets;\n        const accordionOpen = { ...this.state.accordionOpen };\n\n        // if deletion\n        if (!direction) {\n            if (iterable.indexTo) {\n                const lastGroup = this.state.fields.find(f => f.singleName  === iterable.group && f.iterable?.isLast);\n                for (let idx = index; idx < lastGroup.index; idx++) {\n                    const idxGroup = this.state.fields.find(f => f.name === `${iterable.group}-${idx}`);\n                    const idxGroupPlus = this.state.fields.find(f => f.name === `${iterable.group}-${idx + 1}`);\n                    // for every selected widget\n                    this.props.selectedWidgets.forEach(wid => {\n                        const widgetData = _widgets[wid].data;\n                        // move all fields of the group to -1\n                        idxGroup.fields.forEach((attr, i) =>\n                            widgetData[idxGroup.fields[i].name] = widgetData[idxGroupPlus.fields[i].name]);\n\n                        // move the group-used flag\n                        widgetData[`g_${iterable.group}-${idx}`] = widgetData[`g_${iterable.group}-${idx + 1}`];\n\n                        // move the opened flag\n                        accordionOpen[`${iterable.group}-${idx}`] = accordionOpen[`${iterable.group}-${idx + 1}`];\n                    });\n                }\n\n                // delete last group\n                this.props.selectedWidgets.forEach(wid => {\n                    // order all attributes for better readability\n                    const widgetData = _widgets[wid].data;\n\n                    // delete all fields of the group\n                    lastGroup.fields.forEach(attr => {\n                        delete widgetData[attr.name];\n                    });\n\n                    // delete group-used flag\n                    delete widgetData[`g_${iterable.group}-${lastGroup.index}`];\n\n                    // delete the opened flag\n                    delete accordionOpen[`${iterable.group}-${lastGroup.index}`];\n                    widgetData[iterable.indexTo]--;\n                });\n\n                this.setAccordionState(accordionOpen, () => {\n                    this.props.changeProject(project);\n                    store.dispatch(recalculateFields(true));\n                });\n            }\n            return;\n        }\n\n        if (direction === true) {\n            const lastGroup = this.state.fields.find(f => f.singleName  === iterable.group && f.iterable?.isLast);\n            // add one line\n            const newIndex = lastGroup.index + 1;\n            this.props.selectedWidgets.forEach(wid => {\n                // order all attributes for better readability\n                const widgetData = _widgets[wid].data;\n\n                lastGroup.fields.forEach((attr, i) => {\n                    const name = lastGroup.fields[i].name.replace(/\\d?\\d+$/, newIndex);\n                    widgetData[name] = null;\n                });\n\n                // enable group-used flag\n                widgetData[`g_${iterable.group}-${newIndex}`] = true;\n\n                // enable the opened flag\n                accordionOpen[`${iterable.group}-${newIndex}`] = true;\n                widgetData[iterable.indexTo] = newIndex;\n            });\n            this.setAccordionState(accordionOpen, () => {\n                this.props.changeProject(project);\n                store.dispatch(recalculateFields(true));\n            });\n        } else {\n            const newIndex = index + direction;\n            const newGroup = this.state.fields.find(f => f.name === `${iterable.group}-${newIndex}`);\n\n            // for every selected widget\n            this.props.selectedWidgets.forEach(wid => {\n                // order all attributes for better readability\n                const oldWidgetData = _widgets[wid].data;\n                const widgetData = {};\n                Object.keys(oldWidgetData).sort().forEach(key => widgetData[key] = oldWidgetData[key]);\n                _widgets[wid].data = widgetData;\n\n                // switch all fields of the group\n                oldGroup.fields.forEach((attr, i) => {\n                    const value = widgetData[newGroup.fields[i].name];\n                    widgetData[newGroup.fields[i].name] = widgetData[attr.name];\n                    widgetData[attr.name] = value;\n                });\n\n                // switch group-used flag\n                let value = widgetData[`g_${iterable.group}-${newIndex}`];\n                widgetData[`g_${iterable.group}-${newIndex}`] = widgetData[`g_${iterable.group}-${index}`];\n                widgetData[`g_${iterable.group}-${index}`] = value;\n\n                if (accordionOpen[`${iterable.group}-${newIndex}`] !== accordionOpen[`${iterable.group}-${index}`]) {\n                    // copy the opened flag\n                    value = accordionOpen[`${iterable.group}-${newIndex}`];\n                    accordionOpen[`${iterable.group}-${newIndex}`] = accordionOpen[`${iterable.group}-${index}`];\n                    accordionOpen[`${iterable.group}-${index}`] = value;\n                    this.setState({ accordionOpen });\n                }\n            });\n\n            this.setAccordionState(accordionOpen, () => {\n                this.props.changeProject(project);\n                store.dispatch(recalculateFields(true));\n            });\n        }\n    }\n\n    renderGroupHeader(group) {\n        return <AccordionSummary\n            classes={{\n                root: Utils.clsx(this.props.classes.clearPadding, this.state.accordionOpen[group.name]\n                    ? this.props.classes.groupSummaryExpanded : this.props.classes.groupSummary, this.props.classes.lightedPanel),\n                content: this.props.classes.clearPadding,\n                expanded: this.props.classes.clearPadding,\n                expandIcon: this.props.classes.clearPadding,\n            }}\n            expandIcon={group.hasValues ? <ExpandMoreIcon /> : <div className={this.props.classes.emptyMoreIcon} />}\n        >\n            <div\n                style={{\n                    display: 'flex',\n                    justifyContent: 'space-between',\n                    width: '100%',\n                    alignItems: 'center',\n                }}\n            >\n                <div>\n                    {ICONS[`group.${group.singleName || group.name}`] ? ICONS[`group.${group.singleName || group.name}`] : null}\n                    {group.label ?\n                        I18n.t(group.label) + (group.index !== undefined ? ` [${group.index}]` : '')\n                        :\n                        (window.vis._(`group_${group.singleName || group.name}`) + (group.index !== undefined ? ` [${group.index}]` : ''))}\n                </div>\n                {group.iterable ? <>\n                    <div className={this.props.classes.grow} />\n                    {group.iterable.indexTo ? <Tooltip title={I18n.t('Delete')}>\n                        <IconButton\n                            className={this.props.classes.groupButton}\n                            size=\"small\"\n                            onClick={e => this.onGroupMove(e, group.index, group.iterable, 0)}\n                        >\n                            <Delete />\n                        </IconButton>\n                    </Tooltip> : null}\n                    {group.iterable.isFirst ?\n                        <div className={this.props.classes.groupButton} /> :\n                        <Tooltip title={I18n.t('Move up')}>\n                            <IconButton\n                                className={this.props.classes.groupButton}\n                                size=\"small\"\n                                onClick={e => this.onGroupMove(e, group.index, group.iterable, -1)}\n                            >\n                                <ArrowUpward />\n                            </IconButton>\n                        </Tooltip>}\n                    {group.iterable.isLast ?\n                        (group.iterable.indexTo ? <Tooltip title={I18n.t('Add')}>\n                            <IconButton\n                                className={this.props.classes.groupButton}\n                                size=\"small\"\n                                onClick={e => this.onGroupMove(e, group.index, group.iterable, true)}\n                            >\n                                <Add />\n                            </IconButton>\n                        </Tooltip> : <div className={this.props.classes.groupButton} />)\n                        :\n                        <Tooltip title={I18n.t('Move down')}>\n                            <IconButton\n                                className={this.props.classes.groupButton}\n                                size=\"small\"\n                                onClick={e => this.onGroupMove(e, group.index, group.iterable, 1)}\n                            >\n                                <ArrowDownward />\n                            </IconButton>\n                        </Tooltip>}\n                </> : null}\n                <div>\n                    <Checkbox\n                        checked={group.hasValues}\n                        onClick={e => {\n                            if (group.hasValues) {\n                                const type = group.isStyle ? 'style' : 'data';\n                                // check is any attribute from this group is used\n                                let found = false;\n                                for (const selectedWidget of this.props.selectedWidgets) {\n                                    for (const groupField of group.fields) {\n                                        const value = store.getState().visProject[this.props.selectedView].widgets[selectedWidget][type][groupField.name];\n                                        if (value !== null && value !== undefined) {\n                                            found = true;\n                                            break;\n                                        }\n                                    }\n                                }\n\n                                if (found) {\n                                    this.setState({ clearGroup: group });\n                                } else {\n                                    this.onGroupDelete(group);\n                                }\n                            } else {\n                                const project = deepClone(store.getState().visProject);\n                                const type = group.isStyle ? 'style' : 'data';\n                                this.props.selectedWidgets.forEach(wid => {\n                                    group.fields.forEach(field => {\n                                        if (project[this.props.selectedView].widgets[wid][type][field.name] === undefined) {\n                                            project[this.props.selectedView].widgets[wid][type][field.name] = field.default || null;\n                                        }\n                                    });\n                                    project[this.props.selectedView].widgets[wid].data[`g_${group.name}`] = true;\n                                });\n                                const accordionOpen = { ...this.state.accordionOpen };\n                                accordionOpen[group.name] = true;\n                                this.setAccordionState(accordionOpen, () => this.props.changeProject(project));\n                            }\n                            e.stopPropagation();\n                            store.dispatch(recalculateFields(true));\n                        }}\n                        size=\"small\"\n                        classes={{ root: Utils.clsx(this.props.classes.fieldContent, this.props.classes.clearPadding, this.props.classes.checkBox) }}\n                    />\n                </div>\n            </div>\n        </AccordionSummary>;\n    }\n\n    changeBinding(isStyle, attr) {\n        const project = deepClone(store.getState().visProject);\n        const type = isStyle ? 'style' : 'data';\n        for (const wid of this.props.selectedWidgets) {\n            const widget = project[this.props.selectedView].widgets[wid];\n            if (widget[type].bindings.includes(attr)) {\n                widget[type].bindings.splice(widget[type].bindings.indexOf(attr), 1);\n            } else {\n                widget[type].bindings.push(attr);\n            }\n        }\n\n        this.props.changeProject(project);\n        store.dispatch(recalculateFields(true));\n    }\n\n    renderFieldRow(group, field, fieldIndex) {\n        if (!field) {\n            return null;\n        }\n\n        const selectedWidget = selectWidget(store.getState(), this.props.selectedView, this.props.selectedWidgets[0]);\n\n        let error;\n        let disabled;\n        if (field.hidden) {\n            if (Widget.checkFunction(field.hidden, store.getState().visProject, this.props.selectedView, this.props.selectedWidgets, field.index)) {\n                return null;\n            }\n        }\n        if (field.type === 'help') {\n            return <tr key={fieldIndex} className={this.props.classes.fieldRow}>\n                <td colSpan={2} className={this.props.classes.fieldHelp} style={field.style}>\n                    {field.noTranslation ? field.text : I18n.t(field.text)}\n                </td>\n            </tr>;\n        }\n        if (field.type === 'divider') {\n            return <tr key={fieldIndex} className={this.props.classes.fieldRow}>\n                <td colSpan={2} className={this.props.classes.fieldDivider} style={field.style} />\n            </tr>;\n        }\n\n        if (field.error) {\n            error = Widget.checkFunction(field.error, store.getState().visProject, this.props.selectedView, this.props.selectedWidgets, field.index);\n        }\n        if (field.disabled) {\n            if (field.disabled === true) {\n                disabled = true;\n            } else {\n                disabled = !!Widget.checkFunction(field.disabled, store.getState().visProject, this.props.selectedView, this.props.selectedWidgets, field.index);\n            }\n        }\n        let label;\n        if (field.label === '') {\n            label = '';\n        } else if (field.title) {\n            label = field.title;\n        } else if (field.label) {\n            label = I18n.t(field.label);\n        } else {\n            label = window.vis._(field.singleName || field.name) + (field.index !== undefined ? ` [${field.index}]` : '');\n        }\n\n        const labelStyle = {};\n\n        if (label.trim().startsWith('<b')) {\n            label = label.match(/<b>(.*?)<\\/b>/)[1];\n            labelStyle.fontWeight = 'bold';\n            labelStyle.color = '#4dabf5';\n        }\n        if (label.trim().startsWith('<i')) {\n            label = label.match(/<i>(.*?)<\\/i>/)[1];\n            labelStyle.fontStyle = 'italic';\n        }\n\n        const isBoundField = this.state.bindFields.includes(group.isStyle ? `style_${field.name}` : `data_${field.name}`);\n\n        return <tr key={fieldIndex} className={this.props.classes.fieldRow}>\n            {field.type === 'delimiter' ?\n                // eslint-disable-next-line jsx-a11y/control-has-associated-label\n                <td colSpan=\"2\">\n                    <Divider style={{ borderBottomWidth: 'thick' }} />\n                </td>\n                : <>\n                    <td\n                        className={Utils.clsx(this.props.classes.fieldTitle, disabled && this.props.classes.fieldTitleDisabled, error && this.props.classes.fieldTitleError)}\n                        title={field.tooltip ? I18n.t(field.tooltip) : null}\n                        style={labelStyle}\n                    >\n                        {ICONS[field.singleName || field.name] ? ICONS[field.singleName || field.name] : null}\n                        {label}\n                        {field.type === 'image' && !this.state.isDifferent[field.name] && selectedWidget?.data[field.name] ?\n                            <div className={this.props.classes.smallImageDiv}>\n                                <Icon\n                                    src={selectedWidget.data[field.name].startsWith('_PRJ_NAME/') ?\n                                        selectedWidget.data[field.name].replace('_PRJ_NAME/', `../${this.props.adapterName}.${this.props.instance}/${this.props.projectName}/`)\n                                        :\n                                        selectedWidget.data[field.name]}\n                                    className={this.props.classes.smallImage}\n                                    onError={e => {\n                                        e.target.onerror = null;\n                                        e.target.style.display = 'none';\n                                    }}\n                                    alt={field.name}\n                                />\n                            </div> : null}\n                        {(field.type !== 'custom' || field.label) && !field.noBinding ? (isBoundField ?\n                            <span\n                                className={this.props.classes.bindIconSpan}\n                                title={I18n.t('Deactivate binding and use field as standard input')}\n                            >\n                                <LinkOff\n                                    onClick={() => this.props.editMode && this.changeBinding(group.isStyle, field.name)}\n                                    className={this.props.classes.bindIcon}\n                                    style={disabled ? { cursor: 'default' } : null}\n                                />\n                            </span> :\n                            <span\n                                className={this.props.classes.bindIconSpan}\n                                title={I18n.t('Use field as binding')}\n                            >\n                                <LinkIcon\n                                    className={this.props.classes.bindIcon}\n                                    style={disabled ? { cursor: 'default' } : null}\n                                    onClick={() => this.props.editMode && this.changeBinding(group.isStyle, field.name)}\n                                />\n                            </span>) : null}\n                        {group.isStyle ?\n                            <ColorizeIcon\n                                fontSize=\"small\"\n                                className={this.props.classes.colorize}\n                                onClick={() => this.props.cssClone(field.name, newValue => {\n                                    if (newValue !== null && newValue !== undefined) {\n                                        const project = deepClone(store.getState().visProject);\n                                        this.props.selectedWidgets.forEach(wid => {\n                                            if (project[this.props.selectedView].widgets[wid]) {\n                                                project[this.props.selectedView].widgets[wid].style = project[this.props.selectedView].widgets[wid].style || {};\n                                                project[this.props.selectedView].widgets[wid].style[field.name] = newValue;\n                                            }\n                                        });\n                                        this.props.changeProject(project);\n                                    }\n                                })}\n                            />\n                            : null}\n                        {field.tooltip ? <InfoIcon className={this.props.classes.infoIcon} /> : null}\n                    </td>\n                    <td className={this.props.classes.fieldContent}>\n                        <div className={this.props.classes.fieldInput}>\n                            {isBoundField ?\n                                <WidgetBindingField\n                                    error={error}\n                                    disabled={disabled}\n                                    field={field}\n                                    label={label}\n                                    widget={this.props.selectedWidgets.length > 1 ? this.state.commonValues : selectedWidget}\n                                    widgetId={this.props.selectedWidgets.length > 1 ? null : this.props.selectedWidgets[0]}\n                                    isStyle={group.isStyle}\n                                    selectedView={this.props.selectedView}\n                                    selectedWidgets={this.props.selectedWidgets}\n                                    isDifferent={this.state.isDifferent[field.name]}\n                                    project={store.getState().visProject}\n                                    socket={this.props.socket}\n                                    changeProject={this.props.changeProject}\n                                />\n                                : <WidgetField\n                                    widgetType={this.state.widgetType}\n                                    themeType={this.props.themeType}\n                                    error={error}\n                                    disabled={disabled}\n                                    field={field}\n                                    widget={this.props.selectedWidgets.length > 1 ? this.state.commonValues : selectedWidget}\n                                    widgetId={this.props.selectedWidgets.length > 1 ? null : this.props.selectedWidgets[0]}\n                                    isStyle={group.isStyle}\n                                    index={group.index}\n                                    isDifferent={this.state.isDifferent[field.name]}\n                                    {...this.props}\n                                />}\n                        </div>\n                    </td>\n                </>}\n        </tr>;\n    }\n\n    renderGroupBody(group) {\n        if (!this.state.accordionOpen[group.name] || !group.hasValues) {\n            return null;\n        }\n        return <AccordionDetails style={{ flexDirection: 'column', padding: 0, margin: 0 }}>\n            <table style={{ width: '100%' }}>\n                <tbody>\n                    {group.fields.map((field, fieldIndex) => this.renderFieldRow(group, field, fieldIndex))}\n                </tbody>\n            </table>\n        </AccordionDetails>;\n    }\n\n    renderGroup(group) {\n        return <Accordion\n            classes={{\n                root: this.props.classes.clearPadding,\n                expanded: this.props.classes.clearPadding,\n            }}\n            square\n            key={group.name}\n            elevation={0}\n            expanded={!!(this.state.accordionOpen[group.name] && group.hasValues)}\n            onChange={(e, expanded) => {\n                const accordionOpen = { ...this.state.accordionOpen };\n                accordionOpen[group.name] = expanded;\n                this.setAccordionState(accordionOpen);\n            }}\n            TransitionProps={{ timeout: this.state.transitionTime }}\n        >\n            {this.renderGroupHeader(group)}\n            {this.renderGroupBody(group)}\n        </Accordion>;\n    }\n\n    onGroupDelete(group) {\n        const project = deepClone(store.getState().visProject);\n        const type = group.isStyle ? 'style' : 'data';\n        this.props.selectedWidgets.forEach(wid => {\n            group.fields.forEach(field => {\n                delete project[this.props.selectedView].widgets[wid][type][field.name];\n            });\n            delete project[this.props.selectedView].widgets[wid].data[`g_${group.name}`];\n        });\n\n        this.props.changeProject(project);\n        store.dispatch(recalculateFields(true));\n    }\n\n    render() {\n        if (store.getState().recalculateFields && !this.recalculateTimer) {\n            this.recalculateTimer = setTimeout(() => {\n                this.recalculateTimer = null;\n                this.recalculateFields();\n            }, 50);\n        }\n\n        if (!this.state.widgetTypes) {\n            return null;\n        }\n\n        // check that for all selected widgets the widget type loaded and exists\n        const widgets = store.getState().visProject[this.props.selectedView]?.widgets;\n        let widgetsExist = 0;\n        widgets && this.props.selectedWidgets.forEach(selectedWidget => {\n            if (widgets[selectedWidget] && this.state.widgetTypes.find(type => type.name === widgets[selectedWidget].tpl)) {\n                widgetsExist++;\n            }\n        });\n        if (!widgets || this.props.selectedWidgets.length !== widgetsExist) {\n            return null;\n        }\n\n        // detect triggers from parent to open all groups\n        if (this.props.triggerAllOpened !== this.state.triggerAllOpened) {\n            this.triggerTimer = this.triggerTimer || setTimeout(() => {\n                this.triggerTimer = null;\n                const accordionOpen = {};\n                this.state.fields?.forEach(group => accordionOpen[group.name] = true);\n                this.setState({ triggerAllOpened: this.props.triggerAllOpened }, () => this.setAccordionState(accordionOpen));\n            }, 50);\n        }\n        // detect triggers from parent to close all groups\n        if (this.props.triggerAllClosed !== this.state.triggerAllClosed) {\n            this.triggerTimer = this.triggerTimer || setTimeout(() => {\n                this.triggerTimer = null;\n                const accordionOpen = {};\n                this.state.fields?.forEach(group => accordionOpen[group.name] = false);\n                this.setState({ triggerAllClosed: this.props.triggerAllClosed }, () => this.setAccordionState(accordionOpen));\n            }, 50);\n        }\n\n        let jsonCustomFields = null;\n        if (this.state.showWidgetCode) {\n            try {\n                jsonCustomFields = JSON.stringify(this.state.customFields, null, 2);\n            } catch (e) {\n                // ignore\n            }\n        }\n\n        return [\n            this.renderHeader(widgets),\n            this.state.fields ? <div key=\"groups\" style={{ height: 'calc(100% - 34px)', overflowY: 'auto' }}>\n                {this.state.fields.map(group => {\n                    if (group.hidden) {\n                        if (Widget.checkFunction(group.hidden, store.getState().visProject, this.props.selectedView, this.props.selectedWidgets)) {\n                            return null;\n                        }\n                    }\n\n                    return this.renderGroup(group);\n                })}\n\n                {this.state.clearGroup ? <IODialog\n                    title=\"Are you sure\"\n                    onClose={() => this.setState({ clearGroup: null })}\n                    open={!0}\n                    action={() => this.onGroupDelete(this.state.clearGroup)}\n                    actionTitle=\"Clear\"\n                >\n                    {I18n.t('Fields of group will be cleaned')}\n                </IODialog> : null}\n\n                <Button\n                    style={{ opacity: this.state.showWidgetCode ? 1 : 0 }}\n                    onClick={() => {\n                        window.localStorage.setItem('showWidgetCode', this.state.showWidgetCode ? 'false' : 'true');\n                        this.setState({ showWidgetCode: !this.state.showWidgetCode });\n                    }}\n                    startIcon={<CodeIcon />}\n                >\n                    {this.state.showWidgetCode ? I18n.t('hide code') : I18n.t('show code')}\n                </Button>\n\n                {this.state.showWidgetCode ? <pre>\n                    {JSON.stringify(selectWidget(store.getState(), this.props.selectedView, this.props.selectedWidgets[0]), null, 2)}\n                    {jsonCustomFields}\n                </pre> : null}\n            </div> : null,\n        ];\n    }\n}\n\nWidget.propTypes = {\n    adapterName: PropTypes.string.isRequired,\n    themeType: PropTypes.string.isRequired,\n    changeProject: PropTypes.func,\n    classes: PropTypes.object,\n    cssClone: PropTypes.func,\n    fonts: PropTypes.array,\n    instance: PropTypes.number.isRequired,\n    project: PropTypes.object,\n    projectName: PropTypes.string.isRequired,\n    selectedView: PropTypes.string,\n    selectedWidgets: PropTypes.array,\n    widgetsLoaded: PropTypes.bool,\n\n    setIsAllOpened: PropTypes.func,\n    setIsAllClosed: PropTypes.func,\n    isAllOpened: PropTypes.bool,\n    isAllClosed: PropTypes.bool,\n    triggerAllOpened: PropTypes.number,\n    triggerAllClosed: PropTypes.number,\n};\n\nexport default withStyles(styles)(Widget);\n","import { useEffect, useRef } from 'react';\n\nfunction usePrevious(value: unknown) {\n    const ref = useRef<any>();\n    useEffect(() => {\n        ref.current = value; // assign the value of ref to the argument\n    }, [value]); // this code will run when the value of 'value' changes\n    return ref.current; // in the end, return the current ref value.\n}\nexport default usePrevious;\n","import PropTypes from 'prop-types';\nimport { withStyles } from '@mui/styles';\nimport React, { useEffect, useState } from 'react';\n\nimport {\n    IconButton,\n    Tab, Tabs, Tooltip, Typography,\n} from '@mui/material';\n\nimport {\n    Clear as ClearIcon,\n    UnfoldMore as UnfoldMoreIcon,\n    UnfoldLess as UnfoldLessIcon, ListAlt as IconAttributes,\n} from '@mui/icons-material';\n\nimport { I18n, Utils } from '@iobroker/adapter-react-v5';\n\nimport CSS from './CSS';\nimport Scripts from './Scripts';\nimport View from './View';\nimport Widget from './Widget';\nimport usePrevious from '../Utils/usePrevious';\n\nconst style = theme => ({\n    blockHeader: theme.classes.blockHeader,\n    lightedPanel: theme.classes.lightedPanel,\n    viewTabs: theme.classes.viewTabs,\n    viewTab: theme.classes.viewTab,\n});\n\nconst tabs = {\n    View, Widget, CSS, Scripts,\n};\n\nconst Attributes = props => {\n    const [selected, setSelected] = useState(window.localStorage.getItem('Attributes')\n        ? window.localStorage.getItem('Attributes')\n        : 'View');\n    const [isAllOpened, setIsAllOpened] = useState(false);\n    const [isAllClosed, setIsAllClosed] = useState(true);\n    const [triggerAllOpened, setTriggerAllOpened] = useState(0);\n    const [triggerAllClosed, setTriggerAllClosed] = useState(0);\n\n    const prevSelectedWidgets = usePrevious(props.selectedWidgets);\n\n    useEffect(() => {\n        if (selected === 'Widget' && !props.selectedWidgets.length) {\n            setSelected('View');\n        }\n        if (prevSelectedWidgets && !prevSelectedWidgets.length && props.selectedWidgets.length) {\n            setSelected('Widget');\n        }\n    }, [props.selectedWidgets]);\n\n    if (!props.openedViews.length) {\n        return null;\n    }\n\n    const TabContent = tabs[selected];\n\n    return <>\n        <Typography\n            variant=\"h6\"\n            gutterBottom\n            className={Utils.clsx(props.classes.blockHeader, props.classes.lightedPanel)}\n            style={{\n                display: 'flex',\n                lineHeight: '34px',\n                height: 34,\n            }}\n        >\n            <IconAttributes style={{ marginTop: 4, marginRight: 4 }} />\n            {I18n.t('Attributes')}\n            <div style={{ flex: 1 }}></div>\n            {selected === 'View' || selected === 'Widget' ? <div style={{ textAlign: 'right' }}>\n                {!isAllOpened ? <Tooltip title={I18n.t('Expand all')}>\n                    <IconButton\n                        size=\"small\"\n                        onClick={() => setTriggerAllOpened(triggerAllOpened + 1)}\n                    >\n                        <UnfoldMoreIcon />\n                    </IconButton>\n                </Tooltip> : <IconButton size=\"small\" disabled><UnfoldMoreIcon /></IconButton>}\n                { !isAllClosed ? <Tooltip size=\"small\" title={I18n.t('Collapse all')}>\n                    <IconButton onClick={() => setTriggerAllClosed(triggerAllClosed + 1)}>\n                        <UnfoldLessIcon />\n                    </IconButton>\n                </Tooltip> : <IconButton size=\"small\" disabled><UnfoldLessIcon /></IconButton> }\n            </div> : null}\n            <Tooltip title={I18n.t('Hide attributes')}>\n                <IconButton\n                    size=\"small\"\n                    onClick={() =>\n                        props.onHide(true)}\n                >\n                    <ClearIcon />\n                </IconButton>\n            </Tooltip>\n        </Typography>\n        <Tabs\n            className={props.classes.viewTabs}\n            value={selected || 'View'}\n            variant=\"scrollable\"\n            scrollButtons=\"auto\"\n        >\n            {\n                ['View', 'Widget', 'CSS', 'Scripts'].map(tab => <Tab\n                    label={I18n.t(tab)}\n                    value={tab}\n                    disabled={tab === 'Widget' && !props.selectedWidgets.length}\n                    key={tab}\n                    className={props.classes.viewTab}\n                    onClick={() => {\n                        setSelected(tab);\n                        window.localStorage.setItem('Attributes', tab);\n                    }}\n                />)\n            }\n        </Tabs>\n        <div style={{ height: 'calc(100% - 89px', overflowY: 'hidden' }}>\n            {\n                selected === 'Widget' && !(props.widgetsLoaded && props.selectedView && props.selectedWidgets?.length) ?\n                    null : <TabContent\n                        adapterId={props.adapterId}\n                        adapterName={props.adapterName}\n                        key={selected}\n                        {...props}\n                        classes={{}}\n                        setIsAllOpened={setIsAllOpened}\n                        setIsAllClosed={setIsAllClosed}\n                        isAllOpened={isAllOpened}\n                        isAllClosed={isAllClosed}\n                        triggerAllOpened={triggerAllOpened}\n                        triggerAllClosed={triggerAllClosed}\n                    />\n            }\n        </div>\n    </>;\n};\n\nAttributes.propTypes = {\n    classes: PropTypes.object,\n    themeType: PropTypes.string,\n    openedViews: PropTypes.array,\n    adapterName: PropTypes.string.isRequired,\n    instance: PropTypes.number.isRequired,\n    projectName: PropTypes.string.isRequired,\n    saveCssFile: PropTypes.func.isRequired,\n    editMode: PropTypes.bool,\n    onHide: PropTypes.func,\n    adapterId: PropTypes.string.isRequired,\n    userGroups: PropTypes.object.isRequired,\n};\n\nexport default withStyles(style)(Attributes);\n","import {\n    Blinds,\n    DirectionsRun,\n    Lightbulb,\n    SensorDoor,\n    Thermostat,\n    VolumeUp,\n    WbSunny,\n    Whatshot,\n    Water,\n    Lock,\n    Window as WindowIcon,\n    Palette,\n    PlayArrowRounded,\n    Power,\n    TipsAndUpdates,\n    Tune,\n    WaterDrop,\n} from '@mui/icons-material';\n\nimport { TbVacuumCleaner } from 'react-icons/tb';\nimport ChannelDetector from '@iobroker/type-detector';\nimport { getNewWidgetIdNumber, getNewWidgetId } from '@/Utils/utils';\n\nconst deviceIcons = {\n    blind: <Blinds />,\n    dimmer: <TipsAndUpdates />,\n    door: <SensorDoor />,\n    fireAlarm: <Whatshot />,\n    floodAlarm: <Water />,\n    humidity: <WaterDrop />,\n    levelSlider: <Tune />,\n    light: <Lightbulb />,\n    lock: <Lock />,\n    media: <PlayArrowRounded />,\n    motion: <DirectionsRun />,\n    rgb: <Palette />,\n    rgbSingle: <Palette />,\n    rgbwSingle: <Palette />,\n    ct: <Palette />,\n    hue: <Palette />,\n    socket: <Power />,\n    vacuumCleaner: <TbVacuumCleaner />,\n    temperature: <Thermostat />,\n    thermostat: <Thermostat />,\n    volume: <VolumeUp />,\n    volumeGroup: <VolumeUp />,\n    weatherForecast: <WbSunny />,\n    window: <WindowIcon />,\n    windowTilt: <WindowIcon />,\n};\n\nconst allObjects = async socket => {\n    const states = await socket.getObjectView('', '\\u9999', 'state');\n    const channels = await socket.getObjectView('', '\\u9999', 'channel');\n    const devices = await socket.getObjectView('', '\\u9999', 'device');\n    const folders = await socket.getObjectView('', '\\u9999', 'folder');\n    const enums = await socket.getObjectView('', '\\u9999', 'enum');\n\n    return Object.values(states)\n        .concat(Object.values(channels))\n        .concat(Object.values(devices))\n        .concat(Object.values(folders))\n        .concat(Object.values(enums))\n        // eslint-disable-next-line\n        .reduce((obj, item) => (obj[item._id] = item, obj), {});\n};\n\nfunction getObjectIcon(obj, id, imagePrefix) {\n    imagePrefix = imagePrefix || '.'; // http://localhost:8081';\n    let src = '';\n    const common = obj?.common;\n\n    if (common) {\n        const cIcon = common.icon;\n        if (cIcon) {\n            if (!cIcon.startsWith('data:image/')) {\n                if (cIcon.includes('.')) {\n                    let instance;\n                    if (obj.type === 'instance' || obj.type === 'adapter') {\n                        src = `${imagePrefix}/adapter/${common.name}/${cIcon}`;\n                    } else if (id && id.startsWith('system.adapter.')) {\n                        instance = id.split('.', 3);\n                        if (cIcon[0] === '/') {\n                            instance[2] += cIcon;\n                        } else {\n                            instance[2] += `/${cIcon}`;\n                        }\n                        src = `${imagePrefix}/adapter/${instance[2]}`;\n                    } else {\n                        instance = id.split('.', 2);\n                        if (cIcon[0] === '/') {\n                            instance[0] += cIcon;\n                        } else {\n                            instance[0] += `/${cIcon}`;\n                        }\n                        src = `${imagePrefix}/adapter/${instance[0]}`;\n                    }\n                } else {\n                    return null;\n                }\n            } else {\n                src = cIcon;\n            }\n        }\n    }\n\n    return src || null;\n}\n\nconst detectDevices = async socket => {\n    const devicesObject = await allObjects(socket);\n    const keys = Object.keys(devicesObject).sort();\n    const detector = new ChannelDetector();\n\n    const usedIds = [];\n    const ignoreIndicators = ['UNREACH_STICKY'];    // Ignore indicators by name\n    const excludedTypes = ['info'];\n    const enums = [];\n    const rooms = [];\n    const list = [];\n\n    keys.forEach(id => {\n        if (devicesObject[id]?.type === 'enum') {\n            enums.push(id);\n        } else if (devicesObject[id]?.common?.smartName) {\n            list.push(id);\n        }\n    });\n\n    enums.forEach(id => {\n        if (id.startsWith('enum.rooms.')) {\n            rooms.push(id);\n        }\n        const members = devicesObject[id].common.members;\n\n        if (members && members.length) {\n            members.forEach(member => {\n                // if an object really exists\n                if (devicesObject[member]) {\n                    if (!list.includes(member)) {\n                        list.push(member);\n                    }\n                }\n            });\n        }\n    });\n\n    const options = {\n        objects: devicesObject,\n        _keysOptional: keys,\n        _usedIdsOptional: usedIds,\n        ignoreIndicators,\n        excludedTypes,\n    };\n\n    const result = [];\n\n    list.forEach(id => {\n        options.id = id;\n\n        const controls = detector.detect(options);\n\n        if (controls) {\n            controls.forEach(control => {\n                const stateId = control.states.find(state => state.id).id;\n                // if not yet added\n                if (result.find(item => item.devices.find(st => st._id === stateId))) {\n                    return;\n                }\n                const deviceObject = {\n                    _id: stateId,\n                    common: devicesObject[stateId].common,\n                    type: devicesObject[stateId].type,\n                    deviceType: control.type,\n                    states: control.states\n                        .filter(state => state.id)\n                        .map(state => {\n                            devicesObject[state.id].name = state.name;\n                            devicesObject[state.id].common.role = state.defaultRole;\n                            return devicesObject[state.id];\n                        }),\n                };\n\n                const parts = stateId.split('.');\n                let channelId;\n                let deviceId;\n                if (devicesObject[stateId].type === 'channel' || devicesObject[stateId].type === 'state') {\n                    parts.pop();\n                    channelId = parts.join('.');\n                    if (devicesObject[channelId] && (devicesObject[channelId].type === 'channel' || devicesObject[channelId].type === 'folder')) {\n                        parts.pop();\n                        deviceId = parts.join('.');\n                        if (!devicesObject[deviceId] || (devicesObject[deviceId].type !== 'device' && devicesObject[deviceId].type !== 'folder')) {\n                            deviceId = null;\n                        }\n                    } else {\n                        channelId = null;\n                    }\n                }\n                // try to detect room\n                const room = rooms.find(roomId => {\n                    if (devicesObject[roomId].common.members.includes(stateId)) {\n                        return true;\n                    }\n                    if (channelId && devicesObject[roomId].common.members.includes(channelId)) {\n                        return true;\n                    }\n                    return deviceId && devicesObject[roomId].common.members.includes(deviceId);\n                });\n                let roomObj;\n                if (room) {\n                    roomObj = result.find(obj => obj._id === room);\n                    if (!roomObj) {\n                        roomObj = {\n                            _id: room,\n                            common: devicesObject[room].common,\n                            devices: [],\n                        };\n                        result.push(roomObj);\n                    }\n                } else {\n                    roomObj = result.find(obj => obj._id === 'unknown');\n                    if (!roomObj) {\n                        roomObj = {\n                            _id: 'unknown',\n                            common: {\n                                name: 'unknown',\n                                icon: '?',\n                            },\n                            devices: [],\n                        };\n                        result.push(roomObj);\n                    }\n                }\n                deviceObject.roomName = roomObj.common.name;\n                roomObj.devices.push(deviceObject);\n            });\n        }\n    });\n\n    // find names and icons for devices\n    for (const k in result) {\n        for (const k2 in result[k].devices) {\n            const deviceObj = result[k].devices[k2];\n            if (deviceObj.type === 'state' || deviceObj.type === 'channel') {\n                const idArray = deviceObj._id.split('.');\n                idArray.pop();\n\n                // read channel\n                const parentObject = devicesObject[idArray.join('.')];\n                if (parentObject && (parentObject.type === 'channel' || parentObject.type === 'device' || parentObject.type === 'folder')) {\n                    deviceObj.common.name = parentObject.common?.name || deviceObj.common.name;\n                    if (parentObject.common.icon) {\n                        deviceObj.common.icon = getObjectIcon(parentObject, parentObject._id, '../..');\n                    }\n                    idArray.pop();\n                    // read device\n                    const grandParentObject = devicesObject[idArray.join('.')];\n                    if (grandParentObject?.type === 'device' && grandParentObject.common?.icon) {\n                        deviceObj.common.name = grandParentObject.common.name || deviceObj.common.name;\n                        deviceObj.common.icon = getObjectIcon(grandParentObject, grandParentObject._id, '../..');\n                    }\n                } else {\n                    deviceObj.common.name = parentObject?.common?.name || deviceObj.common.name;\n                    if (parentObject?.common?.icon) {\n                        deviceObj.common.icon = getObjectIcon(parentObject, parentObject._id, '../..');\n                    }\n                }\n            } else {\n                deviceObj.common.icon = getObjectIcon(deviceObj, deviceObj._id, '../..');\n            }\n        }\n    }\n\n    return result;\n};\n\nexport default {\n    deviceIcons,\n    detectDevices,\n    getObjectIcon,\n    allObjects,\n    getNewWidgetId,\n    /** @deprecated use \"getNewWidgetId\" instead, it will give you the full wid like \"w000001\" */\n    getNewWidgetIdNumber,\n};\n","import { useEffect, useRef } from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@mui/styles';\nimport { useDrag } from 'react-dnd';\nimport { getEmptyImage } from 'react-dnd-html5-backend';\n\nimport { IconButton, Tooltip } from '@mui/material';\nimport {\n    Delete as DeleteIcon,\n    Update as UpdateIcon,\n    Block as DeletedIcon,\n} from '@mui/icons-material';\n\nimport { I18n, Utils } from '@iobroker/adapter-react-v5';\n\nimport helpers from '../Components/WizardHelpers';\nimport { store } from '../Store';\n\nconst IMAGE_TYPES = ['.png', '.jpg', '.svg', '.gif', '.apng', '.avif', '.webp'];\n\nconst styles = () => ({\n    widget: {\n        borderStyle: 'solid',\n        borderColor: 'gray',\n        borderWidth: 1,\n        borderRadius: 8,\n        backgroundColor: 'orange',\n        width: '100%',\n        display: 'inline-flex',\n        margin: 4,\n        minHeight: 36,\n    },\n    widgetTitle: {\n        textAlign: 'left',\n        marginLeft: 8,\n        flex: 1,\n        alignSelf: 'center',\n        color: 'black',\n    },\n    widgetImage: {\n        // transform: 'scale(0.3)',\n        width: 30,\n        height: 30,\n        transformOrigin: '0 0',\n    },\n    widgetImageWithSrc: {\n        maxWidth: 60,\n        maxHeight: 32,\n        width: 'auto',\n        borderRadius: 4,\n    },\n    widgetTooltip: {\n        '& $widgetImage': {\n            zoom: 0.6,\n        },\n        '& $widgetImageWithSrc': {\n            height: 64,\n        },\n    },\n    widgetImageContainer: {\n        // borderLeftStyle: 'solid',\n        // borderLeftWidth: 1,\n        // borderLeftColor: 'gray',\n        display: 'flex',\n        padding: 4,\n        alignItems: 'center',\n        overflow: 'hidden',\n    },\n    widgetMarketplace:{\n        fontSize: '80%',\n        fontStyle: 'italic',\n    },\n    widgetDeleted: {\n        marginTop: 9,\n        color: '#F00',\n    },\n});\n\nconst WIDGET_ICON_HEIGHT = 34;\nconst Widget = props => {\n    const imageRef = useRef();\n    const style = {};\n\n    useEffect(() => {\n        if (imageRef.current?.children[0]) {\n            const height = imageRef.current.children[0].clientHeight;\n            if (height > WIDGET_ICON_HEIGHT) {\n                imageRef.current.style.transform = `scale(${WIDGET_ICON_HEIGHT / height})`;\n            }\n        }\n    }, [imageRef]);\n\n    if (props.widgetType?.color) {\n        style.backgroundColor = props.widgetType.color;\n    } else if (props.widgetSetProps?.color) {\n        style.backgroundColor = props.widgetSetProps.color;\n    } else if (window.visSets && window.visSets[props.widgetSet]?.color) {\n        style.backgroundColor = window.visSets[props.widgetSet].color;\n    }\n\n    const titleStyle = {};\n    if (style.backgroundColor) {\n        if (Utils.isUseBright(style.backgroundColor)) {\n            titleStyle.color = 'white';\n        } else {\n            titleStyle.color = 'black';\n        }\n    }\n\n    let img;\n    if (props.widgetType.preview?.startsWith('<img')) {\n        const m = props.widgetType.preview.match(/src=\"([^\"]+)\"/) || props.widgetType.preview.match(/src='([^']+)'/);\n        if (m) {\n            img = <img src={m[1]} className={props.classes.widgetImageWithSrc} alt={props.widgetType.id} />;\n        }\n    } else if (props.widgetType.preview &&\n        (\n            IMAGE_TYPES.find(ext => props.widgetType.preview.toLowerCase().endsWith(ext)) ||\n            props.widgetSet === '__marketplace'\n        )\n    ) {\n        img = <img src={props.widgetType.preview} className={props.classes.widgetImageWithSrc} alt={props.widgetType.id} />;\n    }\n\n    if (!img) {\n        img = <span\n            className={props.classes.widgetImage}\n            ref={imageRef}\n            // eslint-disable-next-line react/no-danger\n            dangerouslySetInnerHTML={{ __html: props.widgetType.preview }}\n        />;\n    }\n\n    let label = props.widgetType.label ? I18n.t(props.widgetType.label) : window.vis._(props.widgetType.title);\n    // remove legacy stuff\n    label = label.split('<br')[0];\n    label = label.split('<span')[0];\n    label = label.split('<div')[0];\n\n    let marketplaceUpdate;\n    let marketplaceDeleted;\n    if (props.widgetSet === '__marketplace') {\n        marketplaceUpdate = props.marketplaceUpdates?.find(u => u.widget_id === props.widgetType.widget_id);\n        marketplaceDeleted = props.marketplaceDeleted?.includes(props.widgetType.widget_id);\n    }\n\n    const result = <Tooltip\n        title={<div className={props.classes.widgetTooltip}>\n            <div>{img}</div>\n            {props.widgetType.help ? <div>{props.widgetType.help}</div> : null}\n        </div>}\n        placement=\"right-end\"\n    >\n        <div className={props.classes.widget} style={style}>\n            <span style={{ display: 'none' }}>{props.widgetTypeName}</span>\n            <div className={props.classes.widgetTitle} style={titleStyle}>\n                <div>{label}</div>\n                {props.widgetSet === '__marketplace' && props.marketplace && <div className={props.classes.widgetMarketplace}>\n                    {`${I18n.t('version')} ${props.marketplace.version}`}\n                </div>}\n            </div>\n            {props.widgetSet === '__marketplace' && <>\n                <Tooltip title={I18n.t('Uninstall')}>\n                    <IconButton onClick={() => props.uninstallWidget(props.widgetType.id)}>\n                        <DeleteIcon />\n                    </IconButton>\n                </Tooltip>\n                {marketplaceUpdate && <Tooltip title={`${I18n.t('Update to version')} ${marketplaceUpdate.version}`}>\n                    <IconButton onClick={async () => {\n                        await props.updateWidgets(marketplaceUpdate);\n                    }}\n                    >\n                        <UpdateIcon />\n                    </IconButton>\n                </Tooltip>}\n                {marketplaceDeleted && <Tooltip title={I18n.t('Widget was deleted in widgeteria')}>\n                    <DeletedIcon className={props.classes.widgetDeleted} />\n                </Tooltip>}\n            </>}\n            <span className={props.classes.widgetImageContainer}>\n                {img}\n            </span>\n        </div>\n    </Tooltip>;\n\n    const widthRef = useRef();\n    const [, dragRef, preview] = useDrag({\n        type: 'widget',\n        item: () => ({\n            widgetType: props.widgetType,\n            widgetSet: props.widgetSet,\n            preview: <div style={{ width: widthRef.current.offsetWidth }}>\n                {result}\n            </div>,\n        }),\n        collect: monitor => ({\n            isDragging: monitor.isDragging(),\n            handlerId: monitor.getHandlerId(),\n        }),\n    }, [props.widgetType]);\n\n    useEffect(() => {\n        preview(getEmptyImage(), { captureDraggingState: true });\n    }, [props.widgetType]);\n\n    if (typeof props.widgetType.customPalette === 'function') {\n        if (!props.editMode) {\n            return null;\n        }\n        return props.widgetType.customPalette({\n            socket: props.socket,\n            project: store.getState().visProject,\n            changeProject: props.changeProject,\n            selectedView: props.selectedView,\n            themeType: props.themeType,\n            helpers,\n        });\n    }\n\n    return <span ref={props.editMode ? dragRef : null} id={`widget_${props.widgetTypeName}`} className={`widget-${props.widgetSet}`}>\n        <span ref={widthRef}>\n            {result}\n        </span>\n    </span>;\n};\n\nWidget.propTypes = {\n    classes: PropTypes.object,\n    widgetSetProps: PropTypes.object,\n    widgetSet: PropTypes.string,\n    widgetType: PropTypes.object,\n    widgetTypeName: PropTypes.string,\n    updateWidgets: PropTypes.func,\n    marketplace: PropTypes.object,\n    marketplaceUpdates: PropTypes.array,\n    marketplaceDeleted: PropTypes.array,\n    uninstallWidget: PropTypes.func,\n    socket: PropTypes.object,\n    themeType: PropTypes.string,\n    changeProject: PropTypes.func,\n    editMode: PropTypes.bool,\n};\n\nexport default withStyles(styles)(Widget);\n","import React from 'react';\nimport {\n    Button,\n} from '@mui/material';\nimport { I18n } from '@iobroker/adapter-react-v5';\n\nconst MarketplacePalette = props => <div>\n    <Button variant=\"contained\" color=\"primary\" onClick={() => props.setMarketplaceDialog({})}>\n        {I18n.t('Open widgeteria')}\n    </Button>\n</div>;\n\nexport default MarketplacePalette;\n","import PropTypes from 'prop-types';\nimport { useState, useMemo, useEffect } from 'react';\nimport { withStyles } from '@mui/styles';\n\nimport {\n    Accordion,\n    AccordionDetails,\n    AccordionSummary,\n    IconButton, InputAdornment, LinearProgress,\n    TextField,\n    Tooltip,\n    Typography,\n} from '@mui/material';\n\nimport {\n    ExpandMore as ExpandMoreIcon,\n    Clear as ClearIcon,\n    UnfoldMore as UnfoldMoreIcon,\n    UnfoldLess as UnfoldLessIcon,\n    Search,\n    Palette as IconPalette,\n} from '@mui/icons-material';\n\nimport { I18n, Utils, Icon } from '@iobroker/adapter-react-v5';\n\nimport Widget from './Widget';\nimport { getWidgetTypes } from '../Vis/visWidgetsCatalog';\nimport MarketplacePalette from '../Marketplace/MarketplacePalette';\nimport { loadComponent } from '../Vis/visLoadWidgets';\nimport { store } from '../Store';\n\nconst styles = theme => ({\n    widgets: { textAlign: 'center', overflowY: 'auto', height: 'calc(100% - 84px)' },\n    toggle: { width: 30, height: 30 },\n    right: {\n        float: 'right',\n    },\n    button: {\n        padding: '0 4px',\n    },\n    label: {\n        top: -10,\n    },\n    labelShrink: {\n        display: 'none',\n    },\n    clearPadding: {\n        '&&&&': {\n            padding: 0,\n            margin: 0,\n            minHeight: 'initial',\n        },\n    },\n    groupSummary: {\n        '&&&&&&': {\n            marginTop: 10,\n            borderRadius: 4,\n            padding: 2,\n        },\n    },\n    groupSummaryExpanded: {\n        '&&&&&&': {\n            marginTop: 20,\n            borderTopRightRadius: 4,\n            borderTopLeftRadius: 4,\n            padding: 2,\n        },\n    },\n    blockHeader: theme.classes.blockHeader,\n    lightedPanel: theme.classes.lightedPanel,\n    selectClearContainer: {\n        display: 'flex',\n    },\n    selectClear: {\n        flex: 1,\n    },\n    groupIcon: {\n        width: 20,\n        height: 20,\n        marginRight: 8,\n    },\n    version: {\n        fontSize: 10,\n        opacity: 0.7,\n        fontStyle: 'italic',\n        textAlign: 'left',\n    },\n    searchLabel: {\n        '& label': {\n            marginLeft: 32,\n            marginTop: -5,\n        },\n    },\n});\n\nconst DEVELOPER_MODE = window.localStorage.getItem('developerMode') === 'true';\n\nconst Palette = props => {\n    const [filter, setFilter] = useState('');\n    const [marketplaceUpdates, setMarketplaceUpdates] = useState(null);\n    const [marketplaceDeleted, setMarketplaceDeleted] = useState(null);\n    const [marketplaceLoading, setMarketplaceLoading] = useState(false);\n\n    const [accordionOpen, setAccordionOpen] = useState(\n        window.localStorage.getItem('widgets')\n            ? JSON.parse(window.localStorage.getItem('widgets'))\n            : {},\n    );\n\n    const { widgetsList, widgetSetProps } = useMemo(() => {\n        let _widgetsList = {\n            __marketplace: {},\n        };\n        const _widgetSetProps = {\n            __marketplace: {\n                icon: 'img/marketplace.png',\n            },\n        };\n        if (!props.widgetsLoaded) {\n            return { widgetsList: _widgetsList, widgetSetProps: _widgetSetProps };\n        }\n        const widgetTypes = getWidgetTypes();\n        widgetTypes.forEach(widgetType => {\n            const widgetTypeName = widgetType.set;\n            if (widgetType.developerMode) {\n                _widgetSetProps[widgetTypeName] = _widgetSetProps[widgetTypeName] || {};\n                _widgetSetProps[widgetTypeName].developerMode = true;\n            }\n\n            if (widgetType.setLabel) {\n                _widgetSetProps[widgetTypeName] = _widgetSetProps[widgetTypeName] || {};\n                _widgetSetProps[widgetTypeName].label = I18n.t(widgetType.setLabel);\n            }\n            if (widgetType.setColor) {\n                _widgetSetProps[widgetTypeName] = _widgetSetProps[widgetTypeName] || {};\n                _widgetSetProps[widgetTypeName].color = widgetType.setColor;\n            }\n            if (widgetType.setIcon) {\n                _widgetSetProps[widgetTypeName] = _widgetSetProps[widgetTypeName] || {};\n                _widgetSetProps[widgetTypeName].icon = widgetType.setIcon;\n            } else if (widgetType.adapter && !_widgetSetProps[widgetTypeName]?.icon) {\n                _widgetSetProps[widgetTypeName] = _widgetSetProps[widgetTypeName] || {};\n                if (window.location.port === '3000') {\n                    _widgetSetProps[widgetTypeName].icon = `./adapter/${widgetType.adapter}/${widgetType.adapter}.png`;\n                } else {\n                    _widgetSetProps[widgetTypeName].icon = `../adapter/${widgetType.adapter}/${widgetType.adapter}.png`;\n                }\n            }\n            if (widgetType.rx) {\n                _widgetSetProps[widgetTypeName] = _widgetSetProps[widgetTypeName] || {};\n                _widgetSetProps[widgetTypeName].rx = true;\n            }\n            if (widgetType.version) {\n                _widgetSetProps[widgetTypeName] = _widgetSetProps[widgetTypeName] || {};\n                _widgetSetProps[widgetTypeName].version = widgetType.version;\n            }\n\n            const title = widgetType.label ? I18n.t(widgetType.label) : window.vis._(widgetType.title) || '';\n            if (widgetType.hidden || (filter && !title.toLowerCase().includes(filter.toLowerCase()))) {\n                return;\n            }\n\n            _widgetsList[widgetTypeName] = _widgetsList[widgetTypeName] || {};\n            _widgetsList[widgetTypeName][widgetType.name] = widgetType;\n        });\n\n        // sort widget sets: __marketplace, basic, rx, jqui, other\n        const sets = Object.keys(_widgetsList);\n        const posBasic = sets.indexOf('basic');\n        if (posBasic !== -1) {\n            sets.splice(posBasic, 1);\n        }\n        const posMarket = sets.indexOf('__marketplace');\n        if (posMarket !== -1) {\n            sets.splice(posMarket, 1);\n        }\n        const posJQui = sets.indexOf('jqui');\n        if (posJQui !== -1) {\n            sets.splice(posJQui, 1);\n        }\n        const rxSets = sets.filter(set => _widgetSetProps[set]?.rx).sort();\n        const nonRxSets = sets.filter(set => !_widgetSetProps[set]?.rx).sort();\n\n        if (posJQui !== -1) {\n            nonRxSets.unshift('jqui');\n        }\n        const resultSet = [...rxSets, ...nonRxSets];\n\n        if (posBasic !== -1) {\n            resultSet.unshift('basic');\n        }\n        if (posMarket !== -1) {\n            resultSet.unshift('__marketplace');\n        }\n        const sorted = {};\n        resultSet.forEach(key => sorted[key] = _widgetsList[key]);\n        _widgetsList = sorted;\n\n        if (filter) {\n            Object.keys(_widgetsList).forEach(widgetType => {\n                if (!Object.keys(_widgetsList[widgetType]).length) {\n                    delete _widgetsList[widgetType];\n                    delete _widgetSetProps[widgetType];\n                }\n            });\n        }\n\n        // convert the objects to array\n        Object.keys(_widgetsList).forEach(widgetType => {\n            _widgetsList[widgetType] = Object.values(_widgetsList[widgetType]);\n            // sort items\n            _widgetsList[widgetType].sort((a, b) => a.order - b.order);\n        });\n\n        return { widgetsList: _widgetsList, widgetSetProps: _widgetSetProps };\n    }, [filter, props.widgetsLoaded]);\n\n    useEffect(() => {\n        if (accordionOpen.__marketplace && window.marketplaceClient && !marketplaceUpdates && !marketplaceLoading) {\n            // load marketplace\n            setMarketplaceLoading(true);\n            const tPromise = loadComponent('__marketplace', 'default', './translations', `${window.marketplaceClient}/customWidgets.js`)()\n                .then(translations => I18n.extendTranslations(translations.default));\n\n            const mPromise = loadComponent('__marketplace', 'default', './VisMarketplace', `${window.marketplaceClient}/customWidgets.js`)()\n                .then(marketplace => window.VisMarketplace = marketplace);\n\n            Promise.all([tPromise, mPromise])\n                .then(async () => {\n                    const updates = [];\n                    const deleted = [];\n                    if (store.getState().visProject?.___settings?.marketplace && window.VisMarketplace?.api) {\n                        for (const i in store.getState().visProject.___settings.marketplace) {\n                            const widget = store.getState().visProject.___settings.marketplace[i];\n                            try {\n                                const data = await window.VisMarketplace.api.apiGetWidget(widget.widget_id);\n                                if (data.version !== widget.version) {\n                                    updates.push(data);\n                                }\n                            } catch (e) {\n                                if (e.statusCode === 404) {\n                                    deleted.push(widget.widget_id);\n                                } else {\n                                    console.error(`Cannot check updates for ${widget.widget_id}: ${e}`);\n                                }\n                            }\n                        }\n                    }\n\n                    setMarketplaceUpdates(updates);\n                    setMarketplaceDeleted(deleted);\n                    setMarketplaceLoading(false);\n                })\n                .catch(e => console.error(`Cannot load marketplace: ${e}`));\n        }\n    }, [accordionOpen.__marketplace]);\n\n    if (!props.widgetsLoaded) {\n        return null;\n    }\n\n    const allOpened = !Object.keys(widgetsList).find(group => !accordionOpen[group]);\n    const allClosed = !Object.keys(widgetsList).find(group => accordionOpen[group]);\n\n    return <>\n        <Typography\n            variant=\"h6\"\n            gutterBottom\n            className={Utils.clsx(props.classes.blockHeader, props.classes.lightedPanel)}\n            style={{ display: 'flex', lineHeight: '34px' }}\n        >\n            <IconPalette style={{ marginTop: 4, marginRight: 4 }} />\n            <span style={{ verticalAlign: 'middle' }}>{I18n.t('Palette')}</span>\n            <div style={{ flex: 1 }} />\n            {!allOpened ? <Tooltip title={I18n.t('Expand all')}>\n                <IconButton\n                    size=\"small\"\n                    onClick={() => {\n                        const newAccordionOpen = {};\n                        Object.keys(widgetsList).forEach(group => newAccordionOpen[group] = true);\n                        window.localStorage.setItem('widgets', JSON.stringify(newAccordionOpen));\n                        setAccordionOpen(newAccordionOpen);\n                    }}\n                >\n                    <UnfoldMoreIcon />\n                </IconButton>\n            </Tooltip> : <IconButton size=\"small\" disabled><UnfoldMoreIcon /></IconButton>}\n            {!allClosed ? <Tooltip size=\"small\" title={I18n.t('Collapse all')}>\n                <IconButton onClick={() => {\n                    const newAccordionOpen = {};\n                    Object.keys(widgetsList).forEach(group => newAccordionOpen[group] = false);\n                    window.localStorage.setItem('widgets', JSON.stringify(newAccordionOpen));\n                    setAccordionOpen(newAccordionOpen);\n                }}\n                >\n                    <UnfoldLessIcon />\n                </IconButton>\n            </Tooltip> : <IconButton size=\"small\" disabled><UnfoldLessIcon /></IconButton> }\n            <Tooltip title={I18n.t('Hide palette')}>\n                <IconButton\n                    size=\"small\"\n                    onClick={() => props.onHide(true)}\n                >\n                    <ClearIcon />\n                </IconButton>\n            </Tooltip>\n        </Typography>\n        <div>\n            <TextField\n                variant=\"standard\"\n                fullWidth\n                value={filter}\n                onChange={e => setFilter(e.target.value)}\n                label={filter ? ' ' : I18n.t('Search')}\n                className={props.classes.searchLabel}\n                InputProps={{\n                    className: props.classes.clearPadding,\n                    endAdornment: filter ? <IconButton size=\"small\" onClick={() => setFilter('')}>\n                        <ClearIcon />\n                    </IconButton> : null,\n                    startAdornment: <InputAdornment position=\"start\">\n                        <Search />\n                    </InputAdornment>,\n                }}\n                InputLabelProps={{\n                    shrink: false,\n                    classes: {\n                        root: props.classes.label,\n                        shrink: props.classes.labelShrink,\n                    },\n                }}\n            />\n        </div>\n        <div className={props.classes.widgets} style={!props.editMode ? { opacity: 0.3 } : null}>\n            {Object.keys(widgetsList).map((category, categoryKey) => {\n                let version = null;\n                if (widgetSetProps[category]?.version) {\n                    if (DEVELOPER_MODE) {\n                        version = <div\n                            className={props.classes.version}\n                            style={{\n                                cursor: 'pointer',\n                                color: widgetSetProps[category].developerMode ? '#ff4242' : 'inherit',\n                                fontWeight: widgetSetProps[category].developerMode ? 'bold' : 'inherit',\n                            }}\n                            onClick={async () => {\n                                const objects = await props.socket.getObjectViewSystem(\n                                    'instance',\n                                    'system.adapter.',\n                                    'system.adapter.\\u9999',\n                                );\n                                const instances = Object.values(objects);\n                                let reload = false;\n\n                                // find widgetSet\n                                const wSetObj = instances.find(obj => obj.common.visWidgets && obj.common.name === category);\n                                if (widgetSetProps[category].developerMode) {\n                                    if (wSetObj) {\n                                        // find any set with http://localhost:4173/customWidgets.js\n                                        if (Object.keys(wSetObj.common.visWidgets).find(key => wSetObj.common.visWidgets[key].url?.startsWith('http'))) {\n                                            Object.keys(wSetObj.common.visWidgets).forEach(key => wSetObj.common.visWidgets[key].url = `${wSetObj.common.name}/customWidgets.js`);\n                                            await props.socket.setObject(wSetObj._id, wSetObj);\n                                            reload = true;\n                                        }\n                                    }\n                                } else {\n                                    const dynamicWidgetInstances = instances.filter(obj => obj.common.visWidgets);\n                                    // disable all widget sets\n                                    for (let i = 0; i < dynamicWidgetInstances.length; i++) {\n                                        const visWidgets = dynamicWidgetInstances[i].common.visWidgets;\n                                        if (dynamicWidgetInstances[i] !== wSetObj) {\n                                            // find any set with http://localhost:4173/customWidgets.js\n                                            if (Object.keys(visWidgets).find(key => visWidgets[key].url?.startsWith('http'))) {\n                                                // disable the load over http\n                                                Object.keys(visWidgets).forEach(key => visWidgets[key].url = `${dynamicWidgetInstances[i].common.name}/customWidgets.js`);\n                                                await props.socket.setObject(dynamicWidgetInstances[i]._id, dynamicWidgetInstances[i]);\n                                                reload = true;\n                                            }\n                                        } else {\n                                            // check if http://localhost:4173/customWidgets.js available\n                                            try {\n                                                await fetch('http://localhost:4173/customWidgets.js');\n                                                Object.keys(visWidgets).forEach(key => visWidgets[key].url = 'http://localhost:4173/customWidgets.js');\n                                                await props.socket.setObject(wSetObj._id, wSetObj);\n                                                reload = true;\n                                            } catch (e) {\n                                                window.alert(`Please start the widget development of ${wSetObj._id.split('.')[2]} first`);\n                                            }\n                                        }\n                                    }\n                                }\n                                reload && setTimeout(() => window.location.reload(), 1000);\n                            }}\n                        >\n                            {widgetSetProps[category]?.version}\n                        </div>;\n                    } else {\n                        version = <div className={props.classes.version}>{widgetSetProps[category]?.version}</div>;\n                    }\n                }\n\n                return <Accordion\n                    key={categoryKey}\n                    elevation={0}\n                    expanded={accordionOpen[category] || false}\n                    onChange={(e, expanded) => {\n                        const newAccordionOpen = JSON.parse(JSON.stringify(accordionOpen));\n                        newAccordionOpen[category] = expanded;\n                        window.localStorage.setItem('widgets', JSON.stringify(newAccordionOpen));\n                        setAccordionOpen(newAccordionOpen);\n                    }}\n                >\n                    <AccordionSummary\n                        id={`summary_${category}`}\n                        expandIcon={<ExpandMoreIcon />}\n                        className={Utils.clsx('vis-palette-widget-set', accordionOpen[category] && 'vis-palette-summary-expanded')}\n                        classes={{\n                            root: Utils.clsx(\n                                props.classes.clearPadding,\n                                accordionOpen[category] ? props.classes.groupSummaryExpanded : props.classes.groupSummary,\n                                props.classes.lightedPanel,\n                            ),\n                            content: props.classes.clearPadding,\n                            expandIcon: props.classes.clearPadding,\n                        }}\n                    >\n                        {widgetSetProps[category]?.icon ?\n                            <Icon className={props.classes.groupIcon} src={widgetSetProps[category].icon} />\n                            :\n                            null}\n                        {widgetSetProps[category]?.label ?\n                            (widgetSetProps[category].label.startsWith('Vis 2 - ') ?\n                                widgetSetProps[category].label.substring(8) : widgetSetProps[category].label)\n                            :\n                            I18n.t(category)}\n                    </AccordionSummary>\n                    <AccordionDetails>\n                        {accordionOpen.__marketplace && marketplaceLoading && category === '__marketplace' &&\n                            <LinearProgress />}\n                        {accordionOpen.__marketplace && category === '__marketplace' && marketplaceUpdates && <div>\n                            <MarketplacePalette setMarketplaceDialog={props.setMarketplaceDialog} />\n                            {store.getState().visProject.___settings.marketplace?.map(item => <div key={item.id}>\n                                <Widget\n                                    editMode={props.editMode}\n                                    key={item.id}\n                                    marketplace={item}\n                                    marketplaceDeleted={marketplaceDeleted}\n                                    marketplaceUpdates={marketplaceUpdates}\n                                    uninstallWidget={props.uninstallWidget}\n                                    updateWidgets={props.updateWidgets}\n                                    widgetSet={category}\n                                    widgetSetProps={widgetSetProps[category]}\n                                    widgetType={{\n                                        id: item.id,\n                                        widget_id: item.widget_id,\n                                        label: item.name,\n                                        preview: `${window.apiUrl + window.webPrefix}/images/${item.image_id}`,\n                                    }}\n                                    widgetTypeName={item.name}\n                                />\n                            </div>)}\n                        </div>}\n                        {version}\n                        <div>\n                            {accordionOpen[category] ? widgetsList[category].map(widgetItem =>\n                                (widgetItem.name === '_tplGroup' ? null : <Widget\n                                    changeProject={props.changeProject}\n                                    editMode={props.editMode}\n                                    key={widgetItem.name}\n                                    project={store.getState().visProject}\n                                    selectedView={props.selectedView}\n                                    socket={props.socket}\n                                    themeType={props.themeType}\n                                    widgetSet={category}\n                                    widgetSetProps={widgetSetProps[category]}\n                                    widgetType={widgetItem}\n                                    widgetTypeName={widgetItem.name}\n                                />)) : null}\n                        </div>\n                    </AccordionDetails>\n                </Accordion>;\n            })}\n        </div>\n    </>;\n};\n\nPalette.propTypes = {\n    classes: PropTypes.object,\n    onHide: PropTypes.func,\n    uninstallWidget: PropTypes.func,\n    setMarketplaceDialog: PropTypes.func,\n    updateWidgets: PropTypes.func,\n    widgetsLoaded: PropTypes.bool,\n    socket: PropTypes.object,\n    themeType: PropTypes.string,\n};\n\nexport default withStyles(styles)(Palette);\n","import PropTypes from 'prop-types';\nimport { useEffect } from 'react';\nimport { withStyles } from '@mui/styles';\nimport { useDrag, useDrop } from 'react-dnd';\nimport { getEmptyImage } from 'react-dnd-html5-backend';\n\nimport {\n    IconButton, Tooltip,\n} from '@mui/material';\n\nimport {\n    Add as AddIcon,\n    Edit as EditIcon,\n    Delete as DeleteIcon,\n    CreateNewFolder as CreateNewFolderClosedIcon,\n} from '@mui/icons-material';\nimport { FaFolder as FolderClosedIcon, FaFolderOpen as FolderOpenedIcon } from 'react-icons/fa';\n\nimport { Utils, I18n } from '@iobroker/adapter-react-v5';\nimport { store } from '../../Store';\n\nconst styles = theme => ({\n    viewManageBlock: theme.classes.viewManageBlock,\n    viewManageButtonActions: theme.classes.viewManageButtonActions,\n    folderName: {\n        marginLeft: theme.spacing(1),\n        fontWeight: 'bold',\n    },\n    icon: {\n        cursor: 'grab',\n        display: 'inline-block',\n        lineHeight: '16px',\n        color: theme.palette.mode === 'dark' ? '#bad700' : '#f3bf00',\n    },\n    noDrop: {\n        opacity: 0.4,\n    },\n    root: {\n        borderStyle: 'dashed',\n        borderRadius: 4,\n        borderWidth: 1,\n        borderColor: 'rgba(128, 128, 128, 0)',\n        lineHeight: '32px',\n        verticalAlign: 'middle',\n    },\n    rootCanDrop: {\n        borderColor: 'rgba(200, 200, 200, 1)',\n    },\n    tooltip: {\n        pointerEvents: 'none',\n    },\n});\n\nconst Folder = props => {\n    const folderBlock = <div className={props.classes.viewManageBlock}>\n        {props.foldersCollapsed.includes(props.folder.id)\n            ? <FolderClosedIcon fontSize={20} />\n            : <FolderOpenedIcon fontSize={20} />}\n        <span className={props.classes.folderName}>{props.folder.name}</span>\n    </div>;\n\n    const [{ canDrop }, drop] = useDrop(() => ({\n        accept: ['view', 'folder'],\n        drop: () => ({ folder: props.folder }),\n        canDrop: (item, monitor) => {\n            if (monitor.getItemType() === 'view') {\n                return store.getState().visProject[item.name].parentId !== props.folder.id;\n            }\n            if (monitor.getItemType() === 'folder') {\n                let currentFolder = props.folder;\n                if (currentFolder.id === item.folder.parentId) {\n                    return false;\n                }\n                while (true) {\n                    if (currentFolder.id === item.folder.id) {\n                        return false;\n                    }\n                    if (!currentFolder.parentId) {\n                        return true;\n                    }\n                    currentFolder = store.getState().visProject.___settings.folders.find(foundFolder => foundFolder.id === currentFolder.parentId);\n                }\n            }\n            return false;\n        },\n        collect: monitor => ({\n            isOver: monitor.isOver(),\n            canDrop: monitor.canDrop(),\n        }),\n    }), [store.getState().visProject]);\n\n    const [{ isDraggingThisItem }, dragRef, preview] = useDrag({\n        type: 'folder',\n        item: () => ({\n            folder: props.folder,\n            preview: <div>{folderBlock}</div>,\n        }),\n        end: (item, monitor) => {\n            const dropResult = monitor.getDropResult();\n            if (item && dropResult) {\n                props.moveFolder(item.folder.id, dropResult.folder.id);\n            }\n        },\n        collect: monitor => ({\n            isDraggingThisItem: monitor.isDragging(),\n            handlerId: monitor.getHandlerId(),\n        }),\n    }, [store.getState().visProject]);\n\n    useEffect(() => {\n        preview(getEmptyImage(), { captureDraggingState: true });\n    }, [store.getState().visProject]);\n\n    useEffect(() => {\n        props.setIsDragging(isDraggingThisItem ? props.folder.id : '');\n    }, [isDraggingThisItem]);\n\n    console.log(`${props.folder.name} ${props.isDragging} ${canDrop}`);\n\n    return <div\n        ref={drop}\n        className={Utils.clsx(props.classes.root, props.classes.viewManageBlock, props.isDragging && !canDrop && props.classes.noDrop, props.isDragging && canDrop && props.classes.rootCanDrop)}\n    >\n        <div className={props.classes.icon} ref={dragRef} title={I18n.t('Drag me')}>\n            {props.foldersCollapsed.includes(props.folder.id)\n                ? <FolderClosedIcon\n                    fontSize={20}\n                    onClick={() => {\n                        const foldersCollapsed = JSON.parse(JSON.stringify(props.foldersCollapsed));\n                        foldersCollapsed.splice(foldersCollapsed.indexOf(props.folder.id), 1);\n                        props.setFoldersCollapsed(foldersCollapsed);\n                        window.localStorage.setItem('ViewsManager.foldersCollapsed', JSON.stringify(foldersCollapsed));\n                    }}\n                />\n                : <FolderOpenedIcon\n                    fontSize={20}\n                    onClick={() => {\n                        const foldersCollapsed = JSON.parse(JSON.stringify(props.foldersCollapsed));\n                        foldersCollapsed.push(props.folder.id);\n                        props.setFoldersCollapsed(foldersCollapsed);\n                        window.localStorage.setItem('ViewsManager.foldersCollapsed', JSON.stringify(foldersCollapsed));\n                    }}\n                />}\n        </div>\n        <span className={props.classes.folderName}>{props.folder.name}</span>\n        <span className={props.classes.viewManageButtonActions}>\n            {props.editMode ? <Tooltip title={I18n.t('Add view')} classes={{ popper: props.classes.tooltip }}>\n                <IconButton\n                    size=\"small\"\n                    onClick={() => {\n                        props.showDialog('add', null, props.folder.id);\n                    }}\n                >\n                    <AddIcon />\n                </IconButton>\n            </Tooltip> : null}\n            {props.editMode ? <Tooltip title={I18n.t('Add sub-folder')} classes={{ popper: props.classes.tooltip }}>\n                <IconButton\n                    size=\"small\"\n                    onClick={() => {\n                        props.setFolderDialog('add');\n                        props.setFolderDialogName('');\n                        props.setFolderDialogParentId(props.folder.id);\n                    }}\n                >\n                    <CreateNewFolderClosedIcon />\n                </IconButton>\n            </Tooltip> : null}\n            {props.editMode ? <Tooltip title={I18n.t('Rename')} classes={{ popper: props.classes.tooltip }}>\n                <IconButton\n                    size=\"small\"\n                    onClick={() => {\n                        props.setFolderDialog('rename');\n                        props.setFolderDialogName(props.folder.name);\n                        props.setFolderDialogId(props.folder.id);\n                    }}\n                >\n                    <EditIcon />\n                </IconButton>\n            </Tooltip> : null}\n            {props.editMode ? <Tooltip title={I18n.t('Delete')} classes={{ popper: props.classes.tooltip }}>\n                <span>\n                    <IconButton\n                        size=\"small\"\n                        onClick={() => {\n                            props.setFolderDialog('delete');\n                            props.setFolderDialogId(props.folder.id);\n                        }}\n                        disabled={!!(store.getState().visProject.___settings.folders.find(foundFolder => foundFolder.parentId === props.folder.id)\n                            || Object.values(store.getState().visProject).find(foundView => foundView.parentId === props.folder.id))}\n                    >\n                        <DeleteIcon />\n                    </IconButton>\n                </span>\n            </Tooltip> : null}\n        </span>\n    </div>;\n};\n\nFolder.propTypes = {\n    classes: PropTypes.object,\n    folder: PropTypes.object,\n    moveFolder: PropTypes.func,\n    setFolderDialog: PropTypes.func,\n    setFolderDialogId: PropTypes.func,\n    setFolderDialogName: PropTypes.func,\n    setFolderDialogParentId: PropTypes.func,\n    setIsDragging: PropTypes.func,\n    isDragging: PropTypes.string,\n    editMode: PropTypes.bool,\n};\n\nexport default withStyles(styles)(Folder);\n","import PropTypes from 'prop-types';\nimport { useDrop  } from 'react-dnd';\nimport { useEffect } from 'react';\n\nimport { I18n } from '@iobroker/adapter-react-v5';\nimport { store } from '../../Store';\n\nconst Root = props => {\n    const [{ canDrop, isOver }, drop] = useDrop(() => ({\n        accept: ['view', 'folder'],\n        drop: () => ({ folder: { id: null } }),\n        canDrop: (item, monitor) => {\n            if (monitor.getItemType() === 'view') {\n                return !!store.getState().visProject[item.name].parentId;\n            }\n            if (monitor.getItemType() === 'folder') {\n                return !!item.folder.parentId;\n            }\n            return false;\n        },\n        collect: monitor => ({\n            isOver: monitor.isOver(),\n            canDrop: monitor.canDrop(),\n        }),\n    }), [store.getState().visProject]);\n\n    useEffect(() => {\n        props.setIsOverRoot(isOver && canDrop);\n    }, [isOver]);\n\n    return props.isDragging && canDrop ? <div\n        ref={drop}\n    >\n        <div style={{ height: 34, width: 'calc(100% - 7px)', opacity: 0.7 }}>{I18n.t('Drop here to add to root')}</div>\n    </div> : null;\n};\n\nRoot.propTypes = {\n    setIsOverRoot: PropTypes.func,\n};\n\nexport default Root;\n","import React, { useEffect } from 'react';\nimport { type Styles, withStyles } from '@mui/styles';\nimport { useDrag } from 'react-dnd';\nimport { getEmptyImage } from 'react-dnd-html5-backend';\n\nimport {\n    IconButton, Tooltip,\n} from '@mui/material';\n\nimport {\n    Edit as EditIcon,\n    Delete as DeleteIcon,\n    FileCopy as FileCopyIcon,\n    InsertDriveFile as FileIcon,\n    Visibility as VisibilityIcon,\n    VisibilityOff as VisibilityOffIcon,\n} from '@mui/icons-material';\nimport { BiImport, BiExport } from 'react-icons/bi';\n\nimport { I18n, Utils } from '@iobroker/adapter-react-v5';\n\nimport { store } from '@/Store';\n\nconst styles: Styles<any, any> = (theme: any) => ({\n    viewManageBlock: theme.classes.viewManageBlock,\n    viewManageButtonActions: theme.classes.viewManageButtonActions,\n    icon: {\n        cursor: 'grab',\n        display: 'inline-block',\n        lineHeight: '18px',\n    },\n    name: {\n        cursor: 'pointer',\n        '&:hover': {\n            color: theme.palette.primary.main,\n        },\n    },\n    dragging: {\n        color: theme.palette.secondary.main,\n    },\n    noDrop: {\n        opacity: 0.4,\n    },\n    tooltip: {\n        pointerEvents: 'none',\n    },\n    visibleView: {\n        color: theme.palette.primary.main,\n    },\n    selected: {\n        backgroundColor: theme.palette.mode === 'dark' ? theme.palette.primary.dark : theme.palette.primary.light,\n    },\n});\n\ninterface ViewProps {\n    classes: Record<string, any>;\n    moveView: (view: string, folder: string) => void;\n    name: string;\n    openedViews: string[];\n    setExportDialog: (view: string) => void;\n    setImportDialog: (view: string) => void;\n    showDialog: (action: 'rename' | 'copy' | 'delete', view: string) => void;\n    toggleView: (view: string, isShow: boolean, isActivate?: boolean) => void;\n    setIsDragging: (view: string) => void;\n    isDragging: string;\n    editMode: boolean;\n    selectedView: string;\n    /** If permissions are given, do edit this view */\n    hasPermissions: boolean;\n}\n\nconst View = (props: ViewProps) => {\n    const viewBlockPreview = <div className={props.classes.viewManageBlock}>\n        <FileIcon />\n        <Tooltip title={I18n.t(props.openedViews.includes(props.name) ? 'Hide' : 'Show')} classes={{ popper: props.classes.tooltip }}>\n            <IconButton\n                size=\"small\"\n                onClick={() => props.toggleView(props.name, !props.openedViews.includes(props.name))}\n            >\n                {props.openedViews.includes(props.name) ? <VisibilityIcon /> : <VisibilityOffIcon />}\n            </IconButton>\n        </Tooltip>\n        <span>{props.name}</span>\n    </div>;\n\n    const [{ isDraggingThisItem }, dragRef, preview] = useDrag({\n        type: 'view',\n        item: () => ({\n            name: props.name,\n            preview: <div>{viewBlockPreview}</div>,\n        }),\n        end: (item, monitor) => {\n            const dropResult = monitor.getDropResult();\n            if (item && dropResult) {\n                props.moveView(item.name, (dropResult as any).folder.id);\n            }\n        },\n        collect: monitor => ({\n            isDraggingThisItem: monitor.isDragging(),\n            handlerId: monitor.getHandlerId(),\n        }),\n    }, [store.getState().visProject]);\n\n    useEffect(() => {\n        preview(getEmptyImage(), { captureDraggingState: true });\n    }, [store.getState().visProject]);\n\n    useEffect(() => {\n        props.setIsDragging(isDraggingThisItem ? props.name : '');\n    }, [isDraggingThisItem]);\n\n    const selectView = () => {\n        props.toggleView(props.name, true, true);\n    };\n\n    return <div\n        className={Utils.clsx(\n            props.isDragging === props.name ? props.classes.dragging : (props.isDragging ? props.classes.noDrop : ''),\n            props.selectedView === props.name && props.classes.selected,\n        )}\n    >\n        <div className={props.classes.viewManageBlock}>\n            {props.hasPermissions ? <div className={props.classes.icon} ref={dragRef} title={I18n.t('Drag me')}><FileIcon /></div> : <FileIcon color=\"disabled\" />}\n            <Tooltip title={I18n.t(props.openedViews.includes(props.name) ? 'Hide' : 'Show')} classes={{ popper: props.classes.tooltip }}>\n                <IconButton\n                    disabled={!props.hasPermissions}\n                    size=\"small\"\n                    onClick={() => props.toggleView(props.name, !props.openedViews.includes(props.name))}\n                    className={props.isDragging === props.name ? props.classes.dragging : (props.isDragging ? props.classes.noDrop : '')}\n                >\n                    {props.openedViews.includes(props.name) ? <VisibilityIcon className={props.classes.visibleView} /> : <VisibilityOffIcon />}\n                </IconButton>\n            </Tooltip>\n            {props.hasPermissions ? <span onClick={selectView} className={props.classes.name}>{props.name}</span> : <span style={{ color: 'grey' }}>{props.name}</span>}\n            <span className={props.classes.viewManageButtonActions}>\n                {props.editMode && props.hasPermissions ? <Tooltip title={I18n.t('Import')} classes={{ popper: props.classes.tooltip }}>\n                    <IconButton onClick={() => props.setImportDialog(props.name)} size=\"small\">\n                        <BiImport />\n                    </IconButton>\n                </Tooltip> : null}\n                <Tooltip title={I18n.t('Export')} classes={{ popper: props.classes.tooltip }}>\n                    <IconButton onClick={() => props.setExportDialog(props.name)} size=\"small\">\n                        <BiExport />\n                    </IconButton>\n                </Tooltip>\n                {props.editMode && props.hasPermissions ? <Tooltip title={I18n.t('Rename')} classes={{ popper: props.classes.tooltip }}>\n                    <IconButton onClick={() => props.showDialog('rename', props.name)} size=\"small\">\n                        <EditIcon />\n                    </IconButton>\n                </Tooltip> : null}\n                {props.editMode && props.hasPermissions ? <Tooltip title={I18n.t('Copy')} classes={{ popper: props.classes.tooltip }}>\n                    <IconButton onClick={() => props.showDialog('copy', props.name)} size=\"small\">\n                        <FileCopyIcon />\n                    </IconButton>\n                </Tooltip> : null}\n                {props.editMode && props.hasPermissions ? <Tooltip title={I18n.t('Delete')} classes={{ popper: props.classes.tooltip }}>\n                    <IconButton onClick={() => props.showDialog('delete', props.name)} size=\"small\">\n                        <DeleteIcon />\n                    </IconButton>\n                </Tooltip> : null}\n            </span>\n        </div>\n    </div>;\n};\n\nexport default withStyles(styles)(View);\n","import PropTypes from 'prop-types';\n\nimport { FileCopy as FileCopyIcon } from '@mui/icons-material';\n\nimport { Utils, I18n } from '@iobroker/adapter-react-v5';\n\nimport IODialog from '../../Components/IODialog';\nimport CustomAceEditor from '../../Components/CustomAceEditor';\nimport { store } from '../../Store';\n\nconst ExportDialog = props => <IODialog\n    open={props.open}\n    onClose={props.onClose}\n    title={I18n.t('Export \"%s\"', props.view)}\n    closeTitle=\"Close\"\n    action={() => Utils.copyToClipboard(JSON.stringify(store.getState().visProject[props.view], null, 2))}\n    actionTitle=\"Copy to clipboard\"\n    actionNoClose\n    ActionIcon={FileCopyIcon}\n>\n    <CustomAceEditor\n        type=\"json\"\n        themeType={props.themeType}\n        value={JSON.stringify(store.getState().visProject[props.view], null, 2)}\n        height={200}\n    />\n</IODialog>;\n\nExportDialog.propTypes = {\n    onClose: PropTypes.func,\n    open: PropTypes.bool,\n    themeType: PropTypes.string,\n    view: PropTypes.string,\n};\n\nexport default ExportDialog;\n","import React, { useEffect, useRef } from 'react';\nimport { usePreview } from 'react-dnd-preview';\nimport { Timer } from '@/types';\n\nexport const DndPreview = () => {\n    const preview = usePreview();\n    const display = preview.display;\n    // TODO: How to fix this?\n    const { item, style } = (preview as unknown as {item: { preview: React.JSX.Element }; style: React.CSSProperties });\n    if (!display) {\n        return null;\n    }\n    return <div style={{ ...style, zIndex: 1000 }}>{item.preview}</div>;\n};\n\n/**\n * Determine if we are on a mobile device\n */\nexport function mobileCheck(): boolean {\n    let check = false;\n    const userAgent = navigator.userAgent || navigator.vendor || (window as any).opera;\n    if (\n        /(android|bb\\d+|meego).+mobile|avantgo|bada\\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\\/|plucker|pocket|psp|series([46])0|symbian|treo|up\\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(userAgent) || /1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br([ev])w|bumb|bw-([nu])|c55\\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do([cp])o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly([-_])|g1 u|g560|gene|gf-5|g-mo|go(\\.w|od)|gr(ad|un)|haie|hcit|hd-([mpt])|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c([- _agpst])|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac([ \\-/])|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja([tv])a|jbro|jemu|jigs|kddi|keji|kgt([ /])|klon|kpt |kwc-|kyo([ck])|le(no|xi)|lg( g|\\/([klu])|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t([- ov])|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30([02])|n50([025])|n7(0([01])|10)|ne(([cm])-|on|tf|wf|wg|wt)|nok([6i])|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan([adt])|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\\/|se(c([-01])|47|mc|nd|ri)|sgh-|shar|sie([-m])|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel([im])|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c([- ])|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i\n            .test(userAgent.substr(0, 4))\n    ) {\n        check = true;\n    }\n    return check;\n}\n\n/**\n * Determine if the device supports touch input\n */\nexport function isTouchDevice(): boolean {\n    if (!mobileCheck()) {\n        return false;\n    }\n    return (('ontouchstart' in window)\n        || (navigator.maxTouchPoints > 0)\n        // @ts-expect-error this is only for Internet Explorer 10, if unsupported remove it.\n        || (navigator.msMaxTouchPoints > 0));\n}\n\nexport const useFocus = (open: boolean, select: boolean, isAce = false) => {\n    // TODO: find correct type\n    const inputField = useRef<any>(null);\n\n    useEffect(() => {\n        let interval: Timer;\n        if (open) {\n            interval = setInterval(() => {\n                if (isAce ? inputField.current?.editor : inputField.current) {\n                    isAce ? inputField.current.editor.focus() : inputField.current.focus();\n                    if (select) {\n                        isAce ? inputField.current.editor.selectAll() : inputField.current.select();\n                    }\n                    clearInterval(interval);\n                }\n            }, 100);\n        }\n        return () => clearInterval(interval);\n    }, [open]);\n\n    return inputField;\n};\n","import PropTypes from 'prop-types';\n\nimport { useEffect, useRef, useState } from 'react';\n\nimport { TextField } from '@mui/material';\n\nimport { I18n } from '@iobroker/adapter-react-v5';\n\nimport IODialog from '../../Components/IODialog';\nimport CustomAceEditor from '../../Components/CustomAceEditor';\nimport { useFocus } from '../../Utils';\nimport { store } from '../../Store';\n\nconst ImportDialog = props => {\n    const [data, setData] = useState('');\n    const [view, setView] = useState('');\n    const [errors, setErrors] = useState([]);\n\n    const inputField = useFocus(props.open, true, true);\n\n    useEffect(() => {\n        setErrors([]);\n        setView(props.view);\n        setData(\n            store.getState().visProject[props.view]\n                ? JSON.stringify(store.getState().visProject[props.view], null, 2)\n                : `{\n  \"settings\": {\n    \"style\": {}\n  },\n  \"widgets\": {},\n  \"activeWidgets\": {}\n}`,\n        );\n    }, [props.open]);\n\n    const editor = useRef(null);\n\n    useEffect(() => {\n        if (editor.current) {\n            editor.current.editor.getSession().on('changeAnnotation', () => {\n                if (editor.current) {\n                    setErrors(editor.current.editor.getSession().getAnnotations());\n                }\n            });\n        }\n    }, [editor.current]);\n\n    return <IODialog\n        open={props.open}\n        onClose={props.onClose}\n        title=\"Import view\"\n        closeTitle=\"Close\"\n        actionTitle=\"Import\"\n        action={() => props.importViewAction(view, data)}\n        actionDisabled={!view.length || !!errors.length}\n    >\n        <CustomAceEditor\n            type=\"json\"\n            theme={props.themeType}\n            refEditor={node => {\n                editor.current = node;\n                inputField.current = node;\n            }}\n            value={data}\n            onChange={newValue => setData(newValue)}\n            height={200}\n        />\n        <div>\n            <TextField variant=\"standard\" fullWidth label={I18n.t('View name')} value={view} onChange={e => setView(e.target.value)} />\n        </div>\n    </IODialog>;\n};\n\nImportDialog.propTypes = {\n    importViewAction: PropTypes.func,\n    onClose: PropTypes.func,\n    open: PropTypes.bool,\n    view: PropTypes.string,\n};\nexport default ImportDialog;\n","import PropTypes from 'prop-types';\nimport { v4 as uuidv4 } from 'uuid';\n\nimport {\n    TextField,\n} from '@mui/material';\n\nimport AddIcon from '@mui/icons-material/Add';\nimport EditIcon from '@mui/icons-material/Edit';\nimport DeleteIcon from '@mui/icons-material/Delete';\n\nimport { I18n } from '@iobroker/adapter-react-v5';\n\nimport IODialog from '../../Components/IODialog';\nimport { useFocus } from '../../Utils';\nimport { store } from '../../Store';\n\nconst FolderDialog = props => {\n    const inputField = useFocus(props.dialog && props.dialog !== 'delete', props.dialog === 'add');\n\n    if (!props.dialog) {\n        return null;\n    }\n\n    const folderObject = store.getState().visProject.___settings.folders.find(folder => folder.id === props.dialogFolder);\n\n    const dialogTitles = {\n        delete: `${I18n.t('Do you want to delete folder \"%s\"', folderObject?.name)}?`,\n        rename: `${I18n.t('Rename folder \"%s\"', folderObject?.name)}`,\n        add: props.dialogParentId ? I18n.t('Add sub-folder') : I18n.t('Add folder'),\n    };\n\n    const dialogButtons = {\n        delete: I18n.t('Delete'),\n        rename: I18n.t('Rename'),\n        add: I18n.t('Add'),\n    };\n\n    const addFolder = () => {\n        const project = JSON.parse(JSON.stringify(store.getState().visProject));\n        project.___settings.folders.push({\n            id: uuidv4(),\n            name: props.dialogName,\n            parentId: props.dialogParentId,\n        });\n        props.changeProject(project);\n    };\n\n    const deleteFolder = () => {\n        const project = JSON.parse(JSON.stringify(store.getState().visProject));\n        project.___settings.folders.splice(project.___settings.folders.findIndex(folder => folder.id === props.dialogFolder), 1);\n        props.changeProject(project);\n    };\n\n    const renameFolder = () => {\n        const project = JSON.parse(JSON.stringify(store.getState().visProject));\n        project.___settings.folders.find(folder => folder.id === props.dialogFolder).name = props.dialogName;\n        props.changeProject(project);\n    };\n\n    const dialogActions = {\n        delete: deleteFolder,\n        rename: renameFolder,\n        add:    addFolder,\n    };\n\n    const dialogInputs = {\n        rename: I18n.t('New name'),\n        add:    I18n.t('Name'),\n    };\n\n    const dialogIcons = {\n        delete: DeleteIcon,\n        rename: EditIcon,\n        add:    AddIcon,\n    };\n\n    const DialogIcon = dialogIcons[props.dialog];\n\n    let dialogDisabled = false;\n    if (props.dialog !== 'delete') {\n        dialogDisabled = props.dialogName === '' || props.dialogName === folderObject?.name;\n    }\n\n    return <IODialog\n        title={dialogTitles[props.dialog]}\n        noTranslation\n        actionTitle={dialogButtons[props.dialog]}\n        open={!!props.dialog}\n        onClose={() => {\n            props.setDialog(null);\n            props.setDialogFolder(null);\n        }}\n        ActionIcon={DialogIcon || null}\n        action={dialogActions[props.dialog]}\n        actionColor={props.dialog === 'delete' ? 'secondary' : 'primary'}\n        actionDisabled={dialogDisabled}\n    >\n        {props.dialog === 'delete' ? null\n            : <TextField\n                variant=\"standard\"\n                label={dialogInputs[props.dialog]}\n                inputRef={inputField}\n                fullWidth\n                value={props.dialogName}\n                onChange={e => props.setDialogName(e.target.value)}\n            /> }\n    </IODialog>;\n};\n\nFolderDialog.propTypes = {\n    changeProject: PropTypes.func,\n    dialog: PropTypes.string,\n    dialogFolder: PropTypes.string,\n    dialogName: PropTypes.string,\n    dialogParentId: PropTypes.string,\n    setDialog: PropTypes.func,\n    setDialogFolder: PropTypes.func,\n    setDialogName: PropTypes.func,\n};\n\nexport default FolderDialog;\n","import { useEffect, useState } from 'react';\nimport PropTypes from 'prop-types';\n\nimport { withStyles } from '@mui/styles';\n\nimport { DndProvider } from 'react-dnd';\nimport { HTML5Backend } from 'react-dnd-html5-backend';\nimport { TouchBackend } from 'react-dnd-touch-backend';\n\nimport { AppBar, IconButton, Tooltip } from '@mui/material';\n\nimport {\n    Add as AddIcon,\n    CreateNewFolder as CreateNewFolderIcon,\n    Visibility as VisibilityIcon,\n    VisibilityOff as VisibilityOffIcon,\n} from '@mui/icons-material';\nimport { BiImport } from 'react-icons/bi';\n\nimport { I18n } from '@iobroker/adapter-react-v5';\n\nimport IODialog from '../../Components/IODialog';\nimport Folder from './Folder';\nimport Root from './Root';\nimport View from './View';\nimport ExportDialog from './ExportDialog';\nimport ImportDialog from './ImportDialog';\nimport FolderDialog from './FolderDialog';\nimport { DndPreview, isTouchDevice } from '../../Utils';\nimport { store } from '../../Store';\nimport {\n    deepClone, getNewWidgetId, hasViewAccess, isGroup, pasteGroup,\n} from '../../Utils/utils';\n\nconst styles = theme => ({\n    viewManageButtonActions: theme.classes.viewManageButtonActions,\n    dialog: {\n        minWidth: 400,\n        minHeight: 300,\n    },\n    topBar: {\n        flexDirection: 'row',\n        borderRadius: 4,\n        marginBottom: 12,\n    },\n    folderContainer: {\n        clear: 'right',\n        '& $viewManageButtonActions': {\n            visibility: 'hidden',\n        },\n        '&:hover $viewManageButtonActions': {\n            visibility: 'initial',\n        },\n    },\n    viewContainer: {\n        clear: 'right',\n        '& $viewManageButtonActions': {\n            visibility: 'hidden',\n        },\n        '&:hover $viewManageButtonActions': {\n            visibility: 'initial',\n        },\n    },\n    tooltip: {\n        pointerEvents: 'none',\n    },\n});\n\nconst ViewsManager = props => {\n    const [exportDialog, setExportDialog] = useState(false);\n    const [importDialog, setImportDialog] = useState(false);\n\n    const [folderDialog, setFolderDialog] = useState(null);\n    const [folderDialogName, setFolderDialogName] = useState('');\n    const [folderDialogId, setFolderDialogId] = useState(null);\n    const [folderDialogParentId, setFolderDialogParentId] = useState(null);\n    const [isDragging, setIsDragging] = useState('');\n    const [isOverRoot, setIsOverRoot] = useState(false);\n\n    const [foldersCollapsed, setFoldersCollapsed] = useState([]);\n    useEffect(() => {\n        if (window.localStorage.getItem('ViewsManager.foldersCollapsed')) {\n            setFoldersCollapsed(JSON.parse(window.localStorage.getItem('ViewsManager.foldersCollapsed')));\n        }\n    }, []);\n\n    const { visProject, activeUser } = store.getState();\n\n    const moveFolder = (id, parentId) => {\n        const project = deepClone(visProject);\n        project.___settings.folders.find(folder => folder.id === id).parentId = parentId;\n        props.changeProject(project);\n    };\n\n    const moveView = (name, parentId) => {\n        const project = deepClone(visProject);\n        project[name].parentId = parentId;\n        props.changeProject(project);\n    };\n\n    const importViewAction = (view, data) => {\n        const project = deepClone(visProject);\n        const viewObject = JSON.parse(data);\n\n        if (viewObject.parentId !== undefined) {\n            delete viewObject.parentId;\n        }\n\n        if (!viewObject || !viewObject.settings || !viewObject.widgets) {\n            console.warn('Cannot import view: view is non-existing or missing one of the required properties \"settings, widgets\"');\n            return;\n        }\n\n        const originalWidgets = deepClone(viewObject.widgets);\n\n        project[view] =  { ...viewObject, widgets: {}, activeWidgets: [] };\n\n        for (const [wid, widget] of Object.entries(originalWidgets)) {\n            if (isGroup(widget)) {\n                pasteGroup({\n                    group: widget, widgets: project[view].widgets, groupMembers: originalWidgets, project,\n                });\n            } else if (!widget.groupid) {\n                const newWid = getNewWidgetId(project);\n                project[view].widgets[newWid] = originalWidgets[wid];\n            }\n        }\n\n        viewObject.name = view;\n        props.changeProject(project);\n    };\n\n    const renderViews = parentId => Object.keys(visProject)\n        .filter(name => !name.startsWith('___'))\n        .filter(name => (parentId ? visProject[name].parentId === parentId : !visProject[name].parentId))\n        .sort((name1, name2) => (name1.toLowerCase().localeCompare(name2.toLowerCase())))\n        .map((name, key) => <div key={key} className={props.classes.viewContainer}>\n            <View\n                name={name}\n                setIsDragging={setIsDragging}\n                isDragging={isDragging}\n                moveView={moveView}\n                setExportDialog={setExportDialog}\n                setImportDialog={setImportDialog}\n                selectedView={props.selectedView}\n                {...props}\n                classes={{}}\n                hasPermissions={hasViewAccess({\n                    view: name, user: activeUser, project: visProject, editMode: props.editMode,\n                })}\n            />\n        </div>);\n\n    const renderFolders = parentId => {\n        const folders = visProject.___settings.folders\n            .filter(folder => (parentId ? folder.parentId === parentId : !folder.parentId))\n            .sort((folder1, folder2) => folder1.name.toLowerCase().localeCompare(folder2.name.toLowerCase()));\n\n        return folders.map((folder, key) => <div key={key}>\n            <div className={props.classes.folderContainer}>\n                <Folder\n                    setIsDragging={setIsDragging}\n                    isDragging={isDragging}\n                    folder={folder}\n                    setFolderDialog={setFolderDialog}\n                    setFolderDialogName={setFolderDialogName}\n                    setFolderDialogId={setFolderDialogId}\n                    setFolderDialogParentId={setFolderDialogParentId}\n                    moveFolder={moveFolder}\n                    foldersCollapsed={foldersCollapsed}\n                    setFoldersCollapsed={setFoldersCollapsed}\n                    {...props}\n                    classes={{}}\n                />\n            </div>\n            {foldersCollapsed.includes(folder.id) ? null : <div style={{ paddingLeft: 10 }}>\n                {renderFolders(folder.id)}\n                {renderViews(folder.id)}\n            </div>}\n        </div>);\n    };\n\n    return <IODialog open={props.open} onClose={props.onClose} title=\"Manage views\" closeTitle=\"Close\">\n        <div className={props.classes.dialog}>\n            <DndProvider backend={isTouchDevice() ? TouchBackend : HTML5Backend}>\n                <DndPreview />\n                {props.editMode ? <AppBar position=\"static\" className={props.classes.topBar}>\n                    {props.editMode ? <Tooltip title={I18n.t('Add view')} classes={{ popper: props.classes.tooltip }}>\n                        <IconButton\n                            size=\"small\"\n                            onClick={() => props.showDialog('add', props.name, null, newView => {\n                                newView && props.onClose();\n                            })}\n                        >\n                            <AddIcon />\n                        </IconButton>\n                    </Tooltip> : null}\n                    {props.editMode ? <Tooltip title={I18n.t('Import')} classes={{ popper: props.classes.tooltip }}>\n                        <IconButton onClick={() => setImportDialog('')} size=\"small\">\n                            <BiImport />\n                        </IconButton>\n                    </Tooltip> : null}\n                    {props.editMode ? <Tooltip title={I18n.t('Add folder')} classes={{ popper: props.classes.tooltip }}>\n                        <IconButton\n                            size=\"small\"\n                            onClick={() => {\n                                setFolderDialog('add');\n                                setFolderDialogName('');\n                                setFolderDialogParentId(null);\n                            }}\n                        >\n                            <CreateNewFolderIcon />\n                        </IconButton>\n                    </Tooltip> : null}\n                    {props.editMode ? <Tooltip title={I18n.t('Show all views')} classes={{ popper: props.classes.tooltip }}>\n                        <IconButton\n                            size=\"small\"\n                            onClick={async () => {\n                                const proj = deepClone(store.getState().visProject);\n\n                                const views = Object.keys(proj).filter(name => !name.startsWith('___'));\n\n                                for (const view of views) {\n                                    proj.___settings.openedViews.push(view);\n                                }\n\n                                await props.changeProject(proj, false);\n                            }}\n                        >\n                            <VisibilityIcon />\n                        </IconButton>\n                    </Tooltip> : null}\n                    {props.editMode ? <Tooltip title={I18n.t('Hide all views')} classes={{ popper: props.classes.tooltip }}>\n                        <IconButton\n                            size=\"small\"\n                            onClick={async () => {\n                                const proj = deepClone(store.getState().visProject);\n                                proj.___settings.openedViews = [];\n\n                                await props.changeProject(proj, false);\n                            }}\n                        >\n                            <VisibilityOffIcon />\n                        </IconButton>\n                    </Tooltip> : null}\n                </AppBar> : null}\n                <div style={{\n                    width: '100%',\n                    borderStyle: 'dashed',\n                    borderRadius: 4,\n                    borderWidth: 1,\n                    borderColor: isOverRoot ? 'rgba(200, 200, 200, 1)' : 'rgba(128, 128, 128, 0)',\n                    lineHeight: '32px',\n                    verticalAlign: 'middle',\n                }}\n                >\n                    {renderFolders()}\n                    {renderViews()}\n                    <Root\n                        isDragging={isDragging}\n                        setIsOverRoot={setIsOverRoot}\n                        {...props}\n                        classes={{}}\n                    />\n                </div>\n            </DndProvider>\n        </div>\n        <FolderDialog\n            dialog={folderDialog}\n            dialogFolder={folderDialogId}\n            dialogName={folderDialogName}\n            dialogParentId={folderDialogParentId}\n            setDialog={setFolderDialog}\n            setDialogFolder={setFolderDialogId}\n            setDialogName={setFolderDialogName}\n            {...props}\n            classes={{}}\n        />\n        {importDialog !== false ? <ImportDialog\n            open\n            onClose={() => setImportDialog(false)}\n            view={importDialog || ''}\n            importViewAction={importViewAction}\n            project={visProject}\n            themeName={props.themeName}\n        /> : null}\n        {exportDialog !== false ? <ExportDialog\n            open\n            onClose={() => setExportDialog(false)}\n            view={exportDialog || ''}\n            project={visProject}\n            themeName={props.themeName}\n        /> : null}\n    </IODialog>;\n};\n\nViewsManager.propTypes = {\n    changeProject: PropTypes.func,\n    classes: PropTypes.object,\n    name: PropTypes.string,\n    onClose: PropTypes.func,\n    open: PropTypes.bool,\n    showDialog: PropTypes.func,\n    themeName: PropTypes.string,\n    toggleView: PropTypes.func,\n    editMode: PropTypes.bool,\n    selectedView: PropTypes.string,\n};\n\nexport default withStyles(styles)(ViewsManager);\n","import React, { Component } from 'react';\nimport { withStyles } from '@mui/styles';\nimport {\n    Checkbox, FormControl, MenuItem,\n    Menu, List,\n    ListItemButton, ListItemText,\n    ListItemIcon, InputLabel, Button,\n} from '@mui/material';\n\nimport {\n    ArrowDropDown as IconArrowDown,\n    ArrowDropUp as IconArrowUp,\n} from '@mui/icons-material';\n\nimport { Utils, I18n } from '@iobroker/adapter-react-v5';\n\nconst styles = theme => ({\n    navMain: {\n        borderBottom: '1px solid transparent',\n        '&:hover': {\n            borderBottom: `1px solid ${theme.palette.mode === 'dark' ? '#BBB' : '#555'}`,\n        },\n    },\n    listItemButton: {\n        padding: 0,\n        margin: 0,\n    },\n    nav: {\n        padding: 0,\n    },\n    textRoot: {\n        margin: 0,\n    },\n    menuItem: {\n        borderBottom: '1px dashed gray',\n    },\n    primary: {\n        width: '100%',\n        overflow: 'hidden',\n        textOverflow: 'ellipsis',\n        whiteSpace: 'nowrap',\n        fontSize: 14,\n    },\n    secondary: {\n        fontSize: 10,\n        position: 'absolute',\n        bottom: -8,\n        right: 20,\n    },\n    coloredSecondary: {\n        borderRadius: 3,\n        padding: '0 3px',\n        opacity: 0.7,\n    },\n    icon: {\n        width: 24,\n        height: 24,\n        objectFit: 'contain',\n    },\n    menuItemMainText: {\n        fontWeight: 'bold',\n        display: 'inline-block',\n        verticalAlign: 'top',\n    },\n    menuItemIcon: {\n        marginRight: 4,\n        display: 'inline-block',\n        height: 24,\n    },\n    menuToolbar: {\n        paddingLeft: 8,\n        paddingRight: 8,\n        backgroundColor: theme.palette.mode === 'dark' ? theme.palette.secondary.dark : theme.palette.secondary.light,\n    },\n});\n\nclass MultiSelect extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            elAnchor: null,\n        };\n    }\n\n    render() {\n        const props = this.props;\n        const value = props.value || [];\n\n        let text;\n        let subText = null;\n        let color;\n        let icon;\n        if (value.length === 1) {\n            const item = props.options.find(foundItem => foundItem.value === value[0]);\n            if (item) {\n                text = item.name;\n                subText = item.subName;\n                color = item.color;\n                icon = item.icon ? <img\n                    src={item.icon}\n                    className={props.classes.icon}\n                    alt={item.name}\n                /> : null;\n            } else {\n                text = value[0];\n            }\n        } else {\n            text = value.join(', ');\n        }\n\n        let backColor;\n        if (color) {\n            backColor = Utils.getInvertedColor(color, props.themeType, false);\n            if (backColor === '#DDD') {\n                backColor = '#FFF';\n            } else if (backColor === '#111') {\n                backColor = '#000';\n            }\n        }\n\n        const isNarrow = !props.label;\n\n        return <FormControl variant=\"standard\" style={{ margin: '0px 10px' }}>\n            {props.label ? <InputLabel shrink>{props.label}</InputLabel> : null}\n            <List\n                component=\"nav\"\n                style={{\n                    width: props.width,\n                    marginTop: isNarrow ? 0 : 16,\n                }}\n                className={`${this.props.classes.navMain} ${isNarrow ? this.props.classes.nav : null}`}\n            >\n                <ListItemButton\n                    onClick={e => this.setState({ elAnchor: e.currentTarget })}\n                    classes={{ root: props.classes.listItemButton }}\n                >\n                    {icon ? <ListItemIcon style={{ minWidth: 28 }}>\n                        {icon}\n                    </ListItemIcon> : null}\n                    <ListItemText\n                        classes={{\n                            root: props.classes.listItemButton,\n                            primary: props.classes.primary,\n                            secondary: props.classes.secondary,\n                        }}\n                        primary={text}\n                        secondary={<span\n                            style={{ color, background: backColor, whiteSpace: 'nowrap' }}\n                            className={color ? props.classes.coloredSecondary : undefined}\n                        >\n                            {subText}\n                        </span>}\n                    />\n                    <ListItemIcon style={{ minWidth: 16 }}>{this.state.elAnchor ? <IconArrowUp /> : <IconArrowDown />}</ListItemIcon>\n                </ListItemButton>\n            </List>\n            <Menu\n                open={!!this.state.elAnchor}\n                anchorEl={this.state.elAnchor}\n                onClose={() => this.setState({ elAnchor: null })}\n            >\n                <div className={this.props.classes.menuToolbar}>\n                    {I18n.t('All')}\n                    <Button\n                        disabled={value.length === props.options.length}\n                        onClick={() => this.props.setSelectedWidgets(props.options.map(item => item.value))}\n                        startIcon={<Checkbox style={{ opacity: value.length === props.options.length ? 0.5 : 1 }} checked />}\n                    >\n                        {I18n.t('Select')}\n                    </Button>\n                    <Button\n                        disabled={!value.length}\n                        onClick={() => this.props.setSelectedWidgets([])}\n                        startIcon={<Checkbox  style={{ opacity: !value.length ? 0.5 : 1 }} />}\n                    >\n                        {I18n.t('Unselect')}\n                    </Button>\n                </div>\n                {props.options.map(item => <MenuItem\n                    value={item.value}\n                    key={item.value}\n                    className={props.classes.menuItem}\n                    onClick={() =>\n                        this.setState({ elAnchor: null }, () =>\n                            props.onChange([item.value]))}\n                >\n                    <div style={{ display: 'flex' }}>\n                        <div>\n                            <Checkbox\n                                checked={props.value.includes(item.value)}\n                                onClick={e => {\n                                    e.stopPropagation();\n                                    e.preventDefault();\n                                    const _value = [...value];\n                                    if (_value.includes(item.value)) {\n                                        _value.splice(_value.indexOf(item.value), 1);\n                                    } else {\n                                        _value.push(item.value);\n                                    }\n                                    props.onChange(_value);\n                                }}\n                            />\n                        </div>\n                        <div>\n                            {item.icon ? <div className={props.classes.menuItemIcon}>\n                                <img src={item.icon} className={props.classes.icon} alt={item.name} />\n                            </div> : null}\n                            <div className={props.classes.menuItemMainText}>{item.name}</div>\n                            <div\n                                style={{\n                                    fontSize: 10,\n                                    fontStyle: 'italic',\n                                    color: item.color,\n                                    background: item.color ? Utils.getInvertedColor(item.color, props.themeType, false) : undefined,\n                                }}\n                                className={color ? props.classes.coloredSecondary : undefined}\n                            >\n                                {item.subName}\n                            </div>\n                        </div>\n                    </div>\n                </MenuItem>)}\n            </Menu>\n        </FormControl>;\n    }\n}\n\nexport default withStyles(styles)(MultiSelect);\n","import PropTypes from 'prop-types';\nimport { withStyles } from '@mui/styles';\n\nimport {\n    Button,\n    ButtonBase,\n    Checkbox,\n    Divider,\n    FormControl,\n    FormControlLabel,\n    IconButton,\n    InputLabel,\n    MenuItem,\n    Select,\n    TextField,\n    Tooltip,\n} from '@mui/material';\n\nimport { I18n } from '@iobroker/adapter-react-v5';\n\nimport MultiSelect from './MultiSelect';\n\nimport { store } from '../Store';\n\nconst styles = theme => ({\n    toolbarBlock: {\n        display: 'flex',\n        flexDirection: 'column',\n        alignItems: 'center',\n        borderRightStyle: 'solid',\n        padding: '0px 10px',\n        borderWidth: 1,\n    },\n    disabled: {\n        color: theme.palette.action.disabled,\n    },\n    toolbarItems: {\n        display: 'flex', flexDirection: 'row', flex: 1,\n    },\n    toolbarCol: {\n        display: 'flex', flexDirection: 'column',\n    },\n    toolbarRow: {\n        display: 'flex', flexDirection: 'row',\n    },\n    toolbarLabel: {\n        fontSize: '72%',\n        opacity: '80%',\n        paddingTop: 4,\n    },\n    toolbarTooltip: {\n        pointerEvents: 'none',\n    },\n});\n\nconst getItem = (item, key, props, full) => {\n    const { visProject } = store.getState();\n    const view = visProject[props.selectedView];\n\n    if (!item || item.hide) {\n        !item && console.warn(`Strange item: ${key}`);\n        return null;\n    }\n\n    let value = view && item.field ? view.settings[item.field] : null;\n    if (item.field && (value === null || value === undefined)) {\n        value = '';\n    }\n\n    const change = changeValue => {\n        if (!item.field) {\n            return;\n        }\n        const project = JSON.parse(JSON.stringify(visProject));\n        project[props.selectedView].settings[item.field] = changeValue;\n\n        props.changeProject(project);\n    };\n\n    if (item.type === 'select') {\n        return <FormControl variant=\"standard\" key={key} style={{ margin: '0px 10px' }}>\n            {props.toolbarHeight !== 'veryNarrow' ? <InputLabel shrink>{I18n.t(item.name)}</InputLabel> : null}\n            <Select\n                variant=\"standard\"\n                style={{ width: item.width }}\n                value={item.value ? item.value : value}\n                onChange={item.onChange ? item.onChange : e => change(e.target.value)}\n            >\n                {item.items.map(selectItem => <MenuItem\n                    value={selectItem.value}\n                    key={selectItem.value}\n                >\n                    {I18n.t(selectItem.name)}\n                </MenuItem>)}\n            </Select>\n        </FormControl>;\n    }\n\n    if (item.type === 'multiselect') {\n        return <MultiSelect\n            key={key}\n            // style={{ margin: '0px 10px' }}\n            label={props.toolbarHeight !== 'veryNarrow' ? (item.doNotTranslateName ? item.name : I18n.t(item.name)) : null}\n            width={item.width}\n            value={item.value ? item.value : value}\n            onChange={_value => item.onChange(_value)}\n            setSelectedWidgets={props.setSelectedWidgets}\n            options={item.items}\n            themeType={props.themeType}\n        />;\n        /*\n        return <FormControl variant=\"standard\" key={key} style={{ margin: '0px 10px' }}>\n            {props.toolbarHeight !== 'veryNarrow' ? <InputLabel shrink>{I18n.t(item.name)}</InputLabel> : null}\n            <Select\n                variant=\"standard\"\n                style={{ width: item.width }}\n                multiple\n                value={item.value ? item.value : value}\n                renderValue={selected => selected.map(selectedItem => {\n                    const _item = item.items.find(foundItem => foundItem.value === selectedItem);\n                    return _item ? _item.name : selectedItem;\n                }).join(', ')}\n                onChange={item.onChange ? item.onChange : e => change(e.target.value)}\n            >\n                {item.items.map(selectItem => <MenuItem\n                    value={selectItem.value}\n                    key={selectItem.value}\n                >\n                    {selectItem.subName ?\n                        <div style={{ display: 'flex' }}>\n                            <div><Checkbox checked={(item.value ? item.value : value).includes(selectItem.value)} /></div>\n                            <div>\n                                <div style={{ fontWeight: 'bold' }}>{selectItem.name}</div>\n                                <div style={{ fontSize: 10, fontStyle: 'italic' }}>{selectItem.subName}</div>\n                            </div>\n                        </div>\n                        :\n                        <>\n                            <Checkbox checked={(item.value ? item.value : value).includes(selectItem.value)} />\n                            {I18n.t(selectItem.name)}\n                        </>}\n                </MenuItem>)}\n            </Select>\n        </FormControl>;\n        */\n    }\n    if (item.type === 'checkbox') {\n        return <FormControlLabel\n            key={key}\n            control={<Checkbox\n                checked={value}\n                onChange={item.onChange ? item.onChange : e => change(e.target.checked)}\n                size=\"small\"\n            />}\n            label={I18n.t(item.name)}\n        />;\n    }\n\n    if (item.type === 'icon-button') {\n        return props.toolbarHeight !== 'veryNarrow' && full ?\n            <div key={key} style={{ textAlign: 'center' }}>\n                <ButtonBase\n                    className={item.disabled ? props.classes.disabled : null}\n                    onClick={item.onClick}\n                    disabled={item.disabled}\n                    style={{\n                        flexDirection: 'column',\n                        width: 60,\n                        borderRadius: 4,\n                        height: '100%',\n                        justifyContent: 'start',\n                        color: item.color || undefined,\n                    }}\n                >\n                    <div><item.Icon fontSize={item.size && props.toolbarHeight !== 'veryNarrow' ? item.size : 'small'} /></div>\n                    <div>{I18n.t(item.name)}</div>\n                    {item.subName ? <div style={{ fontSize: 10, opacity: 0.6 }}>{item.subName}</div> : null}\n                </ButtonBase>\n            </div>\n            :\n            <Tooltip key={key} title={I18n.t(item.name)} classes={{ popper: props.classes.toolbarTooltip }}>\n                <div>\n                    <IconButton\n                        color={item.selected ? 'primary' : undefined}\n                        size=\"small\"\n                        key={key}\n                        disabled={item.disabled}\n                        onClick={item.onClick}\n                        style={{ height: full ? '100%' : null, color: item.color }}\n                    >\n                        <item.Icon fontSize={item.size ? item.size : 'small'} />\n                    </IconButton>\n                </div>\n            </Tooltip>;\n    }\n\n    if (item.type === 'text') {\n        return <span key={key} className={props.classes.text}>{`${I18n.t(item.text)}:`}</span>;\n    }\n\n    if (item.type === 'button') {\n        return <Button\n            key={key}\n            variant=\"outlined\"\n            onClick={item.onClick}\n            size=\"small\"\n            className={props.classes.button}\n        >\n            {I18n.t(item.name)}\n        </Button>;\n    }\n\n    if (item.type === 'divider') {\n        return <Divider key={key} orientation=\"vertical\" flexItem style={{ margin: '0px 10px' }} />;\n    }\n\n    return <TextField\n        variant=\"standard\"\n        key={key}\n        value={value}\n        type={item.type}\n        onChange={item.onChange ? item.onChange : e => change(e.target.value)}\n        InputLabelProps={{ shrink: true }}\n        label={props.toolbarHeight !== 'veryNarrow' ? I18n.t(item.name) : null}\n        className={props.classes.textInput}\n    />;\n};\n\nconst ToolbarItems = props => {\n    let items = props.group.items;\n    const name = props.group.name;\n    const doNotTranslateName = props.group.doNotTranslateName;\n\n    // flatten buttons\n    if (props.toolbarHeight === 'veryNarrow') {\n        const _items = [];\n        items.forEach(item => {\n            if (Array.isArray(item)) {\n                item.forEach(_item => {\n                    if (Array.isArray(_item)) {\n                        _item.forEach(__item => _items.push(__item));\n                    } else {\n                        _items.push(_item);\n                    }\n                });\n            } else {\n                _items.push(item);\n            }\n        });\n        items = _items;\n    }\n\n    return <div\n        className={props.classes.toolbarBlock}\n        style={props.last ? { borderRightWidth: 0 } : null}\n    >\n        <div className={props.classes.toolbarItems}>\n            {\n                items.map((item, key) => {\n                    if (Array.isArray(item)) {\n                        return <div key={key} className={props.classes.toolbarCol}>\n                            {item.map((subItem, subKey) => <div key={subKey} className={props.classes.toolbarRow}>\n                                {subItem.map((subItem2, subKey2) => getItem(subItem2, subKey2, props))}\n                            </div>)}\n                        </div>;\n                    }\n                    return getItem(item, key, props, true);\n                })\n            }\n        </div>\n        {props.toolbarHeight === 'full' ? <div className={props.classes.toolbarLabel}>\n            <span>{typeof name === 'string' ? (doNotTranslateName ? name : I18n.t(name)) : name}</span>\n        </div> : null}\n    </div>;\n};\n\nToolbarItems.propTypes = {\n    classes: PropTypes.object,\n    // eslint-disable-next-line react/no-unused-prop-types\n    themeType: PropTypes.string,\n    group: PropTypes.object,\n    last: PropTypes.bool,\n    toolbarHeight: PropTypes.string,\n};\n\nexport default withStyles(styles)(ToolbarItems);\n","import React from 'react';\nimport {\n    Add as AddIcon,\n    Edit as EditIcon,\n    Delete as DeleteIcon,\n    FileCopy as FileCopyIcon,\n} from '@mui/icons-material';\n\nimport {\n    TextField,\n} from '@mui/material';\n\nimport { I18n } from '@iobroker/adapter-react-v5';\n\nimport { store } from '@/Store';\nimport {\n    deepClone, getNewWidgetId, isGroup, pasteGroup,\n} from '@/Utils/utils';\nimport { useFocus } from '@/Utils';\nimport IODialog from '@/Components/IODialog';\nimport { Project, SingleWidgetId } from '@/types';\n\ninterface ViewDialogProps {\n    changeProject: (project: Project) => Promise<void>;\n    changeView: (viewName: string) => Promise<void>;\n    dialog: string;\n    /** Name of view */\n    dialogName: string;\n    dialogView: string;\n    dialogCallback?: { cb: (dialogName: string) => void };\n    selectedView: string;\n    setDialog: (closeAction: null) => void;\n    setDialogName: (dialogName: string) => void;\n    setDialogView: (action: null) => void;\n    dialogParentId?: string;\n    noTranslation: boolean;\n    setDialogParentId: (action: null) => void;\n}\n\nconst ViewDialog = (props: ViewDialogProps) => {\n    const inputField = useFocus(!!props.dialog && props.dialog !== 'delete', props.dialog === 'add');\n\n    const deleteView = async () => {\n        const view = props.dialogView || props.selectedView;\n        const project = JSON.parse(JSON.stringify(store.getState().visProject));\n        delete project[view];\n        await props.changeView(Object.keys(project).filter(foundView => !foundView.startsWith('__'))[0]);\n        await props.changeProject(project);\n        props.setDialog(null); // close dialog\n    };\n\n    const addView = async () => {\n        const project = JSON.parse(JSON.stringify(store.getState().visProject));\n        project[props.dialogName] = {\n            name: props.dialogName,\n            parentId: props.dialogParentId,\n            settings: {\n                style: {},\n            },\n            widgets: {},\n            activeWidgets: {},\n        };\n        await props.changeProject(project);\n        await props.changeView(props.dialogName);\n        props.setDialog(null); // close dialog\n        props.dialogCallback?.cb(props.dialogName);\n    };\n\n    interface RenameReferencesOptions {\n        /** The project to rename references in */\n        project: Project;\n        /** The view name to rename */\n        oldViewName: string;\n    }\n\n    /**\n     * Rename the references to this view\n     * This currently affects View in Widget (8)\n     *\n     * @param options the project to rename the references in and the old view name\n     */\n    const renameReferences = (options: RenameReferencesOptions) => {\n        const { project, oldViewName } = options;\n\n        for (const [viewName, view] of Object.entries(project)) {\n            if (viewName === '___settings')  {\n                continue;\n            }\n\n            for (const widget of Object.values(view.widgets)) {\n                if (widget.tpl === 'tplContainerView') {\n                    if (widget.data.contains_view === oldViewName) {\n                        widget.data.contains_view = props.dialogName;\n                    }\n                }\n\n                if (widget.tpl === 'tplStatefulContainerView8') {\n                    for (const [key, val] of Object.entries(widget.data)) {\n                        if (key.startsWith('contains_view') && val === oldViewName) {\n                            widget.data[key] = props.dialogName;\n                        }\n                    }\n                }\n            }\n        }\n    };\n\n    const renameView = async () => {\n        const oldViewName = props.dialogView || props.selectedView;\n        const project = deepClone(store.getState().visProject);\n        project[props.dialogName] = project[oldViewName];\n        delete project[oldViewName];\n\n        // Rename view where applicable\n        renameReferences({ project, oldViewName });\n\n        await props.changeProject(project);\n        await props.changeView(props.dialogName);\n        props.setDialog(null);\n        props.dialogCallback?.cb(props.dialogName);\n    };\n\n    const copyView = async () => {\n        const view = props.dialogView || props.selectedView;\n        const project = deepClone(store.getState().visProject);\n        project[props.dialogName] = { ...project[view], widgets: {}, activeWidgets: [] };\n        const originalWidgets = deepClone(project[view].widgets);\n\n        for (const [wid, widget] of Object.entries(originalWidgets)) {\n            if (isGroup(widget)) {\n                pasteGroup({\n                    group: widget, widgets: project[props.dialogName].widgets, groupMembers: originalWidgets, project,\n                });\n            } else if (!widget.groupid) {\n                const newWid = getNewWidgetId(project);\n                project[props.dialogName].widgets[newWid] = originalWidgets[wid as SingleWidgetId];\n            }\n        }\n\n        await props.changeProject(project);\n        await props.changeView(props.dialogName);\n        props.setDialog(null);\n        props.dialogCallback?.cb(props.dialogName);\n    };\n\n    const dialogTitles: Record<string, string> = {\n        delete: I18n.t('Do you want to delete view \"%s\"?', props.dialogView || props.selectedView),\n        copy: I18n.t('Copy view \"%s\"', props.dialogView || props.selectedView),\n        rename: I18n.t('Rename view \"%s\"', props.dialogView || props.selectedView),\n        add: I18n.t('Add view'),\n    };\n\n    const dialogButtons: Record<string, string> = {\n        delete: I18n.t('Delete'),\n        copy: I18n.t('Create copy'),\n        rename: I18n.t('Rename'),\n        add: I18n.t('Add'),\n    };\n\n    const dialogActions: Record<string, () => Promise<void>> = {\n        delete: deleteView,\n        copy: copyView,\n        rename: renameView,\n        add: addView,\n    };\n\n    const dialogInputs: Record<string, string> = {\n        copy: I18n.t('Name of copy'),\n        rename: I18n.t('New name'),\n        add: I18n.t('Name'),\n    };\n\n    const dialogIcons: Record<string, unknown> = {\n        delete: DeleteIcon,\n        copy: FileCopyIcon,\n        rename: EditIcon,\n        add: AddIcon,\n    };\n\n    const DialogIcon = dialogIcons[props.dialog];\n\n    let dialogDisabled = false;\n    if (props.dialog !== 'delete') {\n        if (store.getState().visProject[props.dialogName]) {\n            dialogDisabled = true;\n        }\n    }\n\n    if (!props.dialog) {\n        return null;\n    }\n\n    return <IODialog\n        title={dialogTitles[props.dialog]}\n        noTranslation={props.noTranslation}\n        actionTitle={dialogButtons[props.dialog]}\n        open={!!props.dialog}\n        onClose={() => {\n            props.setDialog(null);\n            props.setDialogView(null);\n            props.setDialogParentId(null);\n        }}\n        ActionIcon={DialogIcon || null}\n        action={dialogActions[props.dialog]}\n        actionColor={props.dialog === 'delete' ? 'secondary' : 'primary'}\n        actionDisabled={dialogDisabled}\n    >\n        {props.dialog === 'delete' ? null\n            : <TextField\n                inputRef={inputField}\n                variant=\"standard\"\n                label={dialogInputs[props.dialog]}\n                fullWidth\n                value={props.dialogName}\n                onChange={e => props.setDialogName(e.target.value)}\n            /> }\n    </IODialog>;\n};\n\nexport default ViewDialog;\n","import PropTypes from 'prop-types';\nimport { useState } from 'react';\nimport { withStyles } from '@mui/styles';\n\nimport {\n    Tooltip,\n} from '@mui/material';\n\nimport {\n    Add as AddIcon,\n    Edit as EditIcon,\n    Delete as DeleteIcon,\n    Menu as MenuIcon,\n} from '@mui/icons-material';\n\nimport { I18n } from '@iobroker/adapter-react-v5';\n\nimport ViewsManager from './ViewsManager';\nimport ToolbarItems from './ToolbarItems';\n\nimport ViewDialog from './ViewsManager/ViewDialog';\nimport { store } from '../Store';\n\nconst styles = () => ({\n    label: {\n        maxWidth: 180,\n        textOverflow: 'ellipsis',\n        display: 'inline-block',\n        whiteSpace: 'nowrap',\n        overflow: 'hidden',\n    },\n    projectLabel: {\n        cursor: 'pointer',\n        fontWeight: 'bold',\n    },\n});\n\nconst Views = props => {\n    const [dialog, setDialog] = useState(null);\n    const [dialogCallback, setDialogCallback] = useState(null);\n    const [dialogName, setDialogName] = useState('');\n    const [dialogView, setDialogView] = useState(null);\n    const [dialogParentId, setDialogParentId] = useState(null);\n\n    const showDialog = (type, view, parentId, cb) => {\n        view = view || props.selectedView;\n\n        const dialogDefaultName = {\n            add: I18n.t('New view'),\n            rename: view,\n            copy: `${view} ${I18n.t('Copy noun')}`,\n        };\n\n        setDialog(type);\n        setDialogView(view);\n        setDialogParentId(parentId);\n        setDialogName(dialogDefaultName[type]);\n        setDialogCallback(cb ? { cb } : null);\n    };\n\n    const toolbar = {\n        name: <span className={props.classes.label}>\n            <Tooltip title={I18n.t('Current project')}>\n                <span\n                    className={props.classes.projectLabel}\n                    onClick={() => props.setProjectsDialog(true)}\n                >\n                    {props.projectName}\n                </span>\n            </Tooltip>\n        </span>,\n        items: [\n            {\n                type: 'icon-button', Icon: AddIcon, name: 'Add new view', onClick: () => showDialog('add'), disabled: !!props.selectedGroup || !props.editMode,\n            },\n            [\n                [\n                    {\n                        type: 'icon-button', Icon: EditIcon, name: 'Rename view', onClick: () => showDialog('rename'), disabled: !!props.selectedGroup || !props.editMode,\n                    },\n                ],\n                [\n                    {\n                        type: 'icon-button', Icon: DeleteIcon, name: 'Delete actual view', onClick: () => showDialog('delete'), disabled: !!props.selectedGroup || !props.editMode,\n                    },\n                ],\n            ],\n            {\n                type: 'icon-button', Icon: MenuIcon, name: 'Manage views', onClick: () => props.setViewsManager(true), disabled: !!props.selectedGroup,\n            },\n        ],\n    };\n\n    return <>\n        <ToolbarItems group={toolbar} {...props} classes={{}} />\n        <ViewsManager open={props.viewsManager} onClose={() => props.setViewsManager(false)} showDialog={showDialog} {...props} classes={{}} />\n        <ViewDialog\n            dialog={dialog}\n            dialogView={dialogView}\n            dialogName={dialogName}\n            dialogCallback={dialogCallback}\n            noTranslation\n            dialogParentId={dialogParentId}\n            setDialog={setDialog}\n            setDialogView={setDialogView}\n            setDialogName={setDialogName}\n            setDialogParentId={setDialogParentId}\n            classes={{}}\n            project={store.getState().visProject}\n            {...props}\n        />\n    </>;\n};\n\nViews.propTypes = {\n    projectName: PropTypes.string,\n    selectedView: PropTypes.string,\n    setViewsManager: PropTypes.func,\n    viewsManager: PropTypes.bool,\n    selectedGroup: PropTypes.string,\n    editMode: PropTypes.bool,\n};\n\nexport default withStyles(styles)(Views);\n","import React, { useRef, useState } from 'react';\n\nimport {\n    Button, Dialog, DialogActions, DialogContent, DialogTitle,\n} from '@mui/material';\n\nimport { Close as CloseIcon, ImportExport } from '@mui/icons-material';\n\nimport { I18n } from '@iobroker/adapter-react-v5';\nimport {\n    isGroup, getNewGroupId, getNewWidgetId, deepClone,\n} from '@/Utils/utils';\n\nimport { useFocus } from '@/Utils';\nimport { store } from '@/Store';\nimport {\n    AnyWidgetId,\n    GroupWidget, GroupWidgetId, Project, Widget,\n} from '@/types';\nimport CustomAceEditor from '../Components/CustomAceEditor';\n\ninterface WidgetImportDialogProps {\n    changeProject: (project: Project) => void;\n    onClose:() => void;\n    themeType: 'dark' | 'light';\n    selectedView: string;\n    selectedGroup?: GroupWidgetId;\n}\n\nconst WidgetImportDialog = (props: WidgetImportDialogProps) => {\n    const [data, setData] = useState('');\n    const [error, setError] = useState(false);\n\n    const inputField = useFocus(true, true, true);\n\n    const editor = useRef(null);\n\n    const importWidgets = () => {\n        const { visProject } = store.getState();\n        const project = deepClone(visProject);\n        const widgets: Widget[] = JSON.parse(data);\n        const newWidgets: Record<string, Widget> = {};\n        let groupOffset = 0;\n        let widgetOffset = 0;\n\n        for (const widget of widgets) {\n            if (isGroup(widget)) {\n                const newKey = getNewGroupId(visProject, groupOffset++);\n                newWidgets[newKey] = widget;\n                // find all widgets that belong to this group and change groupid\n                let w;\n                do {\n                    w = widgets.find(item => item.groupid === widget._id);\n                    if (w) {\n                        w.groupid = newKey;\n                    }\n                } while (w);\n            } else {\n                const newKey = getNewWidgetId(visProject, widgetOffset++);\n                newWidgets[newKey] = widget;\n                if (widget.grouped && widget.groupid && newWidgets[widget.groupid]?.data?.members) {\n                    // find group\n                    const pos = (newWidgets[widget.groupid] as GroupWidget).data.members.indexOf(widget._id as AnyWidgetId);\n                    if (pos !== -1) {\n                        (newWidgets[widget.groupid] as GroupWidget).data.members[pos] = newKey;\n                    }\n                }\n            }\n        }\n\n        Object.keys(newWidgets).forEach(wid => {\n            delete newWidgets[wid]._id;\n\n            if (!isGroup(newWidgets[wid]) && props.selectedGroup !== undefined) {\n                newWidgets[wid].grouped = true;\n                newWidgets[wid].groupid = props.selectedGroup;\n                (project[props.selectedView].widgets[props.selectedGroup] as GroupWidget).data.members.push(wid as AnyWidgetId);\n            }\n        });\n\n        project[props.selectedView].widgets = { ...project[props.selectedView].widgets, ...newWidgets };\n\n        props.changeProject(project);\n    };\n\n    return <Dialog\n        onClose={props.onClose}\n        fullWidth\n        open={!0}\n        maxWidth=\"lg\"\n    >\n        <DialogTitle>{I18n.t('Import widgets')}</DialogTitle>\n        <DialogContent>\n            <CustomAceEditor\n                type=\"json\"\n                error={error}\n                themeType={props.themeType}\n                refEditor={node => {\n                    editor.current = node;\n                    inputField.current = node;\n                }}\n                value={data}\n                onChange={newValue => {\n                    try {\n                        newValue && JSON.parse(newValue);\n                        setError(false);\n                    } catch (e) {\n                        setError(true);\n                    }\n                    setData(newValue);\n                }}\n                height={300}\n            />\n        </DialogContent>\n        <DialogActions>\n            <Button\n                variant=\"contained\"\n                onClick={() => {\n                    importWidgets();\n                    props.onClose();\n                }}\n                color=\"primary\"\n                disabled={!data || error}\n                startIcon={<ImportExport />}\n            >\n                {I18n.t('Import')}\n            </Button>\n            <Button\n                variant=\"contained\"\n                // @ts-expect-error works like that\n                color=\"grey\"\n                onClick={props.onClose}\n                startIcon={<CloseIcon />}\n            >\n                {I18n.t('Close')}\n            </Button>\n        </DialogActions>\n    </Dialog>;\n};\n\nexport default WidgetImportDialog;\n","import PropTypes from 'prop-types';\n\nimport { FileCopy as FileCopyIcon } from '@mui/icons-material';\n\nimport { Utils, I18n } from '@iobroker/adapter-react-v5';\n\nimport IODialog from '../Components/IODialog';\nimport CustomAceEditor from '../Components/CustomAceEditor';\nimport { deepClone } from '../Utils/utils';\n\nconst WidgetExportDialog = props => {\n    const widgets = props.selectedWidgets.map(wid => {\n        const w = deepClone(props.widgets[wid]);\n        w._id = wid;\n        return w;\n    });\n\n    const groupWidgets = [];\n\n    let gIdx = 1;\n    let wIdx = 1;\n    const len = widgets.length;\n    for (let w = 0; w < len; w++) {\n        const widget = widgets[w];\n        if (widget.tpl === '_tplGroup') {\n            const newId = `f${gIdx.toString().padStart(6, '0')}`;\n            gIdx++;\n\n            if (widget.data?.members) {\n                const members = [];\n                widget.data.members.forEach(member => {\n                    if (groupWidgets.includes(member)) {\n                        return;\n                    }\n                    const memberWidget = deepClone(props.widgets[member]);\n                    memberWidget._id = `i${wIdx.toString().padStart(6, '0')}`;\n                    wIdx++;\n                    members.push(memberWidget._id);\n                    memberWidget.groupid = newId;\n                    memberWidget.grouped = true;\n                    widgets.push(memberWidget);\n                    groupWidgets.push(member);\n                });\n\n                widget.data.members = members;\n            }\n            widget._id = newId;\n        } else if (widget._id.startsWith('w')) {\n            if (widget.grouped) {\n                delete widget.grouped;\n                delete widget.groupid;\n                delete widget._id;\n            } else {\n                widget._id = `i${wIdx.toString().padStart(6, '0')}`;\n                wIdx++;\n            }\n        }\n    }\n\n    return <IODialog\n        open={!0}\n        onClose={props.onClose}\n        title=\"Export widgets\"\n        closeTitle=\"Close\"\n        action={() => {\n            Utils.copyToClipboard(JSON.stringify(widgets, null, 2));\n            props.onClose();\n            window.alert(I18n.t('Copied to clipboard'));\n        }}\n        actionTitle=\"Copy to clipboard\"\n        actionNoClose\n        ActionIcon={FileCopyIcon}\n    >\n        <CustomAceEditor\n            type=\"json\"\n            themeType={props.themeType}\n            value={JSON.stringify(widgets, null, 2)}\n            height={200}\n        />\n    </IODialog>;\n};\n\nWidgetExportDialog.propTypes = {\n    onClose: PropTypes.func,\n    themeType: PropTypes.string,\n    widgets: PropTypes.object,\n    selectedWidgets: PropTypes.array,\n};\n\nexport default WidgetExportDialog;\n","import PropTypes from 'prop-types';\n\nimport { useEffect, useState } from 'react';\n\nimport {\n    Button, Checkbox,\n    ListItemAvatar,\n    ListItemButton,\n    Dialog,\n    DialogContent,\n    DialogTitle,\n    DialogActions,\n    ListItemText,\n    Switch, Box,\n} from '@mui/material';\nimport {\n    Close,\n    FilterAlt,\n    LayersClear as Clear,\n    Visibility,\n    VisibilityOff,\n} from '@mui/icons-material';\n\nimport { I18n } from '@iobroker/adapter-react-v5';\nimport { store } from '../Store';\n\nconst WidgetFilterDialog = props => {\n    const [filters, setFilters] = useState([]);\n    const [filterWidgets, setFilterWidgets] = useState(store.getState().visProject[props.selectedView].filterWidgets || []);\n    const [filterInvert, setFilterInvert] = useState(store.getState().visProject[props.selectedView].filterInvert || false);\n\n    useEffect(() => {\n        // Collect all filters of all widgets\n        const _filters = [];\n        const widgets = store.getState().visProject[props.selectedView].widgets;\n        Object.values(widgets).forEach(widget => {\n            if (widget.data && widget.data.filterkey) {\n                widget.data.filterkey.split(',').forEach(filter => {\n                    filter = filter.trim();\n                    const pos = _filters.findIndex(a => a.key === filter);\n                    if (pos === -1) {\n                        _filters.push({ key: filter, count: 1 });\n                    } else {\n                        _filters[pos].count++;\n                    }\n                });\n            }\n        });\n        setFilters(_filters);\n    }, [store.getState().visProject, props.selectedView]);\n\n    return <Dialog\n        open={!0}\n        onClose={props.onClose}\n    >\n        <DialogTitle>{I18n.t('Set widgets filter for edit mode')}</DialogTitle>\n        <DialogContent>\n            {filters.length > 1 ? <Button\n                disabled={filters.length === filterWidgets.length}\n                color=\"primary\"\n                onClick={() => setFilterWidgets([...filters.map(f => f.key)])}\n                variant=\"contained\"\n            >\n                {I18n.t('Select all')}\n            </Button> : null}\n            {filters.length > 1 ? <Button\n                disabled={!filterWidgets.length}\n                color=\"grey\"\n                style={{ marginLeft: 10 }}\n                onClick={() => setFilterWidgets([])}\n                variant=\"contained\"\n            >\n                {I18n.t('Unselect all')}\n            </Button> : null}\n            <div\n                style={{\n                    width: '100%',\n                    display: 'flex',\n                    alignItems: 'center',\n                    justifyContent: 'space-between',\n                }}\n            >\n                <Box style={{ opacity: !filterInvert ? 1 : 0.5, display: 'flex', alignItems: 'center' }}>\n                    {I18n.t('Hide selected widgets')}\n                    <VisibilityOff style={{ marginLeft: 8 }} />\n                </Box>\n                <Switch\n                    checked={filterInvert}\n                    onChange={e => setFilterInvert(e.target.checked)}\n                />\n                <Box style={{ opacity: filterInvert ? 1 : 0.5, display: 'flex', alignItems: 'center' }}>\n                    <Visibility style={{ marginRight: 8 }} />\n                    {I18n.t('Show only selected widgets')}\n                </Box>\n            </div>\n            <div>\n                {!filters.length ? I18n.t('To use it, define by some widget the filter key') : null}\n                {filters.map(filter => <ListItemButton\n                    key={filter.key}\n                    onClick={() => {\n                        const _filterWidgets = [...filterWidgets];\n                        const pos = _filterWidgets.indexOf(filter.key);\n                        if (pos !== -1) {\n                            _filterWidgets.splice(pos, 1);\n                        } else {\n                            _filterWidgets.push(filter.key);\n                        }\n                        setFilterWidgets(_filterWidgets);\n                    }}\n                >\n                    <ListItemAvatar>\n                        <Checkbox checked={filterWidgets.includes(filter.key)} />\n                    </ListItemAvatar>\n                    <ListItemText primary={<>\n                        <span>{filter.key}</span>\n                        {filter.count > 1 ? <span\n                            style={{\n                                marginLeft: 10,\n                                opacity: 0.7,\n                                fontStyle: 'italic',\n                                fontSize: '0.8em',\n                            }}\n                        >\n                            {I18n.t('%s widgets', filter.count)}\n                        </span> : null}\n                    </>}\n                    />\n                </ListItemButton>)}\n            </div>\n        </DialogContent>\n        <DialogActions>\n            {store.getState().visProject[props.selectedView].filterWidgets?.length ? <Button\n                disabled={!filters.length}\n                variant=\"outlined\"\n                onClick={() => {\n                    const project = JSON.parse(JSON.stringify(store.getState().visProject));\n                    project[props.selectedView].filterWidgets = [];\n                    props.changeProject(project);\n                    props.onClose();\n                }}\n                color=\"primary\"\n                startIcon={<Clear />}\n            >\n                {I18n.t('Clear filter')}\n            </Button> : null}\n            <Button\n                disabled={!filters.length}\n                variant=\"contained\"\n                autoFocus\n                onClick={() => {\n                    const project = JSON.parse(JSON.stringify(store.getState().visProject));\n                    project[props.selectedView].filterWidgets = filterWidgets;\n                    project[props.selectedView].filterInvert = filterInvert;\n                    props.changeProject(project);\n                    props.onClose();\n                }}\n                color=\"primary\"\n                startIcon={<FilterAlt />}\n            >\n                {I18n.t('Apply')}\n            </Button>\n            <Button\n                variant=\"contained\"\n                onClick={props.onClose}\n                color=\"grey\"\n                startIcon={<Close />}\n            >\n                {I18n.t('ra_Cancel')}\n            </Button>\n        </DialogActions>\n    </Dialog>;\n};\n\nWidgetFilterDialog.propTypes = {\n    changeProject: PropTypes.func,\n    onClose: PropTypes.func,\n    selectedView: PropTypes.string,\n};\nexport default WidgetFilterDialog;\n","import PropTypes from 'prop-types';\nimport { useState, useMemo } from 'react';\n\nimport {\n    MdAlignHorizontalCenter, MdAlignHorizontalLeft, MdAlignHorizontalRight,\n    MdAlignVerticalBottom, MdAlignVerticalCenter, MdAlignVerticalTop,\n} from 'react-icons/md';\nimport { CgArrowAlignH, CgArrowAlignV } from 'react-icons/cg';\nimport { AiOutlineColumnWidth, AiOutlineColumnHeight } from 'react-icons/ai';\nimport {\n    BiImport, BiExport, BiCut, BiCopy, BiPaste,\n} from 'react-icons/bi';\nimport {\n    RiBringToFront, RiSendToBack,\n} from 'react-icons/ri';\nimport {\n    Delete as DeleteIcon,\n    FilterAlt as FilterIcon,\n    FileCopy as FileCopyIcon,\n    OpenInNew as OpenInNewIcon,\n    Undo as UndoIcon,\n    Redo as RedoIcon,\n    Visibility as VisibilityIcon,\n    VisibilityOff as VisibilityOffIcon,\n} from '@mui/icons-material';\n\nimport { I18n } from '@iobroker/adapter-react-v5';\nimport { store } from '../Store';\n\nimport ToolbarItems from './ToolbarItems';\nimport { getWidgetTypes } from '../Vis/visWidgetsCatalog';\nimport WidgetImportDialog from './WidgetImportDialog';\nimport WidgetExportDialog from './WidgetExportDialog';\nimport WidgetFilterDialog from './WidgetFilterDialog';\n\nconst Widgets = props => {\n    const [exportDialog, setExportDialog] = useState(false);\n    const [importDialog, setImportDialog] = useState(false);\n    const [filterDialog, setFilterDialog] = useState(false);\n\n    const toolbar = useMemo(() => {\n        const project = store.getState().visProject;\n\n        if (!props.widgetsLoaded) {\n            return null;\n        }\n        if (!props.openedViews.length) {\n            return null;\n        }\n        if (!project[props.selectedView]) {\n            return null;\n        }\n        const widgetTypes = getWidgetTypes();\n        const widgets = project[props.selectedView].widgets;\n\n        const shownWidgets = Object.keys(widgets)\n            .filter(widget => (props.selectedGroup ?\n                widgets[widget].groupid === props.selectedGroup || widget === props.selectedGroup :\n                !widgets[widget].groupid));\n\n        return {\n            name: 'Widgets',\n            items: [\n                {\n                    type: 'icon-button',\n                    Icon: FilterIcon,\n                    name: 'Filter widgets',\n                    color: project[props.selectedView].filterWidgets?.length ? '#c00000' : undefined,\n                    disabled: !props.editMode,\n                    onClick: () => setFilterDialog(true),\n                },\n                {\n                    type: 'multiselect',\n                    name: I18n.t('Active widget(s) from %s', shownWidgets.length),\n                    doNotTranslateName: true,\n                    items: shownWidgets\n                        .map(widgetId => {\n                            const tpl = widgets[widgetId].tpl;\n                            const widgetType = widgetTypes.find(w => w.name === tpl);\n                            let widgetLabel = widgetType?.title || '';\n                            let widgetColor = widgetType ? widgetType.setColor : '#FF0000';\n                            if (widgetType?.label) {\n                                widgetLabel = I18n.t(widgetType.label);\n                            }\n\n                            // remove legacy stuff\n                            widgetLabel = widgetLabel.split('<br')[0];\n                            widgetLabel = widgetLabel.split('<span')[0];\n                            widgetLabel = widgetLabel.split('<div')[0];\n\n                            let setLabel = widgetType?.set;\n                            if (widgetType?.setLabel) {\n                                setLabel = I18n.t(widgetType.setLabel);\n                            } else if (setLabel) {\n                                const widgetWithSetLabel = widgetTypes.find(w => w.set === setLabel && w.setLabel);\n                                if (widgetWithSetLabel) {\n                                    widgetColor = widgetWithSetLabel.setColor;\n                                    setLabel = I18n.t(widgetWithSetLabel.setLabel);\n                                }\n                            }\n\n                            let widgetIcon = widgetType ? (widgetType.preview || '') : 'icon/question.svg';\n                            if (widgetIcon.startsWith('<img')) {\n                                const prev = widgetIcon.match(/src=\"([^\"]+)\"/);\n                                if (prev && prev[1]) {\n                                    widgetIcon = prev[1];\n                                }\n                            }\n                            let name;\n                            if (widgets[widgetId] && widgets[widgetId].data?.name) {\n                                name = <span>\n                                    <span>{widgets[widgetId].data?.name}</span>\n                                    <span\n                                        style={{\n                                            marginLeft: 4,\n                                            fontSize: 10,\n                                            fontStyle: 'italic',\n                                            opacity: 0.8,\n                                        }}\n                                    >\n                                        {`[${widgetId}]`}\n                                    </span>\n                                </span>;\n                            } else {\n                                name = widgetId;\n                            }\n\n                            let subName = widgetType ? `(${setLabel} - ${tpl === '_tplGroup' ? I18n.t('group') : widgetLabel})` : tpl;\n\n                            if (widgets[widgetId].marketplace) {\n                                subName = `${widgets[widgetId].marketplace.name} (${I18n.t('version')} ${widgets[widgetId].marketplace.version})`;\n                            }\n\n                            return {\n                                name,\n                                subName,\n                                value: widgetId,\n                                color: widgetColor,\n                                icon: widgetIcon.startsWith('<') ? '' : widgetIcon,\n                            };\n                        }),\n                    width: 240,\n                    value: props.selectedWidgets,\n                    onChange: value => props.setSelectedWidgets(value),\n                },\n                [\n                    [\n                        {\n                            type: 'icon-button',\n                            Icon: DeleteIcon,\n                            name: 'Delete widgets',\n                            disabled: !props.selectedWidgets.length || (props.selectedGroup && props.selectedWidgets.includes(props.selectedGroup)),\n                            onClick: () => props.deleteWidgets(),\n                        },\n                    ],\n                    [\n                        {\n                            type: 'icon-button',\n                            Icon: FileCopyIcon,\n                            name: 'Clone widget',\n                            disabled: !props.selectedWidgets.length || (props.selectedGroup && props.selectedWidgets.includes(props.selectedGroup)),\n                            onClick: () => props.cloneWidgets(),\n                        },\n                    ],\n                ],\n\n                { type: 'divider' },\n\n                [[\n                    {\n                        type: 'icon-button',\n                        Icon: BiCut,\n                        name: 'Cut',\n                        size: 'normal',\n                        disabled: !props.selectedWidgets.length || (props.selectedGroup && props.selectedWidgets.includes(props.selectedGroup)),\n                        onClick: () => props.cutWidgets(),\n                    },\n                    {\n                        type: 'icon-button',\n                        Icon: BiCopy,\n                        name: 'Copy',\n                        size: 'normal',\n                        disabled: !props.selectedWidgets.length || (props.selectedGroup && props.selectedWidgets.includes(props.selectedGroup)),\n                        onClick: () => props.copyWidgets(),\n                    },\n                ], [\n                    {\n                        type: 'icon-button',\n                        Icon: BiPaste,\n                        name: 'Paste',\n                        size: 'normal',\n                        disabled: !Object.keys(props.widgetsClipboard.widgets).length,\n                        onClick: () => props.pasteWidgets(),\n                    },\n                ]],\n                {\n                    type: 'icon-button',\n                    Icon: UndoIcon,\n                    name: 'Undo',\n                    subName: `(${props.historyCursor + 1} / ${props.history.length})`,\n                    onClick: props.undo,\n                    disabled: !props.editMode || props.historyCursor === 0,\n                },\n                {\n                    type: 'icon-button',\n                    Icon: RedoIcon,\n                    name: 'Redo',\n                    onClick: props.redo,\n                    disabled: !props.editMode || props.historyCursor === props.history.length - 1,\n                },\n\n                { type: 'divider' },\n\n                [\n                    [\n                        {\n                            type: 'icon-button',\n                            Icon: MdAlignHorizontalLeft,\n                            name: 'Align horizontal/left',\n                            size: 'normal',\n                            disabled: props.selectedWidgets.length < 2,\n                            onClick: () => props.alignWidgets('left'),\n                        },\n                        {\n                            type: 'icon-button',\n                            Icon: MdAlignVerticalTop,\n                            name: 'Align vertical/top',\n                            size: 'normal',\n                            disabled: props.selectedWidgets.length < 2,\n                            onClick: () => props.alignWidgets('top'),\n                        },\n                        {\n                            type: 'icon-button',\n                            Icon: MdAlignHorizontalCenter,\n                            name: 'Align horizontal/center',\n                            size: 'normal',\n                            disabled: props.selectedWidgets.length < 2,\n                            onClick: () => props.alignWidgets('horizontal-center'),\n                        },\n                        {\n                            type: 'icon-button',\n                            Icon: CgArrowAlignH,\n                            name: 'Align horizontal/equal',\n                            size: 'normal',\n                            disabled: props.selectedWidgets.length < 2,\n                            onClick: () => props.alignWidgets('horizontal-equal'),\n                        },\n                        {\n                            type: 'icon-button',\n                            Icon: AiOutlineColumnWidth,\n                            name: 'Align width. Press more time to get the desired width.',\n                            size: 'normal',\n                            disabled: props.selectedWidgets.length < 2,\n                            onClick: () => props.alignWidgets('width'),\n                        },\n                        {\n                            type: 'icon-button',\n                            Icon: RiBringToFront,\n                            name: 'Bring to front',\n                            size: 'normal',\n                            disabled: !props.selectedWidgets.length,\n                            onClick: () => props.orderWidgets('front'),\n                        },\n                    ],\n                    [\n                        {\n                            type: 'icon-button',\n                            Icon: MdAlignHorizontalRight,\n                            name: 'Align horizontal/right',\n                            size: 'normal',\n                            disabled: props.selectedWidgets.length < 2,\n                            onClick: () => props.alignWidgets('right'),\n                        },\n                        {\n                            type: 'icon-button',\n                            Icon: MdAlignVerticalBottom,\n                            name: 'Align vertical/bottom',\n                            size: 'normal',\n                            disabled: props.selectedWidgets.length < 2,\n                            onClick: () => props.alignWidgets('bottom'),\n                        },\n                        {\n                            type: 'icon-button',\n                            Icon: MdAlignVerticalCenter,\n                            name: 'Align vertical/center',\n                            size: 'normal',\n                            disabled: props.selectedWidgets.length < 2,\n                            onClick: () => props.alignWidgets('vertical-center'),\n                        },\n                        {\n                            type: 'icon-button',\n                            Icon: CgArrowAlignV,\n                            name: 'Align vertical/equal',\n                            size: 'normal',\n                            disabled: props.selectedWidgets.length < 2,\n                            onClick: () => props.alignWidgets('vertical-equal'),\n                        },\n                        {\n                            type: 'icon-button',\n                            Icon: AiOutlineColumnHeight,\n                            name: 'Align height. Press more time to get the desired height.',\n                            size: 'normal',\n                            disabled: props.selectedWidgets.length < 2,\n                            onClick: () => props.alignWidgets('height'),\n                        },\n                        {\n                            type: 'icon-button',\n                            Icon: RiSendToBack,\n                            name: 'Send to back',\n                            size: 'normal',\n                            disabled: !props.selectedWidgets.length,\n                            onClick: () => props.orderWidgets('back'),\n                        },\n                    ],\n                ],\n                { type: 'divider' },\n                [\n                    [{\n                        type: 'icon-button',\n                        Icon: OpenInNewIcon,\n                        name: 'Lock dragging',\n                        selected: props.lockDragging,\n                        onClick: () => props.toggleLockDragging(),\n                    }],\n                    [{\n                        type: 'icon-button',\n                        Icon: props.widgetHint === 'hide' ? VisibilityOffIcon : VisibilityIcon,\n                        color: props.widgetHint === 'light' ? 'white' : 'black',\n                        name: `Toggle widget hint (${props.widgetHint})`,\n                        onClick: () => props.toggleWidgetHint(),\n                    }],\n                ],\n                { type: 'divider' },\n                [\n                    [{\n                        type: 'icon-button',\n                        Icon: BiImport,\n                        name: 'Import widgets',\n                        size: 'normal',\n                        disabled: !props.editMode,\n                        onClick: () => setImportDialog(true),\n                    }],\n                    [{\n                        type: 'icon-button',\n                        Icon: BiExport,\n                        name: 'Export widgets',\n                        size: 'normal',\n                        disabled: !props.selectedWidgets.length,\n                        onClick: () => setExportDialog(true),\n                    }],\n                ],\n            ],\n        };\n    }, [\n        props.selectedGroup,\n        props.selectedWidgets,\n        props.editMode,\n        props.lockDragging,\n        props.widgetHint,\n        props.historyCursor,\n        props.history.length,\n        props.widgetsLoaded,\n        props.openedViews.length,\n        store.getState().visProject[props.selectedView],\n    ]);\n\n    if (!props.widgetsLoaded) {\n        return null;\n    }\n    if (!props.openedViews.length) {\n        return null;\n    }\n    if (!store.getState().visProject[props.selectedView]) {\n        return null;\n    }\n\n    return <>\n        <ToolbarItems group={toolbar} {...props} classes={{}} />\n        {importDialog ? <WidgetImportDialog\n            onClose={() => setImportDialog(false)}\n            changeProject={props.changeProject}\n            selectedView={props.selectedView}\n            project={store.getState().visProject}\n            selectedGroup={props.selectedGroup}\n            themeType={props.themeType}\n        /> : null}\n        {exportDialog ? <WidgetExportDialog\n            onClose={() => setExportDialog(false)}\n            widgets={store.getState().visProject[props.selectedView].widgets}\n            selectedWidgets={props.selectedWidgets}\n            themeType={props.themeType}\n        /> : null}\n        {filterDialog ? <WidgetFilterDialog\n            onClose={() => setFilterDialog(false)}\n            changeProject={props.changeProject}\n            selectedView={props.selectedView}\n            project={store.getState().visProject}\n        /> : null}\n    </>;\n};\n\nWidgets.propTypes = {\n    openedViews: PropTypes.array,\n    themeType: PropTypes.string,\n    selectedView: PropTypes.string,\n    selectedWidgets: PropTypes.array,\n    setSelectedWidgets: PropTypes.func,\n    selectedGroup: PropTypes.string,\n};\n\nexport default Widgets;\n","import { useEffect, useState } from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@mui/styles';\n\nimport {\n    Button,\n    Checkbox,\n    FormControl,\n    FormControlLabel,\n    InputLabel,\n    MenuItem,\n    Select,\n    Switch,\n    TextField,\n    FormHelperText,\n} from '@mui/material';\n\nimport { Save as SaveIcon } from '@mui/icons-material';\n\nimport { I18n } from '@iobroker/adapter-react-v5';\n\nimport IODialog from '../Components/IODialog';\nimport { store } from '../Store';\n\nconst styles = () => ({\n    dialog: {\n        width: 400,\n    },\n    field: {\n        display: 'flex',\n        alignItems: 'center',\n        padding: '4px 0px',\n    },\n});\n\nconst Settings = props => {\n    const [projectMode, setProjectMode] = useState(0);\n\n    const [settings, setSettings] = useState({});\n    const [instance, setInstance] = useState(window.localStorage.getItem('visInstance'));\n    /* eslint no-underscore-dangle: 0 */\n    useEffect(() => {\n        const _settings = { ...store.getState().visProject.___settings };\n        if (_settings.reloadOnEdit === undefined) {\n            _settings.reloadOnEdit = true;\n        }\n\n        // read project settings\n        props.socket.readDir(`${props.adapterName}.${props.instance}`, props.projectName)\n            .then(files => {\n                const file = files.find(f => f.file === 'vis-views.json');\n                if (file?.mode || file?.acl?.permissions) {\n                    setProjectMode(file.mode || file.acl.permissions);\n                }\n            });\n\n        setSettings(_settings);\n    }, []);\n\n    const fields = [\n        {\n            type: 'select',\n            name: 'Reload all browsers if project changed',\n            field: 'reloadOnEdit',\n            items: [\n                { value: true, name: 'reload' },\n                { value: false, name: 'no_reload' },\n            ],\n        },\n        {\n            type: 'select',\n            name: 'Reload if sleep longer than',\n            field: 'reloadOnSleep',\n            items: [\n                { value: 0, name: 'never' },\n                { value: 30, name: '30 seconds' },\n                { value: 60, name: '1 minute' },\n                { value: 300, name: '5 minutes' },\n                { value: 600, name: '10 minutes' },\n                { value: 1800, name: '30 minutes' },\n                { value: 3600, name: '1 hour' },\n                { value: 7200, name: '2 hours' },\n                { value: 10800, name: '3 hours' },\n                { value: 21600, name: '6 hours' },\n                { value: 43200, name: '12 hours' },\n                { value: 86400, name: '1 day' },\n            ],\n        },\n        {\n            type: 'select',\n            name: 'Reconnect interval',\n            field: 'reconnectInterval',\n            items: [\n                { value: 1000, name: '1 second' },\n                { value: 2000, name: '2 seconds' },\n                { value: 5000, name: '5 seconds' },\n                { value: 10000, name: '10 seconds' },\n                { value: 20000, name: '20 seconds' },\n                { value: 30000, name: '30 seconds' },\n                { value: 60000, name: '1 minute' },\n            ],\n        },\n        { type: 'checkbox', name: 'Dark reconnect screen', field: 'darkReloadScreen' },\n        {\n            type: 'select',\n            name: 'Destroy inactive view',\n            field: 'destroyViewsAfter',\n            items: [\n                { value: 0, name: 'never' },\n                { value: 1, name: '1 second' },\n                { value: 5, name: '5 seconds' },\n                { value: 10, name: '10 seconds' },\n                { value: 20, name: '20 seconds' },\n                { value: 30, name: '30 seconds' },\n                { value: 60, name: '1 minute' },\n                { value: 300, name: '5 minutes' },\n                { value: 600, name: '10 minutes' },\n                { value: 1800, name: '30 minutes' },\n                { value: 3600, name: '1 hour' },\n                { value: 7200, name: '2 hours' },\n                { value: 10800, name: '3 hours' },\n                { value: 21600, name: '6 hours' },\n                { value: 43200, name: '12 hours' },\n                { value: 86400, name: '1 day' },\n            ],\n        },\n        { name: 'States Debounce Time (millis)', field: 'statesDebounceTime', type: 'number' },\n        {\n            type: 'raw',\n            Node: <>\n                <TextField variant=\"standard\" label={I18n.t('Browser instance ID')} value={instance || ''} onChange={e => setInstance(e.target.value)} />\n                <Button\n                    variant=\"contained\"\n                    color=\"grey\"\n                    onClick={() => {\n                        let newInstance = (Math.random() * 4294967296).toString(16);\n                        newInstance = `0000000${newInstance}`;\n                        newInstance = newInstance.substring(newInstance.length - 8);\n                        window.localStorage.setItem('visInstance', newInstance);\n                        window.vis.instance = newInstance;\n                        setInstance(newInstance);\n                    }}\n                >\n                    {I18n.t('Create instance')}\n                </Button>\n            </>,\n        },\n        { type: 'switchMode' }, // very specific control\n        {\n            type: 'select',\n            name: 'Body overflow',\n            field: 'bodyOverflow',\n            help: 'Default: auto',\n            noTranslate: true,\n            items: [\n                { value: 'auto', name: 'auto' },\n                { value: 'scroll', name: 'scroll' },\n                { value: 'hidden', name: 'hidden' },\n                { value: 'visible', name: 'visible' },\n            ],\n        },\n    ];\n\n    const save = () => {\n        const project = JSON.parse(JSON.stringify(store.getState().visProject));\n        project.___settings = settings;\n        props.changeProject(project);\n        props.onClose();\n    };\n\n    return <IODialog\n        open={!0}\n        onClose={props.onClose}\n        title=\"Settings\"\n        ActionIcon={SaveIcon}\n        action={save}\n        actionTitle=\"Save\"\n        actionDisabled={JSON.stringify(store.getState().visProject.___settings) === JSON.stringify(settings)}\n    >\n        <div className={props.classes.dialog}>\n            {fields.map((field, key) => {\n                const value = settings[field.field];\n\n                const change = changeValue => {\n                    const newSettings = JSON.parse(JSON.stringify(settings));\n                    newSettings[field.field] = changeValue;\n                    setSettings(newSettings);\n                };\n\n                let result;\n\n                if (field.type === 'checkbox') {\n                    result = <FormControlLabel\n                        control={<Checkbox checked={!!value} onChange={e => change(e.target.checked)} />}\n                        label={I18n.t(field.name)}\n                    />;\n                } else if (field.type === 'select') {\n                    result = <FormControl\n                        variant=\"standard\"\n                        fullWidth\n                    >\n                        <InputLabel>{I18n.t(field.name)}</InputLabel>\n                        <Select variant=\"standard\" value={value || ''} onChange={e => change(e.target.value)}>\n                            {field.items.map(selectItem => <MenuItem\n                                value={selectItem.value}\n                                key={selectItem.value}\n                            >\n                                {field.noTranslate ? selectItem.name : I18n.t(selectItem.name)}\n                            </MenuItem>)}\n                        </Select>\n                        {field.help ? <FormHelperText>{I18n.t(field.help)}</FormHelperText> : null}\n                    </FormControl>;\n                } else if (field.type === 'raw') {\n                    result = field.Node;\n                } else if (field.type === 'switchMode') {\n                    result = <FormControlLabel\n                        label={I18n.t('Available for all')}\n                        control={<Switch\n                            // eslint-disable-next-line no-bitwise\n                            checked={!!(projectMode & 0x60)}\n                            onChange={e => {\n                                // eslint-disable-next-line no-bitwise\n                                props.socket.getRawSocket().emit(\n                                    'chmodFile',\n                                    `${props.adapterName}.${props.instance}`,\n                                    `${props.projectName}/*`,\n                                    { mode: e.target.checked ? 0x644 : 0x600 },\n                                    (err, files) => {\n                                        if (err) {\n                                            window.alert(err);\n                                        } else {\n                                            const file = files.find(f => f.file === 'vis-views.json');\n                                            if (file?.mode || file?.acl?.permissions) {\n                                                setProjectMode(file.mode || file.acl.permissions);\n                                            }\n                                        }\n                                    },\n                                );\n                            }}\n                        />}\n                    />;\n                } else {\n                    result = <TextField\n                        variant=\"standard\"\n                        fullWidth\n                        value={value || ''}\n                        onChange={e => change(e.target.value)}\n                        label={I18n.t(field.name)}\n                        helperText={field.help ? I18n.t(field.help) : null}\n                        type={field.type}\n                    />;\n                }\n\n                return <div key={key} className={props.classes.field}>{result}</div>;\n            })}\n        </div>\n    </IODialog>;\n};\n\nSettings.propTypes = {\n    changeProject: PropTypes.func,\n    classes: PropTypes.object,\n    onClose: PropTypes.func,\n    socket: PropTypes.object,\n    adapterName: PropTypes.string,\n    instance: PropTypes.number,\n    projectName: PropTypes.string,\n};\n\nexport default withStyles(styles)(Settings);\n","import PropTypes from 'prop-types';\nimport { useState } from 'react';\nimport {\n    TextField,\n} from '@mui/material';\n\nimport { BiImport } from 'react-icons/bi';\n\nimport { I18n, Confirm as ConfirmDialog } from '@iobroker/adapter-react-v5';\n\nimport UploadFile from '../../Components/UploadFile';\nimport IODialog from '../../Components/IODialog';\n\nexport const getLiveHost = async socket => {\n    const res = await socket.getObjectViewSystem('host', 'system.host.', 'system.host.\\u9999');\n    const hosts = Object.keys(res).map(id => `${id}.alive`);\n    if (!hosts.length) {\n        return null;\n    }\n    const states = await socket.getForeignStates(hosts);\n    for (const h in states) {\n        if (states[h]?.val) {\n            return h.substring(0, h.length - '.alive'.length);\n        }\n    }\n\n    return null;\n};\n\nconst ImportProjectDialog = props => {\n    const [projectName, setProjectName] = useState('');\n    const [projectData, setProjectData] = useState(null);\n    const [showConfirmation, setShowConfirmation] = useState(false);\n    const [askOpenProject, setAskOpenProject] = useState(false);\n    const [working, setWorking] = useState(false);\n\n    const importProject = () => {\n        if (props.projects.includes(projectName) && !showConfirmation) {\n            setShowConfirmation(true);\n            return false;\n        }\n\n        setWorking(true);\n\n        getLiveHost(props.socket)\n            .then(host => {\n                if (!host) {\n                    window.alert(I18n.t('No live hosts found!'));\n                    setWorking(false);\n                    return;\n                }\n\n                let timeout = setTimeout(() => {\n                    timeout = null;\n                    setWorking(false);\n                    window.alert(I18n.t('Cannot upload project: timeout'));\n                }, 60_000);\n\n                props.socket.getRawSocket().emit('sendToHost', host, 'writeDirAsZip', {\n                    id: `${props.adapterName}.${props.instance}`,\n                    name: projectName || 'main',\n                    data: projectData.split(',')[1],\n                }, async result => {\n                    setWorking(false);\n                    timeout && clearTimeout(timeout);\n                    timeout = null;\n\n                    if (result.error) {\n                        window.alert(I18n.t('Cannot upload project: %s', result.error));\n                    } else if (props.projectName !== projectName || props.openNewProjectOnCreate) {\n                        if (props.openNewProjectOnCreate) {\n                            props.onClose(true, projectName); // open the new project immediately\n                        } else {\n                            await props.refreshProjects(false);\n                            setAskOpenProject(true);\n                        }\n                    } else {\n                        await props.refreshProjects(true);\n                        props.onClose(true, projectName);\n                    }\n                });\n            });\n\n        return false;\n    };\n\n    const confirmDialog = showConfirmation ? <ConfirmDialog\n        title={I18n.t('Project already exists.')}\n        text={I18n.t('Do you want to overwrite it?')}\n        ok={I18n.t('Overwrite')}\n        cancel={I18n.t('Cancel')}\n        onClose={isYes => {\n            setShowConfirmation(false);\n            isYes && importProject();\n        }}\n    /> : null;\n\n    const askOpenDialog = askOpenProject ? <ConfirmDialog\n        title={I18n.t('Project \"%s\" was successfully imported', projectName)}\n        text={I18n.t('Open it?', projectName)}\n        ok={I18n.t('Open')}\n        cancel={I18n.t('Ignore')}\n        onClose={isYes => {\n            setAskOpenProject(false);\n            isYes && props.loadProject(projectName);\n            props.onClose(isYes, projectName);\n        }}\n    /> : null;\n\n    return <IODialog\n        title=\"Import project\"\n        open={!0}\n        onClose={() => props.onClose()}\n        actionNoClose\n        action={importProject}\n        actionTitle=\"Import\"\n        ActionIcon={BiImport}\n        actionDisabled={!projectName?.length || !projectData || working}\n        closeDisabled={working}\n    >\n        <UploadFile\n            disabled={working}\n            themeType={props.themeType}\n            onUpload={(name, data) => {\n                if (name.match(/^\\d\\d\\d\\d-\\d\\d-\\d\\d-/)) {\n                    setProjectName(name.substring(11).replace(/\\.zip$/i, ''));\n                } else {\n                    setProjectName(name.replace(/\\.zip$/i, ''));\n                }\n                setProjectData(data);\n            }}\n            accept={{\n                'application/zip': ['.zip'],\n            }}\n        />\n        <div style={{ marginTop: 10 }}>\n            <TextField\n                variant=\"standard\"\n                fullWidth\n                disabled={working}\n                label={I18n.t('Project name')}\n                helperText={props.projects.includes(projectName) ? I18n.t('Project already exists') : ''}\n                error={props.projects.includes(projectName)}\n                value={projectName}\n                onChange={e => setProjectName(e.target.value.replace(/[^\\da-zA-Z\\-_.]/, ''))}\n            />\n        </div>\n        {confirmDialog}\n        {askOpenDialog}\n    </IODialog>;\n};\n\nImportProjectDialog.propTypes = {\n    onClose: PropTypes.func,\n    projectName: PropTypes.string,\n    refreshProjects: PropTypes.func,\n    socket: PropTypes.object,\n    themeType: PropTypes.string,\n    loadProject: PropTypes.func,\n    adapterName: PropTypes.string,\n    instance: PropTypes.number,\n    openNewProjectOnCreate: PropTypes.bool,\n};\n\nexport default ImportProjectDialog;\n","import PropTypes from 'prop-types';\n\nimport {\n    TextField,\n} from '@mui/material';\n\nimport {\n    Add as AddIcon,\n    Edit as EditIcon,\n    Delete as DeleteIcon,\n} from '@mui/icons-material';\n\nimport { I18n } from '@iobroker/adapter-react-v5';\n\nimport IODialog from '../../Components/IODialog';\nimport { useFocus } from '../../Utils';\n\nconst ProjectDialog = props => {\n    const inputField = useFocus(props.dialog && props.dialog !== 'delete', props.dialog === 'add');\n\n    if (!props.dialog) {\n        return null;\n    }\n\n    const dialogTitles = {\n        delete: I18n.t('Do you want to delete project \"%s\"?', props.dialogProject),\n        rename: I18n.t('Rename project \"%s\"', props.dialogProject),\n        add: I18n.t('Add project'),\n    };\n\n    const dialogButtons = {\n        delete: I18n.t('Delete'),\n        rename: I18n.t('Rename'),\n        add: I18n.t('Add'),\n    };\n\n    const addProject = () => props.addProject(props.dialogName);\n\n    const deleteProject = () => props.deleteProject(props.dialogProject);\n\n    const renameProject = () => props.renameProject(props.dialogProject, props.dialogName);\n\n    const dialogActions = {\n        delete: deleteProject,\n        rename: renameProject,\n        add: addProject,\n    };\n\n    const dialogInputs = {\n        rename: I18n.t('New name'),\n        add: I18n.t('Name'),\n    };\n\n    const dialogIcons = {\n        delete: DeleteIcon,\n        rename: EditIcon,\n        add: AddIcon,\n    };\n\n    const DialogIcon = dialogIcons[props.dialog];\n\n    let dialogDisabled = false;\n    if (props.dialog !== 'delete') {\n        dialogDisabled = props.dialogName === '' || props.projects.includes(props.dialogName);\n    }\n\n    return <IODialog\n        title={dialogTitles[props.dialog]}\n        actionTitle={dialogButtons[props.dialog]}\n        noTranslation\n        open={!!props.dialog}\n        onClose={() => {\n            props.setDialog(null);\n            props.setDialogProject(null);\n        }}\n        ActionIcon={DialogIcon || null}\n        action={dialogActions[props.dialog]}\n        actionColor={props.dialog === 'delete' ? 'secondary' : 'primary'}\n        actionDisabled={dialogDisabled}\n    >\n        {props.dialog === 'delete' ? null\n            : <TextField\n                variant=\"standard\"\n                label={dialogInputs[props.dialog]}\n                inputRef={inputField}\n                fullWidth\n                value={props.dialogName}\n                onChange={e => props.setDialogName(e.target.value)}\n            /> }\n    </IODialog>;\n};\n\nProjectDialog.propTypes = {\n    dialog: PropTypes.string,\n    dialogProject: PropTypes.string,\n    dialogName: PropTypes.string,\n    setDialog: PropTypes.func,\n    setDialogProject: PropTypes.func,\n    setDialogName: PropTypes.func,\n};\n\nexport default ProjectDialog;\n","import React from 'react';\n\nimport {\n    Check as SaveIcon,\n    Info as InfoIcon,\n} from '@mui/icons-material';\nimport {\n    Checkbox,\n} from '@mui/material';\nimport Card from '@mui/material/Card';\nimport CardHeader from '@mui/material/CardHeader';\nimport IconButton from '@mui/material/IconButton';\nimport CardContent from '@mui/material/CardContent';\nimport KeyboardArrowDownIcon from '@mui/icons-material/KeyboardArrowDown';\nimport KeyboardArrowUpIcon from '@mui/icons-material/KeyboardArrowUp';\nimport Collapse from '@mui/material/Collapse';\nimport { type LegacyConnection, I18n } from '@iobroker/adapter-react-v5';\nimport {\n    AnyWidgetId, Permissions, Project, Widget,\n} from '@/types';\nimport { store } from '@/Store';\nimport { deepClone, DEFAULT_PERMISSIONS } from '@/Utils/utils';\nimport IODialog from '../../Components/IODialog';\n\ninterface PermissionsDialogProps {\n    /** Function called when dialog is closed */\n    onClose: () => void;\n    /** Modify the active project */\n    changeProject: (project: Project) => void;\n    /** The socket connection */\n    socket: LegacyConnection;\n}\n\n/** Permissions assignment to username */\ntype PermissionsMap = Map<string, Permissions>\n\ninterface PermissionsDialogState {\n    /** Contains all existing users */\n    users: string[];\n    /** Permissions for each user for the current project */\n    projectPermissions: PermissionsMap;\n    /** The permissions assignment to users for each view */\n    viewPermissions: Record<string, PermissionsMap>;\n    /** The permissions assignment to users for each widget */\n    widgetPermissions: Record<string, PermissionsMap>;\n    /** Id for each card and open status */\n    cardOpen: Record<string, boolean>;\n}\n\ninterface RenderViewPermissionsOptions {\n    /** The user which the permissions should be shown for */\n    user: string;\n    /** The currently logged-in user */\n    activeUser: string;\n    /** The view the permissions should be rendered for */\n    view: string;\n    /** The current project */\n    visProject: Project;\n}\n\ninterface RenderWidgetPermissionsOptions extends RenderViewPermissionsOptions {\n    /** The widget id */\n    wid: AnyWidgetId;\n    /** The widget */\n    widget: Widget;\n}\n\nexport default class PermissionsDialog extends React.Component<PermissionsDialogProps, PermissionsDialogState> {\n    /** Admin user cannot be disabled */\n    private adminUser = 'admin';\n\n    constructor(props: PermissionsDialogProps) {\n        super(props);\n\n        this.state = {\n            users: [],\n            projectPermissions: new Map(),\n            viewPermissions: {},\n            widgetPermissions: {},\n            cardOpen: {},\n        };\n    }\n\n    /**\n     * Lifecycle hook called when component is mounted\n     */\n    async componentDidMount(): Promise<void> {\n        const userView: Record<string, ioBroker.UserObject> = await this.props.socket.getObjectViewSystem('user', 'system.user.', 'system.user.\\u9999') as Record<string, ioBroker.UserObject>;\n        const { visProject } = store.getState();\n        const projectPermissions = new Map<string, Permissions>();\n        const viewPermissions: Record<string, PermissionsMap> = {};\n        const widgetPermissions: Record<string, PermissionsMap> = {};\n\n        const adminObj = Object.values(userView).find(obj => obj._id === 'system.user.admin');\n        this.adminUser = adminObj?.common.name || this.adminUser;\n\n        for (const user of Object.keys(userView)) {\n            projectPermissions.set(user, visProject.___settings.permissions?.[user] ?? DEFAULT_PERMISSIONS);\n\n            for (const [viewName, view] of Object.entries(visProject)) {\n                if (viewName === '___settings') {\n                    continue;\n                }\n\n                if (!viewPermissions[viewName]) {\n                    viewPermissions[viewName] = new Map<string, Permissions>();\n                }\n\n                viewPermissions[viewName].set(user, view.settings?.permissions?.[user] ?? DEFAULT_PERMISSIONS);\n\n                for (const [wid, widget] of Object.entries(view.widgets)) {\n                    if (!widgetPermissions[wid]) {\n                        widgetPermissions[wid] = new Map<string, Permissions>();\n                    }\n\n                    widgetPermissions[wid].set(user, widget.permissions?.[user] ?? DEFAULT_PERMISSIONS);\n                }\n            }\n        }\n\n        this.setState({\n            users: Object.keys(userView), projectPermissions, viewPermissions, widgetPermissions,\n        });\n    }\n\n    /**\n     * On save temporary values are set to the store\n     */\n    onSave(): void {\n        const project = deepClone(store.getState().visProject);\n\n        if (project.___settings.permissions === undefined) {\n            project.___settings.permissions = {};\n        }\n\n        for (const [user, permissions] of this.state.projectPermissions) {\n            if (user === this.adminUser) {\n                continue;\n            }\n\n            project.___settings.permissions[user] = permissions;\n\n            for (const [viewName, view] of Object.entries(project)) {\n                if (viewName === '___settings') {\n                    continue;\n                }\n\n                if (view.settings === undefined) {\n                    view.settings = {};\n                }\n\n                if (view.settings.permissions === undefined) {\n                    view.settings.permissions = {};\n                }\n\n                view.settings.permissions[user] = this.state.viewPermissions[viewName].get(user) ?? DEFAULT_PERMISSIONS;\n\n                for (const [wid, widget] of Object.entries(view.widgets)) {\n                    if (widget.permissions === undefined) {\n                        widget.permissions = {};\n                    }\n\n                    widget.permissions[user] = this.state.widgetPermissions[wid].get(user) ?? DEFAULT_PERMISSIONS;\n                }\n            }\n        }\n\n        this.props.changeProject(project);\n        this.props.onClose();\n    }\n\n    /**\n     * Render the info dialog\n     */\n    static renderInfoDialog(): React.JSX.Element {\n        return <div style={{\n            display: 'inline-flex', alignItems: 'center', border: '1px solid', borderRadius: '5px', width: '100%',\n        }}\n        >\n            <InfoIcon sx={{ margin: '4px' }} />\n            <div style={{ margin: '6px', fontSize: '12px' }}>\n                <p style={{ margin: 0 }}>\n                    {I18n.t('Only the admin user can change permissions')}\n                    <br />\n                    {I18n.t('Read = Runtime access')}\n                    <br />\n                    {I18n.t('Write = Edit mode access')}\n                </p>\n            </div>\n        </div>;\n    }\n\n    /**\n     * Render the widget permissions\n     *\n     * @param options project, wid, user and view info\n     */\n    renderWidgetPermissions(options: RenderWidgetPermissionsOptions): React.JSX.Element {\n        const {\n            view, user, activeUser, wid, widget,\n        } = options;\n\n        return <div style={{ display: 'flex' }} key={`${user}-${view}-${wid}`}>\n            <p style={{ margin: 'auto', fontSize: 12 }}>{`${widget.data.name ? `${widget.data.name} (${wid})` : wid}:`}</p>\n            <div style={{\n                width: '100%',\n                alignSelf: 'center',\n                display: 'flex',\n                justifyContent: 'flex-end',\n                alignItems: 'center',\n            }}\n            >\n                <Checkbox\n                    disabled={user === this.adminUser || activeUser !== this.adminUser || !this.state.projectPermissions.get(user)?.read || !this.state.viewPermissions[view].get(user)?.read}\n                    checked={this.state.widgetPermissions[wid]?.get(user)?.read}\n                    onClick={() => {\n                        const newState = this.state;\n                        const currVal = this.state.widgetPermissions[wid].get(user);\n\n                        newState.widgetPermissions[wid].set(user, {\n                            read: !currVal?.read,\n                            write: !!currVal?.write,\n                        });\n                        this.setState(newState);\n                    }}\n                />\n                {I18n.t('Read')}\n                <Checkbox\n                    disabled={user === this.adminUser || activeUser !== this.adminUser || !this.state.projectPermissions.get(user)?.write || !this.state.viewPermissions[view].get(user)?.write}\n                    checked={this.state.widgetPermissions[wid]?.get(user)?.write}\n                    onClick={() => {\n                        const newState = this.state;\n                        const currVal = this.state.widgetPermissions[wid].get(user);\n\n                        newState.widgetPermissions[wid].set(user, {\n                            read: !!currVal?.read,\n                            write: !currVal?.write,\n                        });\n                        this.setState(newState);\n                    }}\n                />\n                {I18n.t('Write')}\n            </div>\n        </div>;\n    }\n\n    /**\n     * Render the view permissions dialog\n     *\n     * @param options information about view and user\n     */\n    renderViewPermissions(options: RenderViewPermissionsOptions): React.JSX.Element {\n        const {\n            view, user, activeUser, visProject,\n        } = options;\n\n        const viewId = `${user}-${view}`;\n\n        return <Card sx={{ border: '1px solid rgba(211,211,211,0.6)', marginTop: '5px' }}>\n            <CardHeader\n                title={view}\n                titleTypographyProps={{ fontWeight: 'bold', fontSize: 12 }}\n                action={<div\n                    style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}\n                    key={viewId}\n                >\n                    <div style={{ display: 'flex' }}>\n                        <div style={{\n                            width: '100%',\n                            alignSelf: 'center',\n                            display: 'flex',\n                            justifyContent: 'flex-end',\n                            alignItems: 'center',\n                        }}\n                        >\n                            <Checkbox\n                                disabled={user === this.adminUser || activeUser !== this.adminUser || !this.state.projectPermissions.get(user)?.read}\n                                checked={this.state.viewPermissions[view]?.get(user)?.read}\n                                onClick={() => {\n                                    const newState = this.state;\n                                    const currVal = this.state.viewPermissions[view].get(user);\n\n                                    newState.viewPermissions[view].set(user, {\n                                        read: !currVal?.read,\n                                        write: !!currVal?.write,\n                                    });\n                                    this.setState(newState);\n                                }}\n                            />\n                            {I18n.t('Read')}\n                            <Checkbox\n                                disabled={user === this.adminUser || activeUser !== this.adminUser || !this.state.projectPermissions.get(user)?.write}\n                                checked={this.state.viewPermissions[view]?.get(user)?.write}\n                                onClick={() => {\n                                    const newState = this.state;\n                                    const currVal = this.state.viewPermissions[view].get(user);\n\n                                    newState.viewPermissions[view].set(user, {\n                                        read: !!currVal?.read,\n                                        write: !currVal?.write,\n                                    });\n                                    this.setState(newState);\n                                }}\n                            />\n                            {I18n.t('Write')}\n                        </div>\n                        <IconButton\n                            onClick={() => {\n                                this.setState({\n                                    cardOpen: {\n                                        ...this.state.cardOpen,\n                                        [viewId]: !this.state.cardOpen[viewId],\n                                    },\n                                });\n                            }}\n                            aria-label=\"expand\"\n                            size=\"small\"\n                        >\n                            {this.state.cardOpen[viewId] ? <KeyboardArrowUpIcon /> : <KeyboardArrowDownIcon />}\n                        </IconButton>\n                    </div>\n                </div>}\n            />\n            <Collapse\n                in={this.state.cardOpen[viewId]}\n                sx={{ borderTop: '1px solid rgba(211,211,211,0.6)' }}\n            >\n                <CardContent>\n                    {this.state.cardOpen[viewId] ? Object.entries(visProject[view].widgets).map(([wid, widget]) => this.renderWidgetPermissions({ ...options, wid: wid as AnyWidgetId, widget })) : null}\n                </CardContent>\n            </Collapse>\n        </Card>;\n    }\n\n    /**\n     * Render the actual component\n     */\n    render(): React.JSX.Element {\n        const { activeUser, visProject } = store.getState();\n\n        return <IODialog\n            title=\"Permissions\"\n            open={!0}\n            onClose={() => this.props.onClose()}\n            actionNoClose\n            action={() => this.onSave()}\n            actionTitle=\"Save\"\n            ActionIcon={SaveIcon}\n            actionDisabled={false}\n            closeDisabled={false}\n            minWidth=\"600px\"\n        >\n            {PermissionsDialog.renderInfoDialog()}\n            {this.state.users.map(user =>\n                <Card sx={{ border: '1px solid rgba(211,211,211,0.6)', marginTop: '5px' }}>\n                    <CardHeader\n                        title={user}\n                        titleTypographyProps={{ fontWeight: 'bold', fontSize: 12 }}\n                        action={<div\n                            style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}\n                            key={user}\n                        >\n                            <div>\n                                <Checkbox\n                                    disabled={user === this.adminUser || activeUser !== this.adminUser}\n                                    checked={this.state.projectPermissions.get(user)?.read}\n                                    onClick={() => {\n                                        const newState = this.state;\n                                        const currVal = this.state.projectPermissions.get(user);\n\n                                        newState.projectPermissions.set(user, {\n                                            read: !currVal?.read,\n                                            write: !!currVal?.write,\n                                        });\n                                        this.setState(newState);\n                                    }}\n                                />\n                                {I18n.t('Read')}\n                                <Checkbox\n                                    disabled={user === this.adminUser || activeUser !== this.adminUser}\n                                    checked={this.state.projectPermissions.get(user)?.write}\n                                    onClick={() => {\n                                        const newState = this.state;\n                                        const currVal = this.state.projectPermissions.get(user);\n\n                                        newState.projectPermissions.set(user, {\n                                            read: !!currVal?.read,\n                                            write: !currVal?.write,\n                                        });\n                                        this.setState(newState);\n                                    }}\n                                />\n                                {I18n.t('Write')}\n\n                                <IconButton\n                                    onClick={() => {\n                                        this.setState({\n                                            cardOpen: {\n                                                ...this.state.cardOpen,\n                                                [user]: !this.state.cardOpen[user],\n                                            },\n                                        });\n                                    }}\n                                    aria-label=\"expand\"\n                                    size=\"small\"\n                                >\n                                    {this.state.cardOpen[user] ? <KeyboardArrowUpIcon /> : <KeyboardArrowDownIcon />}\n                                </IconButton>\n                            </div>\n                        </div>}\n                    >\n                    </CardHeader>\n                    <Collapse\n                        in={this.state.cardOpen[user]}\n                        sx={{ borderTop: '1px solid rgba(211,211,211,0.6)' }}\n                    >\n                        <CardContent>\n                            {this.state.cardOpen[user] ? Object.keys(visProject).map(view => (view === '___settings' ? null : this.renderViewPermissions({\n                                visProject, view, user, activeUser,\n                            }))) : null}\n                        </CardContent>\n                    </Collapse>\n                </Card>)}\n        </IODialog>;\n    }\n}\n","import PropTypes from 'prop-types';\nimport { useState } from 'react';\nimport {\n    AppBar, Button, IconButton, Tooltip, Menu, MenuItem, CircularProgress,\n} from '@mui/material';\nimport { withStyles } from '@mui/styles';\n\nimport {\n    Add as AddIcon,\n    Edit as EditIcon,\n    Delete as DeleteIcon,\n    FileCopy as IconDocument,\n    Person as PermissionsIcon,\n} from '@mui/icons-material';\nimport { BiImport, BiExport } from 'react-icons/bi';\n\nimport { I18n, Utils } from '@iobroker/adapter-react-v5';\n\nimport IODialog from '../../Components/IODialog';\nimport ImportProjectDialog, { getLiveHost } from './ImportProjectDialog';\nimport ProjectDialog from './ProjectDialog';\nimport PermissionsDialog from './PermissionsDialog';\n\nconst styles = theme => ({\n    projectBlock: {\n        display: 'flex',\n        alignItems: 'center',\n    },\n    projectButton: {\n        justifyContent: 'left',\n        textTransform: 'none',\n    },\n    viewManageButtonActions: {\n        textAlign: 'right',\n        width: 220,\n    },\n    dialog: {\n        minWidth: 400,\n        minHeight: 300,\n    },\n    topBar: {\n        flexDirection: 'row',\n        borderRadius: 4,\n        marginBottom: 12,\n    },\n    tooltip: {\n        pointerEvents: 'none',\n    },\n    button: {\n        margin: 4,\n    },\n    '@keyframes my-blink': {\n        '0%': {\n            backgroundColor: theme.palette.primary.light,\n        },\n        '50%': {\n            backgroundColor: theme.palette.secondary.main,\n        },\n    },\n    blink: {\n        animation: '$my-blink 3s infinite',\n    },\n});\n\nconst ProjectsManage = props => {\n    const [dialog, setDialog] = useState(null);\n    const [dialogName, setDialogName] = useState('');\n    const [dialogProject, setDialogProject] = useState(null);\n    const [showExportDialog, setShowExportDialog] = useState(null);\n    const [showPermissionsDialog, setShowPermissionsDialog] = useState(false);\n    const [anchorEl, setAnchorEl] = useState(null);\n    const [working, setWorking] = useState(false);\n\n    const [importDialog, setImportDialog] = useState(false);\n\n    if (!props.projects) {\n        return null;\n    }\n\n    const showDialog = (type, project) => {\n        project = project || props.selectedView;\n\n        const dialogDefaultName = {\n            add: 'New project',\n            rename: project,\n        };\n\n        setDialog(type);\n        setDialogProject(project);\n        setDialogName(dialogDefaultName[type]);\n    };\n\n    const exportProject = async (projectName, isAnonymize) => {\n        setWorking(projectName);\n        const host = await getLiveHost(props.socket);\n\n        if (!host) {\n            setWorking(false);\n            window.alert(I18n.t('No live hosts found!'));\n            return;\n        }\n\n        // to do find active host\n        props.socket.getRawSocket().emit('sendToHost', host, 'readDirAsZip', {\n            id: `${props.adapterName}.${props.instance}`,\n            name: projectName || 'main',\n            options: {\n                settings: isAnonymize,\n            },\n        }, data => {\n            if (data.error) {\n                setWorking(false);\n                window.alert(data.error);\n            } else {\n                const d = new Date();\n                let date = d.getFullYear();\n                let m = d.getMonth() + 1;\n                if (m < 10) {\n                    m = `0${m}`;\n                }\n                date += `-${m}`;\n                m = d.getDate();\n                if (m < 10) {\n                    m = `0${m}`;\n                }\n                date += `-${m}-`;\n                setWorking(false);\n                window.$('body').append(`<a id=\"zip_download\" href=\"data: application/zip;base64,${data.data}\" download=\"${date}${projectName}.zip\"></a>`);\n                document.getElementById('zip_download').click();\n                document.getElementById('zip_download').remove();\n            }\n        });\n    };\n\n    const exportDialog = <Menu\n        onClose={() => setShowExportDialog(false)}\n        open={!!showExportDialog}\n        anchorEl={anchorEl}\n    >\n        <MenuItem\n            onClick={async () => {\n                setAnchorEl(null);\n                setShowExportDialog(null);\n                await exportProject(showExportDialog);\n            }}\n        >\n            {I18n.t('normal')}\n        </MenuItem>\n        <MenuItem\n            onClick={async () => {\n                setAnchorEl(null);\n                setShowExportDialog(null);\n                await exportProject(showExportDialog, true);\n            }}\n        >\n            {I18n.t('anonymize')}\n        </MenuItem>\n    </Menu>;\n\n    return props.open ? <IODialog\n        open={!0}\n        onClose={props.onClose}\n        title=\"Manage projects\"\n        closeTitle=\"Close\"\n        closeDisabled={!props.projects.length || working}\n    >\n        <div className={props.classes.dialog}>\n            <AppBar position=\"static\" className={props.classes.topBar}>\n                <Tooltip title={I18n.t('Add')} size=\"small\" classes={{ popper: props.classes.tooltip }}>\n                    <IconButton onClick={() => showDialog('add')} size=\"small\" className={Utils.clsx(props.classes.button, !props.projects.length && props.classes.blink)}>\n                        <AddIcon />\n                    </IconButton>\n                </Tooltip>\n                <Tooltip title={I18n.t('Import')} classes={{ popper: props.classes.tooltip }}>\n                    <IconButton onClick={() => setImportDialog(true)} size=\"small\" style={{ width: 34 }} className={props.classes.button}>\n                        <BiImport fontSize={20} />\n                    </IconButton>\n                </Tooltip>\n            </AppBar>\n            {props.projects.sort((projName1, projName2) => projName1.toLowerCase().localeCompare(projName2)).map((projectName, key) => <div key={key} className={props.classes.projectBlock}>\n                <Button\n                    fullWidth\n                    className={props.classes.projectButton}\n                    color={projectName === props.projectName ? 'primary' : 'grey'}\n                    onClick={() => window.location.href = `?${projectName}`}\n                    startIcon={<IconDocument />}\n                >\n                    {projectName}\n                </Button>\n                <span className={props.classes.viewManageButtonActions}>\n                    <Tooltip title={I18n.t('Permissions')} classes={{ popper: props.classes.tooltip }}>\n                        {working === projectName ? <CircularProgress size={22} /> :\n                            <IconButton\n                                onClick={event => {\n                                    setAnchorEl(event.currentTarget);\n                                    // TODO ensure correct project is opened\n                                    if (props.projectName !== projectName) {\n                                        props.loadProject(projectName);\n                                    }\n                                    setShowPermissionsDialog(projectName);\n                                }}\n                                size=\"small\"\n                            >\n                                <PermissionsIcon fontSize=\"20\" />\n                            </IconButton>}\n                    </Tooltip>\n                    <Tooltip title={I18n.t('Export')} classes={{ popper: props.classes.tooltip }}>\n                        {working === projectName ? <CircularProgress size={22} /> :\n                            <IconButton\n                                onClick={event => {\n                                    setAnchorEl(event.currentTarget);\n                                    setShowExportDialog(projectName);\n                                }}\n                                size=\"small\"\n                            >\n                                <BiExport fontSize=\"20\" />\n                            </IconButton>}\n                    </Tooltip>\n                    <Tooltip title={I18n.t('Edit')} classes={{ popper: props.classes.tooltip }}>\n                        <span>\n                            <IconButton\n                                size=\"small\"\n                                onClick={() => showDialog('rename', projectName)}\n                                disabled={working}\n                            >\n                                <EditIcon />\n                            </IconButton>\n                        </span>\n                    </Tooltip>\n                    <Tooltip title={I18n.t('Delete')} onClick={() => showDialog('delete', projectName)} classes={{ popper: props.classes.tooltip }}>\n                        <span>\n                            <IconButton size=\"small\" disabled={working}>\n                                <DeleteIcon />\n                            </IconButton>\n                        </span>\n                    </Tooltip>\n                </span>\n            </div>)}\n        </div>\n        {exportDialog}\n        {dialog ? <ProjectDialog\n            dialog={dialog}\n            dialogProject={dialogProject}\n            dialogName={dialogName}\n            setDialog={setDialog}\n            setDialogProject={setDialogProject}\n            setDialogName={setDialogName}\n            {...props}\n            classes={{}}\n        /> : null}\n        {showPermissionsDialog ? <PermissionsDialog\n            socket={props.socket}\n            changeProject={props.changeProject}\n            onClose={() => setShowPermissionsDialog(false)}\n            loadProject={props.loadProject}\n        /> : null}\n        {importDialog ? <ImportProjectDialog\n            projects={props.projects}\n            themeType={props.themeType}\n            onClose={(created, newProjectName) => {\n                setImportDialog(false);\n                if (created && props.projectName !== newProjectName) {\n                    window.location = `?${newProjectName}`;\n                } else if (created) {\n                    props.onClose();\n                }\n            }}\n            projectName={props.projectName}\n            socket={props.socket}\n            refreshProjects={props.refreshProjects}\n            loadProject={props.loadProject}\n            adapterName={props.adapterName}\n            instance={props.instance}\n        /> : null}\n    </IODialog> : null;\n};\n\nProjectsManage.propTypes = {\n    addProject: PropTypes.func,\n    loadProject: PropTypes.func,\n    onClose: PropTypes.func,\n    open: PropTypes.bool,\n    projects: PropTypes.array,\n    projectName: PropTypes.string,\n    refreshProjects: PropTypes.func,\n    socket: PropTypes.object,\n    themeType: PropTypes.string,\n};\n\nexport default withStyles(styles)(ProjectsManage);\n","import PropTypes from 'prop-types';\nimport { useState } from 'react';\nimport { withStyles } from '@mui/styles';\n\nimport {\n    Menu as MenuIcon,\n    Settings as SettingsIcon,\n    List as ListIcon,\n    FileCopy as FilesIcon,\n} from '@mui/icons-material';\n\nimport {\n    SelectID,\n    I18n,\n    SelectFile as SelectFileDialog,\n    Utils,\n} from '@iobroker/adapter-react-v5';\n\nimport ToolbarItems from './ToolbarItems';\nimport Settings from './Settings';\nimport ProjectsManager from './ProjectsManager';\n\nconst styles = () => ({\n    objectsDialog: {\n        minWidth: 800,\n        height: '100%',\n        overflow: 'hidden',\n    },\n});\n\nconst Tools = props => {\n    const [settingsDialog, setSettingsDialog] = useState(false);\n    const [objectsDialog, setObjectsDialog] = useState(false);\n    const [filesDialog, setFilesDialog] = useState(false);\n\n    const toolbar = {\n        name: 'Projects',\n        items: [\n            {\n                type: 'icon-button', Icon: SettingsIcon, name: 'Settings', onClick: () => setSettingsDialog(true),\n            },\n            {\n                type: 'icon-button', Icon: MenuIcon, name: 'Manage projects', onClick: () => props.setProjectsDialog(true),\n            },\n            {\n                type: 'icon-button', Icon: ListIcon, name: 'Objects', onClick: () => setObjectsDialog(true),\n            },\n            {\n                type: 'icon-button', Icon: FilesIcon, name: 'Files', onClick: () => setFilesDialog(true),\n            },\n        ],\n    };\n\n    return <>\n        <ToolbarItems group={toolbar} last {...props} classes={{}} />\n        {settingsDialog ? <Settings\n            onClose={() => setSettingsDialog(false)}\n            {...props}\n            classes={{}}\n            adapterName={props.adapterName}\n            instance={props.instance}\n            projectName={props.projectName}\n        /> : null}\n        {props.projectsDialog ? <ProjectsManager\n            open={!0}\n            onClose={() => props.setProjectsDialog(false)}\n            {...props}\n            classes={{}}\n        /> : null}\n        {\n            objectsDialog ? <SelectID\n                imagePrefix=\"../\"\n                ready\n                onClose={() => setObjectsDialog(false)}\n                socket={props.socket}\n                title={I18n.t('Browse objects')}\n                columns={['role', 'func', 'val', 'name']}\n                notEditable={false}\n                statesOnly\n                onOk={selected => {\n                    Utils.copyToClipboard(selected);\n                    setObjectsDialog(false);\n                    window.alert(I18n.t('Copied'));\n                }}\n                ok={I18n.t('Copy to clipboard')}\n                cancel={I18n.t('ra_Close')}\n            /> : null\n        }\n        {\n            filesDialog ? <SelectFileDialog\n                title={I18n.t('Browse files')}\n                onClose={() => setFilesDialog(false)}\n                restrictToFolder={`${props.adapterName}.${props.instance}/${props.projectName}`}\n                allowNonRestricted\n                ready\n                allowUpload\n                allowDownload\n                allowCreateFolder\n                allowDelete\n                allowView\n                showToolbar\n                imagePrefix=\"../\"\n                selected=\"\"\n                showTypeSelector\n                onOk={selected => {\n                    const projectPrefix = `${props.adapterName}.${props.instance}/${props.projectName}/`;\n                    if (selected.startsWith(projectPrefix)) {\n                        selected = `_PRJ_NAME/${selected.substring(projectPrefix.length)}`;\n                    } else if (selected.startsWith('/')) {\n                        selected = `..${selected}`;\n                    } else if (!selected.startsWith('.')) {\n                        selected = `../${selected}`;\n                    }\n                    Utils.copyToClipboard(selected);\n                    setFilesDialog(false);\n                    window.alert(I18n.t('ra_Copied %s', selected));\n                }}\n                socket={props.socket}\n                ok={I18n.t('Copy to clipboard')}\n                cancel={I18n.t('ra_Close')}\n            /> : null\n        }\n    </>;\n};\n\nTools.propTypes = {\n    socket: PropTypes.object,\n    projectsDialog: PropTypes.bool,\n    setProjectsDialog: PropTypes.func,\n    adapterName: PropTypes.string,\n    instance: PropTypes.number,\n    projectName: PropTypes.string,\n};\n\nexport default withStyles(styles)(Tools);\n","import { useRef, useState } from 'react';\nimport PropTypes from 'prop-types';\n\nimport {\n    IconButton,\n    Tooltip,\n    Menu as DropMenu,\n    MenuItem as DropMenuItem,\n} from '@mui/material';\n\nimport { withStyles } from '@mui/styles';\n\nimport {\n    Close as CloseIcon,\n    Sync as SyncIcon,\n    PlayArrow as PlayArrowIcon,\n    ArrowDropDown as ArrowDropDownIcon,\n    Person as PersonIcon,\n    ExitToApp as ExitToAppIcon,\n    KeyboardArrowUp as HeightFullIcon,\n    KeyboardDoubleArrowUp as HeightNarrowIcon,\n    KeyboardDoubleArrowDown as HeightVeryNarrowIcon,\n    Save as SaveIcon,\n} from '@mui/icons-material';\n\nimport {\n    Icon,\n    Utils,\n    I18n,\n    ToggleThemeMenu,\n} from '@iobroker/adapter-react-v5';\n\nimport Views from './Views';\nimport Widgets from './Widgets';\nimport Projects from './Projects';\n\nconst styles = theme => ({\n    text: {\n        paddingRight: 4,\n    },\n    button: {\n        margin: 4,\n    },\n    textInput: {\n        margin: '0px 4px',\n        width: 120,\n    },\n    right: {\n        float: 'right',\n        display: 'inline-flex',\n        flexDirection: 'column',\n    },\n    rightBlock: {\n        display: 'flex',\n        alignItems: 'center',\n        justifyContent: 'end',\n    },\n    icon: {\n        width: 22,\n        height: 22,\n    },\n    lightedPanel: theme.classes.lightedPanel,\n    toolbar: theme.classes.toolbar,\n    narrowToolbar: {\n        paddingTop: 4,\n        paddingBottom: 4,\n    },\n    tooltip: {\n        pointerEvents: 'none',\n    },\n    heightButton: {\n\n    },\n    '@keyframes blink': {\n        '0%': {\n            opacity: 1,\n        },\n        '50%': {\n            opacity: 0,\n        },\n        '100%': {\n            opacity: 1,\n        },\n    },\n    saveIcon: {\n        animation: `blink 2000ms ${theme.transitions.easing.easeInOut}`,\n        color: theme.palette.primary.main,\n    },\n    version: {\n        fontStyle: 'italic',\n        marginRight: 10,\n        opacity: 0.7,\n        fontSize: 10,\n        textAlign: 'right',\n    },\n});\n\nconst Toolbar = props => {\n    const { classes } = props;\n    const [right, setRight] = useState(false);\n    const [lastCommand, setLastCommand] = useState(window.localStorage.getItem('Vis.lastCommand') || 'close');\n    const rightRef = useRef(null);\n\n    const lang = I18n.getLanguage();\n\n    const runtimeURL = window.location.pathname.endsWith('/edit.html') ?\n        `./?${props.projectName}#${props.selectedView}`\n        :\n        `?${props.projectName}&runtime=true#${props.selectedView}`;\n\n    const onReload = () => {\n        window.localStorage.setItem('Vis.lastCommand', 'reload');\n        setLastCommand('reload');\n        props.socket.setState(`${props.adapterName}.${props.instance}.control.instance`, { val: '*', ack: true });\n        props.socket.setState(`${props.adapterName}.${props.instance}.control.data`, { val: null, ack: true });\n        props.socket.setState(`${props.adapterName}.${props.instance}.control.command`, { val: 'refresh', ack: true });\n        setRight(false);\n    };\n\n    const dropMenu = <DropMenu\n        open={right}\n        anchorEl={rightRef.current}\n        onClose={() => setRight(false)}\n        anchorOrigin={{\n            vertical: 'bottom',\n            horizontal: 'left',\n        }}\n        getContentAnchorEl={null}\n    >\n        <DropMenuItem onClick={() => {\n            window.localStorage.setItem('Vis.lastCommand', 'close');\n            setLastCommand('close');\n            setRight(false);\n            window.location.href = runtimeURL;\n        }}\n        >\n            <CloseIcon />\n            {I18n.t('Close editor')}\n        </DropMenuItem>\n        <DropMenuItem onClick={() => {\n            window.localStorage.setItem('Vis.lastCommand', 'open');\n            setLastCommand('open');\n            setRight(false);\n            window.open(runtimeURL, 'vis-2.runtime');\n        }}\n        >\n            <PlayArrowIcon />\n            {I18n.t('Open runtime in new window')}\n        </DropMenuItem>\n        <DropMenuItem onClick={onReload}>\n            <SyncIcon />\n            {I18n.t('Reload all runtimes')}\n        </DropMenuItem>\n    </DropMenu>;\n\n    let heightButton;\n    if (props.toolbarHeight === 'narrow') {\n        heightButton = <Tooltip title={I18n.t('Narrow panel')}>\n            <IconButton\n                className={classes.heightButton}\n                onClick={() => props.setToolbarHeight('veryNarrow')}\n            >\n                <HeightNarrowIcon />\n            </IconButton>\n        </Tooltip>;\n    } else if (props.toolbarHeight === 'veryNarrow') {\n        heightButton = <Tooltip title={I18n.t('Full panel')}>\n            <IconButton\n                className={classes.heightButton}\n                onClick={() => props.setToolbarHeight('full')}\n            >\n                <HeightVeryNarrowIcon />\n            </IconButton>\n        </Tooltip>;\n    } else {\n        heightButton = <Tooltip title={I18n.t('Hide panel names')}>\n            <IconButton\n                className={classes.heightButton}\n                onClick={() => props.setToolbarHeight('narrow')}\n            >\n                <HeightFullIcon />\n            </IconButton>\n        </Tooltip>;\n    }\n\n    const currentUser = props.currentUser ?\n        <div className={classes.rightBlock}>\n            {props.currentUser?.common?.icon ? <Icon src={props.currentUser?.common?.icon || ''} className={classes.icon} /> : <PersonIcon fontSize=\"small\" />}\n            <span style={{ paddingRight: 8, marginLeft: 8 }}>\n                { Utils.getObjectNameFromObj(props.currentUser, lang) }\n            </span>\n            { props.socket.isSecure\n                ? <Tooltip title={I18n.t('Exit')} classes={{ popper: classes.tooltip }}>\n                    <IconButton\n                        size=\"small\"\n                        onClick={async () => {\n                            try {\n                                await props.socket.logout();\n                            } catch (e) {\n                                console.error(e);\n                                return;\n                            }\n                            window.location.reload();\n                        }}\n                    >\n                        <ExitToAppIcon />\n                    </IconButton>\n                </Tooltip>\n                : null}\n        </div>\n        :\n        null;\n\n    let lastCommandButton;\n    if (lastCommand === 'close') {\n        lastCommandButton = <Tooltip title={I18n.t('Close editor')} classes={{ popper: classes.tooltip }}>\n            <IconButton size=\"small\" onClick={() => window.location.href = runtimeURL}>\n                <CloseIcon />\n            </IconButton>\n        </Tooltip>;\n    } else if (lastCommand === 'open') {\n        lastCommandButton = <Tooltip title={I18n.t('Open runtime in new window')} classes={{ popper: classes.tooltip }}>\n            <IconButton size=\"small\" onClick={() => window.open(runtimeURL, 'vis-2.runtime')}>\n                <PlayArrowIcon />\n            </IconButton>\n        </Tooltip>;\n    } else if (lastCommand === 'reload') {\n        lastCommandButton = <Tooltip title={I18n.t('Reload all runtimes')} classes={{ popper: classes.tooltip }}>\n            <IconButton size=\"small\" onClick={onReload}>\n                <SyncIcon />\n            </IconButton>\n        </Tooltip>;\n    }\n\n    return <div className={classes.lightedPanel}>\n        <span className={classes.right}>\n            <div className={classes.rightBlock}>\n                {props.needSave ? <SaveIcon size={20} className={classes.saveIcon} /> : null}\n                {props.toolbarHeight === 'veryNarrow' ? currentUser : null}\n                {heightButton}\n                <ToggleThemeMenu\n                    toggleTheme={props.toggleTheme}\n                    themeName={props.themeName}\n                    t={I18n.t}\n                />\n                {lastCommandButton}\n                <IconButton ref={rightRef} onClick={() => setRight(!right)} size=\"small\">\n                    <ArrowDropDownIcon />\n                </IconButton>\n                {dropMenu}\n            </div>\n            {props.toolbarHeight !== 'veryNarrow' ? currentUser : null}\n            {props.toolbarHeight === 'full' && props.version ? <span className={props.classes.version}>\n                v\n                {props.version}\n            </span> : null}\n        </span>\n        <div className={Utils.clsx(classes.toolbar, props.toolbarHeight !== 'full' && classes.narrowToolbar)} style={{ alignItems: 'initial' }}>\n            <Views {...props} classes={{}} toolbarHeight={props.toolbarHeight} />\n            <Widgets {...props} classes={{}} toolbarHeight={props.toolbarHeight} />\n            <Projects {...props} classes={{}} toolbarHeight={props.toolbarHeight} />\n        </div>\n    </div>;\n};\n\nToolbar.propTypes = {\n    classes: PropTypes.object,\n    currentUser: PropTypes.object,\n    needSave: PropTypes.bool,\n    socket: PropTypes.object,\n    toggleTheme: PropTypes.func,\n    themeName: PropTypes.string,\n    themeType: PropTypes.string,\n    editMode: PropTypes.bool,\n    selectedGroup: PropTypes.string,\n    setToolbarHeight: PropTypes.func,\n    projectsDialog: PropTypes.bool,\n    setProjectsDialog: PropTypes.func,\n    toolbarHeight: PropTypes.string,\n    adapterName: PropTypes.string,\n    instance: PropTypes.number,\n    projectName: PropTypes.string,\n    version: PropTypes.string,\n    setSelectedWidgets: PropTypes.func.isRequired,\n};\n\nexport default withStyles(styles)(Toolbar);\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\n\nimport {\n    Dialog, Button, DialogActions, DialogContent, DialogTitle,\n} from '@mui/material';\n\nimport {\n    ContentCopy as IconCopy,\n    Close as CloseIcon,\n} from '@mui/icons-material';\n\nimport { I18n, Utils } from '@iobroker/adapter-react-v5';\n\nimport CustomAceEditor from './CustomAceEditor';\n\nclass CodeDialog extends Component {\n    render() {\n        return <Dialog\n            open={!0}\n            onClose={() => this.props.onClose()}\n            maxWidth=\"xl\"\n            fullWidth\n        >\n            <DialogTitle>{this.props.title || I18n.t('Code')}</DialogTitle>\n            <DialogContent>\n                <CustomAceEditor\n                    type={this.props.mode || 'html'}\n                    themeType={this.props.themeType}\n                    readOnly\n                    value={this.props.code}\n                />\n            </DialogContent>\n            <DialogActions>\n                <Button\n                    variant=\"contained\"\n                    onClick={() => {\n                        Utils.copyToClipboard(this.props.code);\n                        window.alert(I18n.t('Copied to clipboard'));\n                    }}\n                    startIcon={<IconCopy />}\n                    color=\"primary\"\n                >\n                    {I18n.t('Copy to clipboard')}\n                </Button>\n                <Button\n                    variant=\"contained\"\n                    color=\"grey\"\n                    startIcon={<CloseIcon />}\n                    onClick={() => this.props.onClose()}\n                >\n                    {I18n.t('Close')}\n                </Button>\n            </DialogActions>\n        </Dialog>;\n    }\n}\n\nCodeDialog.propTypes = {\n    onClose: PropTypes.func.isRequired,\n    title: PropTypes.string,\n    themeType: PropTypes.string,\n    code: PropTypes.string.isRequired,\n    mode: PropTypes.string,\n};\n\nexport default CodeDialog;\n","import IODialog from './IODialog';\n\nconst CreateFirstProjectDialog = props => {\n    if (props.open) {\n        return null;\n    }\n\n    return <IODialog\n        open={!0}\n        onClose={props.onClose}\n        title=\"Do you want to create first demo project?\"\n        action={() => props.addProject('Demo project')}\n        actionTitle=\"Yes\"\n        closeTitle=\"No\"\n    />;\n};\n\nexport default CreateFirstProjectDialog;\n","import React from 'react';\nimport { useState } from 'react';\nimport { NestedMenuItem, IconMenuItem } from 'mui-nested-menu/index';\n\nimport { Menu } from '@mui/material';\n\nimport { I18n } from '@iobroker/adapter-react-v5';\n\ninterface MenuItem {\n    label: string;\n    subLabel?: string;\n    hide?: boolean;\n    items?: MenuItem[];\n    leftIcon?: React.ReactNode;\n    disabled?: boolean;\n    onClick?: () => void;\n    style?: React.CSSProperties;\n}\n\nconst contextMenuItems = (items: MenuItem[], open: boolean, onClose: () => void) =>\n    items.map((item, key: number) => {\n        if (!item || item.hide) {\n            return null;\n        }\n\n        if (item.items) {\n            return <NestedMenuItem\n                key={key}\n                leftIcon={item.leftIcon}\n                disabled={item.disabled}\n                // @ts-expect-error we can provide an Element here too and it works\n                label={<span style={{ width: 40 }}>{I18n.t(item.label)}</span>}\n                parentMenuOpen={open}\n                onContextMenu={e => {\n                    e.stopPropagation();\n                    e.preventDefault();\n                }}\n            >\n                {contextMenuItems(item.items, open, onClose)}\n            </NestedMenuItem>;\n        }\n\n        return <IconMenuItem\n            key={key}\n            onClick={() => {\n                item.onClick && item.onClick();\n                onClose();\n            }}\n            disabled={item.disabled}\n            // @ts-expect-error we can provide an Element here too and it works\n            label={[\n                <span key=\"main\" style={{ display: 'flex', alignItems: 'center', ...item.style }}>\n                    <span style={{ width: 40 }}>{item.leftIcon}</span>\n                    {I18n.t(item.label)}\n                </span>,\n                item.subLabel ? <span\n                    key=\"second\"\n                    style={{\n                        fontSize: 10,\n                        fontWeight: 'normal',\n                        display: 'block',\n                        paddingLeft: 40,\n                        marginTop: -6,\n                    }}\n                >\n                    {item.subLabel}\n                </span> : null,\n            ]}\n            onContextMenu={(e: React.MouseEvent<HTMLDivElement>) => {\n                e.stopPropagation();\n                e.preventDefault();\n                item.onClick && item.onClick();\n                onClose();\n            }}\n        />;\n    });\n\ninterface IOContextMenuProps {\n    children: React.ReactNode;\n    disabled: boolean;\n    menuItemsData: (position: { top: number; left: number }) => any;\n}\n\nconst IOContextMenu = (props: IOContextMenuProps) => {\n    const [menuPosition, setMenuPosition] = useState<null | { top: number; left: number }>(null);\n\n    const handleRightClick: React.MouseEventHandler<HTMLDivElement> = async (event: React.MouseEvent<HTMLDivElement>)  => {\n        if (props.disabled || event.ctrlKey || event.shiftKey) {\n            return;\n        }\n        event.preventDefault();\n        if (menuPosition) {\n            setMenuPosition(null);\n            await new Promise(resolve => {\n                setTimeout(resolve, 200);\n            });\n        }\n        setMenuPosition({\n            top: event.pageY,\n            left: event.pageX,\n        });\n    };\n\n    return <div onContextMenu={handleRightClick} style={{ height: '100%', width: '100%' }}>\n        {props.children}\n        {menuPosition ? <Menu\n            open={!0}\n            onClose={() => setMenuPosition(null)}\n            anchorReference=\"anchorPosition\"\n            anchorPosition={menuPosition}\n        >\n            {contextMenuItems(props.menuItemsData(menuPosition), !!menuPosition, () => setMenuPosition(null))}\n        </Menu> : null}\n    </div>;\n};\n\nexport default IOContextMenu;\n","import React, { useState } from 'react';\nimport { toPng } from 'html-to-image';\n\nimport {\n    Widgets as WidgetIcon,\n    Delete as DeleteIcon,\n    Lock as LockIcon,\n    LockOpen as LockOpenIcon,\n} from '@mui/icons-material';\nimport {\n    BiImport, BiExport, BiCut, BiCopy, BiPaste,\n} from 'react-icons/bi';\nimport {\n    RiBringToFront, RiSendToBack,\n} from 'react-icons/ri';\nimport {\n    AiOutlineGroup, AiOutlineUngroup,\n} from 'react-icons/ai';\n\nimport { I18n } from '@iobroker/adapter-react-v5';\n\nimport { store } from '@/Store';\nimport {\n    AnyWidgetId,\n    Project,\n    GroupWidgetId,\n    SingleWidgetId,\n    View, SingleWidget,\n    GroupWidget,\n} from '@/types';\n\nimport IOContextMenu from '../Components/IOContextMenu';\nimport WidgetExportDialog from '../Toolbar/WidgetExportDialog';\nimport WidgetImportDialog from '../Toolbar/WidgetImportDialog';\nimport { getWidgetTypes, WidgetType } from './visWidgetsCatalog';\n\ninterface VisContextMenuProps {\n    changeProject: (project: Project) => void;\n    children: any;\n    copyWidgets: () => void;\n    cutWidgets: () => void;\n    deleteWidgets: () => void;\n    disabled: boolean;\n    groupWidgets: () => void;\n    lockWidgets: (action: 'lock' | 'unlock') => void;\n    orderWidgets: (action: 'front' | 'back') => void;\n    pasteWidgets: () => void;\n    selectedView: string;\n    selectedWidgets: AnyWidgetId[];\n    setSelectedGroup: (group: GroupWidgetId) => void;\n    setSelectedWidgets: (widgets: AnyWidgetId[]) => void;\n    ungroupWidgets: () => void;\n    widgetsClipboard: Record<string, any>;\n    themeType: 'dark' | 'light';\n    setMarketplaceDialog: (data: { addPage: boolean; widget: { widget: (SingleWidget | GroupWidget)[]; image: string } }) => void;\n}\n\ninterface VisMarketplaceProps {\n    language: ioBroker.Languages;\n    addPage?: boolean;\n    widget: { name: string; date: string; widget_id: string; image_id: string };\n    installWidget: (widget: { name: string; date: string; widget_id: string; image_id: string }) => Promise<void>;\n    installedWidgets?: {id: string}[];\n    themeName: string;\n    onAdded?: () => void;\n}\n\ndeclare global {\n    interface Window {\n        VisMarketplace?: {\n            api: {\n                apiGetWidgetRevision(widgetId: string, id: string): Promise<any>;\n            };\n            default: React.Component<VisMarketplaceProps>;\n        };\n    }\n}\n\nconst VisContextMenu = (props: VisContextMenuProps) => {\n    const [exportDialog, setExportDialog] = useState(false);\n    const [importDialog, setImportDialog] = useState(false);\n    const visProject = store.getState().visProject;\n\n    if (!visProject[props.selectedView] && Object.keys(visProject).length > 1) {\n        return null;\n    }\n\n    const menuItemsData = Object.keys(visProject).length <= 1 ? null : (menuPosition: { top: number; left: number }) => {\n        const view: View = visProject[props.selectedView];\n        const coordinatesWidgets: AnyWidgetId[] = menuPosition ? Object.keys(view.widgets)\n            .filter(widget => {\n                const rect = window.document.getElementById(widget)?.getBoundingClientRect();\n                if (view.widgets[widget as AnyWidgetId].grouped) {\n                    return false;\n                }\n\n                return rect && menuPosition.left >= rect.left && menuPosition.left <= rect.right && menuPosition.top >= rect.top && menuPosition.top <= rect.bottom;\n            }) as AnyWidgetId[] : [];\n\n        // find name and widget type\n        let widgetType = null;\n        let widgetName = '';\n        let showSelect = coordinatesWidgets.length > 1;\n        // let marketplaceUpdate;\n        if (view && coordinatesWidgets[0] && view.widgets[coordinatesWidgets[0]] && view.widgets[coordinatesWidgets[0]].tpl) {\n            if (view.widgets[coordinatesWidgets[0]].data?.locked) {\n                showSelect = true;\n            }\n            widgetName = coordinatesWidgets[0];\n            if (view.widgets[coordinatesWidgets[0]].data?.name) {\n                widgetName = view.widgets[coordinatesWidgets[0]].data.name as string;\n                widgetType = coordinatesWidgets[0];\n            } else {\n                const tpl = view.widgets[coordinatesWidgets[0]].tpl;\n                if (tpl === '_tplGroup') {\n                    widgetType = I18n.t('Group');\n                } else {\n                    const wSet = view.widgets[coordinatesWidgets[0]].widgetSet;\n                    const widgetItem = getWidgetTypes().find(item => item.name === tpl && item.set === wSet);\n                    widgetType = widgetItem ? widgetItem.title : tpl;\n                }\n            }\n\n            if (view.widgets[coordinatesWidgets[0]].marketplace) {\n                widgetType = `${view.widgets[coordinatesWidgets[0]].marketplace.name} (${I18n.t('version')} ${view.widgets[coordinatesWidgets[0]].marketplace.version})`;\n                // marketplaceUpdate = visProject.___settings.marketplace.find(u =>\n                //     u.widget_id === view.widgets[coordinatesWidgets[0]].marketplace.widget_id &&\n                //     u.version > view.widgets[coordinatesWidgets[0]].marketplace.version);\n            }\n        }\n\n        const selectedWidget: SingleWidget | GroupWidget = visProject[props.selectedView].widgets[props.selectedWidgets[0]];\n\n        return [\n            {\n                leftIcon: <WidgetIcon />,\n                hide: coordinatesWidgets.length !== 1,\n                label: widgetName,\n                subLabel: widgetType,\n                style: { fontWeight: 'bold' },\n                disabled: true,\n            },\n            {\n                hide: !showSelect,\n                label: 'Select',\n                items: [\n                    {\n                        label: 'all',\n                        hide: coordinatesWidgets.length === 1,\n                        onClick: () => props.setSelectedWidgets(coordinatesWidgets),\n                    },\n                    ...coordinatesWidgets.map(widget => ({\n                        label: widget,\n                        onClick: () => props.setSelectedWidgets([widget]),\n                    })),\n                ],\n            },\n            {\n                leftIcon: <AiOutlineGroup />,\n                label: 'Group widgets',\n                onClick: () => props.groupWidgets(),\n                hide: props.selectedWidgets.length < 2,\n            },\n            {\n                leftIcon: <AiOutlineUngroup />,\n                label: 'Ungroup',\n                subLabel: selectedWidget?.marketplace ?\n                    I18n.t('convert from widgeteria widget') :\n                    null,\n                onClick: () => props.ungroupWidgets(),\n                hide: props.selectedWidgets.length !== 1 ||\n                    selectedWidget.tpl !== '_tplGroup',\n            },\n            window.VisMarketplace ? {\n                leftIcon: <img\n                    src=\"./img/marketplace.png\"\n                    alt=\"widgeteria\"\n                    style={{ width: 16, height: 16, verticalAlign: 'middle' }}\n                />,\n                label: 'Add to widgeteria',\n                onClick: async () => {\n                    // copy all selected widgets\n                    const widgets = props.selectedWidgets.map(wid => {\n                        const w = JSON.parse(JSON.stringify(visProject[props.selectedView].widgets[wid]));\n                        w._id = wid;\n                        w.isRoot = true;\n                        delete w.marketplace;\n                        w.widgetSet = (window as any).visWidgetTypes.find((type: WidgetType) => type.name === w.tpl).set;\n                        return w;\n                    });\n\n                    const groupWidgets: SingleWidgetId[] = [];\n\n                    let gIdx = 1;\n                    let wIdx = 1;\n                    const len = widgets.length;\n                    for (let w = 0; w < len; w++) {\n                        const widget = widgets[w];\n                        // if we are creating the group of groups (only two groups could be leveled)\n                        if (widget.tpl === '_tplGroup') {\n                            const newId = `f${gIdx.toString().padStart(6, '0')}`;\n                            gIdx++;\n\n                            if (widget.data && widget.data.members) {\n                                const members: SingleWidgetId[] = [];\n                                widget.data.members.forEach((member: SingleWidgetId) => {\n                                    if (groupWidgets.includes(member)) {\n                                        return;\n                                    }\n                                    const memberWidget = JSON.parse(JSON.stringify(visProject[props.selectedView].widgets[member]));\n                                    memberWidget._id = `i${wIdx.toString().padStart(6, '0')}`;\n                                    memberWidget.widgetSet = (window as any).visWidgetTypes.find((type: WidgetType) => type.name === memberWidget.tpl).set;\n                                    wIdx++;\n                                    members.push(memberWidget._id);\n                                    memberWidget.groupid = newId;\n                                    memberWidget.grouped = true;\n                                    delete memberWidget.isRoot;\n                                    delete memberWidget.marketplace;\n                                    widgets.push(memberWidget);\n                                    groupWidgets.push(member);\n                                });\n\n                                widget.data.members = members;\n                            }\n                            widget._id = newId;\n                        } else if (widget._id.startsWith('w')) {\n                            if (widget.grouped) {\n                                delete widget.grouped;\n                                delete widget.groupid;\n                                delete widget._id;\n                            } else {\n                                widget._id = `i${wIdx.toString().padStart(6, '0')}`;\n                                wIdx++;\n                            }\n                        }\n                    }\n\n                    const resizers = document.getElementsByClassName('vis-editmode-resizer');\n                    for (let i = 0; i < resizers.length; i++) {\n                        const el = resizers[i] as HTMLElement;\n                        el.style.display = 'none';\n                    }\n                    const el = document.getElementById(props.selectedWidgets[0]);\n                    if (el) {\n                        const cachePosition = el.style.position;\n                        el.style.position = 'initial';\n                        const dataUrl = await toPng(el);\n                        el.style.position = cachePosition;\n                        // create image of widget\n\n                        for (let i = 0; i < resizers.length; i++) {\n                            const el_ = resizers[i] as HTMLElement;\n                            el_.style.display = 'block';\n                        }\n                        // console.log(document.getElementById(props.selectedWidgets[0]));\n\n                        props.setMarketplaceDialog({\n                            addPage: true,\n                            widget: { widget: widgets, image: dataUrl },\n                        });\n                    }\n                },\n                hide: props.selectedWidgets.length !== 1 ||\n                    selectedWidget.tpl !== '_tplGroup' ||\n                    selectedWidget.marketplace,\n            } : null,\n            {\n            // leftIcon: <AiOutlineUngroup />,\n                label: 'Edit group',\n                onClick: () => props.setSelectedGroup(props.selectedWidgets[0] as GroupWidgetId),\n                hide: props.selectedWidgets.length !== 1 ||\n                    selectedWidget.tpl !== '_tplGroup' ||\n                    selectedWidget.marketplace,\n            },\n            {\n                leftIcon: <BiCopy />,\n                label: 'Copy',\n                onClick: () => props.copyWidgets(),\n                disabled: !props.selectedWidgets.length,\n            },\n            {\n                leftIcon: <BiCut />,\n                label: 'Cut',\n                onClick: () => props.cutWidgets(),\n                disabled: !props.selectedWidgets.length,\n            },\n            {\n                leftIcon: <BiPaste />,\n                label: 'Paste',\n                onClick: () => props.pasteWidgets(),\n                disabled: !Object.keys(props.widgetsClipboard.widgets).length,\n            },\n            {\n                leftIcon: <DeleteIcon fontSize=\"small\" />,\n                label: 'Delete',\n                onClick: () => props.deleteWidgets(),\n                disabled: !props.selectedWidgets.length,\n            },\n            {\n                label: 'More',\n                items: [\n                    {\n                        leftIcon: <LockIcon fontSize=\"small\" />,\n                        label: 'Lock',\n                        onClick: () => props.lockWidgets('lock'),\n                        disabled: !props.selectedWidgets.length,\n                    },\n                    {\n                        leftIcon: <LockOpenIcon fontSize=\"small\" />,\n                        label: 'Unlock',\n                        onClick: () => props.lockWidgets('unlock'),\n                        disabled: !props.selectedWidgets.length,\n                    },\n                    {\n                        leftIcon: <RiBringToFront />,\n                        label: 'Bring to front',\n                        onClick: () => props.orderWidgets('front'),\n                        disabled: !props.selectedWidgets.length,\n                    },\n                    {\n                        leftIcon: <RiSendToBack />,\n                        label: 'Sent to back',\n                        onClick: () => props.orderWidgets('back'),\n                        disabled: !props.selectedWidgets.length,\n                    },\n                    {\n                        leftIcon: <BiExport />,\n                        label: 'Export widgets',\n                        onClick: () => setExportDialog(true),\n                        disabled: !props.selectedWidgets.length,\n                    },\n                    {\n                        leftIcon: <BiImport />,\n                        label: 'Import widgets',\n                        onClick: () => setImportDialog(true),\n                    },\n                ],\n            },\n        ];\n    };\n\n    return <>\n        {menuItemsData ? <IOContextMenu\n            menuItemsData={menuItemsData}\n            disabled={props.disabled}\n        >\n            {props.children}\n        </IOContextMenu> : props.children}\n        {importDialog ? <WidgetImportDialog\n            onClose={() => setImportDialog(false)}\n            changeProject={props.changeProject}\n            selectedView={props.selectedView}\n            themeType={props.themeType}\n        /> : null}\n        {exportDialog ? <WidgetExportDialog\n            onClose={() => setExportDialog(false)}\n            widgets={visProject[props.selectedView].widgets}\n            selectedWidgets={props.selectedWidgets}\n        /> : null}\n    </>;\n};\n\nexport default VisContextMenu;\n","/**\n *  ioBroker.vis\n *  https://github.com/ioBroker/ioBroker.vis\n *\n *  Copyright (c) 2022-2024 Denis Haev https://github.com/GermanBluefox,\n *  Creative Common Attribution-NonCommercial (CC BY-NC)\n *\n *  http://creativecommons.org/licenses/by-nc/4.0/\n *\n * Short content:\n * Licensees may copy, distribute, display and perform the work and make derivative works based on it only if they give the author or licensor the credits in the manner specified by these.\n * Licensees may copy, distribute, display, and perform the work and make derivative works based on it only for noncommercial purposes.\n * (Free for non-commercial use).\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport moment from 'moment';\nimport 'moment/locale/de';\nimport 'moment/locale/ru';\nimport 'moment/locale/en-gb';\nimport 'moment/locale/fr';\nimport 'moment/locale/it';\nimport 'moment/locale/es';\nimport 'moment/locale/pl';\nimport 'moment/locale/nl';\nimport 'moment/locale/pt';\nimport 'moment/locale/uk';\nimport 'moment/locale/zh-cn';\n\nimport {\n    Button,\n    Dialog,\n    DialogContent,\n    DialogTitle,\n    DialogActions,\n    LinearProgress,\n} from '@mui/material';\n\nimport { I18n } from '@iobroker/adapter-react-v5';\nimport CloseIcon from '@mui/icons-material/Close';\nimport CheckIcon from '@mui/icons-material/Check';\nimport AlertIcon from '@mui/icons-material/Warning';\n\nimport './css/vis.css';\nimport './css/backgrounds.css';\n// import './lib/can.custom.js';\n// import $$ from './lib/quo.standalone'; // Gestures library\nimport './visWords';\n\nimport VisView from './visView';\nimport VisFormatUtils from './visFormatUtils';\nimport { getUrlParameter, extractBinding, readFile } from './visUtils';\nimport VisWidgetsCatalog from './visWidgetsCatalog';\nimport { store } from '../Store';\n\nfunction _translateWord(text, lang, dictionary) {\n    if (!text) {\n        return '';\n    }\n    lang = lang || window.systemLang;\n    dictionary = dictionary || window.systemDictionary;\n\n    if (dictionary[text]) {\n        let newText = dictionary[text][lang];\n        if (newText) {\n            return newText;\n        }\n        if (lang !== 'en') {\n            newText = dictionary[text].en;\n            if (newText) {\n                return newText;\n            }\n        }\n    } else if (typeof text === 'string' && !text.match(/_tooltip$/)) {\n        // console.log(`\"${text}\": {en: \"${text}\", de: \"${text}\", ru: \"${text}\"},`);\n    } else if (typeof text !== 'string') {\n        console.warn(`Trying to translate non-text: ${text}`);\n    }\n\n    return text;\n}\n\nfunction translate(text, arg1, arg2, arg3) {\n    text = _translateWord(text);\n\n    let pos = text.includes('%s');\n    if (pos !== -1) {\n        text = text.replace('%s', arg1);\n    } else {\n        return text;\n    }\n\n    pos = text.includes('%s');\n    if (pos !== -1) {\n        text = text.replace('%s', arg2);\n    } else {\n        return text;\n    }\n\n    pos = text.includes('%s');\n    if (pos !== -1) {\n        text = text.replace('%s', arg3);\n    }\n\n    return text;\n}\n\nclass VisEngine extends React.Component {\n    constructor(props) {\n        super(props);\n        window.jQuery = window.$;\n        window.$ = window.jQuery; // jQuery library\n        // window.$$ = $$; // Gestures library\n        window.systemLang = props.lang || window.systemLang || 'en';\n\n        this.state = {\n            ready: false,\n            legacyRequestedViews: [],\n\n            timeInterval: JSON.parse(window.localStorage.getItem('timeInterval')) || 'week',\n            timeStart: JSON.parse(window.localStorage.getItem('timeStart')) || null,\n        };\n\n        // set moment locale\n        moment.locale(window.systemLang);\n\n        this.can = window.can;\n        this.scripts = null;\n        this.isTouch = 'ontouchstart' in document.documentElement;\n        this.debounceInterval = 700;\n\n        this.subscribes = {};\n        this.allWidgets = {};\n        this.wakeUpCallbacks = [];\n        this.widgetChangeHandlers = {};\n        this.refViews = []; // List of views (refs)\n        this.fontNames = [\n            'Verdana, Geneva, sans-serif',\n            'Georgia, \"Times New Roman\", Times, serif',\n            '\"Courier New\", Courier, monospace',\n            'Arial, Helvetica, sans-serif',\n            'Tahoma, Geneva, sans-serif',\n            '\"Trebuchet MS\", Arial, Helvetica, sans-serif',\n            '\"Arial Black\", Gadget, sans-serif',\n            '\"Times New Roman\", Times, serif',\n            '\"Palatino Linotype\", \"Book Antiqua\", Palatino, serif',\n            '\"Lucida Sans Unicode\", \"Lucida Grande\", sans-serif',\n            '\"MS Serif\", \"New York\", serif',\n            '\"Comic Sans MS\", cursive',\n        ];\n        this.viewsActiveFilter = {};\n        this.statesDebounce = {};\n        this.onChangeCallbacks = [];\n\n        this.ID_CONTROL_INSTANCE = `${this.props.adapterName}.${this.props.instance}.control.instance`;\n        this.ID_CONTROL_DATA = `${this.props.adapterName}.${this.props.instance}.control.data`;\n        this.ID_CONTROL_COMMAND = `${this.props.adapterName}.${this.props.instance}.control.command`;\n\n        this.linkContext = {\n            visibility: {},\n            signals: {},\n            lastChanges: {},\n            bindings: {},\n            unregisterChangeHandler: this.unregisterChangeHandler,\n            registerChangeHandler: this.registerChangeHandler,\n            subscribe: this.subscribe,\n            unsubscribe: this.unsubscribe,\n            getViewRef: this.getViewRef,\n            registerViewRef: this.registerViewRef,\n            unregisterViewRef: this.unregisterViewRef,\n        };\n\n        this.refSound = /^((?!chrome|android).)*safari/i.test(window.navigator.userAgent) ? React.createRef() : null;\n\n        this.conn = this.createConnection();\n        this.canStates = this.initCanObjects();\n        this.vis = this.createLegacyVisObject();\n\n        window._   = this.vis._;               // legacy translation function\n        window.vis = this.vis;\n        window.translateWord = _translateWord; // legacy translation function\n        window._setTimeout = (func, timeout, arg1, arg2, arg3, arg4, arg5, arg6) => setTimeout(() => func(arg1, arg2, arg3, arg4, arg5, arg6), timeout);\n        window._setInterval = (func, interval, arg1, arg2, arg3, arg4, arg5, arg6) => setInterval(() => func(arg1, arg2, arg3, arg4, arg5, arg6), interval);\n\n        this.formatUtils = new VisFormatUtils({ vis: this.vis });\n\n        this.loadLegacyObjects()\n            .then(() => this.loadEditWords())\n            .then(() => {\n                this.userName = this.props.currentUser._id.replace('system.user.', '');\n                this.vis.user = this.userName;\n                this.vis.loginRequired = this.props.socket.isSecure;\n                return this.props.socket.getSystemConfig();\n            })\n            .then(systemConfig => {\n                this.vis.dateFormat = systemConfig.common.dateFormat;\n                this.vis.isFloatComma = systemConfig.common.isFloatComma;\n                this.vis.language = systemConfig.common.language || 'en';\n                this.systemConfig = systemConfig;\n\n                this.props.socket.subscribeState(this.ID_CONTROL_INSTANCE, this.onStateChange);\n                this.props.socket.subscribeState(this.ID_CONTROL_DATA, this.onStateChange);\n                this.props.socket.subscribeState(this.ID_CONTROL_COMMAND, this.onStateChange);\n\n                this.props.setLoadingText && this.props.setLoadingText('Load widgets...');\n\n                return this.loadWidgets();\n            })\n            .then(() => {\n                this.props.setLoadingText && this.props.setLoadingText(null);\n                this.setState({ ready: true });\n            });\n    }\n\n    static getCurrentPath() {\n        const path = window.location.hash.replace(/^#/, '').split('/').map(p => decodeURIComponent(p));\n        return {\n            view: path.shift(),\n            path,\n        };\n    }\n\n    static buildPath(view, path) {\n        if (path && typeof path === 'string') {\n            if (path.includes('/')) {\n                path = path.split('/');\n            } else {\n                path = [path];\n            }\n        }\n\n        if (path && path.length) {\n            return `#${encodeURIComponent(view)}/${path.map(p => encodeURIComponent(p)).join('/')}`;\n        }\n\n        return `#${encodeURIComponent(view)}`;\n    }\n\n    setTimeInterval = timeInterval => {\n        this.setState({ timeInterval });\n        window.localStorage.setItem('timeInterval', JSON.stringify(timeInterval));\n    };\n\n    setTimeStart = timeStart => {\n        this.setState({ timeStart });\n        window.localStorage.setItem('timeStart', JSON.stringify(timeStart));\n    };\n\n    detectWakeUp() {\n        this.oldTime = Date.now();\n        this.wakeUpDetectorInterval = this.wakeUpDetectorInterval || setInterval(() => {\n            const currentTime = Date.now();\n            if (currentTime > this.oldTime + 10000) {\n                this.oldTime = currentTime;\n                this.wakeUpCallbacks.forEach(item => {\n                    if (typeof item.cb === 'function') {\n                        try {\n                            item.cb(item.wid);\n                        } catch (error) {\n                            console.error(`Cannot wakeup ${item.wid}: ${error}`);\n                        }\n                    }\n                });\n            } else {\n                this.oldTime = currentTime;\n            }\n        }, 2500);\n    }\n\n    componentDidMount() {\n        // modify jquery dialog to add it to view (originally dialog was added to body) (because of styles)\n        // eslint-disable-next-line func-names\n        window.$.ui.dialog.prototype._appendTo = function () {\n            const wid = this.options.wid;\n            const views = store.getState().visProject;\n            const view = Object.keys(views).find(v => views[v].widgets && views[v].widgets[wid]);\n            !view && console.warn(`Cannot find view for widget \"${wid}\"!`);\n            return this.document.find(view ? `#visview_${view.replace(/\\s/g, '_')}` : 'body').eq(0);\n        };\n\n        // generate the browser instance ID\n        if (!window.localStorage.getItem('visInstance')) {\n            this.vis.generateInstance();\n        }\n\n        this.detectWakeUp();\n    }\n\n    componentWillUnmount() {\n        this.wakeUpDetectorInterval && clearInterval(this.wakeUpDetectorInterval);\n        this.wakeUpDetectorInterval = null;\n\n        // unsubscribe all\n        Object.keys(this.subscribes).forEach(id =>\n            this.props.socket.unsubscribeState(id, this.onStateChange));\n\n        this.props.socket.unsubscribeState(this.ID_CONTROL_INSTANCE, this.onStateChange);\n        this.props.socket.unsubscribeState(this.ID_CONTROL_DATA, this.onStateChange);\n        this.props.socket.unsubscribeState(this.ID_CONTROL_COMMAND, this.onStateChange);\n\n        let userScript = window.document.getElementById('#vis_user_scripts');\n        if (userScript) {\n            userScript.remove();\n            userScript = null;\n        }\n\n        let userCommonCss = window.document.getElementById('#vis_common_user');\n        if (userCommonCss) {\n            userCommonCss.remove();\n            userCommonCss = null;\n        }\n\n        let userUserCss = window.document.getElementById('#vis_user');\n        if (userUserCss) {\n            userUserCss.remove();\n            userUserCss = null;\n        }\n\n        this.subscribes = {};\n    }\n\n    loadLegacyObjects() {\n        if (this.props.runtime) {\n            return Promise.resolve();\n        }\n\n        this.props.setLoadingText && this.props.setLoadingText('Loading objects...');\n        return this.conn.getObjects()\n            .then(objects => this.vis.objects = objects);\n    }\n\n    buildLegacyStructures = () => {\n        this.buildLegacySubscribing();\n        if (this.vis.binds.materialdesign?.helper?.subscribeStatesAtRuntime && !this.vis.binds.materialdesign.helper.subscribeStatesAtRuntime.__inited) {\n            this.vis.binds.materialdesign.helper.subscribeStatesAtRuntime = (wid, widgetName, callback, debug) => {\n                debug && console.log(`[subscribeStatesAtRuntime] ${widgetName} (${wid}) subscribe states at runtime`);\n                callback && callback();\n            };\n            this.vis.binds.materialdesign.helper.subscribeStatesAtRuntime.__inited = true;\n        }\n    };\n\n    buildLegacySubscribing() {\n        // go through all views\n        this.vis.subscribing = {\n            activeViews: [],\n            byViews: {},\n            active: [],\n            IDs: [],\n        };\n\n        Object.keys(store.getState().visProject).forEach(viewId => {\n            if (viewId !== '___settings') {\n                this.vis.subscribing.byViews[viewId] = [];\n                this.vis.subscribing.activeViews.push(viewId);\n            }\n        });\n    }\n\n    createLegacyVisObject() {\n        // simulate legacy file manager\n        if (this.props.showLegacyFileSelector) {\n            window.jQuery.fm = (options, onChange) => {\n                // possible options\n                // {\n                //     lang,\n                //     defaultPath,\n                //     path,\n                //     uploadDir,\n                //     fileFilter,\n                //     folderFilter,\n                //     mode: 'open',\n                //     view: 'prev',\n                //     userArg: wdata,\n                //     conn,\n                //     zindex\n                // }\n                this.props.showLegacyFileSelector((data, userArg) => onChange(data, userArg), options);\n            };\n        }\n\n        return {\n            version: 2,\n            states: this.canStates,\n            objects: {},\n            isTouch: this.isTouch,\n            activeWidgets: [],\n            navChangeCallbacks: [],\n            editMode: !!this.props.editMode,\n            binds: {},\n            views: store.getState().visProject,\n            activeView: this.props.selectedView,\n            language: this.props.lang,\n            user: '',\n            projectPrefix: this.props.projectName,\n            _: translate,\n            dateFormat: '',\n            instance: window.localStorage.getItem('visInstance'),\n            loginRequired: false,\n            viewsActiveFilter: this.viewsActiveFilter,\n            onChangeCallbacks: this.onChangeCallbacks,\n            subscribing: {\n                activeViews: [],\n                byViews: {},\n                active: [],\n                IDs: [],\n            },\n            conn: this.conn,\n            lastChangedView: null, // used in vis-2 to save last sent view name over vis-2.0.command\n            updateContainers: () => {\n                const refViews = this.refViews;\n                Object.keys(refViews).forEach(view => refViews[view].onCommand('updateContainers'));\n            },\n            renderView: (viewDiv, view, hidden, cb) => {\n                if (typeof view === 'boolean') {\n                    cb = hidden;\n                    hidden   = undefined;\n                    view     = viewDiv;\n                }\n                console.warn('renderView not implemented: ', viewDiv, view, hidden);\n                if (!this.state.legacyRequestedViews.includes(viewDiv)) {\n                    const legacyRequestedViews = [...this.state.legacyRequestedViews];\n                    legacyRequestedViews.push(viewDiv);\n                    this.setState({ legacyRequestedViews }, () =>\n                        setTimeout(() => cb && cb(viewDiv, view), 100));\n                } else {\n                    // show this view\n                    cb && cb(viewDiv, view);\n                }\n            },\n            updateFilter: view => {\n                view = view || this.props.activeView;\n                if (this.refViews[view]) {\n                    // collect all possible filters of widgets\n                    if (this.refViews[view]?.onCommand) {\n                        return this.refViews[view].onCommand('collectFilters');\n                    }\n                }\n                return [];\n            },\n            destroyUnusedViews: () => {\n                console.warn('destroyUnusedViews not implemented');\n            },\n            changeFilter: (view, filter, showEffect, showDuration, hideEffect, hideDuration) =>\n                this.changeFilter(view, filter, showEffect, showDuration, hideEffect, hideDuration),\n            detectBounce: (el, isUp) => {\n                if (!this.isTouch) {\n                    return false;\n                }\n\n                // Protect against two events\n                const now = Date.now();\n                // console.log('gclick: ' + this.lastChange + ' ' + (now - this.lastChange));\n                if (this.lastChange && now - this.lastChange < this.debounceInterval) {\n                    // console.log('gclick: filtered');\n                    return true;\n                }\n                let tag = el.tagName.toLowerCase();\n                while (tag !== 'div') {\n                    el = el.parentNode;\n                    tag = el.tagName.toLowerCase();\n                }\n                const lastClick = el[`__vis_${isUp ? 'lcu' : 'lc'}`];\n                // console.log('click: ' + lastClick + ' ' + (now - lastClick));\n                if (lastClick && now - lastClick < this.debounceInterval) {\n                    console.log('click: filtered out');\n                    return true;\n                }\n                el[`__vis_${isUp ? 'lcu' : 'lc'}`] = now;\n                return false;\n            },\n            setValue: this.setValue,\n            changeView: (viewDiv, view, hideOptions, showOptions, sync, cb) => {\n                if (typeof view === 'object') {\n                    cb = sync;\n                    sync = showOptions;\n                    hideOptions = showOptions;\n                    view = viewDiv;\n                }\n                if (!view && viewDiv) {\n                    view = viewDiv;\n                }\n                if (typeof hideOptions === 'function') {\n                    cb = hideOptions;\n                }\n                if (typeof showOptions === 'function') {\n                    cb = showOptions;\n                }\n                if (typeof sync === 'function') {\n                    cb = sync;\n                }\n\n                this.changeView(view);\n                cb && cb(viewDiv, view);\n            },\n            getCurrentPath() {\n                return VisEngine.getCurrentPath();\n            },\n            navigateInView(path) {\n                const currentPath = VisEngine.getCurrentPath();\n                const newHash = VisEngine.buildPath(currentPath.view, path);\n                if (window.location.hash !== newHash) {\n                    window.location.hash = newHash;\n                }\n            },\n            onWakeUp: (cb, wid) => {\n                if (typeof cb === 'string' && wid === undefined) {\n                    wid = cb;\n                    cb = null;\n                }\n\n                if (!wid) {\n                    console.warn('No widget ID for onWakeUp callback! Please fix');\n                }\n                console.warn('onWakeUp not implemented');\n                if (!cb) {\n                    // remove callback\n                    this.wakeUpCallbacks = this.wakeUpCallbacks.filter(item => item.wid !== wid);\n                } else {\n                    // add callback\n                    this.wakeUpCallbacks.push({ cb, wid });\n                }\n            },\n            inspectWidgets: (viewDiv, view, addWidget, delWidget, onlyUpdate) => {\n                console.warn('inspectWidgets not implemented: ', viewDiv, view, addWidget, delWidget, onlyUpdate);\n            },\n            showMessage: (message, title, icon, width, callback) => this.showMessage(message, title, icon, width, callback),\n            showWidgetHelper: (viewDiv, view, wid, isShow) => {\n                console.warn('showWidgetHelper not implemented: ', viewDiv, view, wid, isShow);\n            },\n            findNearestResolution: (resultRequiredOrX, height) => VisEngine.findNearestResolution(resultRequiredOrX, height),\n            addFont: fontName => {\n                if (!this.fontNames.includes(fontName)) {\n                    this.fontNames.push(fontName);\n                    if (this.props.onFontsUpdate) {\n                        this.fontTimer && clearTimeout(this.fontTimer);\n                        this.fontTimer = setTimeout(() => {\n                            this.fontTimer = null;\n                            this.props.onFontsUpdate(this.fontNames);\n                        });\n                    }\n                }\n            },\n            registerOnChange: (callback, arg, wid) => {\n                !wid && console.warn('No widget ID for registerOnChange callback! Please fix');\n\n                if (!this.onChangeCallbacks.find(item => item.callback === callback && item.arg === arg && (!wid || item.wid === wid))) {\n                    this.onChangeCallbacks.push({ callback, arg, wid });\n                }\n            },\n            unregisterOnChange: (callback, arg, wid) => {\n                !wid && console.warn('No widget ID for unregisterOnChange callback! Please fix');\n\n                const index = this.onChangeCallbacks.findIndex(item => item.callback === callback &&\n                    (arg === undefined || arg === null || item.arg === arg) &&\n                    (!wid || item.wid === wid));\n\n                if (index >= 0) {\n                    this.onChangeCallbacks.splice(index, 1);\n                }\n            },\n            generateInstance: () => {\n                let instance = (Math.random() * 4294967296).toString(16);\n                instance = `0000000${instance}`;\n                instance = instance.substring(instance.length - 8);\n                window.vis.instance = instance;\n                window.localStorage.setItem('visInstance', instance);\n                return this.instance;\n            },\n            findByRoles: (stateId, roles) => {\n                if (typeof roles !== 'object') {\n                    roles = [roles];\n                } else {\n                    roles = JSON.parse(JSON.stringify(roles));\n                }\n                const result = {};\n                // try to detect other values\n\n                // Go through all channels of this device\n                const parts = stateId.split('.');\n                parts.pop(); // remove state\n                const channel = parts.join('.');\n                const reg = new RegExp(`^${channel.replace(/\\./g, '\\\\.')}\\\\.`);\n\n                // channels\n                for (const id in this.vis.objects) {\n                    if (reg.test(id) &&\n                        this.vis.objects[id].common &&\n                        this.vis.objects[id].type === 'state') {\n                        for (let r = 0; r < roles.length; r++) {\n                            if (this.vis.objects[id].common.role === roles[r]) {\n                                result[roles[r]] = id;\n                                roles.splice(r, 1);\n                                break;\n                            } else if (!roles.length) {\n                                break;\n                            }\n                        }\n                    }\n                }\n                // try to search in channels\n                if (roles.length) {\n                    parts.pop(); // remove channel\n                    const device = parts.join('.');\n                    const _reg = new RegExp(`^${device.replace(/\\./g, '\\\\.')}\\\\.`);\n                    for (const id in this.vis.objects) {\n                        if (_reg.test(id) &&\n                            this.vis.objects[id].common &&\n                            this.vis.objects[id].type === 'state'\n                        ) {\n                            for (let r = 0; r < roles.length; r++) {\n                                if (this.vis.objects[id].common.role === roles[r]) {\n                                    result[roles[r]] = id;\n                                    roles.splice(r, 1);\n                                    break;\n                                }\n                            }\n                            if (!roles.length) {\n                                break;\n                            }\n                        }\n                    }\n                }\n                return result;\n            },\n            findByName: (stateId, objName) => {\n                // try to detect other values\n\n                // Go through all channels of this device\n                const parts = stateId.split('.');\n                parts.pop(); // remove state\n                const channel = parts.join('.');\n\n                // check same channel\n                const id = `${channel}.${objName}`;\n                if ((id in this.vis.objects) &&\n                    this.vis.objects[id].common &&\n                    this.vis.objects[id].type === 'state'\n                ) {\n                    return id;\n                }\n\n                // try to search in channels\n                parts.pop(); // remove channel\n                const device = parts.join('.');\n                const reg = new RegExp(`^${device.replace(/\\./g, '\\\\.')}\\\\..*\\\\.${objName}`);\n                for (const _id in this.vis.objects) {\n                    if (reg.test(_id) &&\n                        this.vis.objects[_id].common &&\n                        this.vis.objects[_id].type === 'state'\n                    ) {\n                        return _id;\n                    }\n                }\n                return false;\n            },\n            hideShowAttr: widAttr => console.warn('hideShowAttr is deprecated: ', widAttr),\n            bindingsCache: {},\n            extractBinding: (format, doNotIgnoreEditMode) => {\n                if ((!doNotIgnoreEditMode && !!this.props.editMode) || !format) {\n                    return null;\n                }\n\n                if (this.vis.bindingsCache[format]) {\n                    return JSON.parse(JSON.stringify(this.vis.bindingsCache[format]));\n                }\n\n                const result = extractBinding(format);\n\n                // cache bindings\n                if (result) {\n                    this.vis.bindingsCache = this.vis.bindingsCache || {};\n                    this.vis.bindingsCache[format] = JSON.parse(JSON.stringify(result));\n                }\n\n                return result;\n            },\n            formatBinding: (format, view, wid, widget, widgetData, values) =>\n                this.formatUtils.formatBinding({\n                    format, view, wid, widget, widgetData, values, moment,\n                }),\n            getViewOfWidget: id => {\n                const views = store.getState().visProject;\n                // find a view of this widget\n                for (const v in views) {\n                    if (v === '___settings') {\n                        continue;\n                    }\n                    if (views[v]?.widgets && views[v].widgets[id]) {\n                        return v;\n                    }\n                }\n                return null;\n            },\n            confirmMessage: (message, title, icon, width, callback) =>\n                this.props.onConfirmDialog(message, title, icon, width, callback),\n            config: {}, // storage of dialog positions and size (Deprecated)\n            showCode: (code, title, mode) => this.props.onShowCode(code, title, mode),\n            findCommonAttributes: (/* view, widgets */) => {\n\n            },\n            bindWidgetClick: () => {\n                // used in vis.1\n                // do nothing, as it is not required in react\n            },\n            preloadImages: srcs => {\n                // preload images\n                this.preloadImagesCacheImgs = this.preloadImagesCacheImgs || [];\n                this.preloadImagesCacheSrcs = this.preloadImagesCacheSrcs || [];\n                if (!Array.isArray(srcs)) {\n                    srcs = [srcs];\n                }\n                for (let i = 0; i < srcs.length; i++) {\n                    if (!this.preloadImagesCacheSrcs.includes(srcs[i])) {\n                        const img = new Image();\n                        img.src = srcs[i];\n                        this.preloadImagesCacheImgs.push(img);\n                        this.preloadImagesCacheSrcs.push(srcs[i]);\n                    }\n                }\n            },\n            updateStates: data => {\n                data && Object.keys(data).forEach(id => {\n                    let state = data[id];\n\n                    if (id.startsWith('local_')) {\n                        // if it is a local variable, we have to initiate this\n                        state = {\n                            val: getUrlParameter(id), // using url parameter to set the initial value of the local variable\n                            ts: Date.now(),\n                            lc: Date.now(),\n                            ack: false,\n                            from: `system.adapter.${this.props.adapterName}.${this.props.instance}`,\n                            user: this.props.currentUser ? this.props.currentUser._id : 'system.user.admin',\n                            q: 0,\n                        };\n                    }\n\n                    if (!state) {\n                        return;\n                    }\n\n                    this.setValue(id, state);\n                });\n            },\n            getHistory: (id, options, cb) => {\n                options = options || {};\n                options.timeout = options.timeout || 2000;\n\n                let timeout = setTimeout(() => {\n                    timeout = null;\n                    cb('timeout');\n                }, options.timeout);\n\n                this.props.socket.getHistory(id, options)\n                    .then(result => {\n                        if (timeout) {\n                            clearTimeout(timeout);\n                            timeout = null;\n                        }\n                        cb(null, result);\n                    })\n                    .catch(error => {\n                        if (timeout) {\n                            clearTimeout(timeout);\n                            timeout = null;\n                        }\n                        cb(error);\n                    });\n            },\n            getHttp: (url, callback) =>\n                this.props.socket.getRawSocket().emit('httpGet', url, data =>\n                    callback && callback(data)),\n            formatDate: (dateObj, isDuration, _format) => this.formatUtils.formatDate(dateObj, isDuration, _format),\n            widgets: this.allWidgets,\n            editSelect:         this.props.runtime ? null : (widAttr, values, notTranslate, init, onchange) => {\n                console.log('DEPRECATED!!!!! please remove vis.editSelect');\n                if (typeof notTranslate === 'function') {\n                    onchange = init;\n                    init = notTranslate;\n                    notTranslate = false;\n                }\n\n                // Select\n                const line = {\n                    input: `<select type=\"text\" id=\"inspect_${widAttr}\">`,\n                };\n                if (onchange) {\n                    line.onchange = onchange;\n                }\n                if (init) {\n                    line.init = init;\n                }\n                if (values.length && values[0] !== undefined) {\n                    for (let t = 0; t < values.length; t++) {\n                        line.input += `<option value=\"${values[t]}\">${notTranslate ? values[t] : window.vis._(values[t])}</option>`;\n                    }\n                } else {\n                    for (const name in values) {\n                        line.input += `<option value=\"${values[name]}\">${name}</option>`;\n                    }\n                }\n                line.input += '</select>';\n                return line;\n            },\n            isWidgetHidden: (view, widget, val, widgetData) => {\n                widgetData = widgetData || store.getState().visProject[view].widgets[widget].data;\n                const oid = widgetData['visibility-oid'];\n                const condition = widgetData['visibility-cond'];\n                if (oid) {\n                    if (val === undefined || val === null) {\n                        val = this.canStates.attr(`${oid}.val`);\n                    }\n                    if (val === undefined || val === null) {\n                        return condition === 'not exist';\n                    }\n\n                    let value = widgetData['visibility-val'];\n\n                    if (!condition || value === undefined || value === null) {\n                        return condition === 'not exist';\n                    }\n\n                    if (val === 'null' && condition !== 'exist' && condition !== 'not exist') {\n                        return false;\n                    }\n\n                    const t = typeof val;\n                    if (t === 'boolean' || val === 'false' || val === 'true') {\n                        value = value === 'true' || value === true || value === 1 || value === '1';\n                    } else if (t === 'number') {\n                        value = parseFloat(value);\n                    } else if (t === 'object') {\n                        val = JSON.stringify(val);\n                    }\n\n                    // Take care: return true if the widget is hidden!\n                    switch (condition) {\n                        case '==':\n                            value = value.toString();\n                            val = val.toString();\n                            if (val === '1') val = 'true';\n                            if (value === '1') value = 'true';\n                            if (val === '0') val = 'false';\n                            if (value === '0') value = 'false';\n                            return value !== val;\n                        case '!=':\n                            value = value.toString();\n                            val = val.toString();\n                            if (val === '1') val = 'true';\n                            if (value === '1') value = 'true';\n                            if (val === '0') val = 'false';\n                            if (value === '0') value = 'false';\n                            return value === val;\n                        case '>=':\n                            return val < value;\n                        case '<=':\n                            return val > value;\n                        case '>':\n                            return val <= value;\n                        case '<':\n                            return val >= value;\n                        case 'consist':\n                            value = value.toString();\n                            val = val.toString();\n                            return !val.toString().includes(value);\n                        case 'not consist':\n                            value = value.toString();\n                            val = val.toString();\n                            return val.toString().includes(value);\n                        case 'exist':\n                            return val === 'null';\n                        case 'not exist':\n                            return val !== 'null';\n                        default:\n                            console.log(`Unknown visibility condition for ${widget}: ${condition}`);\n                            return false;\n                    }\n                } else {\n                    return condition === 'not exist';\n                }\n            },\n            getUserGroups: () => this.props.userGroups,\n        };\n    }\n\n    changeFilter(view, filter, showEffect, showDuration, hideEffect, hideDuration) {\n        view = view || this.props.activeView;\n        if (this.refViews[view]?.onCommand) {\n            this.refViews[view].onCommand('changeFilter', {\n                filter, showEffect, showDuration, hideEffect, hideDuration,\n            });\n        }\n    }\n\n    // allows sending command to view\n    onCommand = (view, command, data) => {\n        if (this.refViews[view]?.onCommand) {\n            this.refViews[view].onCommand(command, data);\n        }\n    };\n\n    showMessage(message, title, icon, width, callback) {\n        if (typeof icon === 'number') {\n            callback = width;\n            width = icon;\n            icon = null;\n        }\n        if (typeof title === 'function') {\n            callback = title;\n            title = null;\n        } else if (typeof icon === 'function') {\n            callback = icon;\n            icon = null;\n        } else if (typeof width === 'function') {\n            callback = width;\n            width = null;\n        }\n\n        this.setState({\n            showMessage: {\n                message, title, icon, width, callback,\n            },\n        });\n    }\n\n    renderMessageDialog() {\n        if (!this.state.showMessage) {\n            return null;\n        }\n\n        return <Dialog\n            key=\"__messageDialog\"\n            open={!0}\n            onClose={() => {\n                const callback = this.state.showMessage.callback;\n                if (typeof callback === 'function') {\n                    callback(false);\n                }\n                this.setState({ showMessage: null });\n            }}\n            maxWidth=\"md\"\n        >\n            <DialogTitle>{this.state.showMessage.title || I18n.t('Message')}</DialogTitle>\n            <DialogContent>\n                { this.state.showMessage.icon === 'alert' ? <AlertIcon /> : null }\n                { this.state.showMessage.message }\n            </DialogContent>\n            <DialogActions>\n                <Button\n                    variant=\"contained\"\n                    onClick={() => {\n                        const callback = this.state.showMessage.callback;\n                        if (typeof callback === 'function') {\n                            callback(true);\n                        }\n                        this.setState({ showMessage: null });\n                    }}\n                    color=\"primary\"\n                    startIcon={<CheckIcon />}\n                >\n                    {I18n.t('Ok')}\n                </Button>\n                { this.state.showMessage.callback ? <Button\n                    variant=\"contained\"\n                    color=\"grey\"\n                    onClick={() => {\n                        const callback = this.state.showMessage.callback;\n                        if (typeof callback === 'function') {\n                            callback(false);\n                        }\n                        this.setState({ showMessage: null });\n                    }}\n                    startIcon={<CloseIcon />}\n                >\n                    {I18n.t('Cancel')}\n                </Button> : null }\n            </DialogActions>\n        </Dialog>;\n    }\n\n    createConnection() {\n        // props.socket\n        return {\n            namespace: this.props.adapterId,\n            logError: errorText => {\n                console.error(`Error: ${errorText}`);\n                this.props.socket.log(errorText, 'error');\n            },\n            getIsConnected: () => this.props.socket.isConnected(),\n            getGroups: (groupName, useCache, cb) => {\n                if (typeof groupName === 'function') {\n                    cb = groupName;\n                    groupName = null;\n                    useCache = false;\n                }\n                if (typeof groupName === 'boolean') {\n                    cb = useCache;\n                    useCache = groupName;\n                    groupName = null;\n                }\n                if (typeof useCache === 'function') {\n                    cb = useCache;\n                    useCache = false;\n                }\n                groupName = groupName || '';\n\n                return this.readGroups(groupName, !useCache)\n                    .then(groups => cb(groups))\n                    .catch(error => cb(error));\n            },\n            getConfig: (useCache, cb) => {\n                if (typeof useCache === 'function') {\n                    cb = useCache;\n                    useCache = false;\n                }\n\n                return this.props.socket.getSystemConfig(!useCache)\n                    .then(systemConfig => cb(null, systemConfig.common))\n                    .catch(error => cb(error));\n            },\n            getObjects: (useCache, cb) => {\n                if (typeof useCache === 'function') {\n                    cb = useCache;\n                    useCache = false;\n                }\n                let objects = {};\n\n                return new Promise((resolve, reject) => {\n                    this.props.socket.getRawSocket().emit('getObjects', (err, res) => {\n                        if (err) {\n                            reject(err);\n                            return;\n                        }\n\n                        if (res && res.rows) {\n                            for (let i = 0; i < res.rows.length; i++) {\n                                objects[res.rows[i].id] = res.rows[i].value;\n                            }\n                        } else {\n                            objects = res;\n                            resolve(objects);\n                        }\n                    });\n                })\n                    .then(() => this.props.socket.getEnums(!useCache))\n                    .then(enums => {\n                        Object.assign(objects, enums);\n                        return this.props.socket.getObjectViewSystem(\n                            'instance',\n                            'system.adapter.',\n                            'system.adapter.\\u9999',\n                        )\n                            .then(rows => {\n                                for (let i = 0; i < rows.length; i++) {\n                                    objects[rows[i]._id] = rows[i];\n                                }\n\n                                const instance = `system.adapter.${this.props.adapterName}.${this.props.instance}`;\n                                // find out the default file mode\n                                if (objects[instance]?.native?.defaultFileMode) {\n                                    this.defaultMode = objects[instance].native.defaultFileMode;\n                                }\n                            });\n                    })\n                    .then(() => this.props.socket.getObjectViewSystem('chart', '', '\\u9999')\n                        .catch(() => null))\n                    .then(charts => {\n                        charts && Object.assign(objects, charts);\n                        return this.props.socket.getObjectViewSystem('channel', '', '\\u9999');\n                    })\n                    .then(channels => {\n                        Object.assign(objects, channels);\n                        return this.props.socket.getObjectViewSystem('device', '', '\\u9999');\n                    })\n                    .then(devices => {\n                        Object.assign(objects, devices);\n                        if (cb) {\n                            cb(null, objects);\n                            return null;\n                        }\n\n                        return objects;\n                    })\n                    .catch(error => {\n                        console.error(`Cannot load objects: ${error}`);\n                        if (cb) {\n                            cb(error);\n                            return null;\n                        }\n\n                        return Promise.reject(error);\n                    });\n            },\n            getLoggedUser: cb => this.props.socket.getCurrentUser()\n                .then(user => cb(this.props.socket.isSecure, user)),\n            subscribe: IDs => this.subscribe(IDs),\n            unsubscribe: IDs => this.unsubscribe(IDs),\n            authenticate: (user, password, salt) => {\n                this._authRunning = true;\n\n                if (user !== undefined) {\n                    this._authInfo = {\n                        user,\n                        hash: password + salt,\n                        salt,\n                    };\n                }\n            },\n            getStates: (IDs, cb) => {\n                if (!IDs || !IDs.length) {\n                    cb && cb(null, {});\n                    return;\n                }\n                this.props.socket.getForeignStates(IDs)\n                    .then(data => cb(null, data))\n                    .catch(error => cb(error || 'Authentication required'));\n            },\n            setState: (id, val, cb) => {\n                if (!id) {\n                    cb && cb('No id');\n                    return;\n                }\n                this.props.socket.setState(id, val)\n                    .then(() => cb && cb())\n                    .catch(error => cb && cb(error));\n            },\n            setReloadTimeout: () => {\n\n            },\n            setReconnectInterval: () => {\n\n            },\n            getUser: () => this.userName,\n            sendCommand: (instance, command, data, ack) => this.props.socket.setState(this.ID_CONTROL_INSTANCE, { val: instance || 'notdefined', ack: true })\n                .then(() => this.props.socket.setState(this.ID_CONTROL_DATA, { val: data, ack: true }))\n                .then(() => this.props.socket.setState(this.ID_CONTROL_COMMAND, { val: command, ack: ack === undefined ? true : ack })),\n            readFile: (filename, cb) => {\n                let adapter = this.conn.namespace;\n                if (filename[0] === '/') {\n                    const p = filename.split('/');\n                    adapter = p[1];\n                    p.splice(0, 2);\n                    filename = p.join('/');\n                }\n\n                return readFile(this.props.socket, adapter, filename, true)\n                    .then(data => setTimeout(() => cb(null, data.file, filename, data.mimeType), 0))\n                    .catch(error => cb(error));\n            },\n            getHistory: (id, options, cb) => {\n                options = options || {};\n                options.timeout = options.timeout || 2000;\n\n                let timeout = setTimeout(() => {\n                    timeout = null;\n                    cb('timeout');\n                }, options.timeout);\n\n                this.props.socket.getHistory(id, options)\n                    .then(result => {\n                        if (timeout) {\n                            clearTimeout(timeout);\n                            timeout = null;\n                        }\n                        cb(null, result);\n                    })\n                    .catch(error => {\n                        if (timeout) {\n                            clearTimeout(timeout);\n                            timeout = null;\n                        }\n                        cb(error);\n                    });\n            },\n            getHttp: (url, callback) => this.props.socket.getRawSocket().emit('httpGet', url, data => callback && callback(data)),\n            _socket: {\n                emit: (cmd, data, cb) => {\n                    let promise;\n                    if (cmd === 'getObject') {\n                        promise = this.props.socket.getObject(data);\n                    } else if (cmd === 'getState') {\n                        promise = this.props.socket.getState(data);\n                    } else if (cmd === 'getStates') {\n                        promise = this.props.socket.getStates(data);\n                    }\n                    if (promise) {\n                        promise.then(obj => cb && cb(null, obj))\n                            .catch(error => cb && cb(error));\n                    } else {\n                        console.warn(`Unknown command in _socket.emit: ${cmd}`);\n                    }\n                },\n            },\n        };\n    }\n\n    registerViewRef = (view, ref, onCommand) => {\n        if (this.refViews[view] && this.refViews[view].ref === ref) {\n            console.error(`Someone tries to register same ref for view ${view}`);\n        } else {\n            this.refViews[view] && console.error(`Someone tries to register new ref for view ${view}`);\n            this.refViews[view] = { ref, onCommand };\n        }\n    };\n\n    unregisterViewRef = (view, ref) => {\n        if (this.refViews[view] && this.refViews[view].ref === ref) {\n            delete this.refViews[view];\n        } else if (this.refViews[view]) {\n            this.refViews[view] && console.error(`Someone tries to unregister new ref for view ${view}`);\n            delete this.refViews[view];\n        }\n    };\n\n    getViewRef = view => this.refViews[view]?.ref;\n\n    static findNearestResolution(resultRequiredOrX, height) {\n        let w;\n        let h;\n\n        if (height !== undefined && height !== null) {\n            w = resultRequiredOrX;\n            h = height;\n            resultRequiredOrX = false;\n        } else {\n            w = window.document.body.clientWidth;\n            h = window.document.body.clientHeight;\n        }\n\n        let result = null;\n        const views = [];\n        let difference = 10_000;\n\n        const { visProject } = store.getState();\n        // First, find all with the best fitting width\n        Object.keys(visProject).forEach(view => {\n            if (view !== '___settings' &&\n                visProject[view].settings &&\n                visProject[view].settings.useAsDefault\n            ) {\n                const ww = parseInt(visProject[view].settings.sizex, 10);\n                // If difference less than 20%\n                if (Math.abs(ww - w) / ww < 0.2) {\n                    views.push(view);\n                }\n            }\n        });\n\n        views.forEach(view => {\n            if (view !== '___settings' && visProject[view].settings) {\n                const hh = parseInt(visProject[view].settings.sizey, 10);\n                if (Math.abs(hh - h) < difference) {\n                    result = view;\n                    difference = Math.abs(hh - h);\n                }\n            }\n        });\n\n        // try to find by ratio\n        if (!result) {\n            const ratio = w / h;\n            difference = 10_000;\n\n            Object.keys(visProject).forEach(view => {\n                if (view !== '___settings' && visProject[view].settings?.useAsDefault) {\n                    const ww = parseInt(visProject[view].settings.sizex, 10);\n                    const hh = parseInt(visProject[view].settings.sizey, 10);\n\n                    // If difference less than 20%\n                    if (hh && Math.abs(ratio - (ww / hh)) < difference) {\n                        result = view;\n                        difference = Math.abs(ratio - (ww / hh));\n                    }\n                }\n            });\n        }\n\n        if (!result && resultRequiredOrX) {\n            result = Object.keys(visProject).find(view => view !== '___settings' && visProject[view].settings?.useAsDefault);\n            result = result || Object.keys(visProject).find(view => view !== '___settings');\n        }\n\n        return result;\n    }\n\n    readGroups(groupName, useCache) {\n        return this.props.socket.getGroups(!useCache)\n            .then(groups => {\n                const result = {};\n                if (groupName) {\n                    const gg = `system.group.${groupName}`;\n                    groups = groups.filter(group => group._id.startsWith(`${gg}.`) || group._id === gg);\n                }\n\n                groups.forEach(group => result[group._id] = group);\n                return result;\n            });\n    }\n\n    initCanObjects() {\n        // creat \"Can\" objects\n        return new this.can.Map({ 'nothing_selected.val': null });\n\n        /*\n        if (false && this.props.editMode) {\n           this.canStates.__attr = this.canStates.attr; // save original attr\n\n           const that = this;\n           this.canStates.attr = function (attr, val) {\n               if (val === undefined) {\n                   if (typeof attr === 'string') {\n                       // read\n                       return this.__attr(attr);\n                   } else {\n                       // write\n                       return this.__attr(attr);\n                   }\n               } else {\n                   return this.__attr(attr, val);\n               }\n\n               const type = typeof attr;\n               if (type !== 'string' && type !== 'number') {\n                   // allow only dev1, dev2, ... to be bound\n                   if (Object.keys(attr).find(o => o && o.match(/^dev\\d+(.val|.ack|.tc|.lc)+/))) {\n                       return this.__attr(attr, val);\n                   }\n               } else if (arguments.length === 1 && attr) {\n                   if (attr.match(/^dev\\d+(.val|.ack|.tc|.lc)+/)) {\n                       this.can.__reading(this, attr);\n                       return this._get(attr);\n                   }\n                   return that.canStates[attr];\n               } else {\n                   console.log('This is ERROR!');\n                   this._set(attr, val);\n                   return this;\n               }\n           };\n\n           // binding\n           this.canStates.___bind = this.canStates.bind; // save original bind\n           this.canStates.bind = function (id, callback) {\n               return this.___bind(id, callback);\n               // allow only dev1, dev2, ... to be bound\n               //if (id && id.match(/^dev\\d+(.val|.ack|.tc|.lc)+/)) {\n               //    return this.___bind(id, callback);\n               //}\n               // console.log('ERROR: binding in edit mode is not allowed on ' + id);\n           };\n\n        }\n        */\n    }\n\n    _setValue(id, val) {\n        const oldVal = this.canStates.attr(`${id}.val`);\n\n        // Send ack=false with new value to all widgets\n        this.onStateChange(id, { val, ack: false });\n\n        if (id.startsWith('local_')) {\n            // update local variable state -> needed for binding, etc.\n            return;\n        }\n\n        // save actual value to restore it in case of error\n        this.props.socket.setState(id, { val, ack: false })\n            .catch(error => {\n                console.error(`Cannot set ${id} with \"${val}: ${error}`);\n                if (oldVal === undefined) {\n                    this.canStates.removeAttr(`${id}.val`);\n                    this.canStates.removeAttr(`${id}.q`);\n                    this.canStates.removeAttr(`${id}.from`);\n                    this.canStates.removeAttr(`${id}.ts`);\n                    this.canStates.removeAttr(`${id}.lc`);\n                    this.canStates.removeAttr(`${id}.ack`);\n                } else {\n                    // If error set value back, but we need generate the edge\n                    this.canStates.attr(`${id}.val`, oldVal);\n                }\n            });\n    }\n\n    setValue = (id, val) => {\n        if (!id) {\n            console.log(`ID is null for val=${val}`);\n            return;\n        }\n\n        // if no de-bounce running\n        if (!this.statesDebounce[id]) {\n            // send control command\n            this._setValue(id, val);\n\n            // Start timeout\n            this.statesDebounce[id] = {\n                timeout: setTimeout(() => {\n                    if (this.statesDebounce[id]) {\n                        if (this.statesDebounce[id].state !== null && this.statesDebounce[id].state !== undefined) {\n                            this._setValue(id, this.statesDebounce[id].state);\n                        }\n\n                        delete this.statesDebounce[id];\n                    }\n                }, this.statesDebounceTime, id),\n                state: null,\n            };\n        } else {\n            // If some debounce running, change last value\n            this.statesDebounce[id].state = val;\n        }\n    };\n\n    static async loadScriptsOfOneWidgetSet(widgetSet) {\n        for (const { oldScript, newScript } of widgetSet) {\n            try {\n                newScript.appendChild(document.createTextNode(oldScript.innerHTML));\n                oldScript.parentNode.replaceChild(newScript, oldScript);\n\n                await new Promise((resolve, reject) => {\n                    newScript.onerror = reject;\n                    newScript.onload = resolve;\n                });\n            } catch (e) {\n                console.error(`Cannot load script \"${newScript.src}\": ${JSON.stringify(e)}`);\n            }\n        }\n    }\n\n    static loadedSources = [];\n\n    static async setInnerHTML(elm, html, usedWidgetSets) {\n        elm.innerHTML = html;\n        // we must load script one after another, to keep the order\n        const scripts = Array.from(elm.querySelectorAll('script'));\n\n        // load all scripts of one widget set sequentially and all groups of scripts in parallel\n        const groups = {};\n\n        for (let s = 0; s < scripts.length; s++) {\n            const oldScript = scripts[s];\n            const src = oldScript.getAttribute('src');\n            if (src && VisEngine.loadedSources.includes(src)) {\n                continue;\n            }\n            VisEngine.loadedSources.push(src);\n            const newScript = document.createElement('script');\n\n            let widgetSet = 'default';\n\n            Array.from(oldScript.attributes)\n                .forEach(attr => {\n                    try {\n                        if (attr.name === 'data-widgetset') {\n                            widgetSet = attr.value;\n                        } else {\n                            newScript.setAttribute(attr.name, attr.value);\n                        }\n                    } catch (error) {\n                        console.error(`WTF?? in ${attr.ownerElement.id}: ${error}`);\n                    }\n                });\n\n            // do not load scripts of the unused widgets in runtime mode\n            if (!usedWidgetSets || widgetSet === 'default' || usedWidgetSets.includes(widgetSet)) {\n                if (src) {\n                    // ejs script\n                    groups[widgetSet] = groups[widgetSet] || [];\n                    groups[widgetSet].push({ newScript, oldScript });\n                } else {\n                    // inline script\n                    let loadTimer = setTimeout(tpl => {\n                        console.error(`Cannot load ${tpl}`);\n                    }, 500, oldScript.attributes.id?.value || oldScript.attributes['data-widgetset']?.value);\n                    try {\n                        newScript.appendChild(document.createTextNode(oldScript.innerHTML));\n                        oldScript.parentNode.replaceChild(newScript, oldScript);\n                        clearTimeout(loadTimer);\n                        loadTimer = null;\n                    } catch (error) {\n                        console.error(`Cannot set inner HTML of ${oldScript.text?.substring(0, 500)}: ${error}`);\n                    }\n                }\n            } else {\n                console.log(`Skip script \"${widgetSet}\" ${src || 'inline'}`);\n            }\n        }\n\n        await Promise.all(Object.keys(groups)\n            .map(widgetSet =>\n                VisEngine.loadScriptsOfOneWidgetSet(groups[widgetSet])));\n    }\n\n    loadEditWords() {\n        if (!this.props.runtime) {\n            return new Promise(resolve => {\n                const newScript = document.createElement('script');\n                newScript.setAttribute('src', 'lib/js/visEditWords.js');\n                newScript.onload = resolve;\n                window.document.head.appendChild(newScript);\n            });\n        }\n\n        return Promise.resolve();\n    }\n\n    async loadWidgets() {\n        try {\n            const data = await fetch('widgets.html');\n            const text = await data.text();\n            const div = document.createElement('div');\n            document.body.appendChild(div);\n\n            await VisEngine.setInnerHTML(div, text, this.props.runtime && VisWidgetsCatalog.getUsedWidgetSets(store.getState().visProject));\n\n            this.props.onLoaded && this.props.onLoaded();\n        } catch (error) {\n            console.error(`Cannot load widgets: ${error}`);\n            console.error(`Cannot load widgets: ${JSON.stringify(error.stack)}`);\n        }\n    }\n\n    updateWidget(view, wid, type, item, stateId, state) {\n        if (this.widgetChangeHandlers[wid]) {\n            this.widgetChangeHandlers[wid](type, item, stateId, state);\n        }\n    }\n\n    registerChangeHandler = (wid, cb) => {\n        if (this.props.editMode && this.widgetChangeHandlers[wid]) {\n            console.error('Someone installs handler without to remove it!');\n        }\n        this.widgetChangeHandlers[wid] = cb;\n    };\n\n    unregisterChangeHandler = (wid, cb) => {\n        if (this.widgetChangeHandlers[wid] === cb) {\n            delete this.widgetChangeHandlers[wid];\n        }\n    };\n\n    onUserCommand(instance, command, data) {\n        const currentInstance = window.localStorage.getItem('visInstance');\n        if (!instance || (instance !== currentInstance && instance !== 'FFFFFFFF' && !instance.includes('*'))) {\n            return false;\n        }\n        if (this.props.editMode && command !== 'tts' && command !== 'playSound') {\n            // show command\n            if (command !== 'changedView') {\n                window.alert(I18n.t('Received user command: %s', JSON.stringify({ instance, command, data })));\n            }\n            return true;\n        }\n\n        // external Commands\n        switch (command) {\n            case 'alert': {\n                const [message, title, icon] = data.split(';');\n                this.showMessage(message, title, icon);\n                break;\n            }\n            case 'changedView':\n                // Do nothing\n                return false;\n            case 'changeView': {\n                // there are two types of data\n                // \"ProjectName/ViewName\" or \"ViewName/subViewName\" or \"ViewName\"\n                const parts = data.split('/');\n\n                // it is \"ProjectName/ViewName\"\n                if (!store.getState().visProject[parts[0]] && parts[1]) {\n                    const projectName = parts.shift();\n                    // detect actual project\n                    if (projectName !== this.props.projectName) {\n                        const viewName = parts.join('/');\n                        if (window.location.search.includes('runtime=')) {\n                            document.location.href = `./?${projectName}&runtime=true#${viewName}`;\n                        } else {\n                            document.location.href = `./?${projectName}#${viewName}`;\n                        }\n                        return true;\n                    }\n                    const viewName = parts.shift();\n                    this.changeView(viewName, parts.join('/'));\n                } else {\n                    // it is \"ViewName/subViewName\" or \"ViewName\"\n                    const viewName = parts.shift();\n                    this.changeView(viewName, parts.join('/'));\n                }\n                break;\n            }\n            case 'refresh':\n            case 'reload':\n                setTimeout(() =>\n                    window.location.reload(), 1);\n                break;\n            case 'dialog':\n            case 'dialogOpen': {\n                const { visProject } = store.getState();\n                const el = window.document.getElementById(data) || window.document.querySelector(`[data-dialog-name=\"${data}\"]`);\n                // get reference to view\n                const viewName = Object.keys(visProject).find(view => visProject[view].widgets?.[data]);\n                if (viewName && this.refViews[viewName]?.onCommand) {\n                    this.refViews[viewName].onCommand('openDialog', data);\n                }\n\n                if (el?._showDialog) {\n                    el._showDialog(true);\n                } else {\n                    // noinspection JSJQueryEfficiency\n                    window.jQuery(`#${data}_dialog`).dialog('open');\n                }\n                break;\n            }\n            case 'dialogClose': {\n                const { visProject } = store.getState();\n                const el = window.document.getElementById(data) || window.document.querySelector(`[data-dialog-name=\"${data}\"]`);\n                // get reference to view\n                const viewName = Object.keys(visProject).find(view => visProject[view].widgets?.[data]);\n                if (viewName && this.refViews[viewName]?.onCommand) {\n                    this.refViews[viewName].onCommand('closeDialog', data);\n                }\n\n                if (el?._showDialog) {\n                    el._showDialog(false);\n                } else {\n                    // noinspection JSJQueryEfficiency\n                    window.jQuery(`#${data}_dialog`).dialog('close');\n                }\n                break;\n            }\n            case 'popup':\n                window.open(data);\n                break;\n            case 'playSound':\n                setTimeout(() => {\n                    let href;\n\n                    if (data && data.match(/^http(s)?:\\/\\//)) {\n                        href = data;\n                    } else {\n                        href = `${window.location.protocol}//${window.location.hostname}:${window.location.port}${data}`;\n                    }\n                    // force read from server\n                    href += `?${Date.now()}`;\n                    if (this.refSound?.current) {\n                        this.refSound.current.setAttribute('src', href);\n                        this.refSound.current.setAttribute('muted', false);\n                        this.refSound.current.play();\n                    } else if (typeof Audio !== 'undefined') {\n                        const snd = new Audio(href); // buffers automatically when created\n                        snd.play()\n                            .catch(e => console.error(`Cannot play sound: ${e}`));\n                    } else {\n                        let sound = window.document.getElementById('external_sound');\n                        if (!sound) {\n                            sound = document.createElement('audio');\n                            sound.setAttribute('id', 'external_sound');\n                            window.document.body.appendChild(sound);\n                        }\n                        sound.setAttribute('src', href);\n                        sound.play();\n                    }\n                }, 1);\n                break;\n            case 'tts':\n                if (typeof window.app !== 'undefined') {\n                    window.app.tts(data);\n                }\n                break;\n            default:\n                this.conn.logError(`unknown external command ${command}`);\n        }\n\n        return false;\n    }\n\n    onStateChange = (id, state) => {\n        if (!id || state === null || typeof state !== 'object') {\n            return;\n        }\n\n        if (id === this.ID_CONTROL_COMMAND) {\n            if (state.ack) {\n                return;\n            }\n\n            // ignore too old commands\n            if (state.ts && Date.now() - state.ts > 5_000) {\n                return;\n            }\n\n            // if command is a JSON string\n            if (state.val &&\n                typeof state.val === 'string' &&\n                state.val[0] === '{' &&\n                state.val[state.val.length - 1] === '}'\n            ) {\n                // try to parse it\n                try {\n                    state.val = JSON.parse(state.val);\n                } catch (e) {\n                    console.warn(`Command seems to be an object, but cannot parse it: ${state.val}`);\n                }\n            }\n\n            // if command is an object {instance: 'iii', command: 'cmd', data: 'ddd'}\n            if (state.val?.instance) {\n                if (this.onUserCommand(state.val.instance, state.val.command, state.val.data)) {\n                    // clear state\n                    this.props.socket.setState(id, { val: '', ack: true })\n                        .catch(error => console.error(`Cannot reset ${id}: ${error}`));\n                }\n            } else if (this.onUserCommand(this._cmdInstance, state.val, this._cmdData)) {\n                // clear state\n                this.props.socket.setState(id, { val: '', ack: true })\n                    .catch(error => console.error(`Cannot reset ${id}: ${error}`));\n            }\n\n            return;\n        }\n\n        if (id === this.ID_CONTROL_DATA) {\n            if (state.ack) {\n                return;\n            }\n\n            // ignore too old commands\n            if (this._cmdData !== undefined && state.ts && Date.now() - state.ts > 5_000) {\n                return;\n            }\n            this._cmdData = state.val;\n            return;\n        }\n\n        if (id === this.ID_CONTROL_INSTANCE) {\n            if (state.ack) {\n                return;\n            }\n\n            // ignore too old commands\n            if (this._cmdInstance !== undefined && state.ts && Date.now() - state.ts > 5_000) {\n                return;\n            }\n            this._cmdInstance = state.val;\n            return;\n        }\n\n        // Do not update locals\n        // not needed for local variables\n        const o = {};\n        // Check new model\n        o[`${id}.val`] = state.val;\n\n        if (state.ts !== undefined) {\n            o[`${id}.ts`] = state.ts;\n        }\n        if (state.ack !== undefined) {\n            o[`${id}.ack`] = state.ack;\n        }\n        if (state.lc !== undefined) {\n            o[`${id}.lc`] = state.lc;\n        }\n        if (state.q !== undefined && state.q !== null) {\n            o[`${id}.q`] = state.q;\n        }\n\n        try {\n            this.canStates.attr(o);\n        } catch (e) {\n            this.props.socket.log(`Error: can't create states object for ${id}(${e}): ${JSON.stringify(e.stack)}`, 'error');\n        }\n\n        // process visibility\n        this.linkContext.visibility[id]?.forEach(item => {\n            this.updateWidget(item.view, item.widget, 'visibility', item);\n        });\n\n        // process signals\n        this.linkContext.signals[id]?.forEach(item => {\n            this.updateWidget(item.view, item.widget, 'signal', item, id);\n        });\n\n        // Process last update\n        this.linkContext.lastChanges[id]?.forEach(item => {\n            this.updateWidget(item.view, item.widget, 'lastChange', item, id);\n        });\n\n        // Bindings on every element\n        this.linkContext.bindings[id]?.forEach(item => this.updateWidget(item.view, item.widget, 'binding', item, id));\n\n        // Inform other widgets, that do not support canJS\n        this.onChangeCallbacks.forEach(item => {\n            try {\n                item.callback(item.arg, id, state.val, state.ack, state.ts);\n            } catch (e) {\n                this.props.socket.log(`Error: can't update states object for ${id}(${e}): ${JSON.stringify(e.stack)}`, 'error');\n            }\n        });\n    };\n\n    subscribe = IDs => {\n        if (!Array.isArray(IDs)) {\n            IDs = [IDs];\n        }\n        IDs.forEach(id => {\n            if (this.subscribes[id]) {\n                this.subscribes[id]++;\n            } else {\n                this.subscribes[id] = 1;\n                console.log(`[${new Date().toISOString()}] +SUBSCRIBE: ${id}`);\n                this.createCanState(id);\n                if (!id.startsWith('local_')) {\n                    this.props.socket.subscribeState(id, this.onStateChange);\n                }\n            }\n        });\n    };\n\n    createCanState(id) {\n        const _val = `${id}.val`;\n\n        if (this.canStates[_val] === undefined || this.canStates[_val] === null) {\n            const now = Date.now();\n            const o = {};\n            // set all together\n            if (id.startsWith('local_')) {\n                o[_val] = getUrlParameter(id);\n            } else {\n                o[_val] = 'null';\n                o[`${id}.ts`] = now;\n                o[`${id}.ack`] = false;\n                o[`${id}.lc`] = now;\n                o[`${id}.q`] = 0;\n            }\n\n            try {\n                this.canStates.attr(o);\n            } catch (e) {\n                this.props.socket.log(`Error: can't create states object for ${id}(${e}): ${JSON.stringify(e.stack)}`, 'error');\n            }\n        }\n    }\n\n    unsubscribe = IDs => {\n        if (!Array.isArray(IDs)) {\n            IDs = [IDs];\n        }\n\n        IDs.forEach(id => {\n            if (this.subscribes[id]) {\n                this.subscribes[id]--;\n                if (!this.subscribes[id]) {\n                    console.log(`[${new Date().toISOString()}] -UNSUBSCRIBE: ${id}`);\n\n                    if (!id.startsWith('local_')) {\n                        this.props.socket.unsubscribeState(id, this.onStateChange);\n                    }\n                    delete this.subscribes[id];\n                }\n            }\n        });\n    };\n\n    updateCustomScripts() {\n        const { visProject } = store.getState();\n\n        if (visProject) {\n            if (!this.props.editMode) {\n                if (visProject.___settings) {\n                    if (this.scripts !== (visProject.___settings.scripts || '')) {\n                        this.scripts = visProject.___settings.scripts || '';\n                        let userScript = window.document.getElementById('#vis_user_scripts');\n                        if (!userScript) {\n                            userScript = window.document.createElement('script');\n                            userScript.setAttribute('id', 'vis_user_scripts');\n                            userScript.innerHTML = `try {\n${this.scripts}\n} catch (error) {\n    console.error('Cannot execute user script: ' + error);\n}`;\n                            try {\n                                window.document.head.appendChild(userScript);\n                            } catch (error) {\n                                console.error(`Cannot execute user script: ${error}`);\n                            }\n                        } else {\n                            userScript.innerHTML = this.scripts;\n                        }\n                    }\n                }\n            } else if (this.scripts) {\n            // unload scripts in edit mode\n                this.scripts = null;\n                let userScript = window.document.getElementById('#vis_user_scripts');\n                if (userScript) {\n                    userScript.remove();\n                    userScript = null;\n                }\n            }\n        }\n    }\n\n    /**\n     * We add user styles to the body, after widgets so that user style takes priority\n     *\n     * @param {string} id id of the html style element to insert\n     * @param {string} styles the actual styles to insert\n     */\n    static applyUserStyles(id, styles) {\n        let styleEl = window.document.getElementById(id);\n        if (styleEl) {\n            styleEl.innerHTML = styles;\n        } else {\n            styleEl = window.document.createElement('style');\n            styleEl.setAttribute('id', id);\n            styleEl.innerHTML = styles;\n            // insert common always first and then user css, as user CSS has bigger priority\n            if (id === 'vis_common_user') {\n                // try to find vis_user\n                const styleUserEl = window.document.getElementById('vis_user');\n                if (styleUserEl) {\n                    window.document.body.insertBefore(styleEl, styleUserEl);\n                } else {\n                    window.document.body.appendChild(styleEl);\n                }\n            } else if (id === 'vis_user') {\n                // try to find vis_user\n                window.document.body.appendChild(styleEl);\n            }\n        }\n    }\n\n    updateCommonCss() {\n        if (!this.visCommonCssLoaded || (this.props.visCommonCss && this.visCommonCssLoaded !== this.props.visCommonCss)) {\n            this.visCommonCssLoaded = this.props.visCommonCss || true;\n            if (this.props.visCommonCss) {\n                VisEngine.applyUserStyles('vis_common_user', this.visCommonCssLoaded || '');\n            } else {\n                readFile(this.props.socket, this.props.adapterId, 'vis-common-user.css')\n                    .then(file => {\n                        this.visCommonCssLoaded = file || true;\n                        VisEngine.applyUserStyles('vis_common_user', file || '');\n                    })\n                    .catch(e => console.warn(`Common user CSS not found: ${e}`));\n            }\n        }\n    }\n\n    updateUserCss() {\n        if (!this.visUserCssLoaded || (this.props.visUserCss && this.visUserCssLoaded !== this.props.visUserCss)) {\n            this.visUserCssLoaded = this.props.visUserCss || true;\n            if (this.props.visUserCss) {\n                VisEngine.applyUserStyles('vis_user', this.visUserCssLoaded || '');\n            } else {\n                readFile(this.props.socket, `${this.props.adapterName}.${this.props.instance}`, `${this.props.projectName}/vis-user.css`)\n                    .then(file => {\n                        this.visUserCssLoaded = file || true;\n                        VisEngine.applyUserStyles('vis_user', file || '');\n                    })\n                    .catch(e => console.warn(`User CSS \"${this.props.projectName}/vis-user.css\" not found: ${e}`));\n            }\n        }\n    }\n\n    changeView = (view, subView) => {\n        if (this.props.editMode) {\n            window.alert(I18n.t('Ignored in edit mode'));\n        } else {\n            window.location.hash = VisEngine.buildPath(view, subView);\n        }\n    };\n\n    render() {\n        if (!this.state.ready || this.props.widgetsLoaded < 2) {\n            if (this.props.renderAlertDialog && this.props.runtime) {\n                return <>\n                    <LinearProgress />\n                    {this.props.renderAlertDialog()}\n                </>;\n            }\n\n            return <LinearProgress />;\n        }\n\n        const { visProject } = store.getState();\n\n        this.vis.editMode = this.props.editMode;\n        this.vis.activeView = this.props.activeView;\n        this.vis.views = visProject;\n\n        this.updateCustomScripts();\n        this.updateCommonCss();\n        this.updateUserCss();\n\n        if (this.lastChangedView !== this.props.activeView && !this.props.editMode) {\n            this.lastChangedView = this.props.activeView;\n            window.vis.conn.sendCommand(\n                window.vis.instance,\n                'changedView',\n                this.props.projectName ? `${this.props.projectName}/${this.props.activeView}` : this.props.activeView,\n            );\n\n            // inform the legacy widgets\n            window.jQuery && window.jQuery(window).trigger('viewChanged', this.props.activeView);\n        }\n\n        this.context = {\n            $$: window.$$,\n            VisView,\n            activeView: this.props.activeView,\n            adapterName: this.props.adapterName,\n            allWidgets: this.allWidgets,\n            askAboutInclude: this.props.askAboutInclude,\n            buildLegacyStructures: this.buildLegacyStructures,\n            can: this.can,\n            canStates: this.canStates,\n            changeProject: this.props.changeProject,\n            changeView: this.changeView,\n            dateFormat: this.vis.dateFormat,\n            disableInteraction: this.props.disableInteraction,\n            editModeComponentClass: this.props.editModeComponentClass,\n            formatUtils: this.formatUtils,\n            instance: this.props.instance,\n            jQuery: window.jQuery,\n            lang: this.props.lang,\n            linkContext: this.linkContext,\n            lockDragging: this.props.lockDragging,\n            moment,\n            onCommand: this.onCommand,\n            onIgnoreMouseEvents: this.props.runtime ? null : this.props.onIgnoreMouseEvents,\n            onWidgetsChanged: this.props.runtime ? null : this.props.onWidgetsChanged,\n            projectName: this.props.projectName,\n            registerEditorCallback: this.props.runtime ? null : this.props.registerEditorCallback,\n            runtime: this.props.runtime,\n            setSelectedGroup: this.props.runtime ? null : this.props.setSelectedGroup,\n            setSelectedWidgets: this.props.runtime ? null : this.props.setSelectedWidgets,\n            setTimeInterval: this.setTimeInterval,\n            setTimeStart: this.setTimeStart,\n            setValue: this.setValue,\n            showWidgetNames: this.props.showWidgetNames,\n            socket: this.props.socket,\n            systemConfig: this.systemConfig,\n            theme: this.props.theme,\n            themeName: this.props.themeName,\n            themeType: this.props.themeType,\n            timeInterval: this.state.timeInterval,\n            timeStart: this.state.timeStart,\n            toggleTheme: this.props.toggleTheme,\n            user: this.userName,\n            userGroups: this.props.userGroups,\n            // For internal widgets interact with the store instead\n            views: visProject,\n            widgetHint: this.props.widgetHint,\n        };\n\n        const views = Object.keys(visProject).map(view => {\n            if (view !== '___settings' && (\n                view === this.props.activeView ||\n                (visProject[view].settings?.alwaysRender && !this.props.selectedGroup) ||\n                    (!this.props.editMode && this.state.legacyRequestedViews.includes(view))\n            )) {\n                return <VisView\n                    context={this.context}\n                    activeView={this.props.activeView}\n                    editMode={this.props.editMode}\n                    viewsActiveFilter={this.viewsActiveFilter}\n                    key={view}\n                    selectedGroup={this.props.runtime ? null : this.props.selectedGroup}\n                    selectedWidgets={this.props.runtime ? null : this.props.selectedWidgets}\n                    view={view}\n                />;\n            }\n\n            return null;\n        });\n\n        if (this.refSound) {\n            views.push(<audio ref={this.refSound} key=\"__audio_145\" id=\"external_sound\" autoPlay muted></audio>);\n        }\n\n        if (this.props.renderAlertDialog && this.props.runtime) {\n            views.push(this.props.renderAlertDialog());\n        }\n\n        views.push(this.renderMessageDialog());\n\n        return views;\n    }\n}\n\nVisEngine.propTypes = {\n    socket: PropTypes.object.isRequired,\n    activeView: PropTypes.string,\n    lang: PropTypes.string.isRequired,\n    editMode: PropTypes.bool,\n    editModeComponentClass: PropTypes.string,\n    onLoaded: PropTypes.func,\n    selectedWidgets: PropTypes.array,\n    setSelectedWidgets: PropTypes.func,\n    runtime: PropTypes.bool,\n    onWidgetsChanged: PropTypes.func,\n    onFontsUpdate: PropTypes.func,\n    showWidgetNames: PropTypes.bool,\n    registerEditorCallback: PropTypes.func,\n    visCommonCss: PropTypes.string,\n    visUserCss: PropTypes.string,\n    setSelectedGroup: PropTypes.func,\n    selectedGroup: PropTypes.string,\n    widgetHint: PropTypes.string,\n    themeType: PropTypes.string,\n    themeName: PropTypes.string,\n    theme: PropTypes.object,\n    onConfirmDialog: PropTypes.func,\n    onShowCode: PropTypes.func,\n\n    adapterName: PropTypes.string.isRequired,\n    instance: PropTypes.number.isRequired,\n    projectName: PropTypes.string.isRequired,\n    adapterId: PropTypes.string.isRequired, // vis.0\n    currentUser: PropTypes.object,\n    userGroups: PropTypes.object,\n    renderAlertDialog: PropTypes.func,\n    showLegacyFileSelector: PropTypes.func,\n    toggleTheme: PropTypes.func,\n    askAboutInclude: PropTypes.func,\n    setLoadingText: PropTypes.func,\n};\n\nexport default VisEngine;\n","import React from 'react';\nimport { ThemeProvider, StyledEngineProvider } from '@mui/material/styles';\nimport { StylesProvider, createGenerateClassName } from '@mui/styles';\n\nimport {\n    DialogContent,\n    DialogTitle,\n    LinearProgress,\n    Snackbar,\n    ListItemButton,\n    Dialog,\n    ListItemText,\n    MenuList,\n    Paper,\n    DialogActions,\n    TextField,\n    Button,\n    ListItemIcon,\n} from '@mui/material';\n\nimport IconAdd from '@mui/icons-material/Add';\nimport IconClose from '@mui/icons-material/Close';\nimport IconDocument from '@mui/icons-material/FileCopy';\nimport { BiImport } from 'react-icons/bi';\n\nimport GenericApp from '@iobroker/adapter-react-v5/GenericApp';\nimport {\n    I18n, Loader, LegacyConnection,\n    LoaderMV, LoaderPT, LoaderVendor,\n} from '@iobroker/adapter-react-v5';\n\nimport VisEngine from './Vis/visEngine';\nimport {\n    extractBinding,\n    findWidgetUsages,\n    readFile,\n} from './Vis/visUtils';\nimport { registerWidgetsLoadIndicator } from './Vis/visLoadWidgets';\nimport VisWidgetsCatalog from './Vis/visWidgetsCatalog';\n\nimport { store, updateActiveUser, updateProject } from './Store';\nimport { hasProjectAccess, hasViewAccess } from './Utils/utils';\n\nconst generateClassName = createGenerateClassName({\n    productionPrefix: 'vis-r',\n});\n\nclass Runtime extends GenericApp {\n    static WIDGETS_LOADING_STEP_NOT_STARTED = 0;\n\n    static WIDGETS_LOADING_STEP_HTML_LOADED = 1;\n\n    static WIDGETS_LOADING_STEP_ALL_LOADED = 2;\n\n    constructor(props) {\n        const extendedProps = { ...props };\n        extendedProps.translations = {\n            en: require('./i18n/en'),\n            de: require('./i18n/de'),\n            ru: require('./i18n/ru'),\n            pt: require('./i18n/pt'),\n            nl: require('./i18n/nl'),\n            fr: require('./i18n/fr'),\n            it: require('./i18n/it'),\n            es: require('./i18n/es'),\n            pl: require('./i18n/pl'),\n            uk: require('./i18n/uk'),\n            'zh-cn': require('./i18n/zh-cn'),\n        };\n\n        extendedProps.Connection = LegacyConnection;\n        if (!window.disableDataReporting) {\n            extendedProps.sentryDSN = window.sentryDSN;\n        }\n\n        if (window.location.port === '3000') {\n            extendedProps.socket = {\n                port: '8082',\n                // host: '192.168.178.45',\n            };\n        }\n        if (window.socketUrl && window.socketUrl.startsWith(':')) {\n            window.socketUrl = `${window.location.protocol}//${window.location.hostname}${window.socketUrl}`;\n        }\n\n        // for projects starting with numbers, adapter-react extracts the wrong instance number, as we have no instance in url explicitly\n        extendedProps.instance = window.visAdapterInstance;\n\n        super(props, extendedProps);\n\n        // do not control this state\n        this.socket.setStateToIgnore('nothing_selected');\n\n        this.alert = window.alert;\n        window.alert = message => {\n            if (message && message.toString().toLowerCase().includes('error')) {\n                console.error(message);\n                this.showAlert(message.toString(), 'error');\n            } else {\n                console.log(message);\n                this.showAlert(message.toString(), 'info');\n            }\n        };\n\n        this.adapterId = `${this.adapterName}.0`;\n\n        // temporary disable translation warnings\n        // I18n.disableWarning(true);\n        registerWidgetsLoadIndicator(this.setWidgetsLoadingProgress);\n    }\n\n    setStateAsync(newState) {\n        return new Promise(resolve => {\n            this.setState(newState, () =>\n                resolve());\n        });\n    }\n\n    componentDidMount() {\n        super.componentDidMount();\n\n        const newState = {\n            alert: false,\n            alertType: 'info',\n            alertMessage: '',\n            runtime: true,\n            projectName: 'main',\n            selectedWidgets: [],\n            editMode: false,\n            widgetsLoaded: Runtime.WIDGETS_LOADING_STEP_NOT_STARTED,\n            fonts: [],\n            visCommonCss: null,\n            visUserCss: null,\n            showProjectsDialog: false,\n            showNewProjectDialog: false,\n            showImportDialogDialog: false,\n            newProjectName: '',\n            projects: null,\n            projectDoesNotExist: false,\n        };\n\n        if (this.initState) {\n            // get edit states\n            this.initState(newState);\n        }\n\n        this.setState(newState);\n\n        window.addEventListener('hashchange', this.onHashChange, false);\n\n        if (!this.state.runtime) {\n            // Listen for resize changes\n            window.addEventListener('orientationchange', this.orientationChange, false);\n            window.addEventListener('resize', this.orientationChange, false);\n        }\n    }\n\n    componentWillUnmount() {\n        super.componentWillUnmount();\n        super.componentWillUnmount();\n        window.removeEventListener('hashchange', this.onHashChange, false);\n        this.checkTimeout && clearTimeout(this.checkTimeout);\n        this.checkTimeout = null;\n\n        this.resolutionTimer && clearTimeout(this.resolutionTimer);\n        this.resolutionTimer = null;\n\n        if (!this.state.runtime) {\n            window.removeEventListener('orientationchange', this.orientationChange, false);\n            window.removeEventListener('resize', this.orientationChange, false);\n        }\n        window.alert = this.alert;\n    }\n\n    onHashChange = () => {\n        const currentPath = VisEngine.getCurrentPath();\n        this.changeView(currentPath.view)\n            .then(() => {});\n    };\n\n    onProjectChange = (id, fileName) => {\n        if (fileName.endsWith('.json')) {\n            this.checkTimeout && clearTimeout(this.checkTimeout);\n            // if runtime => just update project\n            if (this.state.runtime) {\n                this.checkTimeout = setTimeout(() => {\n                    this.checkTimeout = null;\n                    this.loadProject(this.state.projectName);\n                }, 500);\n            } else if (fileName.endsWith(`${this.state.projectName}/vis-views.json`)) {\n                // wait a little bit to avoid multiple calls\n                this.checkTimeout = setTimeout(() => {\n                    this.checkTimeout = null;\n                    // compare last executed file with new one\n                    readFile(this.socket, this.adapterId, fileName)\n                        .then(file => {\n                            try {\n                                const ts = JSON.parse(file.file || file).___settings.ts;\n                                if (ts === store.getState().visProject.___settings.ts) {\n                                    return;\n                                }\n                                const tsInt = parseInt(ts.split('.'), 10);\n                                if (tsInt < parseInt(store.getState().visProject.___settings.ts.split('.'), 10)) {\n                                    // ignore older files\n                                    return;\n                                }\n                            } catch (e) {\n                                console.warn(`Cannot parse project file \"${fileName}\": ${e}`);\n                            }\n\n                            this.setState({ showProjectUpdateDialog: true });\n                        });\n                }, 500);\n            }\n        }\n    };\n\n    fixProject(project) {\n        project.___settings = project.___settings || {};\n        project.___settings.folders = project.___settings.folders || [];\n        project.___settings.openedViews = project.___settings.openedViews || [];\n\n        // fix project\n        Object.keys(project).forEach(view => {\n            if (view === '___settings') {\n                // rename all \"set\" to \"widgetSet\" in marketplace\n                project.___settings.marketplace?.forEach(group => {\n                    group.widget?.forEach(widget => {\n                        if (widget.set) {\n                            widget.widgetSet = widget.set;\n                            delete widget.set;\n                        }\n                    });\n                });\n\n                return;\n            }\n            if (!project[view]) {\n                delete project[view];\n                return;\n            }\n            project[view].settings = project[view].settings || {};\n            project[view].settings.style = project[view].settings.style || {};\n            project[view].widgets = project[view].widgets || {};\n            if (project[view].widgets) {\n                Object.keys(project[view].widgets).forEach(wid => {\n                    const widget = project[view].widgets[wid];\n                    if (!widget) {\n                        delete project[view].widgets[wid];\n                        return;\n                    }\n                    widget.data = widget.data || {};\n                    widget.style = widget.style || {};\n\n                    if (widget.data.members && !Array.isArray(widget.data.members)) {\n                        widget.data.members = [];\n                    }\n\n                    // delete box-sizing as it is always 'border-box' now\n                    delete widget.style['box-sizing'];\n\n                    // collect all attributes with bindings\n                    if (!widget.data.bindings && !Array.isArray(widget.data.bindings)) {\n                        widget.data.bindings = [];\n                        Object.keys(widget.data).forEach(attr => {\n                            if (attr === 'bindings' ||\n                                !widget.data[attr] ||\n                                attr.startsWith('g_') ||\n                                typeof widget.data[attr] !== 'string'\n                            ) {\n                                return;\n                            }\n\n                            // Process bindings in data attributes\n                            const OIDs = extractBinding(widget.data[attr]);\n                            if (OIDs) {\n                                widget.data.bindings.push(attr);\n                            }\n                        });\n                    }\n                    if (!widget.style.bindings && !Array.isArray(widget.style.bindings)) {\n                        widget.style.bindings = [];\n                        Object.keys(widget.style).forEach(attr => {\n                            if (attr === 'bindings' ||\n                                !widget.style[attr] ||\n                                attr.startsWith('g_') ||\n                                typeof widget.data[attr] !== 'string'\n                            ) {\n                                return;\n                            }\n\n                            // Process bindings in data attributes\n                            const OIDs = extractBinding(widget.style[attr]);\n                            if (OIDs) {\n                                widget.style.bindings.push(attr);\n                            }\n                        });\n                    }\n\n                    if (widget.data.members) {\n                        widget.data.members.forEach((_wid, i) =>\n                            widget.data.members[i] = _wid.replace(/\\s/g, '_'));\n                    }\n\n                    if (wid.includes(' ')) {\n                        const newWid = wid.replace(/\\s/g, '_');\n                        delete project[view].widgets[wid];\n                        project[view].widgets[newWid] = widget;\n                    }\n\n                    if (!this.state.runtime && this.getNewWidgetId) {\n                        // If the widget is not unique, change its name (only in editor mode)\n                        if (Object.keys(project).find(v => v !== view && project[v].widgets && project[v].widgets[wid])) {\n                            const _newWid = wid[0] === 'g' ? this.getNewGroupId(project) : this.getNewWidgetId(project);\n                            console.log(`Rename widget ${wid} to ${_newWid}`);\n                            delete project[view].widgets[wid];\n                            project[view].widgets[_newWid] = widget;\n                        }\n                    }\n\n                    // fix Groups\n                    if (widget.tpl === '_tplGroup' && widget.data.attrCount !== undefined) {\n                        widget.data.members = widget.data.members || [];\n                        // replace attrNameX with attrName_groupAttrX and attrTypeX with attrType_groupAttrX\n                        for (let i = 1; i <= widget.data.attrCount; i++) {\n                            const attrName = widget.data[`attrName${i}`];\n                            const attrType = widget.data[`attrType${i}`];\n                            widget.data[`attrName_groupAttr${i}`] = attrName || `groupAttr${i}`;\n                            widget.data[`attrType_groupAttr${i}`] = attrType || '';\n                            delete widget.data[`attrName${i}`];\n                            delete widget.data[`attrType${i}`];\n                        }\n                        delete widget.data.attrCount;\n                    }\n                });\n            }\n        });\n    }\n\n    syncMultipleWidgets(project) {\n        project = project || store.getState().visProject;\n        Object.keys(project).forEach(view => {\n            if (view === '___settings') {\n                return;\n            }\n\n            const oView = project[view];\n            const widgetIDs = Object.keys(oView.widgets);\n            widgetIDs.forEach(widgetId => {\n                const oWidget = oView.widgets[widgetId];\n                // if widget must be shown in more than one view\n                if (oWidget.data && oWidget.data['multi-views']) {\n                    const views = oWidget.data['multi-views'].split(',');\n                    views.forEach(viewId => {\n                        if (viewId !== view && project[viewId]) {\n                            // copy all widgets, that must be shown in this view too\n                            project[viewId].widgets[`${view}_${widgetId}`] = JSON.parse(JSON.stringify(oWidget));\n                            delete project[viewId].widgets[`${view}_${widgetId}`].data['multi-views'];\n                            if (oWidget.tpl === '_tplGroup' && oWidget.data.members?.length) {\n                                // copy all group widgets too\n                                const newWidget = project[viewId].widgets[`${view}_${widgetId}`];\n                                newWidget.data.members.forEach((memberId, i) => {\n                                    const newId = `${view}_${memberId}`;\n                                    project[viewId].widgets[newId] = JSON.parse(JSON.stringify(oView.widgets[memberId]));\n                                    delete project[viewId].widgets[newId].data['multi-views']; // do not allow multi-multi-views\n                                    newWidget.data.members[i] = newId;\n                                    // do not copy members of multi-group\n                                    if (project[viewId].widgets[newId].members) {\n                                        project[viewId].widgets[newId].members = [];\n                                    }\n                                });\n                            }\n                        }\n                    });\n                }\n\n                // try to find this widget in other widgets under \"widget\" or \"widgetX\" name\n                if (findWidgetUsages(project, view, widgetId).length) {\n                    oWidget.usedInWidget = true;\n                } else if (oWidget.usedInWidget) {\n                    delete oWidget.usedInWidget;\n                }\n            });\n        });\n    }\n\n    static findViewWithNearestResolution(project, resultRequired) {\n        const w = window.innerWidth;\n        const h = window.innerHeight;\n\n        let result = null;\n        const views = [];\n        let difference = 10000;\n\n        // First, find all with the best fitting width\n        project && Object.keys(project).forEach(view => {\n            if (view === '___settings') {\n                return;\n            }\n            if (project[view].settings?.useAsDefault\n                // If difference less than 20%\n                && Math.abs(project[view].settings.sizex - w) / project[view].settings.sizex < 0.2\n            ) {\n                views.push(view);\n            }\n        });\n\n        for (let i = 0; i < views.length; i++) {\n            if (Math.abs(project[views[i]].settings.sizey - h) < difference) {\n                result = views[i];\n                difference = Math.abs(parseInt(project[views[i]].settings.sizey, 10) - h);\n            }\n        }\n\n        // try to find by ratio\n        if (!result) {\n            const ratio = w / h;\n            difference = 10000;\n\n            project && Object.keys(project).forEach(view => {\n                if (view === '___settings') {\n                    return;\n                }\n                if (project[view].settings?.useAsDefault &&\n                    // If difference less than 20%\n                    parseInt(project[view].settings.sizey, 10) &&\n                    Math.abs(ratio - (parseInt(project[view].settings.sizex, 10) / parseInt(project[view].settings.sizey, 10)) < difference)\n                ) {\n                    result = view;\n                    difference = Math.abs(ratio - (parseInt(project[view].settings.sizex, 10) / parseInt(project[view].settings.sizey, 10)));\n                }\n            });\n        }\n        if (!result && resultRequired) {\n            result = project && Object.keys(project).find(view => !view.startsWith('__') && project[view].settings?.useAsDefault);\n        }\n        if (!result && resultRequired) {\n            return (project && Object.keys(project).find(view => !view.startsWith('__'))) || '';\n        }\n\n        return result;\n    }\n\n    loadProject = async (projectName, file) => {\n        if (!file) {\n            this.setLoadingText && this.setLoadingText('Load project file...');\n            try {\n                file = await readFile(this.socket, this.adapterId, `${projectName}/vis-views.json`);\n            } catch (err) {\n                console.warn(`Cannot read project file \"${projectName}/vis-views.json\": ${err}`);\n                file = '{}';\n            }\n            this.setLoadingText && this.setLoadingText(null);\n        }\n\n        if (!file || file === '{}') {\n            // read if show projects dialog allowed\n            const obj = await this.socket.getObject(`system.adapter.${this.adapterName}.${this.instance}`);\n            if (this.state.runtime && obj.native.doNotShowProjectDialog) {\n                this.setState({ projectDoesNotExist: true });\n            } else {\n                !this.state.projects && (await this.refreshProjects());\n                // show project dialog\n                this.setState({ showProjectsDialog: true });\n            }\n            return;\n        }\n\n        file = file.toString();\n\n        if (!this.state.runtime) {\n            // remember the last loaded project file\n            this.lastProjectJSONfile = file;\n        }\n\n        let project;\n        try {\n            project = JSON.parse(file);\n        } catch (e) {\n            window.alert('Cannot parse project file!');\n            project = {\n                'Cannot parse project file!': {\n                    widgets: {},\n                },\n            };\n        }\n\n        this.fixProject(project);\n\n        // take selected view from hash\n        const currentPath = VisEngine.getCurrentPath();\n        let selectedView = currentPath.view;\n        if (!selectedView || !project[selectedView]) {\n            if (this.state.runtime) {\n                selectedView = Runtime.findViewWithNearestResolution(project, true);\n            } else {\n                // take from local storage\n                if (Object.keys(project).includes(window.localStorage.getItem('selectedView'))) {\n                    selectedView = window.localStorage.getItem('selectedView');\n                }\n                // take first view\n                if (!selectedView || !project[selectedView]) {\n                    selectedView = Object.keys(project).find(view => !view.startsWith('__')) || '';\n                }\n            }\n        }\n\n        const len = project.___settings.openedViews.length;\n\n        for (let i = len - 1; i >= 0; i--) {\n            if (!project[project.___settings.openedViews[i]]) {\n                project.___settings.openedViews.splice(i, 1);\n            }\n        }\n\n        if (!project.___settings.openedViews.length) {\n            const view = Object.keys(project).find(_view => _view !== '___settings');\n            if (view) {\n                project.___settings.openedViews[0] = view;\n            }\n        }\n\n        // check that selectedView and openedViews exist\n        if (!project[selectedView]) {\n            selectedView = project.___settings.openedViews[0] || '';\n            window.localStorage.setItem('selectedView', selectedView);\n        } else if (project.___settings.openedViews && !project.___settings.openedViews.includes(selectedView)) {\n            selectedView = project.___settings.openedViews[0];\n            window.localStorage.setItem('selectedView', selectedView);\n        }\n\n        window.localStorage.setItem('projectName', projectName);\n\n        if (this.subscribedProject && (this.subscribedProject !== projectName || project.___settings.reloadOnEdit === false)) {\n            this.subscribedProject = null;\n            this.socket.unsubscribeFiles(this.adapterId, `${this.subscribedProject}/*`, this.onProjectChange);\n        }\n\n        // copy multi-views to corresponding views\n        this.syncMultipleWidgets(project);\n\n        if (this.state.runtime) {\n            if (project.___settings.reloadOnEdit !== false) {\n                this.subscribedProject = projectName;\n                // subscribe on changes\n                this.socket.subscribeFiles(this.adapterId, `${projectName}/*`, this.onProjectChange);\n            }\n\n            // set overflow mode in runtime mode\n            window.document.body.style.overflow = project.___settings?.bodyOverflow || 'auto';\n        } else {\n            this.subscribedProject = projectName;\n            // subscribe on changes\n            this.socket.subscribeFiles(this.adapterId, `${projectName}/*`, this.onProjectChange);\n        }\n\n        store.dispatch(updateProject(project));\n\n        await this.setStateAsync({\n            visCommonCss: null,\n            visUserCss: null,\n            history: [project],\n            historyCursor: 0,\n            projectName,\n        });\n\n        await this.changeView(selectedView);\n\n        // only in edit mode and only after VisMarketplace was loaded\n        if (!this.state.runtime && this.checkForUpdates) {\n            // check if some marketplace widgets were updated\n            await this.checkForUpdates();\n        }\n    };\n\n    orientationChange = () => {\n        this.resolutionTimer && clearTimeout(this.resolutionTimer);\n        this.resolutionTimer = setTimeout(async () => {\n            this.resolutionTimer = null;\n            const view = Runtime.findViewWithNearestResolution(store.getState().visProject);\n            if (view && view !== this.state.selectedView) {\n                await this.changeView(view);\n            }\n        }, 200);\n    };\n\n    // this function is required here if the project not defined\n    refreshProjects = async reloadCurrentProject => {\n        let projects;\n\n        try {\n            projects = await this.socket.readDir(this.adapterId, '');\n        } catch (e) {\n            projects = [];\n        }\n\n        await this.setStateAsync({\n            projects: projects.filter(dir => dir.isDir).map(dir => dir.file),\n            createFirstProjectDialog: !projects.length,\n        });\n        if (reloadCurrentProject) {\n            await this.loadProject(this.state.projectName);\n        }\n    };\n\n    onVisChanged() {\n        this.setState({\n            messageDialog: {\n                text: I18n.t('Detected new version of vis files. Reloading in 2 seconds...'),\n                title: I18n.t('Reloading'),\n                ok: I18n.t('Reload now'),\n                callback: () => {\n                    if (!this.state.runtime && this.changeTimer) {\n                        this.needRestart = true;\n                    } else {\n                        setTimeout(() =>\n                            window.location.reload(), 2000);\n                    }\n                },\n            },\n        });\n        if (!this.state.runtime && this.changeTimer) {\n            this.needRestart = true;\n        } else {\n            setTimeout(() =>\n                window.location.reload(), 2000);\n        }\n    }\n\n    onWidgetSetsChanged = (id, state) => {\n        if (state && this.lastUploadedState && state.val !== this.lastUploadedState) {\n            this.lastUploadedState = state.val;\n            this.onVisChanged();\n        }\n    };\n\n    async onConnectionReady() {\n        // preload all widgets first\n        if (this.state.widgetsLoaded === Runtime.WIDGETS_LOADING_STEP_HTML_LOADED) {\n            await VisWidgetsCatalog.collectRxInformation(this.socket, store.getState().visProject, this.changeProject);\n            await this.setStateAsync({ widgetsLoaded: Runtime.WIDGETS_LOADING_STEP_ALL_LOADED });\n        }\n\n        const userName = await this.socket.getCurrentUser(); // just name, like \"admin\"\n\n        const currentUser = await this.socket.getObject(`system.user.${userName || 'admin'}`);\n\n        store.dispatch(updateActiveUser(currentUser.common.name));\n\n        const groups = await this.socket.getGroups();\n        const userGroups = {};\n        groups.forEach(group => userGroups[group._id] = group);\n\n        await this.setStateAsync({\n            currentUser,\n            userGroups,\n            selectedView: '',\n            splitSizes: window.localStorage.getItem('Vis.splitSizes')\n                ? JSON.parse(window.localStorage.getItem('Vis.splitSizes'))\n                : [20, 60, 20],\n        });\n\n        // subscribe on info.uploaded\n        this.socket.subscribeState(`${this.adapterName}.${this.instance}.info.uploaded`, this.onWidgetSetsChanged);\n        const uploadedState = await this.socket.getState(`${this.adapterName}.${this.instance}.info.uploaded`);\n        if (uploadedState && uploadedState.val !== this.lastUploadedState) {\n            if (this.lastUploadedState) {\n                this.onVisChanged();\n            } else {\n                this.lastUploadedState = uploadedState.val;\n            }\n        }\n\n        // read project name from URL\n        let projectName = window.location.search.replace('?', '');\n        if (projectName) {\n            projectName = decodeURIComponent(projectName.split('&')[0]).split('/')[0];\n            if (projectName.includes('=')) {\n                projectName = '';\n            }\n        }\n        projectName = projectName || window.localStorage.getItem('projectName') || 'main';\n\n        let projects = this.state.projects;\n        if (!this.state.runtime) {\n            projects = await this.refreshProjects();\n        }\n\n        if (!projects || projects.includes(projectName)) {\n            await this.loadProject(projectName);\n        } else {\n            // read if show projects dialog allowed\n            const obj = this.state.runtime && (await this.socket.getObject(`system.adapter.${this.adapterName}.${this.instance}`));\n            if (this.state.runtime && obj.native.doNotShowProjectDialog) {\n                this.setState({ projectDoesNotExist: true });\n            } else {\n                !projects && (await this.refreshProjects());\n                // show project dialog\n                this.setState({ showProjectsDialog: true });\n            }\n        }\n    }\n\n    changeView = async selectedView => {\n        if (selectedView === this.state.selectedView) {\n            // inform about inView navigation\n            if (this.state.runtime || !this.state.editMode) {\n                const currentPath = VisEngine.getCurrentPath();\n                const newHash = VisEngine.buildPath(currentPath.view, currentPath.path);\n                window.vis.lastChangedView = this.state.projectName ?\n                    `${this.state.projectName}/${newHash.replace(/^#/, '')}` :\n                    newHash.replace(/^#/, '');\n                window.vis.conn.sendCommand(window.vis.instance, 'changedView', window.vis.lastChangedView);\n            }\n            return;\n        }\n        const newState = {\n            selectedView,\n        };\n\n        let selectedWidgets = JSON.parse(window.localStorage.getItem(\n            `${this.state.projectName}.${selectedView}.widgets`,\n        ) || '[]') || [];\n\n        // Check that all selectedWidgets exist\n        for (let i = selectedWidgets.length - 1; i >= 0; i--) {\n            if (!store.getState().visProject[selectedView] || !store.getState().visProject[selectedView].widgets || !store.getState().visProject[selectedView].widgets[selectedWidgets[i]]) {\n                selectedWidgets = selectedWidgets.splice(i, 1);\n            }\n        }\n        if (JSON.stringify(newState.selectedWidgets) !== JSON.stringify(selectedWidgets)) {\n            newState.selectedWidgets = selectedWidgets;\n        }\n        if (newState.alignType !== null) {\n            newState.alignType = null;\n        }\n        if (newState.alignIndex !== 0) {\n            newState.alignIndex = 0;\n        }\n        if (newState.alignValues?.length > 0) {\n            newState.alignValues = [];\n        }\n\n        if (!this.state.runtime && !store.getState().visProject.___settings.openedViews.includes(selectedView)) {\n            const project = JSON.parse(JSON.stringify(store.getState().visProject));\n            project.___settings.openedViews.push(selectedView);\n            await this.changeProject(project, true);\n        }\n\n        if ((this.state.runtime || !this.state.editMode) && window.vis) {\n            const currentPath = VisEngine.getCurrentPath();\n            const newHash = VisEngine.buildPath(currentPath.view, currentPath.path);\n\n            window.vis.lastChangedView = this.state.projectName ?\n                `${this.state.projectName}/${newHash.replace(/^#/, '')}` :\n                newHash.replace(/^#/, '');\n            window.vis.conn.sendCommand(window.vis.instance, 'changedView', window.vis.lastChangedView);\n\n            // inform the legacy widgets\n            window.jQuery && window.jQuery(window).trigger('viewChanged', selectedView);\n        }\n\n        // disable group edit if view changed\n        if (this.state.selectedGroup) {\n            newState.selectedGroup = null;\n        }\n\n        window.localStorage.setItem('selectedView', selectedView);\n\n        const currentPath = VisEngine.getCurrentPath();\n        const newPath = VisEngine.buildPath(selectedView, currentPath.path);\n\n        if (window.location.hash !== newPath) {\n            window.location.hash = newPath;\n        }\n\n        await this.setStateAsync(newState);\n    };\n\n    onFontsUpdate = fonts => this.setState({ fonts });\n\n    showAlert(message, type) {\n        if (type !== 'error' && type !== 'warning' && type !== 'info' && type !== 'success') {\n            type = 'info';\n        }\n\n        this.setState({\n            alert: true,\n            alertType: type,\n            alertMessage: message,\n        });\n    }\n\n    renderAlertDialog = () => <Snackbar\n        key=\"__snackbar_134__\"\n        style={this.state.alertType === 'error' ?\n            { backgroundColor: '#f44336' } :\n            (this.state.alertType === 'success' ?\n                { backgroundColor: '#4caf50' } : undefined)}\n        open={this.state.alert}\n        autoHideDuration={6000}\n        onClick={() => this.setState({ alert: false })}\n        onClose={reason => {\n            if (reason === 'clickaway') {\n                return;\n            }\n            this.setState({ alert: false });\n        }}\n        message={this.state.alertMessage}\n    />;\n\n    async onWidgetsLoaded() {\n        let widgetsLoaded = Runtime.WIDGETS_LOADING_STEP_HTML_LOADED;\n        if (this.socket.isConnected()) {\n            await VisWidgetsCatalog.collectRxInformation(this.socket, store.getState().visProject, this.changeProject);\n            widgetsLoaded = Runtime.WIDGETS_LOADING_STEP_ALL_LOADED;\n        }\n        this.setState({ widgetsLoaded });\n    }\n\n    addProject = async (projectName, doNotLoad) => {\n        try {\n            const project = {\n                ___settings: {\n                    folders: [],\n                    openedViews: [],\n                },\n                default: {\n                    name: 'Default',\n                    settings: {\n                        style: {},\n                    },\n                    widgets: {},\n                    activeWidgets: {},\n                },\n            };\n            await this.socket.writeFile64(this.adapterId, `${projectName}/vis-views.json`, JSON.stringify(project));\n            await this.socket.writeFile64(this.adapterId, `${projectName}/vis-user.css`, '');\n            if (!doNotLoad) {\n                await this.refreshProjects();\n                await this.loadProject(projectName);\n                // close dialog\n                this.setState({ projectsDialog: false });\n            }\n        } catch (e) {\n            window.alert(`Cannot create project: ${e.toString()}`);\n        }\n    };\n\n    showCreateNewProjectDialog() {\n        if (!this.state.showNewProjectDialog) {\n            return null;\n        }\n        return <Dialog\n            open={!0}\n            onClose={() => this.setState({ showNewProjectDialog: false })}\n        >\n            <DialogTitle>{I18n.t('Create new project')}</DialogTitle>\n            <DialogContent>\n                <TextField\n                    variant=\"standard\"\n                    label={I18n.t('Project name')}\n                    autoFocus\n                    fullWidth\n                    onKeyDown={async e => {\n                        if (e.keyCode === 13 && this.state.newProjectName && !this.state.projects.includes(this.state.newProjectName)) {\n                            await this.addProject(this.state.newProjectName);\n                            window.location.href = `edit.html?${this.state.newProjectName}`;\n                        }\n                    }}\n                    value={this.state.newProjectName}\n                    onChange={e => this.setState({ newProjectName: e.target.value })}\n                    margin=\"dense\"\n                />\n            </DialogContent>\n            <DialogActions>\n                <Button\n                    id=\"create_new_project_ok_buton\"\n                    variant=\"contained\"\n                    default\n                    color=\"primary\"\n                    disabled={!this.state.newProjectName || this.state.projects.includes(this.state.newProjectName)}\n                    onClick={async () => {\n                        await this.addProject(this.state.newProjectName, true);\n                        window.location.href = `edit.html?${this.state.newProjectName}`;\n                    }}\n                    startIcon={<IconAdd />}\n                >\n                    {I18n.t('Create')}\n                </Button>\n                <Button\n                    variant=\"contained\"\n                    default\n                    color=\"grey\"\n                    onClick={() => this.setState({ showNewProjectDialog: false })}\n                    startIcon={<IconClose />}\n                >\n                    {I18n.t('Cancel')}\n                </Button>\n            </DialogActions>\n        </Dialog>;\n    }\n\n    showSmallProjectsDialog() {\n        const { visProject, activeUser } = store.getState();\n\n        return <Dialog\n            open={!0}\n            maxWidth=\"sm\"\n            onClose={() => {}} // do nothing\n        >\n            <DialogTitle>\n                <img\n                    src={this.props.runtime ? './favicon.ico' : './faviconEdit.ico'}\n                    alt=\"vis-2\"\n                    style={{ width: 24, marginRight: 10, marginTop: 4 }}\n                />\n                {!this.state.projects.length ? I18n.t('Create or import new \"vis-2\" project') : I18n.t('Select vis-2 project')}\n            </DialogTitle>\n            <DialogContent>\n                {!this.state.projects ? <LinearProgress /> : <Paper>\n                    {!this.state.projects.length ? <div style={{ width: '100%', fontSize: 20, padding: 10 }}>\n                        {I18n.t('welcome_message')}\n                    </div> : null}\n                    <MenuList>\n                        {this.state.projects.map(project =>\n                            <ListItemButton key={project} onClick={() => window.location.href = `?${project}`} disabled={!hasProjectAccess({ editMode: this.state.editMode, project: visProject, user: activeUser })}>\n                                <ListItemIcon>\n                                    <IconDocument />\n                                </ListItemIcon>\n                                <ListItemText>{project}</ListItemText>\n                            </ListItemButton>)}\n                        <ListItemButton\n                            id=\"create_new_project\"\n                            onClick={() => this.setState({ showNewProjectDialog: true, newProjectName: this.state.projects.length ? '' : 'main' })}\n                            style={{ backgroundColor: '#112233', color: '#ffffff' }}\n                        >\n                            <ListItemIcon>\n                                <IconAdd />\n                            </ListItemIcon>\n                            <ListItemText>{I18n.t('Create new project')}</ListItemText>\n                        </ListItemButton>\n                        {this.renderImportProjectDialog ? <ListItemButton\n                            onClick={() => this.setState({ showImportDialog: true })}\n                            style={{ backgroundColor: '#112233', color: '#4b9ed3' }}\n                        >\n                            <ListItemIcon><BiImport fontSize={20} /></ListItemIcon>\n                            <ListItemText>{I18n.t('Import project')}</ListItemText>\n                        </ListItemButton> : null}\n                    </MenuList>\n                </Paper>}\n            </DialogContent>\n            {this.showCreateNewProjectDialog()}\n            {this.renderImportProjectDialog ? this.renderImportProjectDialog() : null}\n            {this.renderAlertDialog()}\n        </Dialog>;\n    }\n\n    renderProjectDoesNotExist() {\n        return <div\n            style={{\n                position: 'absolute',\n                top: 0,\n                left: 0,\n                right: 0,\n                bottom: 0,\n                display: 'flex',\n                alignItems: 'center',\n                justifyContent: 'center',\n                fontSize: 36,\n                color: '#982828',\n            }}\n        >\n            {I18n.t('Project \"%s\" does not exist', this.state.projectName)}\n        </div>;\n    }\n\n    getVisEngine() {\n        if (!this.state.runtime && this.state.projectDoesNotExist) {\n            return this.renderProjectDoesNotExist();\n        }\n\n        if (!this.state.runtime && this.state.showProjectsDialog) {\n            return this.showSmallProjectsDialog();\n        }\n\n        const { visProject, activeUser } = store.getState();\n\n        if (!hasProjectAccess({ editMode: this.state.editMode, project: visProject, user: activeUser }) || !hasViewAccess({\n            editMode: this.state.editMode, project: visProject, user: activeUser, view: this.state.selectedView,\n        })) {\n            console.warn(`User \"${activeUser}\" has no permissions for ${this.state.editMode ? 'edit mode' : 'runtime'} of project \"${this.state.projectName}\" with view \"${this.state.selectedView}\"`);\n            if (this.state.projects) {\n                return this.showSmallProjectsDialog();\n            }\n\n            this.refreshProjects().then(() => {\n                this.setState({ showProjectsDialog: true });\n            });\n            return null;\n        }\n\n        return <VisEngine\n            key={this.state.projectName}\n            widgetsLoaded={this.state.widgetsLoaded}\n            activeView={this.state.selectedView || ''}\n            editMode={!this.state.runtime && this.state.editMode}\n            runtime={this.state.runtime}\n            socket={this.socket}\n            visCommonCss={this.state.visCommonCss}\n            visUserCss={this.state.visUserCss}\n            lang={this.socket.systemLang}\n            adapterName={this.adapterName}\n            instance={this.instance}\n            selectedWidgets={this.state.selectedWidgets}\n            setSelectedWidgets={this.setSelectedWidgets}\n            onLoaded={() => this.onWidgetsLoaded()}\n            selectedGroup={this.state.selectedGroup}\n            setSelectedGroup={this.setSelectedGroup}\n            onWidgetsChanged={this.onWidgetsChanged}\n            projectName={this.state.projectName}\n            lockDragging={this.state.lockDragging}\n            disableInteraction={this.state.disableInteraction}\n            widgetHint={this.state.widgetHint}\n            onFontsUpdate={this.state.runtime ? null : this.onFontsUpdate}\n            registerEditorCallback={this.state.runtime ? null : this.registerCallback}\n            themeType={this.state.themeType}\n            themeName={this.state.themeName}\n            theme={this.state.theme}\n            adapterId={this.adapterId}\n            editModeComponentClass={this.props.classes?.editModeComponentClass}\n            onIgnoreMouseEvents={this.onIgnoreMouseEvents}\n            setLoadingText={this.setLoadingText}\n            onConfirmDialog={(message, title, icon, width, callback) => this.showConfirmDialog && this.showConfirmDialog({\n                message,\n                title,\n                icon,\n                width,\n                callback,\n            })}\n            onShowCode={(code, title, mode) => this.showCodeDialog && this.showCodeDialog({ code, title, mode })}\n            currentUser={this.state.currentUser}\n            userGroups={this.state.userGroups}\n            renderAlertDialog={this.renderAlertDialog}\n            showLegacyFileSelector={this.showLegacyFileSelector}\n            toggleTheme={newThemeName => this.toggleTheme(newThemeName)}\n            askAboutInclude={this.askAboutInclude}\n            changeProject={this.changeProject}\n        />;\n    }\n\n    renderLoader() {\n        if (window.loadingHideLogo === true) {\n            return null;\n        }\n        if (window.vendorPrefix === 'MV') {\n            return <LoaderMV themeType={this.state.themeType} backgroundColor={window.loadingBackgroundColor} backgroundImage={window.loadingBackgroundImage} />;\n        }\n        if (window.vendorPrefix === 'PT') {\n            return <LoaderPT themeType={this.state.themeType} backgroundColor={window.loadingBackgroundColor} backgroundImage={window.loadingBackgroundImage} />;\n        }\n        if (window.vendorPrefix && window.vendorPrefix !== '@@vendorPrefix@@') {\n            return <LoaderVendor themeType={this.state.themeType} backgroundColor={window.loadingBackgroundColor} backgroundImage={window.loadingBackgroundImage} />;\n        }\n        return <Loader themeType={this.state.themeType} backgroundColor={window.loadingBackgroundColor} backgroundImage={window.loadingBackgroundImage} />;\n    }\n\n    render() {\n        return <StylesProvider generateClassName={generateClassName}>\n            <StyledEngineProvider injectFirst>\n                <ThemeProvider theme={this.state.theme}>\n                    {!this.state.loaded || !store.getState().visProject.___settings ?\n                        this.renderLoader() : this.getVisEngine()}\n                    {this.state.projectDoesNotExist ? this.renderProjectDoesNotExist() : null}\n                    {this.state.showProjectsDialog ? this.showSmallProjectsDialog() : null}\n                </ThemeProvider>\n            </StyledEngineProvider>\n        </StylesProvider>;\n    }\n}\n\nexport default Runtime;\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport {\n    Button, Dialog, DialogActions, DialogContent, DialogTitle,\n} from '@mui/material';\nimport { Close } from '@mui/icons-material';\n\nimport { I18n } from '@iobroker/adapter-react-v5';\nimport { store } from '../Store';\n\nconst MarketplaceDialog = props => {\n    const VisMarketplace = window.VisMarketplace?.default;\n\n    let installWidget;\n\n    if (props.installWidget) {\n        installWidget = async marketplace => {\n            const widgets = [];\n            const project = store.getState().visProject;\n\n            Object.keys(project).forEach(view => {\n                if (view !== '___settings') {\n                    const viewWidgets = {\n                        name: view,\n                        widgets: [],\n                    };\n                    Object.keys(project[view].widgets).forEach(widget => {\n                        if (project[view].widgets[widget].marketplace?.widget_id === marketplace.widget_id &&\n                        project[view].widgets[widget].marketplace?.version !== marketplace.version) {\n                            viewWidgets.widgets.push(widget);\n                        }\n                    });\n                    if (viewWidgets.widgets.length) {\n                        widgets.push(viewWidgets);\n                    }\n                }\n            });\n            if (widgets.length) {\n                await props.updateWidgets(marketplace);\n            } else {\n                await props.installWidget(marketplace.widget_id, marketplace.id);\n            }\n            props.onClose();\n        };\n    }\n\n    return <Dialog\n        open={!0}\n        fullScreen\n        onClose={props.onClose}\n        PaperProps={{ color: 'primary' }}\n    >\n        <DialogTitle>{props.addPage ? I18n.t('Add new or update existing widget') : I18n.t('Browse the widgeteria')}</DialogTitle>\n        <DialogContent>\n            {VisMarketplace &&\n                <VisMarketplace\n                    language={I18n.getLanguage()}\n                    addPage={props.addPage}\n                    widget={props.widget}\n                    onClose={props.onClose}\n                    installWidget={installWidget}\n                    installedWidgets={props.installedWidgets}\n                    themeName={props.themeName}\n                    onAdded={() => props.onClose()}\n                />}\n        </DialogContent>\n        <DialogActions>\n            <Button\n                onClick={props.onClose}\n                variant=\"contained\"\n                startIcon={<Close />}\n            >\n                {I18n.t('Close')}\n            </Button>\n        </DialogActions>\n    </Dialog>;\n};\n\nMarketplaceDialog.propTypes = {\n    addPage: PropTypes.func,\n    onClose: PropTypes.func,\n    widget: PropTypes.object,\n    installedWidgets: PropTypes.array,\n    updateWidgets: PropTypes.func,\n    installWidget: PropTypes.func,\n    themeName: PropTypes.string,\n};\n\nexport default MarketplaceDialog;\n","import React, { useRef } from 'react';\nimport PropTypes from 'prop-types';\nimport { ThemeProvider, StyledEngineProvider } from '@mui/material/styles';\nimport { withStyles, StylesProvider, createGenerateClassName } from '@mui/styles';\nimport { DndProvider, useDrop } from 'react-dnd';\nimport { TouchBackend } from 'react-dnd-touch-backend';\nimport { HTML5Backend } from 'react-dnd-html5-backend';\nimport ReactSplit, { SplitDirection, GutterTheme } from '@devbookhq/splitter';\n\nimport {\n    IconButton, Paper, Popper, Tab, Tabs, Tooltip, LinearProgress, Button,\n    Dialog, DialogTitle, DialogActions, DialogContent, DialogContentText,\n} from '@mui/material';\n\nimport {\n    Add as AddIcon,\n    Close as CloseIcon,\n    Code as CodeIcon,\n    CodeOff as CodeOffIcon,\n    PlayArrow as PlayIcon,\n    Stop as StopIcon,\n    Palette as IconPalette,\n    ListAlt as IconAttributes,\n    ClearAll as ClearAllIcon,\n    Layers,\n} from '@mui/icons-material';\n\nimport {\n    I18n,\n    Utils,\n    Confirm as ConfirmDialog,\n    Message as MessageDialog,\n    SelectFile as SelectFileDialog, Icon,\n} from '@iobroker/adapter-react-v5';\nimport { recalculateFields, store, updateProject } from './Store';\nimport {\n    isGroup, getNewWidgetId, getNewGroupId, pasteGroup, unsyncMultipleWidgets, deepClone, pasteSingleWidget,\n} from './Utils/utils';\n\nimport Attributes from './Attributes';\nimport Palette from './Palette';\nimport Toolbar from './Toolbar';\nimport CodeDialog from './Components/CodeDialog';\nimport CreateFirstProjectDialog from './Components/CreateFirstProjectDialog';\nimport { DndPreview, isTouchDevice } from './Utils';\nimport { getWidgetTypes, parseAttributes } from './Vis/visWidgetsCatalog';\nimport VisContextMenu from './Vis/visContextMenu';\nimport Runtime from './Runtime';\nimport ImportProjectDialog from './Toolbar/ProjectsManager/ImportProjectDialog';\nimport { findWidgetUsages } from './Vis/visUtils';\nimport MarketplaceDialog from './Marketplace/MarketplaceDialog';\n\nconst generateClassName = createGenerateClassName({\n    productionPrefix: 'vis-e',\n});\n\nconst styles = theme => ({\n    block: {\n        overflow: 'auto',\n        height: 'calc(100vh - 102px)',\n        padding: '0px 8px',\n    },\n    blockNarrow: {\n        height: 'calc(100vh - 67px)',\n    },\n    blockVeryNarrow: {\n        height: 'calc(100vh - 39px)',\n    },\n    canvas: {\n        height: 'calc(100vh - 154px)',\n    },\n    canvasNarrow: {\n        height: 'calc(100vh - 119px)',\n    },\n    canvasVeryNarrow: {\n        height: 'calc(100vh - 91px)',\n    },\n    menu: {\n        display: 'flex',\n        alignItems: 'center',\n    },\n    app: {\n        backgroundColor: theme.palette.background.default,\n        color: theme.palette.text.primary,\n    },\n    tabsContainer: {\n        width: '100%',\n        display: 'flex',\n        alignItems: 'center',\n    },\n    tab: {\n        padding: '6px 12px',\n    },\n    tabButton: {\n        display: 'inline-block',\n        lineHeight: '36px',\n        verticalAlign: 'top',\n    },\n    groupEditTab: {\n        color: theme.palette.mode === 'dark' ? '#bad700' : '#f3bf00',\n    },\n    tabsName: {\n        whiteSpace: 'nowrap',\n        display: 'flex',\n        alignItems: 'center',\n        textTransform: 'none',\n    },\n    viewTabs: {\n        display: 'inline-block',\n        ...theme.classes.viewTabs,\n    },\n    viewTab: {\n        padding: '6px 12px',\n        ...theme.classes.viewTab,\n    },\n    buttonShowAttributes: {\n        position: 'absolute',\n        top: 4,\n        right: 0,\n        zIndex: 10,\n    },\n    buttonShowPalette: {\n        // position: 'absolute',\n        // top: 4,\n        // left: 0,\n        // zIndex: 10,\n    },\n    editModeComponentClass: {\n        zIndex: 1002,\n    },\n    '@keyframes colorBlink': {\n        '0%': {\n            color: '#FF0000',\n        },\n        '50%': {\n            color: theme.palette.text.primary,\n        },\n        '100%': {\n            color: '#FF0000',\n        },\n    },\n    iconBlink: {\n        animationName: '$colorBlink',\n        animationDuration: '1.5s',\n        animationIterationCount: 'infinite',\n    },\n    listItemIcon: {\n        width: 24,\n        height: 24,\n        marginRight: 8,\n    },\n    loadingText: {\n        position: 'absolute',\n        height: 50,\n        backgroundColor: theme.palette.mode === 'dark' ? 'rgba(0,0,0,0.8)' : 'rgba(255,255,255,0.8)',\n        color: theme.palette.mode === 'dark' ? 'white' : 'black',\n        width: 320,\n        zIndex: 2000,\n        top: 50,\n        borderRadius: 10,\n        left: 'calc(50% - 160px)',\n        padding: 8,\n        display: 'flex',\n        alignItems: 'center',\n        justifyContent: 'center',\n    },\n});\n\nconst ViewDrop = props => {\n    const targetRef = useRef();\n\n    const [{ CanDrop, isOver }, drop] = useDrop(() => ({\n        accept: ['widget'],\n        drop(item, monitor) {\n            if (item.widgetSet === '__marketplace') {\n                props.addMarketplaceWidget(\n                    item.widgetType.id,\n                    monitor.getClientOffset().x - targetRef.current.getBoundingClientRect().x,\n                    monitor.getClientOffset().y - targetRef.current.getBoundingClientRect().y,\n                );\n            } else {\n                props.addWidget(\n                    item.widgetType.name,\n                    monitor.getClientOffset().x - targetRef.current.getBoundingClientRect().x,\n                    monitor.getClientOffset().y - targetRef.current.getBoundingClientRect().y,\n                );\n            }\n        },\n        canDrop: () => props.editMode,\n        collect: monitor => ({\n            isOver: monitor.isOver(),\n            CanDrop: monitor.canDrop(),\n        }),\n    }), [props.editMode]);\n\n    return <div\n        ref={drop}\n        style={isOver && CanDrop ? {\n            borderStyle: 'dashed', borderRadius: 4, borderWidth: 1, height: '100%', width: '100%',\n        } : { height: '100%', width: '100%' }}\n    >\n        <div ref={targetRef} style={{ height: '100%', width: '100%' }}>\n            {props.children}\n        </div>\n    </div>;\n};\n\nclass Editor extends Runtime {\n    onIgnoreMouseEvents = ignore => {\n        if (this.state.ignoreMouseEvents !== ignore) {\n            setTimeout(() => this.setState({ ignoreMouseEvents: ignore }), 100);\n        }\n    };\n\n    // eslint-disable-next-line class-methods-use-this\n    initState(newState) {\n        this.visEngineHandlers = {};\n        window.visAddWidget = this.addWidget; // Used for tests\n\n        this.mainRef = React.createRef();\n\n        // this function will be called from Runtime\n\n        let runtime = false;\n\n        if (window.location.search.includes('runtime') || !window.location.pathname.endsWith('edit.html')) {\n            runtime = true;\n        }\n        if (window.location.search.includes('edit') || (window.location.port.startsWith('300') && !window.location.search.includes('runtime'))) {\n            runtime = false;\n        }\n\n        if (!runtime) {\n            window.document.body.style.overflow = 'hidden';\n        } else {\n            window.document.body.style.overflow = 'visible'; // default behavior\n        }\n\n        Object.assign(newState, {\n            runtime,\n            viewsManager: false,\n            projectsDialog: false,\n            createFirstProjectDialog: false,\n            align: {\n                alignType: null,\n                alignIndex: 0,\n                alignValues: [],\n            },\n            showCode: window.localStorage.getItem('showCode') === 'true',\n            editMode: true,\n            history: [],\n            historyCursor: 0,\n            widgetsClipboard: {\n                type: null,\n                widgets: {},\n            },\n            lockDragging: JSON.parse(window.localStorage.getItem('lockDragging')),\n            disableInteraction: JSON.parse(window.localStorage.getItem('disableInteraction')),\n            toolbarHeight: window.localStorage.getItem('Vis.toolbarForm') || 'full',\n            updateWidgetsDialog: false,\n            deleteWidgetsDialog: false,\n            messageDialog: null,\n            widgetHint: window.localStorage.getItem('widgetHint') || 'light',\n            hidePalette: window.localStorage.getItem('Vis.hidePalette') === 'true',\n            hideAttributes: window.localStorage.getItem('Vis.hideAttributes') === 'true',\n            loadingProgress: { step: 0, total: 0 },\n            loadingText: null,\n            showCodeDialog: null,\n            confirmDialog: null,\n            showProjectUpdateDialog: false,\n            ignoreMouseEvents: false,\n            legacyFileSelector: null,\n            askAboutInclude: null,\n        });\n    }\n\n    async componentDidMount() {\n        super.componentDidMount();\n        window.addEventListener('keydown', this.onKeyDown, false);\n        window.addEventListener('beforeunload', this.onBeforeUnload, false);\n    }\n\n    componentWillUnmount() {\n        this.savingTimer && clearTimeout(this.savingTimer);\n        this.savingTimer = null;\n        super.componentWillUnmount();\n        window.removeEventListener('keydown', this.onKeyDown, false);\n        window.removeEventListener('beforeunload', this.onBeforeUnload, false);\n    }\n\n    onBeforeUnload = e => {\n        if (this.state.needSave) {\n            this.needRestart = true;\n            e.returnValue = I18n.t('Project doesn\\'t saved. Are you sure?');\n            return e.returnValue;\n        }\n\n        return null;\n    };\n\n    onKeyDown = async e => {\n        if (!this.state.editMode) {\n            return;\n        }\n        const controlKey = e.ctrlKey || e.cmdKey;\n        if (document.activeElement.tagName === 'BODY') {\n            if (controlKey && e.key === 'z' && this.state.historyCursor !== 0) {\n                e.preventDefault();\n                await this.undo();\n            }\n            if (controlKey && e.key === 'y' && this.state.historyCursor !== this.state.history.length - 1) {\n                e.preventDefault();\n                await this.redo();\n            }\n            if (this.state.selectedWidgets.length) {\n                if (controlKey && e.key === 'c') {\n                    e.preventDefault();\n                    await this.copyWidgets();\n                }\n                if (controlKey && e.key === 'x') {\n                    e.preventDefault();\n                    await this.cutWidgets();\n                }\n            }\n            if (controlKey && e.key === 'v' && Object.keys(this.state.widgetsClipboard.widgets).length) {\n                e.preventDefault();\n                await this.pasteWidgets();\n            }\n            if (controlKey && e.key === 'a') {\n                e.preventDefault();\n                if (this.state.selectedGroup) {\n                    this.setSelectedWidgets(Object.keys(store.getState().visProject[this.state.selectedView].widgets)\n                        .filter(widget => !store.getState().visProject[this.state.selectedView].widgets[widget].data.locked && store.getState().visProject[this.state.selectedView].widgets[widget].groupid === this.state.selectedGroup));\n                } else {\n                    this.setSelectedWidgets(Object.keys(store.getState().visProject[this.state.selectedView].widgets)\n                        .filter(widget => !store.getState().visProject[this.state.selectedView].widgets[widget].data.locked && !store.getState().visProject[this.state.selectedView].widgets[widget].grouped));\n                }\n            }\n            if (e.key === 'Escape') {\n                e.preventDefault();\n                this.setSelectedWidgets([]);\n            }\n            if (e.key === 'Delete') {\n                e.preventDefault();\n                await this.deleteWidgets();\n            }\n        }\n    };\n\n    setWidgetsLoadingProgress = (step, total) => {\n        this.setState({ loadingProgress: { step, total } });\n    };\n\n    onWidgetSetsChanged = (id, state) => {\n        if (state && this.lastUploadedState && state.val !== this.lastUploadedState) {\n            this.lastUploadedState = state.val;\n            this.onVisChanged();\n        }\n    };\n\n    setViewsManager = isOpen => {\n        if ((!!isOpen) !== this.state.viewsManager) {\n            this.setState({ viewsManager: !!isOpen });\n        }\n    };\n\n    setProjectsDialog = isOpen => this.setState({ projectsDialog: isOpen });\n\n    loadSelectedWidgets(selectedView) {\n        selectedView = selectedView || this.state.selectedView;\n        const selectedWidgets = JSON.parse(window.localStorage.getItem(\n            `${this.state.projectName}.${selectedView}.widgets`,\n        ) || '[]') || [];\n\n        // Check that all selectedWidgets exist\n        for (let i = selectedWidgets.length - 1; i >= 0; i--) {\n            if (!store.getState().visProject[selectedView] || !store.getState().visProject[selectedView].widgets || !store.getState().visProject[selectedView].widgets[selectedWidgets[i]]) {\n                selectedWidgets.splice(i, 1);\n            }\n        }\n\n        return selectedWidgets;\n    }\n\n    addWidget = async (widgetType, x, y, data, style) => {\n        const project = JSON.parse(JSON.stringify(store.getState().visProject));\n        const widgets = project[this.state.selectedView].widgets;\n        const newKey = getNewWidgetId(store.getState().visProject);\n        widgets[newKey] = {\n            tpl: widgetType,\n            data: {\n                bindings: [],\n            },\n            style: {\n                bindings: [],\n                left: `${x}px`,\n                top: `${y}px`,\n            },\n        };\n\n        if (this.state.selectedGroup) {\n            widgets[newKey].grouped = true;\n            widgets[newKey].groupid = this.state.selectedGroup;\n            widgets[this.state.selectedGroup].data.members.push(newKey);\n        }\n\n        // check if we have any fields contain \"oid\" in it and pre-fill it with \"nothing_selected\" value\n        const widgetTypes = getWidgetTypes();\n        const tplWidget = widgetTypes.find(item => item.name === widgetType);\n\n        // extract groups\n        const fields = parseAttributes(tplWidget.params);\n\n        fields.forEach(group => {\n            if (group.fields) {\n                group.fields.forEach(field => {\n                    if (field.name === 'oid') {\n                        widgets[newKey].data.oid = 'nothing_selected';\n                    }\n                    if (field.default !== undefined && field.default !== null) {\n                        widgets[newKey].data[field.name] = field.default;\n                        widgets[newKey].data[`g_${group.name}`] = true;\n                    }\n                });\n            }\n        });\n\n        // apply default style\n        if (tplWidget.style) {\n            Object.assign(widgets[newKey].style, tplWidget.style);\n            if (widgets[newKey].style.position === 'relative') {\n                widgets[newKey].style.width = '100%';\n            }\n        }\n\n        // used by tests\n        data && Object.assign(widgets[newKey].data, data);\n        style && Object.assign(widgets[newKey].style, style);\n\n        widgets[newKey].widgetSet = tplWidget.set;\n\n        // Custom init of widgets\n        if (tplWidget.init) {\n            if (window.vis && window.vis.binds[tplWidget.set] && window.vis.binds[tplWidget.set][tplWidget.init]) {\n                window.vis.binds[tplWidget.set][tplWidget.init](widgetType, widgets[newKey].data);\n            }\n        }\n\n        await this.changeProject(project);\n        await this.setSelectedWidgets([newKey]);\n        return newKey;\n    };\n\n    deleteWidgets = async () => this.setState({ deleteWidgetsDialog: true });\n\n    updateWidgets = async marketplaceWidget => this.setState({ updateWidgetsDialog: marketplaceWidget });\n\n    updateWidgetsAction = async (marketplace, widgets) => {\n        await this.installWidget(marketplace.widget_id, marketplace.id);\n        const project = JSON.parse(JSON.stringify(store.getState().visProject));\n        widgets.forEach(view => {\n            view.widgets.forEach(widget => {\n                const widgetData = project[view.name].widgets[widget];\n                if (widgetData.tpl === '_tplGroup') {\n                    widgetData.data.members.forEach(member => {\n                        delete project[view.name].widgets[member];\n                    });\n                }\n                delete project[view.name].widgets[widget];\n                this.importMarketplaceWidget(\n                    project,\n                    view.name,\n                    JSON.parse(JSON.stringify(marketplace.widget)),\n                    marketplace.id,\n                    null,\n                    null,\n                    widget,\n                    JSON.parse(JSON.stringify(widgetData.data)),\n                    JSON.parse(JSON.stringify(widgetData.style)),\n                );\n            });\n        });\n        await this.changeProject(project);\n    };\n\n    deleteWidgetsAction = async () => {\n        const project = deepClone(store.getState().visProject);\n        const widgets = project[this.state.selectedView].widgets;\n        for (const selectedWidget of this.state.selectedWidgets) {\n            if (widgets[selectedWidget].tpl === '_tplGroup') {\n                widgets[selectedWidget].data.members.forEach(member => {\n                    delete widgets[member];\n                });\n            }\n            if (widgets[selectedWidget].usedInWidget) {\n                // find widget where this widget is used\n                findWidgetUsages(project, null, selectedWidget).forEach(usage => {\n                    console.log(`Widget removed from ${usage.wid}, attribute ${usage.attr}`);\n                    project[usage.view].widgets[usage.wid].data[usage.attr] = '';\n                });\n            }\n            // If this widget is a member of a group, remove it from the group too\n            if (widgets[selectedWidget].groupid) {\n                const group = widgets[widgets[selectedWidget].groupid];\n                group?.data?.members && group.data.members.splice(group.data.members.indexOf(selectedWidget), 1);\n            }\n\n            delete widgets[selectedWidget];\n        }\n        this.setSelectedWidgets([]);\n        await this.changeProject(project);\n    };\n\n    lockWidgets = async type => {\n        const project = JSON.parse(JSON.stringify(store.getState().visProject));\n        const widgets = project[this.state.selectedView].widgets;\n        this.state.selectedWidgets.forEach(selectedWidget =>\n            widgets[selectedWidget].data.locked = type === 'lock');\n        await this.changeProject(project);\n    };\n\n    toggleWidgetHint = () => {\n        let widgetHint;\n        if (this.state.widgetHint === 'light') {\n            widgetHint = 'dark';\n        } else if (this.state.widgetHint === 'dark') {\n            widgetHint = 'hide';\n        } else if (this.state.widgetHint === 'hide') {\n            widgetHint = 'light';\n        }\n        this.setState({ widgetHint });\n        window.localStorage.setItem('widgetHint', widgetHint);\n    };\n\n    cutWidgets = async () => {\n        await this.cutCopyWidgets('cut');\n    };\n\n    copyWidgets = async () => {\n        await this.cutCopyWidgets('copy');\n    };\n\n    cutCopyWidgets = async type => {\n        const widgets = {};\n        const groupMembers = {};\n        const project = deepClone(store.getState().visProject);\n        const { visProject } = deepClone(store.getState());\n\n        this.state.selectedWidgets.forEach(selectedWidget => {\n            widgets[selectedWidget] = visProject[this.state.selectedView].widgets[selectedWidget];\n            const copiedWidget = widgets[selectedWidget];\n\n            if (isGroup(copiedWidget)) {\n                for (const wid of copiedWidget.data.members) {\n                    groupMembers[wid] = visProject[this.state.selectedView].widgets[wid];\n                }\n            }\n\n            if (project[this.state.selectedView]) {\n                const widget = project[this.state.selectedView].widgets[selectedWidget];\n\n                if (widget.groupid) {\n                    delete widgets[selectedWidget].groupid;\n                    delete widgets[selectedWidget].grouped;\n                }\n            }\n        });\n\n        await this.setStateAsync({\n            widgetsClipboard: {\n                type,\n                view: this.state.selectedView,\n                widgets,\n                groupMembers,\n            },\n        });\n\n        // deselect all widgets\n        if (type === 'cut') {\n            this.deleteWidgetsAction();\n        }\n    };\n\n    pasteWidgets = async () => {\n        const project = deepClone(store.getState().visProject);\n        const widgets = project[this.state.selectedView].widgets;\n\n        const newKeys = [];\n        let widgetOffset = 0;\n        let groupOffset = 0;\n\n        for (const clipboardWidgetId of Object.keys(this.state.widgetsClipboard.widgets)) {\n            const newWidget = deepClone(this.state.widgetsClipboard.widgets[clipboardWidgetId]);\n            if (this.state.widgetsClipboard.type === 'copy' && this.state.selectedView === this.state.widgetsClipboard.view) {\n                const boundingRect = Editor.getWidgetRelativeRect(clipboardWidgetId);\n                newWidget.style = this.pxToPercent(newWidget.style, {\n                    left: `${(boundingRect?.left ?? 0) + 10}px`,\n                    top: `${(boundingRect?.top ?? 0) + 10}px`,\n                });\n            }\n            let newKey;\n\n            if (isGroup(newWidget)) {\n                newKey = pasteGroup({\n                    group: newWidget, widgets, offset: groupOffset, groupMembers: this.state.widgetsClipboard.groupMembers, project: store.getState().visProject,\n                });\n\n                groupOffset++;\n            } else {\n                newKey = pasteSingleWidget({\n                    widget: newWidget, offset: widgetOffset, project: store.getState().visProject, selectedGroup: this.state.selectedGroup, widgets,\n                });\n                widgetOffset++;\n            }\n\n            newKeys.push(newKey);\n        }\n\n        this.setSelectedWidgets([]);\n        await this.changeProject(project);\n        this.setSelectedWidgets(newKeys);\n    };\n\n    cloneWidgets = async () => {\n        const project = deepClone(store.getState().visProject);\n        const widgets = project[this.state.selectedView].widgets;\n\n        const newKeys = [];\n        this.state.selectedWidgets.forEach(selectedWidget => {\n            const newWidget = deepClone(widgets[selectedWidget]);\n            const boundingRect = Editor.getWidgetRelativeRect(selectedWidget);\n            newWidget.style = this.pxToPercent(newWidget.style, {\n                left: boundingRect.left + 10,\n                top: boundingRect.top + 10,\n            });\n\n            if (isGroup(newWidget)) {\n                pasteGroup({\n                    group: newWidget, widgets, groupMembers: widgets, project: store.getState().visProject,\n                });\n            } else {\n                const newKey = pasteSingleWidget({\n                    widget: newWidget, project: store.getState().visProject, selectedGroup: this.state.selectedGroup, widgets,\n                });\n\n                newKeys.push(newKey);\n            }\n        });\n        this.setSelectedWidgets([]);\n        await this.changeProject(project);\n        this.setSelectedWidgets(newKeys);\n    };\n\n    alignWidgets = type => {\n        const project = deepClone(store.getState().visProject);\n        const widgets = project[this.state.selectedView].widgets;\n        const newCoordinates = {\n            left: 0, top: 0, width: 0, height: 0, right: 0, bottom: 0,\n        };\n        const selectedWidgets = [];\n        this.state.selectedWidgets.forEach(selectedWidget => {\n            const boundingRect = Editor.getWidgetRelativeRect(selectedWidget);\n            selectedWidgets.push({ id: selectedWidget, widget: widgets[selectedWidget], coordinate: boundingRect });\n        });\n        if (type === 'left') {\n            selectedWidgets.forEach(selectedWidget => {\n                if (newCoordinates.left === 0 || selectedWidget.coordinate.left < newCoordinates.left) {\n                    newCoordinates.left = selectedWidget.coordinate.left;\n                }\n            });\n            selectedWidgets.forEach(selectedWidget => selectedWidget.widget.style.left = `${newCoordinates.left}px`);\n        } else if (type === 'right') {\n            selectedWidgets.forEach(selectedWidget => {\n                if (newCoordinates.right === 0 || selectedWidget.coordinate.right > newCoordinates.right) {\n                    newCoordinates.right = selectedWidget.coordinate.right;\n                }\n            });\n            selectedWidgets.forEach(selectedWidget => selectedWidget.widget.style.left = `${newCoordinates.right - selectedWidget.coordinate.width}px`);\n        } else if (type === 'top') {\n            selectedWidgets.forEach(selectedWidget => {\n                if (newCoordinates.top === 0 || selectedWidget.coordinate.top < newCoordinates.top) {\n                    newCoordinates.top = selectedWidget.coordinate.top;\n                }\n            });\n            selectedWidgets.forEach(selectedWidget => selectedWidget.widget.style.top = `${newCoordinates.top}px`);\n        } else if (type === 'bottom') {\n            selectedWidgets.forEach(selectedWidget => {\n                if (newCoordinates.bottom === 0 || selectedWidget.coordinate.bottom > newCoordinates.bottom) {\n                    newCoordinates.bottom = selectedWidget.coordinate.bottom;\n                }\n            });\n            selectedWidgets.forEach(selectedWidget => selectedWidget.widget.style.top = `${newCoordinates.bottom - selectedWidget.coordinate.height}px`);\n        } else if (type === 'horizontal-center') {\n            selectedWidgets.forEach(selectedWidget => {\n                if (newCoordinates.left === 0 || selectedWidget.coordinate.left < newCoordinates.left) {\n                    newCoordinates.left = selectedWidget.coordinate.left;\n                }\n                if (newCoordinates.right === 0 || selectedWidget.coordinate.right > newCoordinates.right) {\n                    newCoordinates.right = selectedWidget.coordinate.right;\n                }\n            });\n            selectedWidgets.forEach(selectedWidget => selectedWidget.widget.style.left = `${(newCoordinates.left + (newCoordinates.right - newCoordinates.left) / 2) - (selectedWidget.coordinate.width / 2)}px`);\n        } else if (type === 'vertical-center') {\n            selectedWidgets.forEach(selectedWidget => {\n                if (newCoordinates.top === 0 || selectedWidget.coordinate.top < newCoordinates.top) {\n                    newCoordinates.top = selectedWidget.coordinate.top;\n                }\n                if (newCoordinates.bottom === 0 || selectedWidget.coordinate.bottom > newCoordinates.bottom) {\n                    newCoordinates.bottom = selectedWidget.coordinate.bottom;\n                }\n            });\n            selectedWidgets.forEach(selectedWidget => selectedWidget.widget.style.top = `${(newCoordinates.top + (newCoordinates.bottom - newCoordinates.top) / 2) - (selectedWidget.coordinate.height / 2)}px`);\n        } else if (type === 'horizontal-equal') {\n            let widgetsWidth = 0;\n            let spaceWidth = 0;\n            let currentLeft = 0;\n            selectedWidgets.sort((selectedWidget1, selectedWidget2) => (selectedWidget1.coordinate.left > selectedWidget2.coordinate.left ? 1 : -1));\n            selectedWidgets.forEach(selectedWidget => {\n                if (newCoordinates.left === 0 || selectedWidget.coordinate.left < newCoordinates.left) {\n                    newCoordinates.left = selectedWidget.coordinate.left;\n                }\n                if (newCoordinates.right === 0 || selectedWidget.coordinate.right > newCoordinates.right) {\n                    newCoordinates.right = selectedWidget.coordinate.right;\n                }\n                widgetsWidth += selectedWidget.coordinate.width;\n            });\n            spaceWidth = newCoordinates.right - newCoordinates.left - widgetsWidth;\n            if (spaceWidth < 0) {\n                spaceWidth = 0;\n            }\n            selectedWidgets.forEach((selectedWidget, index) => {\n                selectedWidget.widget.style.left = `${newCoordinates.left + currentLeft}px`;\n                currentLeft += selectedWidget.coordinate.width;\n                if (index < selectedWidgets.length - 1) {\n                    currentLeft += spaceWidth / (selectedWidgets.length - 1);\n                }\n            });\n        } else if (type === 'vertical-equal') {\n            let widgetsHeight = 0;\n            let spaceHeight = 0;\n            let currentTop = 0;\n            selectedWidgets.sort((selectedWidget1, selectedWidget2) => (selectedWidget1.coordinate.top > selectedWidget2.coordinate.top ? 1 : -1));\n            selectedWidgets.forEach(selectedWidget => {\n                if (newCoordinates.top === 0 || selectedWidget.coordinate.top < newCoordinates.top) {\n                    newCoordinates.top = selectedWidget.coordinate.top;\n                }\n                if (newCoordinates.bottom === 0 || selectedWidget.coordinate.bottom > newCoordinates.bottom) {\n                    newCoordinates.bottom = selectedWidget.coordinate.bottom;\n                }\n                widgetsHeight += selectedWidget.coordinate.height;\n            });\n            spaceHeight = newCoordinates.bottom - newCoordinates.top - widgetsHeight;\n            if (spaceHeight < 0) {\n                spaceHeight = 0;\n            }\n            selectedWidgets.forEach((selectedWidget, index) => {\n                selectedWidget.widget.style.top = `${newCoordinates.top + currentTop}px`;\n                currentTop += selectedWidget.coordinate.height;\n                if (index < selectedWidgets.length - 1) {\n                    currentTop += spaceHeight / (selectedWidgets.length - 1);\n                }\n            });\n        } else if (type === 'width') {\n            let { alignIndex, alignType, alignValues } = this.state.align;\n            if (alignType !== 'width') {\n                alignType = 'width';\n                alignIndex = 0;\n                alignValues = [];\n            }\n            if (!alignValues.length) {\n                this.state.selectedWidgets.forEach(selectedWidget => {\n                    const boundingRect = window.document.getElementById(selectedWidget).getBoundingClientRect();\n                    const w = boundingRect.width;\n                    if (alignValues.indexOf(w) === -1) { alignValues.push(w); }\n                });\n            }\n\n            alignIndex++;\n            if (alignIndex >= alignValues.length) {\n                alignIndex = 0;\n            }\n\n            this.state.selectedWidgets.forEach(selectedWidget => {\n                widgets[selectedWidget].style.width = alignValues[alignIndex];\n            });\n            this.setState({ align: { alignType, alignIndex, alignValues } });\n        } else if (type === 'height') {\n            let { alignIndex, alignType, alignValues } = this.state.align;\n            if (alignType !== 'height') {\n                alignType = 'height';\n                alignIndex = 0;\n                alignValues = [];\n            }\n            if (!alignValues.length) {\n                this.state.selectedWidgets.forEach(selectedWidget => {\n                    const boundingRect = window.document.getElementById(selectedWidget).getBoundingClientRect();\n                    const h = boundingRect.height;\n                    if (alignValues.indexOf(h) === -1) { alignValues.push(h); }\n                });\n            }\n\n            alignIndex++;\n            if (alignIndex >= alignValues.length) {\n                alignIndex = 0;\n            }\n\n            this.state.selectedWidgets.forEach(selectedWidget => {\n                widgets[selectedWidget].style.height = alignValues[alignIndex];\n            });\n            this.setState({ align: { alignType, alignIndex, alignValues } });\n        }\n        this.changeProject(project);\n    };\n\n    orderWidgets = type => {\n        const project = deepClone(store.getState().visProject);\n        const widgets = project[this.state.selectedView].widgets;\n        let minZ = 0;\n        let maxZ = 0;\n        Object.keys(widgets).forEach(widget => {\n            const currentZ = parseInt(widgets[widget].style['z-index'] || 0);\n            if (minZ > currentZ || minZ === 0) {\n                minZ = currentZ;\n            }\n            if (maxZ < currentZ || maxZ === 0) {\n                maxZ = currentZ;\n            }\n        });\n\n        this.state.selectedWidgets.forEach(selectedWidget => {\n            const currentZ = parseInt(widgets[selectedWidget].style['z-index']) || 0;\n            if (type === 'front' && currentZ <= maxZ) {\n                widgets[selectedWidget].style['z-index'] = maxZ + 1;\n                if (widgets[selectedWidget].style['z-index'] > 1599) {\n                    widgets[selectedWidget].style['z-index'] = 1599;\n                }\n            }\n            if (type === 'back' && currentZ >= minZ) {\n                widgets[selectedWidget].style['z-index'] = minZ - 1;\n                if (widgets[selectedWidget].style['z-index'] < 0) {\n                    widgets[selectedWidget].style['z-index'] = 0;\n                }\n            }\n        });\n\n        return this.changeProject(project);\n    };\n\n    static getWidgetRelativeRect(widget) {\n        const el = window.document.getElementById(widget);\n        if (el) {\n            const widgetBoundingRect = el.getBoundingClientRect();\n            const viewBoundingRect = window.document.getElementById('vis-react-container').getBoundingClientRect();\n            return {\n                left: widgetBoundingRect.left - viewBoundingRect.left,\n                top: widgetBoundingRect.top - viewBoundingRect.top,\n                right: widgetBoundingRect.right - viewBoundingRect.left,\n                bottom: widgetBoundingRect.bottom - viewBoundingRect.top,\n                width: widgetBoundingRect.width,\n                height: widgetBoundingRect.height,\n            };\n        }\n\n        return null;\n    }\n\n    groupWidgets = async () => {\n        const project = deepClone(store.getState().visProject);\n        const widgets = project[this.state.selectedView].widgets;\n        const group = {\n            tpl: '_tplGroup',\n            widgetSet: 'basic',\n            data: {\n                members: this.state.selectedWidgets,\n            },\n            style: {\n\n            },\n        };\n        const groupId = getNewGroupId(project);\n        let left = 0;\n        let top = 0;\n        let right = 0;\n        let bottom = 0;\n        this.state.selectedWidgets.forEach(selectedWidget => {\n            widgets[selectedWidget].grouped = true;\n            widgets[selectedWidget].groupid = groupId;\n            const widgetBoundingRect = Editor.getWidgetRelativeRect(selectedWidget);\n            if (!left || widgetBoundingRect.left < left) {\n                left = widgetBoundingRect.left;\n            }\n            if (!top || widgetBoundingRect.top < top) {\n                top = widgetBoundingRect.top;\n            }\n            if (!right || widgetBoundingRect.right > right) {\n                right = widgetBoundingRect.right;\n            }\n            if (!bottom || widgetBoundingRect.bottom > bottom) {\n                bottom = widgetBoundingRect.bottom;\n            }\n        });\n        this.state.selectedWidgets.forEach(selectedWidget => {\n            const widgetBoundingRect = Editor.getWidgetRelativeRect(selectedWidget);\n            widgets[selectedWidget].style.left = widgetBoundingRect.left - left;\n            widgets[selectedWidget].style.top = widgetBoundingRect.top - top;\n        });\n\n        if (this.state.selectedGroup) {\n            group.grouped = true;\n            group.groupid = this.state.selectedGroup;\n\n            const parentGroupWidget = widgets[this.state.selectedGroup];\n            parentGroupWidget.data.members.push(groupId);\n            // and remove the ungrouped versions\n            for (const wid of this.state.selectedWidgets) {\n                const idx = parentGroupWidget.data.members.indexOf(wid);\n                parentGroupWidget.data.members.splice(idx, 1);\n            }\n        }\n\n        group.style.left = `${left}px`;\n        group.style.top = `${top}px`;\n        group.style.width = `${right - left}px`;\n        group.style.height = `${bottom - top}px`;\n        widgets[groupId] = group;\n\n        await this.changeProject(project);\n        this.setSelectedWidgets([groupId]);\n    };\n\n    ungroupWidgets = () => {\n        const project = deepClone(store.getState().visProject);\n        const widgets = project[this.state.selectedView].widgets;\n        const group = widgets[this.state.selectedWidgets[0]];\n\n        for (const member of group.data.members) {\n            const widgetBoundingRect = Editor.getWidgetRelativeRect(member);\n\n            if (widgetBoundingRect) {\n                widgets[member].style.left = `${widgetBoundingRect.left}px`;\n                widgets[member].style.top = `${widgetBoundingRect.top}px`;\n                widgets[member].style.width = `${widgetBoundingRect.width}px`;\n                widgets[member].style.height = `${widgetBoundingRect.height}px`;\n            }\n\n            delete widgets[member].grouped;\n            delete widgets[member].groupid;\n        }\n\n        if (this.state.selectedGroup) {\n            const parentGroupWidget = widgets[this.state.selectedGroup];\n\n            // if ungrouped nested group, re-add the single members\n            for (const member of group.data.members) {\n                parentGroupWidget.data.members.push(member);\n\n                widgets[member].grouped = true;\n                widgets[member].groupid = this.state.selectedGroup;\n            }\n\n            const idx = parentGroupWidget.data.members.indexOf(this.state.selectedWidgets[0]);\n            parentGroupWidget.data.members.splice(idx, 1);\n        }\n\n        this.setSelectedWidgets(group.data.members);\n\n        delete widgets[this.state.selectedWidgets[0]];\n\n        return this.changeProject(project);\n    };\n\n    setSelectedGroup = groupId => {\n        if (store.getState().visProject[this.state.selectedView].widgets[groupId].marketplace) {\n            return;\n        }\n        this.setState({ selectedGroup: groupId });\n        this.setSelectedWidgets([]);\n    };\n\n    undo = async () => {\n        this.setSelectedWidgets([]);\n        await this.changeProject(this.state.history[this.state.historyCursor - 1], true);\n        await this.setStateAsync({ historyCursor: this.state.historyCursor - 1 });\n    };\n\n    redo = async () => {\n        this.setSelectedWidgets([]);\n        await this.changeProject(this.state.history[this.state.historyCursor + 1], true);\n        await this.setStateAsync({ historyCursor: this.state.historyCursor + 1 });\n    };\n\n    toggleLockDragging = () => {\n        window.localStorage.setItem('lockDragging', JSON.stringify(!this.state.lockDragging));\n        this.setState({ lockDragging: !this.state.lockDragging });\n    };\n\n    toggleDisableInteraction = () => {\n        window.localStorage.setItem('disableInteraction', JSON.stringify(!this.state.disableInteraction));\n        this.setState({ disableInteraction: !this.state.disableInteraction });\n    };\n\n    saveHistory(project) {\n        this.historyTimer && clearTimeout(this.historyTimer);\n\n        this.historyTimer = setTimeout(() => {\n            this.historyTimer = null;\n\n            let history = deepClone(this.state.history);\n            let historyCursor = this.state.historyCursor;\n            if (historyCursor !== history.length - 1) {\n                history = history.slice(0, historyCursor + 1);\n            }\n            history.push(project);\n            if (history.length > 50) {\n                history.shift();\n            }\n            historyCursor = history.length - 1;\n            this.setState({ history, historyCursor });\n        }, 1000);\n    }\n\n    changeProject = async (project, ignoreHistory = false) => {\n        // set timestamp\n        project.___settings.ts = `${Date.now()}.${Math.random().toString(36).substring(7)}`;\n\n        if (!ignoreHistory) {\n            // do not save history too often\n            this.saveHistory(project);\n        }\n\n        store.dispatch(updateProject(project));\n        await this.setStateAsync({ needSave: true });\n\n        // save changes after 1 second\n        this.savingTimer && clearTimeout(this.savingTimer);\n        this.savingTimer = setTimeout(async () => {\n            this.savingTimer = null;\n\n            // remove all special structures\n            project = unsyncMultipleWidgets(project);\n\n            const projectStr = JSON.stringify(project, null, 2);\n\n            if ('TextEncoder' in window) {\n                const encoder = new TextEncoder();\n                const data = encoder.encode(projectStr);\n                await this.socket.writeFile64(this.adapterId, `${this.state.projectName}/vis-views.json`, data);\n            } else {\n                await this.socket.writeFile64(this.adapterId, `${this.state.projectName}/vis-views.json`, projectStr);\n            }\n\n            this.setState({ needSave: false });\n            if (this.needRestart) {\n                window.location.reload();\n            }\n        }, 1_000);\n    };\n\n    renameProject = async (fromProjectName, toProjectName) => {\n        try {\n            await this.socket.rename(this.adapterId, fromProjectName, toProjectName);\n            if (this.state.projectName === fromProjectName) {\n                window.location.href = `?${toProjectName}${window.location.hash || ''}`;\n            } else {\n                await this.refreshProjects();\n            }\n        } catch (e) {\n            // eslint-disable-next-line no-alert\n            window.alert(`Cannot rename: ${e}`);\n            console.error(e);\n        }\n    };\n\n    deleteProject = async projectName => {\n        try {\n            await this.socket.deleteFolder(this.adapterId, projectName);\n            await this.refreshProjects();\n            if (this.state.projectName === projectName) {\n                await this.loadProject(this.state.projects[0]);\n            }\n        } catch (e) {\n            console.error(e);\n        }\n    };\n\n    toggleView = async (view, isShow, isActivate = false) => {\n        let changed = false;\n        const project = deepClone(store.getState().visProject);\n        const pos = project.___settings.openedViews.indexOf(view);\n        if (isShow && pos === -1) {\n            project.___settings.openedViews.unshift(view);\n            changed = true;\n        } else if (!isShow && pos !== -1) {\n            project.___settings.openedViews.splice(pos, 1);\n            changed = true;\n        }\n\n        if (changed) {\n            await this.changeProject(project, false);\n        }\n\n        if (isActivate) {\n            this.setViewsManager(false);\n            await this.changeView(view);\n        } else if (!project.___settings.openedViews.includes(this.state.selectedView)) {\n            await this.changeView(project.___settings.openedViews[0]);\n        }\n    };\n\n    setSelectedWidgets = async (selectedWidgets, selectedView, cb) => {\n        if (typeof selectedView === 'function') {\n            cb = selectedView;\n            selectedView = null;\n        }\n\n        if (cb) {\n            // It should never happen, as cb not used\n            // eslint-disable-next-line\n            debugger;\n        }\n\n        store.dispatch(recalculateFields(true));\n\n        if (selectedView) {\n            window.localStorage.setItem(`${this.state.projectName}.${selectedView}.widgets`, JSON.stringify(selectedWidgets));\n            // changeView reads selected widgets from localStorage\n            await this.changeView(selectedView, true, true, true);\n        } else {\n            window.localStorage.setItem(`${this.state.projectName}.${this.state.selectedView}.widgets`, JSON.stringify(selectedWidgets));\n\n            await this.setStateAsync({\n                selectedWidgets,\n                alignType: null,\n                alignIndex: 0,\n                alignValues: [],\n            });\n        }\n    };\n\n    toggleCode = () => {\n        const oldShowCode = this.state.showCode;\n        this.setState({ showCode: !oldShowCode });\n        window.localStorage.setItem('showCode', JSON.stringify(!oldShowCode));\n    };\n\n    onWidgetsChanged = (changedData, view, viewSettings) => {\n        this.tempProject = this.tempProject || deepClone(store.getState().visProject);\n        changedData && changedData.forEach(item => {\n            if (item.style) {\n                const currentStyle = this.tempProject[item.view].widgets[item.wid].style;\n                if (item.style.noPxToPercent) {\n                    delete item.style.noPxToPercent;\n                    Object.assign(currentStyle, item.style);\n                } else {\n                    const percentStyle = this.pxToPercent(currentStyle, item.style);\n                    Object.assign(currentStyle, percentStyle);\n                }\n                Object.keys(currentStyle).forEach(key => {\n                    if (currentStyle[key] === undefined || currentStyle[key] === null) {\n                        delete currentStyle[key];\n                    }\n                });\n            }\n            if (item.data) {\n                const currentData = this.tempProject[item.view].widgets[item.wid].data;\n                Object.assign(currentData, item.data);\n                Object.keys(currentData).forEach(key => {\n                    if (currentData[key] === undefined || currentData[key] === null) {\n                        delete currentData[key];\n                    }\n                });\n            }\n        });\n\n        // settings of view are changed\n        if (view && viewSettings) {\n            // special processing for group editing\n            if (viewSettings.order && this.state.selectedGroup) {\n                const order = viewSettings.order;\n                delete viewSettings.order;\n                const widget = this.tempProject[this.state.selectedView].widgets[this.state.selectedGroup];\n                widget.data = widget.data || {};\n                widget.data.members = order;\n            }\n\n            Object.keys(viewSettings).forEach(attr => {\n                if (viewSettings[attr] === null) {\n                    delete this.tempProject[view].settings[attr];\n                } else {\n                    this.tempProject[view].settings[attr] = viewSettings[attr];\n                }\n            });\n        }\n\n        this.changeTimer && clearTimeout(this.changeTimer);\n\n        // collect changes from all widgets\n        this.changeTimer = setTimeout(() => {\n            this.changeTimer = null;\n            this.changeProject(this.tempProject);\n            this.tempProject = null;\n        }, 200);\n    };\n\n    onFontsUpdate = fonts => this.setState({ fonts });\n\n    cssClone = (attr, cb) => {\n        if (this.visEngineHandlers[this.state.selectedView] && this.visEngineHandlers[this.state.selectedView].onStealStyle) {\n            this.visEngineHandlers[this.state.selectedView].onStealStyle(attr, cb);\n        } else {\n            cb && cb(attr, null); // cancel selection\n        }\n    };\n\n    registerCallback = (name, view, cb) => {\n        if (cb) {\n            this.visEngineHandlers[view] = this.visEngineHandlers[view] || {};\n            this.visEngineHandlers[view][name] = cb;\n        } else if (this.visEngineHandlers[view]) {\n            delete this.visEngineHandlers[view][name];\n            if (!Object.keys(this.visEngineHandlers[view]).length) {\n                delete this.visEngineHandlers[view];\n            }\n        }\n    };\n\n    onPxToPercent = (wids, attr, cb) => {\n        if (this.visEngineHandlers[this.state.selectedView] && this.visEngineHandlers[this.state.selectedView].onPxToPercent) {\n            return this.visEngineHandlers[this.state.selectedView].onPxToPercent(wids, attr, cb);\n        }\n\n        return null;\n    };\n\n    pxToPercent = (oldStyle, newStyle) => {\n        if (this.visEngineHandlers[this.state.selectedView] && this.visEngineHandlers[this.state.selectedView].pxToPercent) {\n            return this.visEngineHandlers[this.state.selectedView].pxToPercent(oldStyle, newStyle);\n        }\n        // cb && cb(wids, attr, null); // cancel selection\n        return null;\n    };\n\n    onPercentToPx = (wids, attr, cb) => {\n        if (this.visEngineHandlers[this.state.selectedView] && this.visEngineHandlers[this.state.selectedView].onPercentToPx) {\n            return this.visEngineHandlers[this.state.selectedView].onPercentToPx(wids, attr, cb);\n        }\n        return null;\n        // cb && cb(wids, attr, null); // cancel selection\n    };\n\n    saveCssFile = (directory, fileName, data) => {\n        if (fileName.endsWith('vis-common-user.css')) {\n            this.setState({ visCommonCss: data });\n        } else if (fileName.endsWith('vis-user.css')) {\n            this.setState({ visUserCss: data });\n        }\n\n        this.socket.writeFile64(directory, fileName, data);\n    };\n\n    showConfirmDialog(confirmDialog) {\n        this.setState({ confirmDialog });\n    }\n\n    showCodeDialog(codeDialog) {\n        this.setState({ showCodeDialog: codeDialog });\n    }\n\n    setMarketplaceDialog = marketplaceDialog => this.setState({ marketplaceDialog });\n\n    installWidget = async (widgetId, id) => {\n        if (window.VisMarketplace?.api) {\n            const project = deepClone(store.getState().visProject);\n            const marketplaceWidget = await window.VisMarketplace.api.apiGetWidgetRevision(widgetId, id);\n            if (!project.___settings.marketplace) {\n                project.___settings.marketplace = [];\n            }\n            const widgetIndex = project.___settings.marketplace.findIndex(item => item.widget_id === marketplaceWidget.widget_id);\n            if (widgetIndex === -1) {\n                project.___settings.marketplace.push(marketplaceWidget);\n            } else {\n                project.___settings.marketplace[widgetIndex] = marketplaceWidget;\n            }\n            await this.changeProject(project);\n        }\n    };\n\n    uninstallWidget = async widget => {\n        const project = deepClone(store.getState().visProject);\n        const widgetIndex = project.___settings.marketplace.findIndex(item => item.id === widget);\n        if (widgetIndex !== -1) {\n            project.___settings.marketplace.splice(widgetIndex, 1);\n        }\n        await this.changeProject(project);\n    };\n\n    importMarketplaceWidget = (project, view, widgets, id, x, y, widgetId, oldData, oldStyle) => {\n        const newWidgets = {};\n\n        widgets.forEach(_widget => {\n            if (_widget.isRoot) {\n                _widget.marketplace = deepClone(store.getState().visProject.___settings.marketplace.find(item => item.id === id));\n            }\n            if (isGroup(_widget)) {\n                let newKey = getNewGroupId(store.getState().visProject);\n                if (_widget.isRoot) {\n                    if (widgetId) {\n                        newKey = widgetId;\n                        oldData.members = _widget.data.members;\n                        _widget.data = oldData;\n                        _widget.style = oldStyle;\n                    } else {\n                        _widget.style.top = y;\n                        _widget.style.left = x;\n                    }\n                }\n                newWidgets[newKey] = _widget;\n                // find all widgets that belong to this group and change groupid\n                let w;\n                do {\n                    w = widgets.find(item => item.groupid === _widget._id);\n                    if (w) {\n                        w.groupid = newKey;\n                    }\n                } while (w);\n            } else {\n                const newKey = getNewWidgetId(store.getState().visProject);\n                newWidgets[newKey] = _widget;\n                if (_widget.grouped && newWidgets[_widget.groupid] && newWidgets[_widget.groupid].data && newWidgets[_widget.groupid].data.members) {\n                    // find group\n                    const pos = newWidgets[_widget.groupid].data.members.indexOf(_widget._id);\n                    if (pos !== -1) {\n                        newWidgets[_widget.groupid].data.members[pos] = newKey;\n                    }\n                }\n            }\n        });\n\n        Object.keys(newWidgets).forEach(wid => delete newWidgets[wid]._id);\n\n        project[view].widgets = { ...project[view].widgets, ...newWidgets };\n        return project;\n    };\n\n    addMarketplaceWidget = async (id, x, y, widgetId, oldData, oldStyle) => {\n        const project = deepClone(store.getState().visProject);\n        const widgets = deepClone(store.getState().visProject.___settings.marketplace.find(item => item.id === id).widget);\n        this.importMarketplaceWidget(project, this.state.selectedView, widgets, id, x, y, widgetId, oldData, oldStyle);\n        await this.changeProject(project);\n    };\n\n    updateWidget = async id => {\n        const project = deepClone(store.getState().visProject);\n        const widget = project[this.state.selectedView].widgets[id];\n        if (widget && widget.marketplace) {\n            const marketplace = deepClone(store.getState().visProject.___settings.marketplace.find(item => item.widget_id === widget.marketplace.widget_id));\n            await this.deleteWidgetsAction();\n            await this.addMarketplaceWidget(marketplace.id, null, null, id, widget.data, widget.style);\n        }\n    };\n\n    renderAskAboutIncludeDialog() {\n        if (this.state.askAboutInclude) {\n            return <Dialog\n                open={!0}\n                onClose={() => this.setState({ askAboutInclude: null })}\n            >\n                <DialogTitle id=\"alert-dialog-title\">{I18n.t('Include widget?')}</DialogTitle>\n                <DialogContent>\n                    <DialogContentText>\n                        {I18n.t('Do you want to include \"%s\" widget into \"%s\"?', this.state.askAboutInclude.wid, this.state.askAboutInclude.toWid)}\n                    </DialogContentText>\n                </DialogContent>\n                <DialogActions>\n                    <Button\n                        variant=\"contained\"\n                        onClick={() => {\n                            const askAboutInclude = this.state.askAboutInclude;\n                            this.setState({ askAboutInclude: null });\n                            askAboutInclude.cb(askAboutInclude.wid, askAboutInclude.toWid);\n                        }}\n                        color=\"primary\"\n                        autoFocus\n                        startIcon={<AddIcon />}\n                    >\n                        {I18n.t('Add')}\n                    </Button>\n                    <Button\n                        variant=\"contained\"\n                        onClick={() => this.setState({ askAboutInclude: null })}\n                        color=\"grey\"\n                        startIcon={<CloseIcon />}\n                    >\n                        {I18n.t('Cancel')}\n                    </Button>\n                </DialogActions>\n            </Dialog>;\n        }\n\n        return null;\n    }\n\n    askAboutInclude = (wid, toWid, cb) => this.setState({ askAboutInclude: { wid, toWid, cb } });\n\n    renderTabs() {\n        const { visProject } = store.getState();\n        const views = visProject.___settings.openedViews.filter(view => Object.keys(visProject).includes(view));\n\n        return <div className={this.props.classes.tabsContainer}>\n            {this.state.hidePalette ? <Tooltip title={I18n.t('Show palette')}>\n                <div className={this.props.classes.tabButton}>\n                    <IconButton\n                        size=\"small\"\n                        onClick={() => {\n                            window.localStorage.removeItem('Vis.hidePalette');\n                            this.setState({ hidePalette: false });\n                        }}\n                    >\n                        <IconPalette />\n                    </IconButton>\n                </div>\n            </Tooltip> : null}\n            {!this.state.showCode ? <Tooltip title={I18n.t('Toggle runtime')}>\n                <div className={this.props.classes.tabButton}>\n                    <IconButton\n                        onClick={() => this.setState({ editMode: !this.state.editMode })}\n                        size=\"small\"\n                        disabled={!!this.state.selectedGroup}\n                        style={this.state.selectedGroup ? { opacity: 0.5 } : null}\n                    >\n                        {this.state.editMode ? <PlayIcon style={{ color: 'green' }} /> : <StopIcon style={{ color: 'red' }} /> }\n                    </IconButton>\n                </div>\n            </Tooltip> : null}\n            <Tooltip title={I18n.t('Show view')}>\n                <div className={this.props.classes.tabButton}>\n                    <IconButton onClick={() => this.setViewsManager(true)} size=\"small\" disabled={!!this.state.selectedGroup}>\n                        <Layers className={views.length ? '' : this.props.classes.iconBlink} />\n                    </IconButton>\n                </div>\n            </Tooltip>\n            <Tabs\n                value={this.state.selectedView === 'null' || this.state.selectedView === 'undefined' || !this.state.selectedView ? views[0] || '' : this.state.selectedView}\n                style={{ width: `calc(100% - ${68 + (!this.state.showCode ? 40 : 0) + (this.state.hidePalette ? 40 : 0) + (this.state.hideAttributes ? 40 : 0)}px)` }}\n                className={this.props.classes.viewTabs}\n                variant=\"scrollable\"\n                scrollButtons=\"auto\"\n            >\n                {\n                    views.map(view => {\n                        const isGroupEdited = !!this.state.selectedGroup && view === this.state.selectedView;\n                        const viewSettings = isGroupEdited ? {} : (store.getState().visProject[view].settings || {});\n                        let icon = viewSettings.navigationIcon || viewSettings.navigationImage;\n                        if (icon && icon.startsWith('_PRJ_NAME/')) {\n                            icon = `../${this.adapterName}.${this.instance}/${this.state.projectName}${icon.substring(9)}`;  // \"_PRJ_NAME\".length = 9\n                        }\n\n                        return <Tab\n                            component=\"span\"\n                            disabled={!!this.state.selectedGroup && view !== this.state.selectedView}\n                            label={<span className={Utils.clsx(isGroupEdited && this.props.classes.groupEditTab, this.props.classes.tabsName)}>\n                                {icon ? <Icon src={icon} className={this.props.classes.listItemIcon} /> : null}\n                                {isGroupEdited ? `${I18n.t('Group %s', this.state.selectedGroup)}` : (viewSettings.navigationTitle || view)}\n                                <Tooltip title={isGroupEdited ? I18n.t('Close group editor') : I18n.t('Hide')}>\n                                    <span>\n                                        <IconButton\n                                            size=\"small\"\n                                            disabled={!!this.state.selectedGroup && view !== this.state.selectedView}\n                                            onClick={e => {\n                                                e.stopPropagation();\n                                                if (isGroupEdited) {\n                                                    this.setState({ selectedGroup: null });\n                                                } else {\n                                                    this.toggleView(view, false);\n                                                }\n                                            }}\n                                        >\n                                            <CloseIcon fontSize=\"small\" />\n                                        </IconButton>\n                                    </span>\n                                </Tooltip>\n                            </span>}\n                            className={this.props.classes.viewTab}\n                            value={view}\n                            onClick={() => this.changeView(view)}\n                            key={view}\n                            // wrapped\n                        />;\n                    })\n                }\n            </Tabs>\n            <IconButton\n                onClick={() => this.toggleCode()}\n                size=\"small\"\n                style={{\n                    cursor: 'default', opacity: this.state.showCode ? 1 : 0, width: 34, height: 34,\n                }}\n                className={this.props.classes.tabButton}\n            >\n                {this.state.showCode ? <CodeOffIcon /> : <CodeIcon />}\n            </IconButton>\n            {views.length > 1 ? <Tooltip title={I18n.t('Close all but current view')}>\n                <div className={this.props.classes.tabButton}>\n                    <IconButton\n                        size=\"small\"\n                        onClick={() => {\n                            const project = deepClone(store.getState().visProject);\n                            project.___settings.openedViews = [this.state.selectedView];\n                            this.changeProject(project, true);\n                        }}\n                    >\n                        <ClearAllIcon />\n                    </IconButton>\n                </div>\n            </Tooltip> : null}\n            {this.state.hideAttributes ? <Tooltip title={I18n.t('Show attributes')}>\n                <div className={this.props.classes.tabButton}>\n                    <IconButton\n                        size=\"small\"\n                        onClick={() => {\n                            window.localStorage.removeItem('Vis.hideAttributes');\n                            this.setState({ hideAttributes: false });\n                        }}\n                    >\n                        <IconAttributes />\n                    </IconButton>\n                </div>\n            </Tooltip> : null}\n        </div>;\n    }\n\n    renderPalette() {\n        return <div\n            style={this.state.hidePalette ? { display: 'none' } : null}\n            className={Utils.clsx(\n                this.props.classes.block,\n                this.state.toolbarHeight === 'narrow' && this.props.classes.blockNarrow,\n                this.state.toolbarHeight === 'veryNarrow' && this.props.classes.blockVeryNarrow,\n            )}\n        >\n            {this.state.widgetsLoaded !== Runtime.WIDGETS_LOADING_STEP_ALL_LOADED ? <LinearProgress variant=\"indeterminate\" value={(this.state.loadingProgress.step / this.state.loadingProgress.total) * 100} /> : null}\n            <Palette\n                classes={{}}\n                widgetsLoaded={this.state.widgetsLoaded === Runtime.WIDGETS_LOADING_STEP_ALL_LOADED}\n                onHide={() => {\n                    window.localStorage.setItem('Vis.hidePalette', 'true');\n                    this.setState({ hidePalette: true });\n                }}\n                uninstallWidget={this.uninstallWidget}\n                setMarketplaceDialog={this.setMarketplaceDialog}\n                updateWidgets={this.updateWidgets}\n                selectedView={this.state.selectedView}\n                project={store.getState().visProject}\n                changeProject={this.changeProject}\n                socket={this.socket}\n                editMode={this.state.editMode}\n                themeType={this.state.themeType}\n            />\n        </div>;\n    }\n\n    renderWorkspace() {\n        const visEngine = this.getVisEngine();\n\n        return <div key=\"engine\">\n            {this.renderTabs()}\n            <div\n                style={{ overflow: this.state.editMode ? 'auto' : (store.getState().visProject.___settings?.bodyOverflow || 'auto') }}\n                className={Utils.clsx(\n                    this.props.classes.canvas,\n                    this.state.toolbarHeight === 'narrow' && this.props.classes.canvasNarrow,\n                    this.state.toolbarHeight === 'veryNarrow' && this.props.classes.canvasVeryNarrow,\n                )}\n            >\n                {this.state.showCode\n                    ? <pre>\n                        {JSON.stringify(store.getState().visProject, null, 2)}\n                    </pre> : null}\n                <ViewDrop addWidget={this.addWidget} addMarketplaceWidget={this.addMarketplaceWidget} editMode={this.state.editMode}>\n                    <div\n                        id=\"vis-react-container\"\n                        style={{\n                            position: 'relative',\n                            display: this.state.showCode ? 'none' : 'block',\n                            width: '100%',\n                            height: '100%',\n                        }}\n                    >\n                        <VisContextMenu\n                            disabled={!this.state.editMode || this.state.ignoreMouseEvents}\n                            selectedWidgets={this.state.selectedWidgets}\n                            deleteWidgets={this.deleteWidgets}\n                            setSelectedWidgets={this.setSelectedWidgets}\n                            cutWidgets={this.cutWidgets}\n                            copyWidgets={this.copyWidgets}\n                            pasteWidgets={this.pasteWidgets}\n                            orderWidgets={this.orderWidgets}\n                            widgetsClipboard={this.state.widgetsClipboard}\n                            project={store.getState().visProject}\n                            selectedView={this.state.selectedView}\n                            changeProject={this.changeProject}\n                            lockWidgets={this.lockWidgets}\n                            groupWidgets={this.groupWidgets}\n                            ungroupWidgets={this.ungroupWidgets}\n                            setSelectedGroup={this.setSelectedGroup}\n                            setMarketplaceDialog={this.setMarketplaceDialog}\n                            themeType={this.state.themeType}\n                        >\n                            {visEngine}\n                        </VisContextMenu>\n                    </div>\n                </ViewDrop>\n            </div>\n        </div>;\n    }\n\n    renderAttributes() {\n        return <div\n            className={Utils.clsx(\n                this.props.classes.block,\n                this.state.toolbarHeight === 'narrow' && this.props.classes.blockNarrow,\n                this.state.toolbarHeight === 'veryNarrow' && this.props.classes.blockVeryNarrow,\n            )}\n        >\n            <Attributes\n                classes={{}}\n                selectedView={this.state.selectedView}\n                userGroups={this.state.userGroups}\n                changeProject={this.changeProject}\n                openedViews={store.getState().visProject.___settings.openedViews}\n                projectName={this.state.projectName}\n                themeType={this.state.themeType}\n                selectedWidgets={this.state.editMode ? this.state.selectedWidgets : []}\n                widgetsLoaded={this.state.widgetsLoaded === Runtime.WIDGETS_LOADING_STEP_ALL_LOADED}\n                socket={this.socket}\n                themeName={this.state.themeName}\n                fonts={this.state.fonts}\n                adapterName={this.adapterName}\n                instance={this.instance}\n                cssClone={this.cssClone}\n                onPxToPercent={this.onPxToPercent}\n                onPercentToPx={this.onPercentToPx}\n                saveCssFile={this.saveCssFile}\n                editMode={this.state.editMode}\n                onHide={() => {\n                    window.localStorage.setItem('Vis.hideAttributes', 'true');\n                    this.setState({ hideAttributes: true });\n                }}\n                adapterId={this.adapterId}\n            />\n        </div>;\n    }\n\n    renderConfirmDialog() {\n        if (this.state.confirmDialog) {\n            return <ConfirmDialog\n                text={this.state.confirmDialog.message}\n                title={this.state.confirmDialog.title}\n                fullWidth={false}\n                ok={I18n.t('Ok')}\n                onClose={isYes => {\n                    const callback = this.state.confirmDialog.callback;\n                    this.setState({ confirmDialog: null }, () =>\n                        typeof callback === 'function' && callback(isYes));\n                }}\n            />;\n        }\n\n        return null;\n    }\n\n    renderShowCodeDialog() {\n        if (this.state.showCodeDialog !== null) {\n            return <CodeDialog\n                themeType={this.state.themeType}\n                onClose={() => this.setState({ showCodeDialog: null })}\n                title={this.state.showCodeDialog.title}\n                code={this.state.showCodeDialog.code}\n                mode={this.state.showCodeDialog.mode}\n            />;\n        }\n\n        return null;\n    }\n\n    renderShowProjectUpdateDialog() {\n        if (!this.state.showProjectUpdateDialog) {\n            return null;\n        }\n        return <ConfirmDialog\n            text={I18n.t('Project was updated by another browser instance. Do you want to reload it?')}\n            title={I18n.t('Project was updated')}\n            fullWidth={false}\n            onClose={result =>\n                this.setState({ showProjectUpdateDialog: false }, () => {\n                    if (result) {\n                        this.loadProject(this.state.projectName);\n                    }\n                })}\n        />;\n    }\n\n    renderCreateFirstProjectDialog() {\n        return this.state.createFirstProjectDialog ? <CreateFirstProjectDialog\n            open={!0}\n            onClose={() => this.setState({ createFirstProjectDialog: false })}\n            addProject={this.addProject}\n        /> : null;\n    }\n\n    renderUpdateDialog() {\n        if (!this.state.updateWidgetsDialog) {\n            return null;\n        }\n        const widgets = [];\n        Object.keys(store.getState().visProject).forEach(view => {\n            if (view !== '___settings') {\n                const viewWidgets = {\n                    name: view,\n                    widgets: [],\n                };\n                Object.keys(store.getState().visProject[view].widgets).forEach(widget => {\n                    if (store.getState().visProject[view].widgets[widget].marketplace?.widget_id === this.state.updateWidgetsDialog.widget_id &&\n                        store.getState().visProject[view].widgets[widget].marketplace?.version !== this.state.updateWidgetsDialog.version) {\n                        viewWidgets.widgets.push(widget);\n                    }\n                });\n                if (viewWidgets.widgets.length) {\n                    widgets.push(viewWidgets);\n                }\n            }\n        });\n        return <ConfirmDialog\n            fullWidth={false}\n            title={I18n.t('Update widgets')}\n            text={<>\n                <div>\n                    {I18n.t('Are you sure to update widgets:')}\n                </div>\n                <div>\n                    {widgets.map(view => <div key={view.name}>\n                        <b>\n                            {view.name}\n                            {': '}\n                        </b>\n                        {view.widgets.join(', ')}\n                    </div>)}\n                </div>\n            </>}\n            ok={I18n.t('Update')}\n            dialogName=\"updateDialog\"\n            suppressQuestionMinutes={5}\n            onClose={isYes => {\n                if (isYes) {\n                    this.updateWidgetsAction(this.state.updateWidgetsDialog, widgets);\n                }\n                this.setState({ updateWidgetsDialog: false });\n            }}\n        />;\n    }\n\n    setLoadingText = text => {\n        this.setState({ loadingText: I18n.t(text) });\n    };\n\n    renderDeleteDialog() {\n        return this.state.deleteWidgetsDialog ?\n            <ConfirmDialog\n                fullWidth={false}\n                title={I18n.t('Delete widgets')}\n                text={I18n.t('Are you sure to delete widgets %s?', this.state.selectedWidgets.join(', '))}\n                ok={I18n.t('Delete')}\n                dialogName=\"deleteDialog\"\n                suppressQuestionMinutes={5}\n                onClose={isYes => {\n                    if (isYes) {\n                        this.deleteWidgetsAction();\n                    }\n                    this.setState({ deleteWidgetsDialog: false });\n                }}\n            />\n            : null;\n    }\n\n    renderMessageDialog() {\n        return this.state.messageDialog ? <MessageDialog\n            text={this.state.messageDialog.text}\n            title={this.state.messageDialog.title}\n            onClose={() => {\n                if (!this.state.messageDialog.noClose) {\n                    this.setState({ messageDialog: null });\n                }\n            }}\n        /> : null;\n    }\n\n    renderImportProjectDialog() {\n        if (!this.state.showImportDialog) {\n            return null;\n        }\n        return <ImportProjectDialog\n            projects={this.state.projects}\n            themeType={this.state.themeType}\n            onClose={(created, newProjectName) => {\n                this.setState({ showImportDialog: false });\n                if (newProjectName) {\n                    window.location.href = `edit.html?${newProjectName}`;\n                }\n            }}\n            openNewProjectOnCreate\n            projectName={this.state.projectName}\n            socket={this.socket}\n            adapterName={this.adapterName}\n            instance={this.instance}\n        />;\n    }\n\n    showLegacyFileSelector = (callback, options) => this.setState({ legacyFileSelector: { callback, options } });\n\n    renderLegacyFileSelectorDialog() {\n        return this.state.legacyFileSelector ? <SelectFileDialog\n            title={I18n.t('Select file')}\n            onClose={() => this.setState({ legacyFileSelector: false })}\n            restrictToFolder={`${this.adapterName}.${this.instance}/${this.state.projectName}`}\n            allowNonRestricted\n            allowUpload\n            allowDownload\n            allowCreateFolder\n            allowDelete\n            allowView\n            showToolbar\n            imagePrefix=\"../\"\n            selected={this.state.legacyFileSelector.options?.path || ''}\n            filterByType=\"images\"\n            onOk={selected => {\n                const projectPrefix = `${this.adapterName}.${this.instance}/${this.state.projectName}/`;\n                if (selected.startsWith(projectPrefix)) {\n                    selected = `_PRJ_NAME/${selected.substring(projectPrefix.length)}`;\n                } else if (selected.startsWith('/')) {\n                    selected = `..${selected}`;\n                } else if (!selected.startsWith('.')) {\n                    selected = `../${selected}`;\n                }\n                const parts = selected.split('/');\n                const file = parts.pop();\n                const path = `${parts.join('/')}/`;\n                this.state.legacyFileSelector.callback({ path, file }, this.state.legacyFileSelector.options?.userArg);\n                this.setState({ legacyFileSelector: null });\n            }}\n            socket={this.socket}\n        /> : null;\n    }\n\n    renderLoadingText() {\n        if (!this.state.loadingText) {\n            return null;\n        }\n        return <div className={this.props.classes.loadingText}>{this.state.loadingText}</div>;\n    }\n\n    render() {\n        if (this.state.projectDoesNotExist) {\n            return <StylesProvider generateClassName={generateClassName}>\n                <StyledEngineProvider injectFirst>\n                    <ThemeProvider theme={this.state.theme}>\n                        {this.renderProjectDoesNotExist()}\n                    </ThemeProvider>\n                </StyledEngineProvider>\n            </StylesProvider>;\n        }\n\n        if (this.state.showProjectsDialog) {\n            return <StylesProvider generateClassName={generateClassName}>\n                <StyledEngineProvider injectFirst>\n                    <ThemeProvider theme={this.state.theme}>\n                        {this.showSmallProjectsDialog()}\n                    </ThemeProvider>\n                </StyledEngineProvider>\n            </StylesProvider>;\n        }\n\n        if (!this.state.loaded || !store.getState().visProject.___settings || !this.state.userGroups) {\n            return <StylesProvider generateClassName={generateClassName}>\n                <StyledEngineProvider injectFirst>\n                    <ThemeProvider theme={this.state.theme}>\n                        {this.renderLoadingText()}\n                        {this.renderLoader()}\n                    </ThemeProvider>\n                </StyledEngineProvider>\n            </StylesProvider>;\n        }\n\n        if (this.state.runtime) {\n            return this.getVisEngine();\n        }\n\n        for (const i in this.state.selectedWidgets) {\n            if (!store.getState().visProject[this.state.selectedView]?.widgets[this.state.selectedWidgets[i]]) {\n                this.setSelectedWidgets([]);\n                return null;\n            }\n        }\n\n        return <StylesProvider generateClassName={generateClassName}>\n            <StyledEngineProvider injectFirst>\n                <ThemeProvider theme={this.state.theme}>\n                    <Popper\n                        id=\"vis_main_popper\"\n                        placement=\"top-start\"\n                        anchorEl={this.mainRef.current}\n                        open={!!Object.keys(this.state.widgetsClipboard.widgets).length}\n                        style={{ width: '100%', textAlign: 'center', pointerEvents: 'none' }}\n                    >\n                        <Paper\n                            style={{\n                                display: 'inline-block',\n                                pointerEvents: 'initial',\n                                zIndex: 1000,\n                                padding: 10,\n                                cursor: 'pointer',\n                                opacity: 0.8,\n                            }}\n                            title={I18n.t('Click to close')}\n                            onClick={() => this.setState({ widgetsClipboard: { widgets: {}, type: '' } })}\n                        >\n                            {Object.keys(this.state.widgetsClipboard.widgets).join(', ')}\n                        </Paper>\n                    </Popper>\n                    <div className={this.props.classes.app}>\n                        <Toolbar\n                            classes={{}}\n                            selectedView={this.state.selectedView}\n                            changeView={this.changeView}\n                            changeProject={this.changeProject}\n                            openedViews={store.getState().visProject.___settings.openedViews}\n                            toggleView={this.toggleView}\n                            socket={this.socket}\n                            projects={this.state.projects}\n                            loadProject={this.loadProject}\n                            projectName={this.state.projectName}\n                            addProject={this.addProject}\n                            renameProject={this.renameProject}\n                            deleteProject={this.deleteProject}\n                            needSave={this.state.needSave}\n                            currentUser={this.state.currentUser}\n                            themeName={this.state.themeName}\n                            themeType={this.state.themeType}\n                            toggleTheme={() => this.toggleTheme()}\n                            refreshProjects={this.refreshProjects}\n                            viewsManager={this.state.viewsManager}\n                            setViewsManager={this.setViewsManager}\n                            projectsDialog={this.state.projects && this.state.projects.length ? this.state.projectsDialog : !this.state.createFirstProjectDialog}\n                            setProjectsDialog={this.setProjectsDialog}\n                            selectedWidgets={this.state.editMode ? this.state.selectedWidgets : []}\n                            setSelectedWidgets={this.setSelectedWidgets}\n                            history={this.state.history}\n                            historyCursor={this.state.historyCursor}\n                            undo={this.undo}\n                            redo={this.redo}\n                            deleteWidgets={this.deleteWidgets}\n                            widgetsLoaded={this.state.widgetsLoaded === Runtime.WIDGETS_LOADING_STEP_ALL_LOADED}\n                            widgetsClipboard={this.state.widgetsClipboard}\n                            cutWidgets={this.cutWidgets}\n                            copyWidgets={this.copyWidgets}\n                            pasteWidgets={this.pasteWidgets}\n                            alignWidgets={this.alignWidgets}\n                            cloneWidgets={this.cloneWidgets}\n                            orderWidgets={this.orderWidgets}\n                            lockDragging={this.state.lockDragging}\n                            disableInteraction={this.state.disableInteraction}\n                            toggleLockDragging={this.toggleLockDragging}\n                            toggleDisableInteraction={this.toggleDisableInteraction}\n                            adapterName={this.adapterName}\n                            selectedGroup={this.state.selectedGroup}\n                            setSelectedGroup={this.setSelectedGroup}\n                            widgetHint={this.state.widgetHint}\n                            toggleWidgetHint={this.toggleWidgetHint}\n                            instance={this.instance}\n                            editMode={this.state.editMode}\n                            toolbarHeight={this.state.toolbarHeight}\n                            setToolbarHeight={value => {\n                                window.localStorage.setItem('Vis.toolbarForm', value);\n                                this.setState({ toolbarHeight: value });\n                            }}\n                            version={this.props.version}\n                        />\n                        <div style={{ position: 'relative' }} ref={this.mainRef}>\n                            <DndProvider backend={isTouchDevice() ? TouchBackend : HTML5Backend}>\n                                <DndPreview />\n                                {this.state.hidePalette && this.state.hideAttributes ? this.renderWorkspace() : null}\n                                <ReactSplit\n                                    direction={SplitDirection.Horizontal}\n                                    initialSizes={this.state.hidePalette && !this.state.hideAttributes ? [this.state.splitSizes[0] + this.state.splitSizes[1], this.state.splitSizes[2]] : (\n                                        !this.state.hidePalette && this.state.hideAttributes ? [this.state.splitSizes[0], this.state.splitSizes[1] + this.state.splitSizes[2]] : this.state.splitSizes)}\n                                    minWidths={this.state.hidePalette && !this.state.hideAttributes ? [0, 240] : (\n                                        !this.state.hidePalette && this.state.hideAttributes ? [240, 0] : [240, 0, 240])}\n                                    onResizeFinished={(gutterIdx, newSizes) => {\n                                        let splitSizes = [];\n                                        if (this.state.hidePalette && !this.state.hideAttributes) {\n                                            splitSizes[0] = this.state.splitSizes[0];\n                                            splitSizes[1] = newSizes[0] - this.state.splitSizes[0];\n                                            splitSizes[2] = newSizes[1];\n                                        } else if (!this.state.hidePalette && this.state.hideAttributes) {\n                                            splitSizes[0] = newSizes[0];\n                                            splitSizes[1] = newSizes[1] - this.state.splitSizes[2];\n                                            splitSizes[2] = this.state.splitSizes[2];\n                                        } else {\n                                            splitSizes = newSizes;\n                                        }\n\n                                        const sum = splitSizes.reduce((prev, curr) => prev + curr);\n                                        if (Math.ceil(sum) !== 100) {\n                                            if (Math.ceil(sum) === 101 || Math.ceil(sum) === 99) {\n                                                // Round the first 2 sizes to 0.01 and calculate the last\n                                                splitSizes[0] = Math.round(splitSizes[0] * 100) / 100;\n                                                splitSizes[1] = Math.round(splitSizes[1] * 100) / 100;\n                                                splitSizes[2] = 100 - splitSizes[0] - splitSizes[1];\n                                                this.setState({ splitSizes });\n                                                window.localStorage.setItem('Vis.splitSizes', JSON.stringify(splitSizes));\n                                            } else {\n                                                // https://github.com/devbookhq/splitter/issues/15\n                                                console.log('Decline resize, to work around bug in @devbookhq/splitter');\n                                                this.setState({splitSizes: this.state.splitSizes});\n                                            }\n                                        } else {\n                                            this.setState({ splitSizes });\n                                            window.localStorage.setItem('Vis.splitSizes', JSON.stringify(splitSizes));\n                                        }\n                                    }}\n                                    theme={this.state.themeName === 'dark' ? GutterTheme.Dark : GutterTheme.Light}\n                                    gutterClassName={this.state.themeName === 'dark' ? 'Dark visGutter' : 'Light visGutter'}\n                                >\n                                    {!this.state.hidePalette ? this.renderPalette() : null}\n                                    {this.renderWorkspace()}\n                                    {!this.state.hideAttributes ? this.renderAttributes() : null}\n                                </ReactSplit>\n                            </DndProvider>\n                        </div>\n                    </div>\n                    {this.renderLoadingText()}\n                    {this.renderCreateFirstProjectDialog()}\n                    {this.renderDeleteDialog()}\n                    {this.renderUpdateDialog()}\n                    {this.renderAlertDialog()}\n                    {this.renderConfirmDialog()}\n                    {this.renderShowCodeDialog()}\n                    {this.renderShowProjectUpdateDialog()}\n                    {this.renderMessageDialog()}\n                    {this.renderLegacyFileSelectorDialog()}\n                    {this.renderAskAboutIncludeDialog()}\n                    {this.state.marketplaceDialog ? <MarketplaceDialog\n                        fullScreen\n                        onClose={() => this.setState({ marketplaceDialog: false })}\n                        installWidget={this.installWidget}\n                        updateWidgets={this.updateWidgets}\n                        installedWidgets={store.getState().visProject?.___settings.marketplace}\n                        {...this.state.marketplaceDialog}\n                        themeName={this.state.themeName}\n                    /> : null}\n                </ThemeProvider>\n            </StyledEngineProvider>\n        </StylesProvider>;\n    }\n}\n\nEditor.propTypes = {\n    onThemeChange: PropTypes.func,\n    version: PropTypes.string,\n};\n\nexport default withStyles(styles)(Editor);\n","/* eslint-disable */\n// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n    window.location.hostname === 'localhost'\n    // [::1] is the IPv6 localhost address.\n    || window.location.hostname === '[::1]'\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    || window.location.hostname.match(\n        /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/,\n    ),\n);\n\nexport function register(config) {\n    if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n        const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n        if (publicUrl.origin !== window.location.origin) {\n            // Our service worker won't work if PUBLIC_URL is on a different origin\n            // from what our page is served on. This might happen if a CDN is used to\n            // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n            return;\n        }\n\n        window.addEventListener('load', () => {\n            const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n            if (isLocalhost) {\n                // This is running on localhost. Let's check if a service worker still exists or not.\n                checkValidServiceWorker(swUrl, config);\n\n                // Add some additional logging to localhost, pointing developers to the\n                // service worker/PWA documentation.\n                navigator.serviceWorker.ready.then(() => {\n                    console.log(\n                        'This web app is being served cache-first by a service '\n              + 'worker. To learn more, visit http://bit.ly/CRA-PWA',\n                    );\n                });\n            } else {\n                // Is not localhost. Just register service worker\n                registerValidSW(swUrl, config);\n            }\n        });\n    }\n}\n\nfunction registerValidSW(swUrl, config) {\n    navigator.serviceWorker\n        .register(swUrl)\n        .then((registration) => {\n            registration.onupdatefound = () => {\n                const installingWorker = registration.installing;\n                if (installingWorker === null) {\n                    return;\n                }\n                installingWorker.onstatechange = () => {\n                    if (installingWorker.state === 'installed') {\n                        if (navigator.serviceWorker.controller) {\n                            // At this point, the updated precached content has been fetched,\n                            // but the previous service worker will still serve the older\n                            // content until all client tabs are closed.\n                            console.log(\n                                'New content is available and will be used when all '\n                  + 'tabs for this page are closed. See http://bit.ly/CRA-PWA.',\n                            );\n\n                            // Execute callback\n                            if (config && config.onUpdate) {\n                                config.onUpdate(registration);\n                            }\n                        } else {\n                            // At this point, everything has been precached.\n                            // It's the perfect time to display a\n                            // \"Content is cached for offline use.\" message.\n                            console.log('Content is cached for offline use.');\n\n                            // Execute callback\n                            if (config && config.onSuccess) {\n                                config.onSuccess(registration);\n                            }\n                        }\n                    }\n                };\n            };\n        })\n        .catch((error) => {\n            console.error('Error during service worker registration:', error);\n        });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n    // Check if the service worker can be found. If it can't reload the page.\n    fetch(swUrl)\n        .then((response) => {\n            // Ensure service worker exists, and that we really are getting a JS file.\n            const contentType = response.headers.get('content-type');\n            if (\n                response.status === 404\n        || (contentType !== null && contentType.indexOf('javascript') === -1)\n            ) {\n                // No service worker found. Probably a different app. Reload the page.\n                navigator.serviceWorker.ready.then((registration) => {\n                    registration.unregister().then(() => {\n                        window.location.reload();\n                    });\n                });\n            } else {\n                // Service worker found. Proceed as normal.\n                registerValidSW(swUrl, config);\n            }\n        })\n        .catch(() => {\n            console.log(\n                'No internet connection found. App is running in offline mode.',\n            );\n        });\n}\n\nexport function unregister() {\n    if ('serviceWorker' in navigator) {\n        navigator.serviceWorker.ready.then((registration) => {\n            registration.unregister();\n        });\n    }\n}\n","import { Theme } from '@iobroker/adapter-react-v5';\n\nconst createTheme = type => {\n    const danger = '#dd5325';\n    const success = '#73b6a8';\n    const theme = { ...Theme(type) };\n    if (!theme) {\n        return theme;\n    }\n    theme.palette.text.danger = {\n        color: danger,\n    };\n    theme.palette.text.success = {\n        color: success,\n    };\n\n    return theme;\n};\n\nexport default createTheme;\n","import React, { useState } from 'react';\nimport { createRoot } from 'react-dom/client';\nimport { ThemeProvider, StyledEngineProvider, createTheme } from '@mui/material/styles';\nimport { StylesProvider, createGenerateClassName } from '@mui/styles';\n\nimport './index.css';\nimport { Utils } from '@iobroker/adapter-react-v5';\nimport App from './Editor';\nimport * as serviceWorker from './serviceWorker';\nimport packageJson from '../package.json';\nimport theme from './theme';\n\nwindow.adapterName = 'vis-2';\nconst themeName = Utils.getThemeName();\n\nconsole.log(`iobroker.${window.adapterName}@${packageJson.version} using theme \"${themeName}\"`);\n\nimport('./Vis/visRxWidget').then(VisRxWidget =>\n    window.visRxWidget = VisRxWidget.default);\n\nconst generateClassName = createGenerateClassName({\n    productionPrefix: 'vis-a',\n});\n\nfunction modifyClasses(className, addClass, removeClass) {\n    const classes = (className || '').split(' ').map(c => c.trim()).filter(c => c);\n    const pos = classes.indexOf(removeClass);\n    if (pos !== -1) {\n        classes.splice(pos, 1);\n    }\n    !classes.includes(addClass) && classes.push(addClass);\n    return classes.join(' ');\n}\n\n/**\n * Checks if vis is rendered inside an iFrame\n *\n * @return {boolean}\n */\nfunction inIframe() {\n    try {\n        return window.self !== window.top;\n    } catch {\n        return true;\n    }\n}\n\nconst ThemeContainer = () => {\n    const [currentTheme, setCurrentTheme] = useState(themeName);\n\n    const newTheme = theme(currentTheme);\n\n    const appTheme = () => ({\n        classes: {\n            blockHeader: {\n                fontSize: 16,\n                textAlign: 'left',\n                marginTop: 8,\n                borderRadius: 2,\n                paddingLeft: 8,\n            },\n            viewTabs: {\n                minHeight: 0,\n            },\n            viewTab: {\n                minWidth: 0,\n                minHeight: 0,\n            },\n            lightedPanel: {\n                backgroundColor: newTheme.palette.mode === 'dark' ? 'hsl(0deg 0% 20%)' : 'hsl(0deg 0% 90%)',\n            },\n            toolbar: {\n                display: 'flex',\n                alignItems: 'center',\n                paddingTop: 10,\n                paddingBottom: 10,\n            },\n            viewManageBlock: {\n                display: 'flex',\n                alignItems: 'center',\n            },\n            viewManageButtonActions: {\n                textAlign: 'right',\n                flex: 1,\n            },\n        },\n    });\n\n    const getTheme = () => createTheme(appTheme(), newTheme);\n\n    // apply background color only if not in iframe\n    if (!inIframe()) {\n        if (newTheme.palette.mode === 'dark') {\n            window.document.body.className = modifyClasses(window.document.body.className, 'body-dark', 'body-light');\n        } else {\n            window.document.body.className = modifyClasses(window.document.body.className, 'body-light', 'body-dark');\n        }\n    } else {\n        window.document.body.className = '';\n    }\n\n    return <StylesProvider generateClassName={generateClassName}>\n        <StyledEngineProvider injectFirst>\n            <ThemeProvider theme={getTheme()}>\n                <App\n                    version={packageJson.version}\n                    onThemeChange={_theme => {\n                        // apply background color only if not in iframe\n                        if (!inIframe()) {\n                            if (newTheme.palette.mode === 'dark') {\n                                window.document.body.className = modifyClasses(window.document.body.className, 'body-dark', 'body-light');\n                            } else {\n                                window.document.body.className = modifyClasses(window.document.body.className, 'body-light', 'body-dark');\n                            }\n                        }\n\n                        setCurrentTheme(_theme);\n                    }}\n                />\n            </ThemeProvider>\n        </StyledEngineProvider>\n    </StylesProvider>;\n};\n\nfunction build() {\n    const container = document.getElementById('root');\n    const root = createRoot(container);\n    return root.render(<ThemeContainer />);\n}\n\n// wait till all scrips are loaded\nwindow.visConfigLoaded.then(() => {\n    if (!window.disableDataReporting) {\n        window.sentryDSN = 'https://db8b6e837c71447a876069559a00a742@sentry.iobroker.net/232';\n    }\n    build();\n});\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"names":["FAKE_ID","updateProject","createAction","updateView","updateWidget","updateGroupWidget","updateActiveUser","recalculateFields","reducer","createReducer","visProject","activeUser","builder","addCase","state","action","payload","viewId","data","widgetId","widgets","console","error","concat","selectView","createSelector","_state","viewName","project","view","selectWidget","_viewName","wid","store","configureStore","NOTHING_SELECTED","calculateOverflow","style","overflowX","overflowY","overflow","isVarFinite","numberOrString","window","isFinite","isGroup","widget","tpl","deepClone","object","JSON","parse","stringify","getNewWidgetIdNumber","isWidgetGroup","offset","arguments","length","undefined","getState","Object","keys","forEach","push","newKey","name","matches","match","num","parseInt","getNewWidgetId","toString","padStart","getNewGroupId","pasteSingleWidget","options","selectedGroup","grouped","groupid","members","pasteGroup","group","groupMembers","newGroupId","i","newMember","newMemberId","unsyncMultipleWidgets","entries","includes","DEFAULT_PERMISSIONS","read","write","hasProjectAccess","_project$___settings$","_project$___settings$2","user","editMode","permissions","___settings","hasViewAccess","_project$view$setting","_project$view","_project$view$setting2","_project$view$setting3","settings","hasWidgetAccess","_project$view$widgets","_project$view2","_project$view2$widget","_project$view2$widget2","loadComponent","remote","sharedScope","module","url","getOrLoadRemote","shareScope","remoteFallbackUrl","Promise","resolve","reject","onload","async","startsWith","Error","__initialized","init","__webpack_share_scopes__","e","document","querySelector","warn","d","script","createElement","type","setAttribute","onerror","src","getElementsByTagName","appendChild","then","get","factory","registerWidgetsLoadIndicator","cb","__widgetsLoadIndicator","_loadComponentHelper","context","promises","visWidgetsCollection","components","index","_visWidgetsCollection","countRef","max","promise","CustomComponent","count","default","adapter","dynamicWidgetInstance","_id","substring","replace","version","common","i18nPrefix","result","catch","all","getRemoteWidgets","socket","onlyWidgetSets","getObjectViewSystem","objects","dynamicWidgetInstances","values","filter","obj","visWidgets","ignoreInVersions","text","I18n","getLanguage","en","widgetSetName","_widgetSetName","find","_visWidgetsCollection2","collection","instance","i18nPromiseWait","i18n","pos","lastIndexOf","i18nURL","lang","fetch","json","extendTranslations","_error","log","translations","prefix","replaceGroupAttr","inputStr","groupAttrList","newString","ms","m","val","attr","doesMatch","getWidgetGroup","views","_widgets$widget","groupId","w","_widgets$w$data","_widgets$w$data$membe","extractBinding","format","oid","p","_oid","parts","split","systemOid","trim","visOid","test1","test2","isSeconds","operations","xx","yy","op","arg","u","trimmed","_operations$0$arg","argParts","_visOid","_systemOid","formula","n","argStr","parseFloat","param","token","getUsedObjectIDsInWidget","linkContext","groupped","widgetSet","value","html_false","html_closed","html_true","html_open","value0","value1","value2","html_tilt","readOnly","orientation","dispatch","groupNum","gId","currView","top","left","width","height","_views$view$widgets$w","parentWidgetData","newGroupData","OIDs","item","IDs","byViews","bindings","operation0","Array","isArray","ww","isID","widgetAttrInfo","_linkContext$widgetAt","_attr","noSubscribe","vid","vGroup","result1","visibility","sid","result2","signals","lcSid","gGroup","result3","lastChanges","cssAttr","styleValue","getUrlParameter","sURLVariables","location","search","sParameterName","decodeURIComponent","readFile","id","fileName","withType","file","mimeType","addClass","actualClass","toAdd","map","cl","join","removeClass","toRemove","indexOf","splice","parseDimension","field","dimension","findWidgetUsages","_result","oWidget","_view","DEFAULT_SET_COLORS","basic","bars","dwd","echarts","eventlist","hqwidgets","jqplot","jqui","metro","swipe","tabs","VisWidgetsCatalog","getUsedWidgetSets","anyWithoutSet","widgetSets","v","set","wSet","sort","setUsedWidgetSets","widgetTypes","visWidgetTypes","viewKeys","tplWidget","collectRxInformation","changeProject","rxWidgets","usedWidgetSets","setTimeout","WIDGETS","Widget","getWidgetInfo","info","visSet","constructor","getWidgetTypes","newProject","allWidgetsList","visSets","from","querySelectorAll","_VisWidgetsCatalog$rx","_info2","_info3","_info4","_info5","_info6","_info7","_info8","_info9","_info10","_info11","_info12","_VisWidgetsCatalog$al","getAttribute","_info","visAttrs","color","widgetObj","title","visName","label","visWidgetLabel","preview","visPrev","help","imageHTML","visWidgetColor","params","attributes","attribute","setLabel","visSetLabel","setColor","visSetColor","order","visOrder","hidden","_widget$url","widgetInfo","visDefaultStyle","setIcon","visSetIcon","resizable","visResizable","resizeLocked","visResizeLocked","draggable","visDraggable","visHidden","customPalette","rx","developerMode","findIndex","fields","_field","tooltip","noTranslation","option","newObj","key","prototype","hasOwnProperty","call","parseAttributes","widgetParams","widgetIndex","commonGroups","commonFields","widgetData","groupName","indexedGroups","isIndexedGroup","singleName","currentGroup","fieldString","_field$type","repeats","onChangeFunc","toLowerCase","slice","min","step","filterFile","filterName","filterAttrs","removeName","repeatsMatch","to","_indexedGroups$i","_indexedGroups$i$fiel","_currentGroup","_currentGroup$fields","_currentGroup2","_currentGroup2$fields","groupIndex","indexFrom","indexTo","Number","isInteger","_indexedGroup$fields","indexedGroup","iterable","isFirst","isLast","ii","component","onChange","disabled","_group","fieldIndex","_group$fields","indexedFields","indexedField","systemDictionary","systemLang","_","arg1","arg2","arg3","dictionary","newText","translateWord","addWords","words","assign","de","ru","pt","nl","fr","it","es","pl","uk","Today","Yesterday","Ace","setModuleUrl","props","refEditor","useRef","useEffect","content","timer","keyDown","ctrlKey","setInterval","_el","_el2","_el3","_el4","_el5","_el6","_el7","_content","parent","parentNode","el","clearInterval","placeholder","t","innerHTML","removeEventListener","_content2","addEventListener","_content3","clearTimeout","_jsx","border","ref","children","AceEditor","mode","theme","themeType","newValue","focus","highlightActiveLine","enableBasicAutocompletion","enableLiveAutocompletion","enableSnippets","setType","useState","localCss","setLocalCss","globalCss","setGlobalCss","showHelp","setShowHelp","localCssTimer","setLocalCssTimer","globalCssTimer","setGlobalCssTimer","timers","global","setTimer","setValue","directory","adapterId","local","projectName","commonCss","userCss","localStorage","getItem","load","_jsxs","_Fragment","display","alignItems","Dialog","open","maxWidth","DialogTitle","DialogContent","DialogActions","Button","variant","onClick","startIcon","CheckIcon","Select","target","setItem","MenuItem","IconButton","size","HelpOutline","CircularProgress","CustomAceEditor","save","saveType","saveCssFile","scripts","background","resolution","checkFunction","funcText","_func","Function","isPropertySameInAllViews","selectedView","_project$selectedView","_project$views$v$sett","withStyles","backgroundClass","backgroundClassSquare","marginRight","clearPadding","padding","margin","minHeight","fieldTitle","fontSize","fieldContent","fieldContentDiv","justifyContent","fieldContentColor","groupSummary","marginTop","borderRadius","groupSummaryExpanded","borderTopRightRadius","borderTopLeftRadius","fieldContentSlider","fieldContentSliderInput","fieldContentSliderClear","fieldHelpText","float","_view$settings3","_view$settings4","triggerAllOpened","setTriggerAllOpened","triggerAllClosed","setTriggerAllClosed","showAllViewDialog","setShowAllViewDialog","resolutionSelect","sizex","sizey","useMemo","_view$settings","_view$settings2","notStyle","ViewTheme","itemModify","className","classes","renderValue","backItem","_resolutionSelect","Component","TextField","InputProps","input","Utils","clsx","CloseIcon","applyToAll","groupApply","accordionOpen","setAccordionOpen","showDialog","setShowDialog","showDialog64","setShowDialog64","textDialogFocused","setTextDialogFocused","textDialogEnabled","setTextDialogEnabled","textRef","newAccordionOpen","allOpened","allClosed","isAllClosed","setIsAllClosed","isAllOpened","setIsAllOpened","viewList","allViewDialog","viewsToChange","f","_store$getState$visPr","selectedViewValue","newView","viewValue","navigation","_store$getState$visPr2","_projView$settings","_projView$settings2","projView","ConfirmDialog","onClose","_store$getState$visPr3","Accordion","root","expanded","square","elevation","AccordionSummary","lightedPanel","expandIconWrapper","expandIcon","ExpandMoreIcon","AccordionDetails","flexDirection","key2","_view$settings5","_view$settings6","change","changeValue","urlPopper","Popper","origin","anchorEl","current","placement","transition","_ref","TransitionProps","Fade","timeout","Paper","textTransform","ClearIcon","vis","updateFilter","unshift","Autocomplete","freeSolo","inputValue","onInputChange","renderInput","Checkbox","checked","_field$options","select","fullWidth","selectItem","_field$options2","selected","multiple","ListItemText","primary","userGroups","TextWithIcon","list","ColorPicker","openAbove","IconPicker","fileBlob","previewClassName","iconPreview","_value","adapterName","helperText","endAdornment","onFocus","onBlur","SelectFileDialog","restrictToFolder","allowNonRestricted","allowUpload","allowDownload","allowCreateFolder","allowDelete","allowView","showToolbar","imagePrefix","filterByType","onOk","selectedOrArray","_selected","_selected2","projectPrefix","Slider","_e","marks","valueLabelDisplay","Input","inputProps","Icon","MaterialIconSelector","icon","helpText","Tooltip","InfoIcon","flex","lineHeight","closeDisabled","fullScreen","minWidth","onKeyUp","actionDisabled","keyboardDisabled","keyCode","actionNoClose","dialogActions","actionTitle","actionColor","ActionIcon","closeTitle","IODialog","POSSIBLE_UNITS","getViewOptions","parentId","level","folders","folder","navigationTitle","wordsCache","word","_len","args","_key","hash","_widget$style","_widget$data","idDialog","setIdDialog","objectCache","setObjectCache","askForUsage","setAskForUsage","isDifferent","customLegacyComponent","shift","funcs","activeWidgets","selectedWidgets","activeView","binds","cachedValue","setCachedValue","instances","setInstances","cacheTimer","refCustom","onChangeTimeout","applyValue","newValues","selectedWidget","isStyle","widgetType","newData","_project","immediateChange","propValue","getAdapterInstances","_instances","inst","getHistory","idShort","pop","collectClassesValue","sSheetList","styleSheets","sSheet","ruleList","cssRules","rule","selectorText","_styles","s","subStyles","_style","toUpperCase","fff","href","attrs","parentClass","collectClasses","usages","DialogContentText","Check","Close","button","dangerouslySetInnerHTML","__html","marginLeft","code","$button","jQuery","click","getObject","objectData","customFilter","filters","custom","role","fontStyle","SelectID","types","expertMode","FormControl","FormHelperText","unit","customValue","strValue","aVal","onPxToPercent","onPercentToPx","fonts","withGroups","withSelf","hideUsed","usedInView","endsWith","withIcons","checkUsage","defaultValue","usedInWidget","usedWidgetId","inNewWidgetId","inAttr","usage","modifyWidgetUsages","o","fontFamily","ListItemIcon","tt","paddingLeft","FileIcon","verticalAlign","ListSubheader","listFolder","FolderOpenedIcon","iconFolder","cssClass","renderOption","optionProps","getOptionLabel","getOptionDisabled","_createElement","Box","menuItem","stylesOptions","_internalList","styles","files","isFound","getStylesOptions","selectValue","_stylesOptions$select","_stylesOptions$select2","styleName","_instance","isShort","alt","noButton","multiline","EditIcon","rows","TextDialog","css","js","VisFormatUtils","bindingsCache","this","getObjPropValue","propPath","_obj","part","getSpecialValues","loginRequired","language","formatValue","decimals","_format","isNaN","toFixed","formatMomentDate","dateObj","useTodayOrYesterday","moment","momentObject","j","dateFormat","isSame","todayStr","subtract","yesterdayStr","_put","getFullYear","getMonth","getDate","getHours","getMinutes","getSeconds","getMilliseconds","formatDate","isDuration","realDateObj","Date","setMilliseconds","getTimezoneOffset","validFormatChars","formatBinding","_values","states","oids","operation","string","a","Math","round","sqrt","random","floor","ceil","WidgetBindingField","super","editValue","showSelectIdDialog","showEditBindingDialog","newStyle","inputRef","React","getDerivedStateFromProps","_props$widget","detectOldBindingStyle","visFormatUtils","_it$token","calculateValue","stateOids","newOid","_it$operations","_op$arg","calculatedEditValue","setState","renderSpecialNames","clickable","insertInText","space","renderHelpForNewStyle","indent","renderHelpForOldStyle","oldStyle","desc","rel","link","getSelectedText","selectionStart","selectionEnd","renderEditBindDialog","varValuesKeys","paper","dialog","edit","autoFocus","InputAdornment","position","edge","Clear","calculateTimeout","opacity","selectionValue","valueTitle","valueContent","Switch","Cancel","isInBrackets","counter","renderDialogAskToModify","askToModify","modify","renderDialogArguments","askForArguments","onKeyDown","FormControlLabel","control","setSelectionRange","createTextRange","collapse","moveEnd","moveStart","renderSelectIdDialog","render","LinkIcon","cursor","textDecoration","fontWeight","ICONS","FilterAltIcon","locked","LockIcon","IMAGE_TYPES","cssDialogOpened","jsDialogOpened","clearGroup","showWidgetCode","widgetsLoaded","transitionTime","fieldsBefore","getFieldsBefore","fieldsSignals","getSignals","imageRef","getFieldsAfter","isHidden","_isHdn","componentDidMount","setAccordionState","newState","_fields","selectedWidgetsFields","bindFields","commonValues","_selectedWidgetsField","_widgets$this$props$s","_widgets$this$props$s2","currentWidget","_currentWidget$data$b","_currentWidget$style$","customFields","signalsCount","fieldsAfter","found","hasValues","componentWillUnmount","recalculateTimer","triggerTimer","renderHeader","_widgetType$preview","_widgetType","foundWidgetType","widgetLabel","widgetColor","widgetWithSetLabel","img","widgetBackColor","widgetIcon","prev","ext","widgetImage","getInvertedColor","marketplace","flexWrap","widgetName","backgroundColor","widgetNameText","coloredWidgetSet","port","WidgetCSS","WidgetJS","_accordionOpen","componentDidUpdate","_this$imageRef$curren","clientHeight","transform","onGroupMove","direction","stopPropagation","oldGroup","_widgets","lastGroup","_f$iterable2","newIndex","newGroup","oldWidgetData","_f$iterable","idx","idxGroup","idxGroupPlus","renderGroupHeader","emptyMoreIcon","grow","groupButton","Delete","ArrowUpward","Add","ArrowDownward","groupField","onGroupDelete","checkBox","changeBinding","renderFieldRow","fieldRow","colSpan","fieldHelp","fieldDivider","labelStyle","isBoundField","Divider","borderBottomWidth","fieldTitleDisabled","fieldTitleError","smallImageDiv","smallImage","onError","noBinding","bindIconSpan","LinkOff","bindIcon","ColorizeIcon","colorize","cssClone","infoIcon","fieldInput","WidgetField","renderGroupBody","renderGroup","widgetsExist","_this$state$fields","_this$state$fields2","jsonCustomFields","CodeIcon","palette","main","contrastText","right","flexGrow","maxHeight","objectFit","transformOrigin","View","CSS","Scripts","blockHeader","viewTabs","viewTab","_props$selectedWidget","setSelected","prevSelectedWidgets","usePrevious","openedViews","TabContent","Typography","gutterBottom","IconAttributes","textAlign","UnfoldMoreIcon","UnfoldLessIcon","onHide","Tabs","scrollButtons","tab","Tab","deviceIcons","blind","Blinds","dimmer","TipsAndUpdates","door","SensorDoor","fireAlarm","Whatshot","floodAlarm","Water","humidity","WaterDrop","levelSlider","Tune","light","Lightbulb","lock","Lock","media","PlayArrowRounded","motion","DirectionsRun","rgb","Palette","rgbSingle","rgbwSingle","ct","hue","Power","vacuumCleaner","TbVacuumCleaner","temperature","Thermostat","thermostat","volume","VolumeUp","volumeGroup","weatherForecast","WbSunny","WindowIcon","windowTilt","allObjects","getObjectView","channels","devices","enums","reduce","getObjectIcon","cIcon","detectDevices","devicesObject","detector","ChannelDetector","rooms","_devicesObject$id","_devicesObject$id2","_devicesObject$id2$co","smartName","member","_keysOptional","_usedIdsOptional","ignoreIndicators","excludedTypes","controls","detect","stateId","st","deviceObject","deviceType","defaultRole","channelId","deviceId","room","roomId","roomObj","roomName","k","k2","deviceObj","idArray","parentObject","_parentObject$common2","_parentObject$common3","_parentObject$common","_grandParentObject$co","grandParentObject","borderStyle","borderColor","borderWidth","widgetTitle","alignSelf","widgetImageWithSrc","widgetTooltip","zoom","widgetImageContainer","widgetMarketplace","widgetDeleted","_props$widgetType","_props$widgetSetProps","_window$visSets$props","_props$widgetType$pre","_imageRef$current","widgetSetProps","titleStyle","isUseBright","marketplaceUpdate","marketplaceDeleted","_props$marketplaceUpd","_props$marketplaceDel","marketplaceUpdates","widget_id","widgetTypeName","uninstallWidget","DeleteIcon","updateWidgets","UpdateIcon","DeletedIcon","widthRef","dragRef","useDrag","offsetWidth","collect","monitor","isDragging","handlerId","getHandlerId","getEmptyImage","captureDraggingState","helpers","setMarketplaceDialog","DEVELOPER_MODE","toggle","labelShrink","selectClearContainer","selectClear","groupIcon","searchLabel","setFilter","setMarketplaceUpdates","setMarketplaceDeleted","marketplaceLoading","setMarketplaceLoading","widgetsList","_widgetsList","__marketplace","_widgetSetProps","_widgetSetProps$widge","sets","posBasic","posMarket","posJQui","rxSets","_widgetSetProps$set","nonRxSets","_widgetSetProps$set2","resultSet","sorted","b","marketplaceClient","tPromise","mPromise","VisMarketplace","_window$VisMarketplac","updates","deleted","api","apiGetWidget","statusCode","IconPalette","startAdornment","Search","InputLabelProps","shrink","category","categoryKey","_widgetSetProps$categ","_widgetSetProps$categ4","_widgetSetProps$categ5","_widgetSetProps$categ2","_widgetSetProps$categ3","reload","wSetObj","_wSetObj$common$visWi","setObject","_visWidgets$key$url","alert","LinearProgress","MarketplacePalette","apiUrl","webPrefix","image_id","widgetItem","viewManageBlock","viewManageButtonActions","folderName","spacing","noDrop","rootCanDrop","pointerEvents","folderBlock","foldersCollapsed","FolderClosedIcon","canDrop","drop","useDrop","accept","getItemType","currentFolder","foundFolder","isOver","isDraggingThisItem","end","dropResult","getDropResult","moveFolder","setIsDragging","setFoldersCollapsed","popper","AddIcon","setFolderDialog","setFolderDialogName","setFolderDialogParentId","CreateNewFolderClosedIcon","setFolderDialogId","foundView","setIsOverRoot","dragging","secondary","visibleView","dark","viewBlockPreview","toggleView","VisibilityIcon","VisibilityOffIcon","moveView","hasPermissions","setImportDialog","BiImport","setExportDialog","BiExport","FileCopyIcon","copyToClipboard","DndPreview","usePreview","zIndex","isTouchDevice","check","userAgent","navigator","vendor","opera","test","substr","mobileCheck","maxTouchPoints","msMaxTouchPoints","useFocus","isAce","inputField","interval","_inputField$current","editor","selectAll","setData","setView","errors","setErrors","getSession","on","getAnnotations","importViewAction","node","folderObject","dialogFolder","dialogTitles","delete","rename","add","dialogParentId","dialogButtons","deleteFolder","renameFolder","dialogName","addFolder","uuidv4","dialogInputs","DialogIcon","dialogDisabled","setDialog","setDialogFolder","setDialogName","topBar","marginBottom","folderContainer","clear","viewContainer","exportDialog","importDialog","folderDialog","folderDialogName","folderDialogId","folderDialogParentId","isOverRoot","renderViews","name1","name2","localeCompare","renderFolders","folder1","folder2","Folder","DndProvider","backend","TouchBackend","HTML5Backend","AppBar","CreateNewFolderIcon","proj","Root","FolderDialog","ImportDialog","viewObject","originalWidgets","newWid","themeName","ExportDialog","MultiSelect","elAnchor","backColor","subText","foundItem","subName","isNarrow","InputLabel","List","navMain","nav","ListItemButton","currentTarget","listItemButton","whiteSpace","coloredSecondary","IconArrowUp","IconArrowDown","Menu","menuToolbar","setSelectedWidgets","preventDefault","menuItemIcon","menuItemMainText","borderBottom","textRoot","textOverflow","bottom","paddingRight","full","hide","toolbarHeight","items","doNotTranslateName","ButtonBase","toolbarTooltip","flexItem","textInput","toolbarBlock","borderRightStyle","toolbarItems","toolbarCol","toolbarRow","toolbarLabel","paddingTop","_items","_item","__item","last","borderRightWidth","subItem","subKey","subItem2","subKey2","dialogView","copy","changeView","_props$dialogCallback3","dialogCallback","_props$dialogCallback2","oldViewName","contains_view","renameReferences","_props$dialogCallback","setDialogView","setDialogParentId","projectLabel","setDialogCallback","dialogDefaultName","toolbar","setProjectsDialog","MenuIcon","setViewsManager","ToolbarItems","ViewsManager","viewsManager","ViewDialog","setError","importWidgets","newWidgets","groupOffset","widgetOffset","_newWidgets$widget$gr","_newWidgets$widget$gr2","ImportExport","groupWidgets","gIdx","wIdx","len","newId","memberWidget","setFilters","filterWidgets","setFilterWidgets","filterInvert","setFilterInvert","_filters","filterkey","VisibilityOff","Visibility","_filterWidgets","ListItemAvatar","FilterAlt","filterDialog","setFilterDialog","_project$props$select","shownWidgets","FilterIcon","_widgets$widgetId$dat","_widgets$widgetId$dat2","deleteWidgets","cloneWidgets","BiCut","cutWidgets","BiCopy","copyWidgets","BiPaste","widgetsClipboard","pasteWidgets","UndoIcon","historyCursor","history","undo","RedoIcon","redo","MdAlignHorizontalLeft","alignWidgets","MdAlignVerticalTop","MdAlignHorizontalCenter","CgArrowAlignH","AiOutlineColumnWidth","RiBringToFront","orderWidgets","MdAlignHorizontalRight","MdAlignVerticalBottom","MdAlignVerticalCenter","CgArrowAlignV","AiOutlineColumnHeight","RiSendToBack","OpenInNewIcon","lockDragging","toggleLockDragging","widgetHint","toggleWidgetHint","WidgetImportDialog","WidgetExportDialog","WidgetFilterDialog","projectMode","setProjectMode","setSettings","setInstance","_settings","reloadOnEdit","readDir","_file$acl","acl","Node","newInstance","noTranslate","SaveIcon","newSettings","getRawSocket","emit","err","_file$acl2","getLiveHost","res","hosts","getForeignStates","h","_states$h","setProjectName","projectData","setProjectData","showConfirmation","setShowConfirmation","askOpenProject","setAskOpenProject","working","setWorking","importProject","projects","host","openNewProjectOnCreate","refreshProjects","confirmDialog","ok","cancel","isYes","askOpenDialog","loadProject","UploadFile","onUpload","dialogProject","deleteProject","renameProject","addProject","setDialogProject","PermissionsDialog","adminUser","users","projectPermissions","Map","viewPermissions","widgetPermissions","cardOpen","userView","adminObj","_visProject$___settin","_visProject$___settin2","_view$settings$permis","_view$settings$permis2","_widget$permissions$u","_widget$permissions","onSave","_this$state$viewPermi","_this$state$widgetPer","renderInfoDialog","sx","renderWidgetPermissions","_this$state$projectPe","_this$state$viewPermi2","_this$state$widgetPer2","_this$state$widgetPer3","_this$state$projectPe2","_this$state$viewPermi3","_this$state$widgetPer4","_this$state$widgetPer5","currVal","renderViewPermissions","_this$state$projectPe3","_this$state$viewPermi4","_this$state$viewPermi5","_this$state$projectPe4","_this$state$viewPermi6","_this$state$viewPermi7","Card","CardHeader","titleTypographyProps","KeyboardArrowUpIcon","KeyboardArrowDownIcon","Collapse","in","borderTop","CardContent","_this$state$projectPe5","_this$state$projectPe6","projectBlock","projectButton","blink","animation","showExportDialog","setShowExportDialog","showPermissionsDialog","setShowPermissionsDialog","setAnchorEl","exportProject","isAnonymize","date","$","append","getElementById","remove","projName1","projName2","IconDocument","event","PermissionsIcon","ProjectDialog","ImportProjectDialog","created","newProjectName","objectsDialog","settingsDialog","setSettingsDialog","setObjectsDialog","filesDialog","setFilesDialog","SettingsIcon","ListIcon","FilesIcon","Settings","projectsDialog","ProjectsManager","ready","columns","notEditable","statesOnly","showTypeSelector","rightBlock","narrowToolbar","paddingBottom","heightButton","saveIcon","transitions","easing","easeInOut","_props$currentUser","_props$currentUser$co","_props$currentUser2","_props$currentUser2$c","setRight","lastCommand","setLastCommand","rightRef","runtimeURL","pathname","onReload","ack","dropMenu","DropMenu","anchorOrigin","vertical","horizontal","getContentAnchorEl","DropMenuItem","PlayArrowIcon","SyncIcon","setToolbarHeight","HeightNarrowIcon","HeightVeryNarrowIcon","HeightFullIcon","currentUser","PersonIcon","getObjectNameFromObj","isSecure","logout","ExitToAppIcon","lastCommandButton","needSave","ToggleThemeMenu","toggleTheme","ArrowDropDownIcon","Views","Widgets","Projects","CodeDialog","IconCopy","contextMenuItems","NestedMenuItem","leftIcon","parentMenuOpen","onContextMenu","IconMenuItem","subLabel","menuPosition","setMenuPosition","shiftKey","pageY","pageX","anchorReference","anchorPosition","menuItemsData","coordinatesWidgets","_window$document$getE","rect","getBoundingClientRect","showSelect","_view$widgets$coordin","_view$widgets$coordin2","WidgetIcon","AiOutlineGroup","AiOutlineUngroup","ungroupWidgets","isRoot","resizers","getElementsByClassName","cachePosition","dataUrl","toPng","addPage","image","setSelectedGroup","lockWidgets","LockOpenIcon","IOContextMenu","_translateWord","translate","VisEngine","setTimeInterval","timeInterval","setTimeStart","timeStart","buildLegacyStructures","_this$vis$binds$mater","_this$vis$binds$mater2","buildLegacySubscribing","materialdesign","helper","subscribeStatesAtRuntime","__inited","callback","debug","onCommand","command","_this$refViews$view","refViews","registerViewRef","unregisterViewRef","getViewRef","_this$refViews$view2","statesDebounce","_setValue","statesDebounceTime","registerChangeHandler","widgetChangeHandlers","unregisterChangeHandler","onStateChange","_this$linkContext$vis","_this$linkContext$sig","_this$linkContext$las","_this$linkContext$bin","ID_CONTROL_COMMAND","_state$val","ts","now","onUserCommand","_cmdInstance","_cmdData","ID_CONTROL_DATA","ID_CONTROL_INSTANCE","lc","q","canStates","stack","onChangeCallbacks","subscribe","subscribes","toISOString","createCanState","subscribeState","unsubscribe","unsubscribeState","subView","buildPath","legacyRequestedViews","can","isTouch","documentElement","debounceInterval","allWidgets","wakeUpCallbacks","fontNames","viewsActiveFilter","refSound","conn","createConnection","initCanObjects","createLegacyVisObject","_setTimeout","func","arg4","arg5","arg6","_setInterval","formatUtils","loadLegacyObjects","loadEditWords","userName","getSystemConfig","systemConfig","isFloatComma","setLoadingText","loadWidgets","getCurrentPath","path","encodeURIComponent","detectWakeUp","oldTime","wakeUpDetectorInterval","currentTime","ui","_appendTo","eq","generateInstance","userScript","userCommonCss","userUserCss","runtime","getObjects","subscribing","activeViews","active","showLegacyFileSelector","fm","userArg","navChangeCallbacks","lastChangedView","updateContainers","renderView","viewDiv","_this$refViews$view3","destroyUnusedViews","changeFilter","showEffect","showDuration","hideEffect","hideDuration","detectBounce","isUp","lastChange","tag","tagName","lastClick","hideOptions","showOptions","sync","navigateInView","currentPath","newHash","onWakeUp","inspectWidgets","addWidget","delWidget","onlyUpdate","showMessage","message","showWidgetHelper","isShow","findNearestResolution","resultRequiredOrX","addFont","fontName","onFontsUpdate","fontTimer","registerOnChange","unregisterOnChange","findByRoles","roles","channel","reg","RegExp","r","device","_reg","findByName","objName","hideShowAttr","widAttr","doNotIgnoreEditMode","getViewOfWidget","_views$v","confirmMessage","onConfirmDialog","config","showCode","onShowCode","findCommonAttributes","bindWidgetClick","preloadImages","srcs","preloadImagesCacheImgs","preloadImagesCacheSrcs","Image","updateStates","getHttp","editSelect","notTranslate","onchange","line","isWidgetHidden","condition","getUserGroups","_this$refViews$view4","renderMessageDialog","AlertIcon","namespace","logError","errorText","getIsConnected","isConnected","getGroups","useCache","readGroups","groups","getConfig","getEnums","_objects$instance","_objects$instance$nat","native","defaultFileMode","defaultMode","charts","getLoggedUser","getCurrentUser","authenticate","password","salt","_authRunning","_authInfo","getStates","setReloadTimeout","setReconnectInterval","getUser","sendCommand","filename","_socket","cmd","body","clientWidth","difference","useAsDefault","abs","hh","ratio","_visProject$view$sett","_visProject$view$sett2","gg","oldVal","removeAttr","loadScriptsOfOneWidgetSet","oldScript","newScript","createTextNode","replaceChild","setInnerHTML","elm","html","loadedSources","ownerElement","_oldScript$attributes","_oldScript$attributes2","loadTimer","_oldScript$text","head","div","onLoaded","currentInstance","_this$refViews$viewNa","_visProject$view$widg","_showDialog","_this$refViews$viewNa2","_visProject$view$widg2","_this$refSound","protocol","hostname","play","Audio","sound","app","tts","_val","updateCustomScripts","applyUserStyles","styleEl","styleUserEl","insertBefore","updateCommonCss","visCommonCssLoaded","visCommonCss","updateUserCss","visUserCssLoaded","visUserCss","renderAlertDialog","trigger","$$","VisView","askAboutInclude","disableInteraction","editModeComponentClass","onIgnoreMouseEvents","onWidgetsChanged","registerEditorCallback","showWidgetNames","_visProject$view$sett3","alwaysRender","autoPlay","muted","generateClassName","createGenerateClassName","productionPrefix","Runtime","GenericApp","extendedProps","require","Connection","LegacyConnection","disableDataReporting","sentryDSN","socketUrl","visAdapterInstance","onHashChange","onProjectChange","checkTimeout","showProjectUpdateDialog","doNotShowProjectDialog","projectDoesNotExist","showProjectsDialog","lastProjectJSONfile","fixProject","findViewWithNearestResolution","_project$___settings","subscribedProject","unsubscribeFiles","syncMultipleWidgets","subscribeFiles","bodyOverflow","setStateAsync","checkForUpdates","orientationChange","resolutionTimer","dir","isDir","createFirstProjectDialog","reloadCurrentProject","onWidgetSetsChanged","lastUploadedState","onVisChanged","_newState$alignValues","alignType","alignIndex","alignValues","newPath","Snackbar","alertType","autoHideDuration","reason","alertMessage","doNotLoad","writeFile64","setStateToIgnore","showAlert","setWidgetsLoadingProgress","WIDGETS_LOADING_STEP_NOT_STARTED","showNewProjectDialog","showImportDialogDialog","initState","_wid","_newWid","attrCount","attrName","attrType","_group$widget","oView","_oWidget$data$members","newWidget","memberId","resultRequired","innerWidth","innerHeight","messageDialog","changeTimer","needRestart","onConnectionReady","WIDGETS_LOADING_STEP_HTML_LOADED","WIDGETS_LOADING_STEP_ALL_LOADED","splitSizes","uploadedState","onWidgetsLoaded","showCreateNewProjectDialog","IconAdd","IconClose","showSmallProjectsDialog","MenuList","renderImportProjectDialog","showImportDialog","renderProjectDoesNotExist","getVisEngine","_this$props$classes","registerCallback","showConfirmDialog","showCodeDialog","newThemeName","renderLoader","loadingHideLogo","vendorPrefix","LoaderMV","loadingBackgroundColor","backgroundImage","loadingBackgroundImage","LoaderPT","LoaderVendor","Loader","StylesProvider","StyledEngineProvider","injectFirst","ThemeProvider","loaded","installWidget","viewWidgets","_project$view$widgets2","PaperProps","installedWidgets","onAdded","ViewDrop","targetRef","CanDrop","addMarketplaceWidget","getClientOffset","x","y","Editor","_this","ignore","ignoreMouseEvents","onBeforeUnload","returnValue","controlKey","cmdKey","activeElement","total","loadingProgress","isOpen","deleteWidgetsDialog","updateWidgetsDialog","marketplaceWidget","updateWidgetsAction","importMarketplaceWidget","deleteWidgetsAction","_group$data","cutCopyWidgets","copiedWidget","newKeys","clipboardWidgetId","_boundingRect$left","_boundingRect$top","boundingRect","getWidgetRelativeRect","pxToPercent","newCoordinates","coordinate","widgetsWidth","spaceWidth","currentLeft","selectedWidget1","selectedWidget2","widgetsHeight","spaceHeight","currentTop","align","minZ","maxZ","currentZ","widgetBoundingRect","parentGroupWidget","toggleDisableInteraction","ignoreHistory","saveHistory","savingTimer","projectStr","TextEncoder","encode","fromProjectName","toProjectName","isActivate","changed","toggleCode","oldShowCode","changedData","viewSettings","tempProject","currentStyle","noPxToPercent","percentStyle","currentData","visEngineHandlers","onStealStyle","wids","marketplaceDialog","apiGetWidgetRevision","oldData","_widget","toWid","loadingText","legacyFileSelector","visAddWidget","mainRef","hidePalette","hideAttributes","loadSelectedWidgets","viewBoundingRect","historyTimer","codeDialog","renderAskAboutIncludeDialog","renderTabs","tabsContainer","tabButton","removeItem","PlayIcon","StopIcon","Layers","iconBlink","isGroupEdited","navigationIcon","navigationImage","groupEditTab","tabsName","listItemIcon","CodeOffIcon","ClearAllIcon","renderPalette","block","blockNarrow","blockVeryNarrow","renderWorkspace","visEngine","canvas","canvasNarrow","canvasVeryNarrow","VisContextMenu","renderAttributes","Attributes","renderConfirmDialog","renderShowCodeDialog","renderShowProjectUpdateDialog","renderCreateFirstProjectDialog","CreateFirstProjectDialog","renderUpdateDialog","suppressQuestionMinutes","renderDeleteDialog","MessageDialog","noClose","renderLegacyFileSelectorDialog","_this$state$legacyFil","_this$state$legacyFil2","renderLoadingText","_store$getState$visPr5","_store$getState$visPr4","Toolbar","ReactSplit","SplitDirection","Horizontal","initialSizes","minWidths","onResizeFinished","gutterIdx","newSizes","sum","curr","GutterTheme","Dark","Light","gutterClassName","MarketplaceDialog","propTypes","onThemeChange","PropTypes","menu","buttonShowAttributes","buttonShowPalette","animationName","animationDuration","animationIterationCount","Boolean","Theme","danger","success","getThemeName","packageJson","VisRxWidget","visRxWidget","modifyClasses","c","inIframe","self","ThemeContainer","currentTheme","setCurrentTheme","newTheme","createTheme","App","_theme","visConfigLoaded","container","createRoot","build","serviceWorker","registration","unregister"],"sourceRoot":""}