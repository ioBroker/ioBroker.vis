 <style type="text/css">
 .hue-slider-hue.ui-slider {
     background-image: url(widgets/jqui/img/hue.png);
     background-size: 100%;
 }

 .hue-slider-ct.ui-slider {
     background-image: url(widgets/jqui/img/ct.png);
     background-size: 100%;
 }
</style>

<script type="text/javascript">
    "use strict";

    if (vis.editMode) {
        $.extend(systemDictionary, {
            "autoclose":    {"en": "Auto close",            "de": "Auto-zu",                "ru": "Автозакрытие"},
            "modal":        {"en": "Modal",                 "de": "Modal",                  "ru": "Модальное"},
            "invert_state": {"en": "Invert state",          "de": "Invertiere Zustand",     "ru": "Инвертировать состояние"},
            "asButton":     {"en": "Button rectangle",      "de": "Knopf-Viereck",          "ru": "Фон кнопки"},
            "icon_off":     {"en": "Icon for OFF",          "de": "Ikon für AUS",           "ru": "Иконка для ВЫКЛ"},
            "icon_on":      {"en": "Icon for ON",           "de": "Ikon für AN",            "ru": "Иконка для ВКЛ"},
            "closed_value": {"en": "Value for CLOSED",      "de": "Wert für ZU",            "ru": "Значение для ЗАКРЫТО"},
            "tilted_value": {"en": "Value for TILTED",      "de": "Wert für GEKIPPT",       "ru": "Значение для ОТКИНУТО"},
            "opened_value": {"en": "Value for OPENED",      "de": "Wert für AUF",           "ru": "Значение для ОТКРЫТО"},
            "invert_value": {"en": "Invert value",          "de": "Invertiere Wert",        "ru": "Инвертировать значение"},
            "show_active":  {"en": "Show active background", "de": "Zeige aktieven Hintergrund", "ru": "Показать активный фон"},
            "set_oid":      {"en": "Set temperature ID",    "de": "Soll-Temperature ID",    "ru": "ID задаваемой температуры"},
            "temp_oid":     {"en": "Actual temperature ID", "de": "Ist-Temperature ID",     "ru": "ID актуальной температуры"},
            "drive_oid":    {"en": "Valve position ID",     "de": "VentilID",               "ru": "ID Положения вентиля"},
            "label_set":    {"en": "Label for 'set'",       "de": "Beschriftung für 'Soll'", "ru": "Надпись для 'задаваемой'"},
            "label_temp":   {"en": "Label for 'actual'",    "de": "Beschriftung für 'Ist'", "ru": "Надпись для 'актуальной'"},
            "label_drive":  {"en": "Label for position",    "de": "Beschriftung für Ventil", "ru": "Надпись для вентиля"},
            "src_url":      {"en": "Stream URL",            "de": "Stream URL",             "ru": "URL потока"},
            "qtsrc_url":    {"en": "Stream URL (qtsrc)",    "de": "Stream URL (qtsrc)",     "ru": "URL потока (qtsrc)"},
            "type_application": {"en": "Application mime-type", "de": "Applikationstyp (mime)",   "ru": "Тип приложения (mime)"},
            "plugin":       {"en": "Plug-in",               "de": "Plugin",                 "ru": "Плагин"},
            "autoplay":     {"en": "Auto-play",             "de": "Automatisch abspielen",  "ru": "Автостарт"}
        });
    }

    $.extend(systemDictionary, {
        "off":      {"en": "off",       "de": "aus",    "ru": "выкл"},
        "on":       {"en": "on",        "de": "an",     "ru": "вкл"},
        "closed":   {"en": "closed",    "de": "zu",     "ru": "закр."},
        "open":     {"en": "open",      "de": "auf",    "ru": "откр."}
    });
</script>

<script id="tplMfdLight" 
        type="text/ejs" 
        class="vis-tpl" 
        data-vis-set="jqui-mfd"
        data-vis-type="val;light;state"
        data-vis-prev='<div id="prev_tplMfdLight" style="position: relative; text-align: initial;padding: 4px "><div class="vis-widget_prev vis-widget ui-widget ui-button ui-corner-all ui-state-default" style="width: 70px; height: 70px;"> <div class="vis-widget-prev-body"> <img style="filter: invert(1); -webkit-filter: invert(1); -moz-filter: invert(1); -o-filter: invert(1); -ms-filter: invert(1);" width="100%" src="widgets/jqui-mfd/img/light_light_dim.png"> </div> </div></div>'
        data-vis-name="Light/Dimmer"
        data-vis-attrs="oid;min;max;invert_icon/checkbox;asButton[true]/checkbox">
    <div data-oid="<%= this.data.attr('oid') %>" class="vis-widget <%= this.data.attr('asButton') ? ' ui-widget ui-button ui-corner-all ui-state-default ui-state-active' : '' %> <%= this.data.attr('class') %>" id="<%= this.data.attr('wid') %>" style="width:76px; height:76px; position:absolute" data-min="<%= this.data.attr('min') %>" data-max="<%= this.data.attr('max') %>" <%= (el) -> vis.binds.jqueryui.active(el) %> >
        <div class="vis-widget-body" <%= (el) -> vis.preloadImages(['widgets/jqui-mfd/img/light_light_dim_100.png','widgets/jqui-mfd/img/light_light_dim_90.png','widgets/jqui-mfd/img/light_light_dim_80.png','widgets/jqui-mfd/img/light_light_dim_70.png','widgets/jqui-mfd/img/light_light_dim_60.png','widgets/jqui-mfd/img/light_light_dim_50.png','widgets/jqui-mfd/img/light_light_dim_40.png','widgets/jqui-mfd/img/light_light_dim_30.png','widgets/jqui-mfd/img/light_light_dim_20.png','widgets/jqui-mfd/img/light_light_dim_10.png','widgets/jqui-mfd/img/light_light_dim.png']);  %>>
            <%
            var styles = "";
            if (this.data.invert_icon === "true" || this.data.invert_icon === true) {
                styles = "filter: invert(1); -webkit-filter: invert(1); -moz-filter: invert(1); -o-filter: invert(1); -ms-filter: invert(1);";
            }

            var max = (this.data.attr('max') !== undefined) ? this.data.attr('max') : 100;
            var min = (this.data.attr('min') !== undefined) ? this.data.attr('min') : 0;
            var str = vis.states.attr(this.data.oid + '.val');
            var val = parseFloat(str);
            if (str === true  || str === 'true')  { val = max; }
            if (str === false || str === 'false') { val = min; }
            if (val >= max) {
            %>
                <img style="<%= styles %>" width="100%" src="widgets/jqui-mfd/img/light_light_dim_100.png"/>
            <% } else if (val >= min + (max - min) * 0.9) { %>
                <img style="<%= styles %>" width="100%" src="widgets/jqui-mfd/img/light_light_dim_90.png"/>
            <% } else if (val >= min + (max - min) * 0.8) { %>
                <img style="<%= styles %>" width="100%" src="widgets/jqui-mfd/img/light_light_dim_80.png"/>
            <% } else if (val >= min + (max - min) * 0.7) { %>
                <img style="<%= styles %>" width="100%" src="widgets/jqui-mfd/img/light_light_dim_70.png"/>
            <% } else if (val >= min + (max - min) * 0.6) { %>
                <img style="<%= styles %>" width="100%" src="widgets/jqui-mfd/img/light_light_dim_60.png"/>
            <% } else if (val >= min + (max - min) * 0.5) { %>
                <img style="<%= styles %>" width="100%" src="widgets/jqui-mfd/img/light_light_dim_50.png"/>
            <% } else if (val >= min + (max - min) * 0.4) { %>
                <img style="<%= styles %>" width="100%" src="widgets/jqui-mfd/img/light_light_dim_40.png"/>
            <% } else if (val >= min + (max - min) * 0.3) { %>
                <img style="<%= styles %>" width="100%" src="widgets/jqui-mfd/img/light_light_dim_30.png"/>
            <% } else if (val >= min + (max - min) * 0.2) { %>
                <img style="<%= styles %>" width="100%" src="widgets/jqui-mfd/img/light_light_dim_20.png"/>
            <% } else if (val >= min + (max - min) * 0.1) { %>
                <img style="<%= styles %>" width="100%" src="widgets/jqui-mfd/img/light_light_dim_10.png"/>
            <% } else if (val >= min + (max - min) * 0.01) { %>
                <img style="<%= styles %>" width="100%" src="widgets/jqui-mfd/img/light_light_dim_00.png"/>
            <% } else { %>
                <img style="<%= styles %>" width="100%" src="widgets/jqui-mfd/img/light_light_dim.png"/>
            <% } %>
        </div>
    </div>
</script>

<script id="tplMfdLightCtrl"
        type="text/ejs"
        class="vis-tpl"
        data-vis-prev='<div id="prev_tplMfdLight" style="position: relative; text-align: initial;padding: 4px "><div data-oid="dev1" class="vis-widget_prev  vis-widget ui-widget ui-button ui-corner-all ui-state-default ui-state-active" style="width: 70px; height: 70px;"> <div class="vis-widget-prev-body"> <img style="filter: invert(1); -webkit-filter: invert(1); -moz-filter: invert(1); -o-filter: invert(1); -ms-filter: invert(1);" width="100%" src="widgets/jqui-mfd/img/light_light_dim.png"> </div> </div></div>'
        data-vis-set="jqui-mfd"
        data-vis-type="light;ctrl"
        data-vis-name="ctrl - Light"
        data-vis-attrs="oid;min;max;invert_icon/checkbox;asButton[true]/checkbox">
    <div data-oid="<%= this.data.attr('oid') %>" class="vis-widget <%= this.data.attr('asButton') ? ' ui-widget ui-button ui-corner-all ui-state-default' : '' %> <%= this.data.attr('class') %>" id="<%= this.data.attr('wid') %>" style="width:76px; height:76px; position:absolute" data-min="<%= this.data.attr('min') %>" data-max="<%= this.data.attr('max') %>" <%= (el) -> vis.binds.basic.toggle(el); vis.binds.jqueryui.classes(el) %>>
        <div class="vis-widget-body" <%= (el) -> vis.preloadImages(['widgets/jqui-mfd/img/light_light_dim_100.png','widgets/jqui-mfd/img/light_light_dim_90.png','widgets/jqui-mfd/img/light_light_dim_80.png','widgets/jqui-mfd/img/light_light_dim_70.png','widgets/jqui-mfd/img/light_light_dim_60.png','widgets/jqui-mfd/img/light_light_dim_50.png','widgets/jqui-mfd/img/light_light_dim_40.png','widgets/jqui-mfd/img/light_light_dim_30.png','widgets/jqui-mfd/img/light_light_dim_20.png','widgets/jqui-mfd/img/light_light_dim_10.png','widgets/jqui-mfd/img/light_light_dim.png']);  %>>
            <%
            var styles = "";
            if (this.data.invert_icon === "true" || this.data.invert_icon === true) {
                styles = "filter: invert(1); -webkit-filter: invert(1); -moz-filter: invert(1); -o-filter: invert(1); -ms-filter: invert(1);";
            }
            var max = (this.data.attr('max') !== undefined) ? this.data.attr('max') : 100;
            var min = (this.data.attr('min') !== undefined) ? this.data.attr('min') : 0;
            var str = vis.states.attr(this.data.oid + '.val');
            var val = parseFloat(str);
            if (str === true  || str === 'true')  { val = max; }
            if (str === false || str === 'false') { val = min; }
            if (val >= max) {
            %>
                <img style="<%= styles %>" width="100%" src="widgets/jqui-mfd/img/light_light_dim_100.png"/>
            <% } else if (val >= min + (max - min) * 0.9) { %>
                <img style="<%= styles %>" width="100%" src="widgets/jqui-mfd/img/light_light_dim_90.png"/>
            <% } else if (val >= min + (max - min) * 0.8) { %>
                <img style="<%= styles %>" width="100%" src="widgets/jqui-mfd/img/light_light_dim_80.png"/>
            <% } else if (val >= min + (max - min) * 0.7) { %>
                <img style="<%= styles %>" width="100%" src="widgets/jqui-mfd/img/light_light_dim_70.png"/>
            <% } else if (val >= min + (max - min) * 0.6) { %>
                <img style="<%= styles %>" width="100%" src="widgets/jqui-mfd/img/light_light_dim_60.png"/>
            <% } else if (val >= min + (max - min) * 0.5) { %>
                <img style="<%= styles %>" width="100%" src="widgets/jqui-mfd/img/light_light_dim_50.png"/>
            <% } else if (val >= min + (max - min) * 0.4) { %>
                <img style="<%= styles %>" width="100%" src="widgets/jqui-mfd/img/light_light_dim_40.png"/>
            <% } else if (val >= min + (max - min) * 0.3) { %>
                <img style="<%= styles %>" width="100%" src="widgets/jqui-mfd/img/light_light_dim_30.png"/>
            <% } else if (val >= min + (max - min) * 0.2) { %>
                <img style="<%= styles %>" width="100%" src="widgets/jqui-mfd/img/light_light_dim_20.png"/>
            <% } else if (val >= min + (max - min) * 0.1) { %>
                <img style="<%= styles %>" width="100%" src="widgets/jqui-mfd/img/light_light_dim_10.png"/>
            <% } else if (val >= min + (max - min) * 0.01) { %>
                <img style="<%= styles %>" width="100%" src="widgets/jqui-mfd/img/light_light_dim_00.png"/>
            <% } else { %>
                <img style="<%= styles %>" width="100%" src="widgets/jqui-mfd/img/light_light_dim.png"/>
            <% } %>
        </div>
    </div>
</script>

<script id="tplMfdLightOnOffDialog"
        type="text/ejs"
        class="vis-tpl"
        data-vis-set="jqui-mfd"
        data-vis-prev='<img src="widgets/jqui-mfd/img/Prev_Light_jquiDialog.png"></img>'
        data-vis-type="light;ctrl;dialog"
        data-vis-name="Light + jqui Dialog"
        data-vis-attrs="oid;oid-working;min;max;invert_icon/checkbox;asButton[true]/checkbox;"
        data-vis-attrs0="group.dialog;title;autoclose/checkbox;modal/checkbox;dialog_width;dialog_height"
        >
    <div data-oid="<%= this.data.attr('oid') %>" data-hm-wid="<%= this.data.attr('oid-working') %>" class="vis-widget <%= this.data.attr('asButton') ? ' ui-widget ui-button ui-corner-all ui-state-default' : '' %> <%= this.data.attr('class') %>" id="<%= this.data.attr('wid') %>" style="width:76px; height:76px; position:absolute" <%= (el) -> vis.binds.jqueryui.classes(el) %>>
        <div id="<%= this.data.attr('wid') %>_body" class="vis-widget-body" style="width:100%; height:100%" <%= (el) -> vis.preloadImages(['widgets/jqui-mfd/img/light_light_dim_100.png','widgets/jqui-mfd/img/light_light_dim_90.png','widgets/jqui-mfd/img/light_light_dim_80.png','widgets/jqui-mfd/img/light_light_dim_70.png','widgets/jqui-mfd/img/light_light_dim_60.png','widgets/jqui-mfd/img/light_light_dim_50.png','widgets/jqui-mfd/img/light_light_dim_40.png','widgets/jqui-mfd/img/light_light_dim_30.png','widgets/jqui-mfd/img/light_light_dim_20.png','widgets/jqui-mfd/img/light_light_dim_10.png','widgets/jqui-mfd/img/light_light_dim.png']); %>>
            <%
            var styles = "";
            if (this.data.invert_icon === "true" || this.data.invert_icon === true) {
                styles = "filter: invert(1); -webkit-filter: invert(1); -moz-filter: invert(1); -o-filter: invert(1); -ms-filter: invert(1);";
            }

            var max = (this.data.attr('max') !== undefined) ? this.data.attr('max') : 100;
            var min = (this.data.attr('min') !== undefined) ? this.data.attr('min') : 0;
            var str = vis.states.attr(this.data.oid + '.val');
            var val = parseFloat(str);
            if (str === true  || str === 'true')  { val = max; }
            if (str === false || str === 'false') { val = min; }
            if (val >= max) {
            %>
                <img style="<%= styles %>" width="100%" src="widgets/jqui-mfd/img/light_light_dim_100.png"/>
            <% } else if (val >= min + (max - min) * 0.9) { %>
                <img style="<%= styles %>" width="100%" src="widgets/jqui-mfd/img/light_light_dim_90.png"/>
            <% } else if (val >= min + (max - min) * 0.8) { %>
                <img style="<%= styles %>" width="100%" src="widgets/jqui-mfd/img/light_light_dim_80.png"/>
            <% } else if (val >= min + (max - min) * 0.7) { %>
                <img style="<%= styles %>" width="100%" src="widgets/jqui-mfd/img/light_light_dim_70.png"/>
            <% } else if (val >= min + (max - min) * 0.6) { %>
                <img style="<%= styles %>" width="100%" src="widgets/jqui-mfd/img/light_light_dim_60.png"/>
            <% } else if (val >= min + (max - min) * 0.5) { %>
                <img style="<%= styles %>" width="100%" src="widgets/jqui-mfd/img/light_light_dim_50.png"/>
            <% } else if (val >= min + (max - min) * 0.4) { %>
                <img style="<%= styles %>" width="100%" src="widgets/jqui-mfd/img/light_light_dim_40.png"/>
            <% } else if (val >= min + (max - min) * 0.3) { %>
                <img style="<%= styles %>" width="100%" src="widgets/jqui-mfd/img/light_light_dim_30.png"/>
            <% } else if (val >= min + (max - min) * 0.2) { %>
                <img style="<%= styles %>" width="100%" src="widgets/jqui-mfd/img/light_light_dim_20.png"/>
            <% } else if (val >= min + (max - min) * 0.1) { %>
                <img style="<%= styles %>" width="100%" src="widgets/jqui-mfd/img/light_light_dim_10.png"/>
            <% } else if (val >= min + (max - min) * 0.01) { %>
                <img style="<%= styles %>" width="100%" src="widgets/jqui-mfd/img/light_light_dim_00.png"/>
            <% } else { %>
                <img style="<%= styles %>" width="100%" src="widgets/jqui-mfd/img/light_light_dim.png"/>
            <% } %>
        </div>
        <div id="<%= this.data.attr('wid') %>_dialog" class="<%= this.data.attr('wid') %>_dialog vis-widget-dialog" title="<%== this.data.title || this.data.attr('oid') %>" style="padding-left:20px;">
            <div id="<%= this.data.attr('wid') %>_radio"  class="<%= this.data.attr('wid') %>_radio" style="text-align: center" data-oid="<%= this.data.attr('oid') %>" <%= (el) -> vis.binds.jqueryui.radio(el); %> >
                <%
                    var max = (this.data.attr('max') !== undefined) ? this.data.attr('max') : 100;
                    var min = (this.data.attr('min') !== undefined) ? this.data.attr('min') : 0;
                %>
                <input type="radio" id="<%= this.data.attr('wid') %>_radio0" name="<%= this.data.attr('wid') %>_radio" value="<%= min %>" checked="checked"/><label for="<%= this.data.attr('wid') %>_radio0"><% _('off') %> <%= _('off') %></label>
                <input type="radio" id="<%= this.data.attr('wid') %>_radio4" name="<%= this.data.attr('wid') %>_radio" value="<%= max %>"/><label for="<%= this.data.attr('wid') %>_radio4"><%= _('on') %></label>
            </div>
        </div>
        <div class="popup-helper" <%= (el) -> vis.binds.jqueryui.dialog(el, {width: this.data.attr('dialog_width') || 440, height: this.data.attr('dialog_height') || 200, modal: data.attr("modal")}, true) %> />
        <div class="popup-helper" <%= (el) -> if (data.attr("autoclose") === 'true' || data.attr("autoclose") === true) { vis.binds.jqueryui.dialogAutoClose(el) } %> />
    </div>
</script>

<script id="tplMfdLightDialog"
        type="text/ejs"
        class="vis-tpl"
        data-vis-set="jqui-mfd"
        data-vis-type="dimmer,ctrl,dialog"
        data-vis-prev='<img src="widgets/jqui-mfd/img/Prev_Dimmer_jquiDialog.png"></img>'
        data-vis-name="Dimmer + jqui Dialog"
        data-vis-attrs="oid;oid-working;min;max;invert_icon/checkbox;asButton[true]/checkbox;"
        data-vis-attrs0="group.dialog;title;autoclose/checkbox;modal/checkbox;dialog_width;dialog_height">
    <div data-oid="<%= this.data.attr('oid') %>" class="vis-widget <%= this.data.attr('asButton') ? ' ui-widget ui-button ui-corner-all ui-state-default' : '' %> <%= this.data.attr('class') %>" id="<%= this.data.attr('wid') %>" style="width:76px; height:76px; position:absolute" <%= (el) -> vis.binds.jqueryui.classes(el) %>>
        <div id="<%= this.data.attr('wid') %>_body" class="vis-widget-body" style="width:100%; height:100%" <%= (el) -> vis.preloadImages(['widgets/jqui-mfd/img/light_light_dim_100.png','widgets/jqui-mfd/img/light_light_dim_90.png','widgets/jqui-mfd/img/light_light_dim_80.png','widgets/jqui-mfd/img/light_light_dim_70.png','widgets/jqui-mfd/img/light_light_dim_60.png','widgets/jqui-mfd/img/light_light_dim_50.png','widgets/jqui-mfd/img/light_light_dim_40.png','widgets/jqui-mfd/img/light_light_dim_30.png','widgets/jqui-mfd/img/light_light_dim_20.png','widgets/jqui-mfd/img/light_light_dim_10.png','widgets/jqui-mfd/img/light_light_dim.png']); %>>
            <%
            var styles = "";
            if (this.data.invert_icon === "true" || this.data.invert_icon === true) {
                styles = "filter: invert(1); -webkit-filter: invert(1); -moz-filter: invert(1); -o-filter: invert(1); -ms-filter: invert(1);";
            }

            var max = (this.data.attr('max') !== undefined) ? parseFloat(this.data.attr('max')) : 100;
            var min = (this.data.attr('min') !== undefined) ? parseFloat(this.data.attr('min')) : 0;
            var str = vis.states.attr(this.data.oid + '.val');
            var val = parseFloat(str);
            if (str === true  || str === 'true')  { val = max; }
            if (str === false || str === 'false') { val = min; }
            if (val >= max) {
            %>
                <img style="<%= styles %>" width="100%" src="widgets/jqui-mfd/img/light_light_dim_100.png"/>
            <% } else if (val >= min + (max - min) * 0.9) { %>
                <img style="<%= styles %>" width="100%" src="widgets/jqui-mfd/img/light_light_dim_90.png"/>
            <% } else if (val >= min + (max - min) * 0.8) { %>
                <img style="<%= styles %>" width="100%" src="widgets/jqui-mfd/img/light_light_dim_80.png"/>
            <% } else if (val >= min + (max - min) * 0.7) { %>
                <img style="<%= styles %>" width="100%" src="widgets/jqui-mfd/img/light_light_dim_70.png"/>
            <% } else if (val >= min + (max - min) * 0.6) { %>
                <img style="<%= styles %>" width="100%" src="widgets/jqui-mfd/img/light_light_dim_60.png"/>
            <% } else if (val >= min + (max - min) * 0.5) { %>
                <img style="<%= styles %>" width="100%" src="widgets/jqui-mfd/img/light_light_dim_50.png"/>
            <% } else if (val >= min + (max - min) * 0.4) { %>
                <img style="<%= styles %>" width="100%" src="widgets/jqui-mfd/img/light_light_dim_40.png"/>
            <% } else if (val >= min + (max - min) * 0.3) { %>
                <img style="<%= styles %>" width="100%" src="widgets/jqui-mfd/img/light_light_dim_30.png"/>
            <% } else if (val >= min + (max - min) * 0.2) { %>
                <img style="<%= styles %>" width="100%" src="widgets/jqui-mfd/img/light_light_dim_20.png"/>
            <% } else if (val >= min + (max - min) * 0.1) { %>
                <img style="<%= styles %>" width="100%" src="widgets/jqui-mfd/img/light_light_dim_10.png"/>
            <% } else if (val >= min + (max - min) * 0.01) { %>
                <img style="<%= styles %>" width="100%" src="widgets/jqui-mfd/img/light_light_dim_00.png"/>
            <% } else { %>
                <img style="<%= styles %>" width="100%" src="widgets/jqui-mfd/img/light_light_dim.png"/>
            <% } %>
        </div>
        <div id="<%= this.data.attr('wid') %>_dialog" class="<%= this.data.attr('wid') %>_dialog vis-widget-dialog" title="<%== this.data.title || this.data.attr('oid') %>" style="padding-left:20px;">
            <div id="<%= this.data.attr('wid') %>_radio"  class="<%= this.data.attr('wid') %>_radio" style="text-align: center" data-oid="<%= this.data.attr('oid') %>" <%= (el) -> vis.binds.jqueryui.radio(el); %> >
                <%
                    var max = (this.data.attr('max') !== undefined) ? parseFloat(this.data.attr('max')) : 100;
                    var min = (this.data.attr('min') !== undefined) ? parseFloat(this.data.attr('min')) : 0;
                %>
                <input type="radio" id="<%= this.data.attr('wid') %>_radio0" name="<%= this.data.attr('wid') %>_radio" value="<%= min %>" checked="checked"/><label for="<%= this.data.attr('wid') %>_radio0"><%= _('off') %></label>
                <input type="radio" id="<%= this.data.attr('wid') %>_radio1" name="<%= this.data.attr('wid') %>_radio" value="<%= min + (max - min) * 0.25 %>" checked="checked"/><label for="<%= this.data.attr('wid') %>_radio1">25%</label>
                <input type="radio" id="<%= this.data.attr('wid') %>_radio2" name="<%= this.data.attr('wid') %>_radio" value="<%= min + (max - min) * 0.5  %>" checked="checked"/><label for="<%= this.data.attr('wid') %>_radio2">50%</label>
                <input type="radio" id="<%= this.data.attr('wid') %>_radio3" name="<%= this.data.attr('wid') %>_radio" value="<%= min + (max - min) * 0.75 %>" checked="checked"/><label for="<%= this.data.attr('wid') %>_radio3">75%</label>
                <input type="radio" id="<%= this.data.attr('wid') %>_radio4" name="<%= this.data.attr('wid') %>_radio" value="<%= max %>"/><label for="<%= this.data.attr('wid') %>_radio4">100%</label>
            </div>
            <br/>
            <div class="sliderJQUI" style="width: 90%" id="<%= this.data.attr('wid') %>_slider" data-oid="<%= this.data.attr('oid') %>" data-hm-wid="<%= this.data.attr('oid-working') %>" <%= (el) -> vis.binds.jqueryui.slider(el, {min: min, max: max, step: (max - min) / 100}) %> />
            <br/>
            <%= vis.states.attr(this.data.oid + '.val') ? (parseFloat(vis.states.attr(this.data.oid + '.val')) * 1/*00*/).toFixed(0) : 0 %>%
        </div>
        <div class="popup-helper" <%= (el) -> vis.binds.jqueryui.dialog(el,{width: this.data.attr('dialog_width') || 440, height: this.data.attr('dialog_height') || 200, modal: data.attr('modal')}, true) %> />
        <div class="popup-helper" <%= (el) -> if (data.attr("autoclose") === 'true' || data.attr("autoclose") === true) { vis.binds.jqueryui.dialogAutoClose(el) } %> />
    </div>
</script>

<script id="tplMfdSocket"
        type="text/ejs"
        class="vis-tpl"
        data-vis-prev='<div id="prev_tplMfdSocket" style="position: relative; text-align: initial; padding: 4px"><div class="vis-widget_prev ui-widget ui-button ui-corner-all ui-state-default" style="width: 70px; height: 70px"><div class="vis-widget-prev-body"><img width="100%" style="filter: invert(1); -webkit-filter: invert(1); -moz-filter: invert(1); -o-filter: invert(1); -ms-filter: invert(1);" src="widgets/jqui-mfd/img/message_socket_on.png"></div></div></div>'
        data-vis-set="jqui-mfd"
        data-vis-name="value - Socket"
        data-vis-attrs="oid;min;max;invert_icon/checkbox;invert_state/checkbox;asButton[true]/checkbox;icon_off/image;icon_on/image">
    <div data-oid="<%= this.data.attr('oid') %>" class="vis-widget <%= this.data.attr('asButton') ? ' ui-widget ui-button ui-corner-all ui-state-default' : '' %> <%= this.data.attr('class') %>" id="<%= this.data.attr('wid') %>" style="width:76px; height:76px; position:absolute"  <%= (el) -> vis.binds.jqueryui.active(el, this.data.invert_state) %> >
        <div class="vis-widget-body" <%= (el) -> vis.preloadImages(['widgets/jqui-mfd/img/message_socket_on.png','widgets/jqui-mfd/img/message_socket_off.png']);  %>>
        <%
        var styles = "";
        if (this.data.invert_icon === "true" || this.data.invert_icon === true) {
            styles = "filter: invert(1); -webkit-filter: invert(1); -moz-filter: invert(1); -o-filter: invert(1); -ms-filter: invert(1);";
        }

        var str = vis.states.attr(this.data.oid + '.val');
        var val = parseFloat(str);
        var max = (this.data.attr('max') !== undefined) ? this.data.attr('max') : 1;
        var min = (this.data.attr('min') !== undefined) ? this.data.attr('min') : 0;
        if (str === true  || str === 'true')  { val = max; }
        if (str === false || str === 'false') { val = min; }
        if (this.data.invert_state) {
            if (val == min) {
                val = max;
            } else {
                val = min;
            }
        }
        if (val != min) {
        %>
            <img style="<%= styles %>" width="100%" src="<%= this.data.attr('icon_on')  ? this.data.attr('icon_on')  : 'widgets/jqui-mfd/img/message_socket_on.png'  %>"/>
        <% } else { %>
            <img style="<%= styles %>" width="100%" src="<%= this.data.attr('icon_off') ? this.data.attr('icon_off') : 'widgets/jqui-mfd/img/message_socket_off.png' %>"/>
        <% } %>
    </div>
    </div>
</script>

<script id="tplMfdSocketCtrl"
        type="text/ejs"
        class="vis-tpl"
        data-vis-set="jqui-mfd"
        data-vis-name="ctrl - Socket"
        data-vis-prev='<div id="prev_tplMfdSocketCtrl" style="position: relative; text-align: initial;padding: 4px "><div class="vis-widget_prev ui-widget ui-button ui-corner-all ui-state-default  ui-state-active" style="width: 70px; height: 70px"><div class="vis-widget-prev-body"><img width="100%" style="filter: invert(1); -webkit-filter: invert(1); -moz-filter: invert(1); -o-filter: invert(1); -ms-filter: invert(1);" src="widgets/jqui-mfd/img/message_socket_on.png"></div></div></div>'
        data-vis-attrs="oid;min;max;invert_icon/checkbox;invert_state/checkbox;asButton[true]/checkbox;icon_off/image;icon_on/image">
    <div data-oid="<%= this.data.attr('oid') %>" class="vis-widget <%= this.data.attr('asButton') ? ' ui-widget ui-button ui-corner-all ui-state-default' : '' %> <%= this.data.attr('class') %>" id="<%= this.data.attr('wid') %>" style="width:76px; height:76px; position:absolute" data-min="<%= this.data.attr('min') %>" data-max="<%= this.data.attr('max') %>" <%= (el) -> vis.binds.basic.toggle(el); vis.binds.jqueryui.classes(el) %> >
    <div class="vis-widget-body" <%= (el) -> vis.preloadImages(['widgets/jqui-mfd/img/message_socket_on.png','widgets/jqui-mfd/img/message_socket_off.png']);  %>>
        <%
        var styles = "";
        if (this.data.invert_icon === "true" || this.data.invert_icon === true) {
            styles = "filter: invert(1); -webkit-filter: invert(1); -moz-filter: invert(1); -o-filter: invert(1); -ms-filter: invert(1);";
        }

        var str = vis.states.attr(this.data.oid + '.val');
        var val = parseFloat(str);
        var max = (this.data.attr('max') !== undefined) ? this.data.attr('max') : 1;
        var min = (this.data.attr('min') !== undefined) ? this.data.attr('min') : 0;
        if (str === true  || str === 'true')  { val = max; }
        if (str === false || str === 'false') { val = min; }
        if (this.data.invert_state) {
            if (val == min) {
                val = max;
            } else {
                val = min;
            }
        }
        if (val != min) {
        %>
            <img style="<%= styles %>" width="100%" src="<%= this.data.attr('icon_on')  ? this.data.attr('icon_on')  : 'widgets/jqui-mfd/img/message_socket_on.png'  %>"/>
        <% } else { %>
            <img style="<%= styles %>" width="100%" src="<%= this.data.attr('icon_off') ? this.data.attr('icon_off') : 'widgets/jqui-mfd/img/message_socket_off.png' %>"/>
        <% } %>
    </div>
    </div>
</script>

<script id="tplMfdShutter"
        type="text/ejs"
        class="vis-tpl"
        data-vis-set="jqui-mfd"
        data-vis-type="state,shutter"
        data-vis-name="Shutter"
        data-vis-prev='<div id="prev_tplMfdShutter" style="position: relative; text-align: initial;padding: 4px "><div data-oid="dev1" class="vis-widget_prev vis-widget ui-widget ui-button ui-corner-all ui-state-default" style="width: 70px; height: 70px;"><div class="vis-widget-prev-body"> <img style="filter: invert(1); -webkit-filter: invert(1); -moz-filter: invert(1); -o-filter: invert(1); -ms-filter: invert(1);" width="100%" src="widgets/jqui-mfd/img/fts_shutter_30.png"> </div></div></div>'
        data-vis-attrs="oid;min;max;invert_icon/checkbox;asButton[true]/checkbox;invert_value/checkbox;show_active/checkbox">
    <div data-oid="<%= this.data.attr('oid') %>" class="vis-widget vis-widget <%= this.data.attr('asButton') ? ' ui-widget ui-button ui-corner-all ui-state-default' : '' %> <%= this.data.attr('class') %>" id="<%= this.data.attr('wid') %>" style="width:76px; height:76px; position:absolute" <%= (el) -> this.data.attr('show_active') ? vis.binds.jqueryui.classes(el, true) : '' %>><div class="vis-widget-body">
    <%
        var styles = "";
        if (this.data.invert_icon === "true" || this.data.invert_icon === true) {
            styles = "filter: invert(1); -webkit-filter: invert(1); -moz-filter: invert(1); -o-filter: invert(1); -ms-filter: invert(1);";
        }

        var max = (this.data.attr('max') !== undefined) ? this.data.attr('max') : 100;
        var min = (this.data.attr('min') !== undefined) ? this.data.attr('min') : 0;
        var val = max - parseFloat(vis.states.attr(this.data.oid + '.val')) + min;
        if (this.data.invert_value) val = max - val + min;
    if (val >= max) { %>
        <img style="<%= styles %>" width="100%" src="widgets/jqui-mfd/img/fts_shutter_100.png"/>
    <% } else if (val >= min + (max - min) * 0.9) { %>
        <img style="<%= styles %>" width="100%" src="widgets/jqui-mfd/img/fts_shutter_90.png"/>
    <% } else if (val >= min + (max - min) * 0.8) { %>
        <img style="<%= styles %>" width="100%" src="widgets/jqui-mfd/img/fts_shutter_80.png"/>
    <% } else if (val >= min + (max - min) * 0.7) { %>
        <img style="<%= styles %>" width="100%" src="widgets/jqui-mfd/img/fts_shutter_70.png"/>
    <% } else if (val >= min + (max - min) * 0.6) { %>
        <img style="<%= styles %>" width="100%" src="widgets/jqui-mfd/img/fts_shutter_60.png"/>
    <% } else if (val >= min + (max - min) * 0.5) { %>
        <img style="<%= styles %>" width="100%" src="widgets/jqui-mfd/img/fts_shutter_50.png"/>
    <% } else if (val >= min + (max - min) * 0.4) { %>
        <img style="<%= styles %>" width="100%" src="widgets/jqui-mfd/img/fts_shutter_40.png"/>
    <% } else if (val >= min + (max - min) * 0.3) { %>
        <img style="<%= styles %>" width="100%" src="widgets/jqui-mfd/img/fts_shutter_30.png"/>
    <% } else if (val >= min + (max - min) * 0.2) { %>
        <img style="<%= styles %>" width="100%" src="widgets/jqui-mfd/img/fts_shutter_20.png"/>
    <% } else if (val >= min + (max - min) * 0.1) { %>
        <img style="<%= styles %>" width="100%" src="widgets/jqui-mfd/img/fts_shutter_10.png"/>
    <% } else { %>
        <img style="<%= styles %>" width="100%" src="widgets/jqui-mfd/img/fts_window_2w.png"/>
    <% } %>
</div></div>
</script>

<script id="tplMfdShutterDialog"
        type="text/ejs"
        class="vis-tpl"
        data-vis-set="jqui-mfd"
        data-vis-type="ctrl,shutter,dialog"
        data-vis-name="Shutter + jqui Dialog"
        data-vis-prev='<div id="prev_tplMfdShutter" style="position: relative; text-align: initial;padding: 4px "><div data-oid="dev1" class="vis-widget_prev vis-widget ui-widget ui-button ui-corner-all ui-state-default  ui-state-active" style="width: 70px; height: 70px;"><div class="vis-widget-prev-body"> <img style="filter: invert(1); -webkit-filter: invert(1); -moz-filter: invert(1); -o-filter: invert(1); -ms-filter: invert(1);" width="100%" src="widgets/jqui-mfd/img/fts_shutter_30.png"> </div></div></div>'
        data-vis-attrs="oid;oid-working;min;max;invert_icon/checkbox;asButton[true]/checkbox;invert_value/checkbox;show_active/checkbox;"
        data-vis-attrs0="group.dialog;title;autoclose/checkbox;modal/checkbox;dialog_width;dialog_height" >
    <div data-oid="<%= this.data.attr('oid') %>" data-hm-wid="<%= this.data.attr('oid-working') %>" class="vis-widget <%= this.data.attr('asButton') ? ' ui-widget ui-button ui-corner-all ui-state-default' : '' %> <%= this.data.attr('class') %>" id="<%= this.data.attr('wid') %>" style="width:76px; height:76px; position:absolute" <%= (el) -> this.data.attr('show_active') ? vis.binds.jqueryui.classes(el, true) : '' %>>
        <div id="<%= this.data.attr('wid') %>_body" class="vis-widget-body" style="width:100%; height:100%" <%= (el) -> vis.preloadImages(['widgets/jqui-mfd/img/light_light_dim_100.png','widgets/jqui-mfd/img/light_light_dim_90.png','widgets/jqui-mfd/img/light_light_dim_80.png','widgets/jqui-mfd/img/light_light_dim_70.png','widgets/jqui-mfd/img/light_light_dim_60.png','widgets/jqui-mfd/img/light_light_dim_50.png','widgets/jqui-mfd/img/light_light_dim_40.png','widgets/jqui-mfd/img/light_light_dim_30.png','widgets/jqui-mfd/img/light_light_dim_20.png','widgets/jqui-mfd/img/light_light_dim_10.png','widgets/jqui-mfd/img/light_light_dim.png']); %>>
        <%
            var styles = "";
            if (this.data.invert_icon === "true" || this.data.invert_icon === true) {
                styles = "filter: invert(1); -webkit-filter: invert(1); -moz-filter: invert(1); -o-filter: invert(1); -ms-filter: invert(1);";
            }
            var max = (this.data.attr('max') !== undefined) ? this.data.attr('max') : 100;
            var min = (this.data.attr('min') !== undefined) ? this.data.attr('min') : 0;
            var val = max - parseFloat(vis.states.attr(this.data.oid + '.val'));

            if (this.data.attr('invert_value')) val = max - val + min;

            if (val >= max) {
        %>
            <img style="<%= styles %>" width="100%" src="widgets/jqui-mfd/img/fts_shutter_100.png"/>
        <% } else if (val >= min + (max - min) * 0.9) { %>
            <img style="<%= styles %>" width="100%" src="widgets/jqui-mfd/img/fts_shutter_90.png"/>
        <% } else if (val >= min + (max - min) * 0.8) { %>
            <img style="<%= styles %>" width="100%" src="widgets/jqui-mfd/img/fts_shutter_80.png"/>
        <% } else if (val >= min + (max - min) * 0.7) { %>
            <img style="<%= styles %>" width="100%" src="widgets/jqui-mfd/img/fts_shutter_70.png"/>
        <% } else if (val >= min + (max - min) * 0.6) { %>
            <img style="<%= styles %>" width="100%" src="widgets/jqui-mfd/img/fts_shutter_60.png"/>
        <% } else if (val >= min + (max - min) * 0.5) { %>
            <img style="<%= styles %>" width="100%" src="widgets/jqui-mfd/img/fts_shutter_50.png"/>
        <% } else if (val >= min + (max - min) * 0.4) { %>
            <img style="<%= styles %>" width="100%" src="widgets/jqui-mfd/img/fts_shutter_40.png"/>
        <% } else if (val >= min + (max - min) * 0.3) { %>
            <img style="<%= styles %>" width="100%" src="widgets/jqui-mfd/img/fts_shutter_30.png"/>
        <% } else if (val >= min + (max - min) * 0.2) { %>
            <img style="<%= styles %>" width="100%" src="widgets/jqui-mfd/img/fts_shutter_20.png"/>
        <% } else if (val >= min + (max - min) * 0.1) { %>
            <img style="<%= styles %>" width="100%" src="widgets/jqui-mfd/img/fts_shutter_10.png"/>
        <% } else { %>
            <img style="<%= styles %>" width="100%" src="widgets/jqui-mfd/img/fts_window_2w.png"/>
        <% } %>
        </div>
        <div id="<%= this.data.attr('wid') %>_dialog" class="<%= this.data.attr('wid') %>_dialog vis-widget-dialog" title="<%== this.data.title || this.data.attr('oid') %>" style="padding-left: 20px;">
            <div id="<%= this.data.attr('wid') %>_radio"  class="<%= this.data.attr('wid') %>_radio" style="text-align: center" data-oid="<%= this.data.attr('oid') %>" <%= (el) -> vis.binds.jqueryui.radio(el); %> >
                <%
                    var max = (this.data.attr('max') !== undefined) ? this.data.attr('max') : 100;
                    var min = (this.data.attr('min') !== undefined) ? this.data.attr('min') : 0;
                %>
                <input type="radio" id="<%= this.data.attr('wid') %>_radio0" name="<%= this.data.attr('wid') %>_radio" value="<%= !this.data.attr('invert_value') ? min : max                                           %>" checked="checked"/><label for="<%= this.data.attr('wid') %>_radio0"><%= _('closed') %></label>
                <input type="radio" id="<%= this.data.attr('wid') %>_radio1" name="<%= this.data.attr('wid') %>_radio" value="<%= !this.data.attr('invert_value') ? min + (max - min) * 0.25 : min + (max - min) * 0.75 %>" checked="checked"/><label for="<%= this.data.attr('wid') %>_radio1">25%</label>
                <input type="radio" id="<%= this.data.attr('wid') %>_radio2" name="<%= this.data.attr('wid') %>_radio" value="<%=                                   min + (max - min) * 0.5                             %>" checked="checked"/><label for="<%= this.data.attr('wid') %>_radio2">50%</label>
                <input type="radio" id="<%= this.data.attr('wid') %>_radio3" name="<%= this.data.attr('wid') %>_radio" value="<%= !this.data.attr('invert_value') ? min + (max - min) * 0.75 : min + (max - min) * 0.25 %>" checked="checked"/><label for="<%= this.data.attr('wid') %>_radio3">75%</label>
                <input type="radio" id="<%= this.data.attr('wid') %>_radio4" name="<%= this.data.attr('wid') %>_radio" value="<%= !this.data.attr('invert_value') ? max : min                                           %>"/><label for="<%= this.data.attr('wid') %>_radio4"><%= _('open') %></label>
            </div>
            <br/>
            <div class="sliderJQUI" style="width: 90%" id="<%= this.data.attr('wid') %>_slider" data-oid="<%= this.data.attr('oid') %>" data-hm-wid="<%= this.data.attr('oid-working') %>" <%= (el) -> vis.binds.jqueryui.slider(el, {min: min, max: max, step: (max - min) / 100, inverted: this.data.attr('invert_value')}) %> />
            <br/>
            <%= vis.states.attr(this.data.oid + '.val') ? parseFloat(vis.states.attr(this.data.oid + '.val')).toFixed(0) : 0 %>%
        </div>
        <div class="popup-helper" <%= (el) -> vis.binds.jqueryui.dialog(el, {width: this.data.attr('dialog_width') || 440, height: this.data.attr('dialog_height') || 200, modal: data.attr('modal')}, true) %> />
        <div class="popup-helper" <%= (el) -> if (data.attr("autoclose") === 'true' || data.attr("autoclose") === true) { vis.binds.jqueryui.dialogAutoClose(el) } %> />
    </div>
</script>

<script id="tplMfdHeating"
        type="text/ejs"
        class="vis-tpl"
        data-vis-set="jqui-mfd"
        data-vis-prev='<div id="prev_tplMfdHeating" style="position: relative; text-align: initial;padding: 4px"><div class="vis-widget_prev ui-widget ui-button ui-corner-all ui-state-default " style="width: 70px; height: 70px;"> <div class="vis-widget-prev-body" style="width:100%; height:100%"> <img style="filter: invert(1); -webkit-filter: invert(1); -moz-filter: invert(1); -o-filter: invert(1); -ms-filter: invert(1);" src="widgets/jqui-mfd/img/sani_heating_temp.png" width="100%"> </div></div>'
        data-vis-set="ctrl,heating,dialog"
        data-vis-name="ctrl - Heating + jqui Dialog"
        data-vis-attrs="oid;oid-working;invert_icon/checkbox;asButton[true]/checkbox;"
        data-vis-attrs0="group.dialog;title;autoclose/checkbox;modal/checkbox;dialog_width;dialog_height"
        >
    <div data-oid="<%= this.data.attr('oid') %>" class="vis-widget <%= this.data.attr('asButton') ? ' ui-widget ui-button ui-corner-all ui-state-default' : '' %> <%= this.data.attr('class') %>" id="<%= this.data.attr('wid') %>" style="width:76px; height:76px; position:absolute" >
    <div id="<%= this.data.attr('wid') %>_body" class="vis-widget-body" style="width:100%; height:100%">
        <%
        var styles = "";
        if (this.data.invert_icon === "true" || this.data.invert_icon === true) {
        styles = "filter: invert(1); -webkit-filter: invert(1); -moz-filter: invert(1); -o-filter: invert(1); -ms-filter: invert(1);";
        }
        %>
        <img style="<%= styles %>" src="widgets/jqui-mfd/img/sani_heating_temp.png" width="100%"/>
    </div>
    <div id="<%= this.data.attr('wid') %>_dialog" class="<%= this.data.attr('wid') %>_dialog vis-widget-dialog" title="<%== this.data.title || this.data.attr('oid') %>" style="padding-left:20px;">
        <div id="<%= this.data.attr('wid') %>_radio"  class="<%= this.data.attr('wid') %>_radio" style="text-align: center" data-oid="<%= this.data.attr('oid') %>" <%= (el) -> vis.binds.jqueryui.radio(el); %> >
            <input type="radio" id="<%= this.data.attr('wid') %>_radio1" name="<%= this.data.attr('wid') %>_radio" value="6" /><label for="<%= this.data.attr('wid') %>_radio1">6°</label>
            <input type="radio" id="<%= this.data.attr('wid') %>_radio2" name="<%= this.data.attr('wid') %>_radio" value="12"/><label for="<%= this.data.attr('wid') %>_radio2">12°</label>
            <input type="radio" id="<%= this.data.attr('wid') %>_radio3" name="<%= this.data.attr('wid') %>_radio" value="16"/><label for="<%= this.data.attr('wid') %>_radio3">16°</label>
            <input type="radio" id="<%= this.data.attr('wid') %>_radio5" name="<%= this.data.attr('wid') %>_radio" value="18"/><label for="<%= this.data.attr('wid') %>_radio5">18°</label>
            <input type="radio" id="<%= this.data.attr('wid') %>_radio6" name="<%= this.data.attr('wid') %>_radio" value="19"/><label for="<%= this.data.attr('wid') %>_radio6">19°</label>
            <input type="radio" id="<%= this.data.attr('wid') %>_radio7" name="<%= this.data.attr('wid') %>_radio" value="20"/><label for="<%= this.data.attr('wid') %>_radio7">20°</label>
            <input type="radio" id="<%= this.data.attr('wid') %>_radio8" name="<%= this.data.attr('wid') %>_radio" value="21"/><label for="<%= this.data.attr('wid') %>_radio8">21°</label>
            <input type="radio" id="<%= this.data.attr('wid') %>_radio9" name="<%= this.data.attr('wid') %>_radio" value="22"/><label for="<%= this.data.attr('wid') %>_radio9">22°</label>
        </div>
        <br/>
        <div class="sliderJQUI" style="width:90%" id="<%= this.data.attr('wid') %>_slider" data-oid="<%= this.data.attr('oid') %>" data-hm-wid="<%= this.data.attr('oid-working') %>" <%= (el) -> vis.binds.jqueryui.slider(el, {min: 6, max: 30,step: 0.1}) %> />
            <br/>
            <%= (parseFloat(vis.states.attr(this.data.oid + '.val'))).toFixed(1) %>°C
        </div>
        <div class="popup-helper" <%= (el) -> vis.binds.jqueryui.dialog(el,{width: this.data.attr('dialog_width') || 600, height: this.data.attr('dialog_height') || 200, modal: data.attr("modal")},true) %> />
        <div class="popup-helper" <%= (el) -> if (data.attr("autoclose") === 'true' || data.attr("autoclose") === true) { vis.binds.jqueryui.dialogAutoClose(el) } %> />
    </div>
</script>

<script id="tplMfdWindow"
        type="text/ejs"
        class="vis-tpl"
        data-vis-set="jqui-mfd"
        data-vis-type="val,window"
        data-vis-name="Window Rotate Handle"
        data-vis-prev='<div id="prev_tplMfdWindow" style="position: relative; text-align: initial;padding: 4px "><div class="vis-widget_prev ui-widget ui-button ui-corner-all ui-state-default" style="height: 70px; width: 70px;"> <div class="vis-widget-prev-body"> <img style="filter: invert(1); -webkit-filter: invert(1); -moz-filter: invert(1); -o-filter: invert(1); -ms-filter: invert(1);" height="100%" src="widgets/jqui-mfd/img/fts_window_1w_open.png"> </div> </div></div>'
        data-vis-attrs="oid;invert_icon/checkbox;asButton[true]/checkbox;"
        data-vis-attrs0="group.values;closed_value;tilted_value;opened_value;"
        data-vis-attrs1="group.icons;closed_icon;tilted_icon;opened_icon;"
        >
    <div class="vis-widget <%= this.data.attr('asButton') ? ' ui-widget ui-button ui-corner-all ui-state-default' : '' %> <%= this.data.attr('class') %>" id="<%= this.data.attr('wid') %>" data-oid="<%= this.data.attr('oid') %>" style="height:76px; width:76px; position:absolute" data-min="<%= this.data.attr('closed_value') %>" data-max="<%= this.data.attr('opened_value') %>" <%= (el) -> vis.binds.jqueryui.active(el) %> >
        <div class="vis-widget-body">
            <%
            var styles = "";
            if (this.data.invert_icon === "true" || this.data.invert_icon === true) {
                styles = "filter: invert(1); -webkit-filter: invert(1); -moz-filter: invert(1); -o-filter: invert(1); -ms-filter: invert(1);";
            }

            var opened = this.data.attr('opened_value');
            if (opened === undefined || opened === '') opened = 2;

            var closed = this.data.attr('closed_value');
            if (closed === undefined || closed === '') closed = 0;

            var tilted = this.data.attr('tilted_value');
            if (tilted === undefined || tilted === '') tilted = 1;

            var val = vis.states.attr(this.data.oid + '.val');
            if (val === 'true'  || val === true)  val = opened;
            if (val === 'false' || val === false) val = closed;

            if (val == closed) {
            %>
                <img style="<%= styles %>" height="100%" src="<%= this.data.attr('closed_icon') ? this.data.attr('closed_icon')  : 'widgets/jqui-mfd/img/fts_window_1w.png' %>"/>
            <% } else if (val == tilted) { %>
                <img style="<%= styles %>" height="100%" src="<%= this.data.attr('tilted_icon') ? this.data.attr('tilted_icon')  : 'widgets/jqui-mfd/img/fts_window_1w_tilt.png' %>"/>
            <% } else { %>
                <img style="<%= styles %>" height="100%" src="<%= this.data.attr('opened_icon') ? this.data.attr('opened_icon')  : 'widgets/jqui-mfd/img/fts_window_1w_open.png' %>"/>
            <% } %>
        </div>
    </div>
</script>

<script id="tplMfdWindowBool"
        type="text/ejs"
        class="vis-tpl"
        data-vis-set="jqui-mfd"
        data-vis-type="val,window"
        data-vis-name="Window"
        data-vis-prev='<div id="prev_tplMfdWindowBool" style="position: relative; text-align: initial;padding: 4px "><div class="vis-widget_prev ui-widget ui-button ui-corner-all ui-state-default ui-state-active" style="height: 70px; width: 70px;"> <div class="vis-widget-prev-body"> <img style="filter: invert(1); -webkit-filter: invert(1); -moz-filter: invert(1); -o-filter: invert(1); -ms-filter: invert(1);" height="100%" src="widgets/jqui-mfd/img/fts_window_1w_open.png"></div></div></div>'
        data-vis-attrs="oid;invert_icon/checkbox;invert_state/checkbox;asButton[true]/checkbox;"
        data-vis-attrs0="group.values;closed_value;opened_value;"
        >
    <div class="vis-widget <%= this.data.attr('asButton') ? ' ui-widget ui-button ui-corner-all ui-state-default' : '' %> <%= this.data.attr('class') %>" id="<%= this.data.attr('wid') %>" data-oid="<%= this.data.attr('oid') %>" style="height:76px; width:76px; position:absolute" data-min="<%= this.data.attr('closed_value') %>" data-max="<%= this.data.attr('opened_value') %>" <%= (el) -> vis.binds.jqueryui.active(el, this.data.invert_state) %> >
        <div class="vis-widget-body">
            <%
            var styles = "";
            if (this.data.invert_icon === "true" || this.data.invert_icon === true) {
                 styles = "filter: invert(1); -webkit-filter: invert(1); -moz-filter: invert(1); -o-filter: invert(1); -ms-filter: invert(1);";
            }

            var opened = this.data.attr('opened_value');
            var closed = this.data.attr('closed_value');

            var val = vis.states.attr(this.data.oid + '.val');

            if (opened === undefined || opened === '' || opened === null) {
                opened = 1;
                closed = 0;

                if (val === 'true'  || val === true)  val = opened;
                if (val === 'false' || val === false) val = closed;

                val = parseFloat(val) || 0;
                val = (val > closed) ? opened : closed;
            }
            if (this.data.invert_state) {
                if (val == opened) {
                    val = closed;
                } else {
                    val = opened;
                }
            }

            if (val != opened) { %>
                <img style="<%= styles %>" height="100%" src="widgets/jqui-mfd/img/fts_window_1w.png"/>
            <% } else { %>
                <img style="<%= styles %>" height="100%" src="widgets/jqui-mfd/img/fts_window_1w_open.png"/>
            <% } %>
        </div>
    </div>
</script>

<script id="tplMfdRoofWindowBool"
        type="text/ejs"
        class="vis-tpl"
        data-vis-set="jqui-mfd"
        data-vis-type="val,window"
        data-vis-prev='<div id="prev_tplMfdRoofWindowBool" style="position: relative; text-align: initial;padding: 4px "><div class="vis-widget_prev ui-widget ui-button ui-corner-all ui-state-default" style="height: 70px; width: 70px;"> <div class="vis-widget-prev-body"> <img style="filter: invert(1); -webkit-filter: invert(1); -moz-filter: invert(1); -o-filter: invert(1); -ms-filter: invert(1);" height="100%" src="widgets/jqui-mfd/img/fts_window_roof.png"> </div> </div></div>'
        data-vis-name="Roof window"
        data-vis-attrs="oid;invert_icon/checkbox;invert_state/checkbox;asButton[true]/checkbox;"
        data-vis-attrs0="group.values;closed_value;opened_value;"
        >
    <div class="vis-widget <%= this.data.attr('asButton') ? ' ui-widget ui-button ui-corner-all ui-state-default' : '' %> <%= this.data.attr('class') %>" id="<%= this.data.attr('wid') %>" data-oid="<%= this.data.attr('oid') %>" style="height:76px; width:76px; position:absolute" data-min="<%= this.data.attr('closed_value') %>" data-max="<%= this.data.attr('opened_value') %>" <%= (el) -> vis.binds.jqueryui.active(el, this.data.invert_state) %> >
        <div class="vis-widget-body">
            <%
            var styles = "";
            if (this.data.invert_icon === "true" || this.data.invert_icon === true) {
                styles = "filter: invert(1); -webkit-filter: invert(1); -moz-filter: invert(1); -o-filter: invert(1); -ms-filter: invert(1);";
            }
            var opened = this.data.attr('opened_value');
            var closed = this.data.attr('closed_value');

            var val = vis.states.attr(this.data.oid + '.val');

            if (opened === undefined || opened === '' || opened === null) {
                opened = 1;
                closed = 0;

                if (val === 'true'  || val === true)  val = opened;
                if (val === 'false' || val === false) val = closed;

                val = parseFloat(val) || 0;
                val = (val > closed) ? opened : closed;
            }
            if (this.data.invert_state) {
                if (val == opened) {
                    val = closed;
                } else {
                    val = opened;
                }
            }
            if (val != opened) { %>
                <img style="<%= styles %>" height="100%" src="widgets/jqui-mfd/img/fts_window_roof.png"/>
            <% } else { %>
                <img style="<%= styles %>" height="100%" src="widgets/jqui-mfd/img/fts_window_roof_open_2.png"/>
            <% } %>
        </div>
    </div>
</script>

<script id="tplMfdDoor"
        type="text/ejs"
        class="vis-tpl"
        data-vis-set="jqui-mfd"
        data-vis-name="val - Door"
        data-vis-prev='<div id="prev_tplMfdDoor" style="position: relative; text-align: initial;padding: 4px "><div class="vis-widget_prev ui-widget ui-button ui-corner-all ui-state-default" style="height: 76px; width: 76px"> <div class="vis-widget-prev-body"> <img style="filter: invert(1); -webkit-filter: invert(1); -moz-filter: invert(1); -o-filter: invert(1); -ms-filter: invert(1);" height="100%" src="widgets/jqui-mfd/img/fts_door.png"> </div> </div></div>'
        data-vis-attrs="oid;invert_icon/checkbox;invert_state/checkbox;asButton[true]/checkbox;"
        data-vis-attrs0="group.values;closed_value;opened_value;"
        >
    <div data-oid="<%= this.data.attr('oid') %>" class="vis-widget <%= this.data.attr('asButton') ? ' ui-widget ui-button ui-corner-all ui-state-default' : '' %> <%= this.data.attr('class') %>" id="<%= this.data.attr('wid') %>" style="height:76px; width:76px; position:absolute"  data-min="<%= this.data.attr('closed_value') %>" data-max="<%= this.data.attr('opened_value') %>" <%= (el) -> vis.binds.jqueryui.active(el, this.data.invert_state) %>>
        <div class="vis-widget-body">
            <%
            var styles = "";
            if (this.data.invert_icon === "true" || this.data.invert_icon === true) {
                styles = "filter: invert(1); -webkit-filter: invert(1); -moz-filter: invert(1); -o-filter: invert(1); -ms-filter: invert(1);";
            }
            var opened = this.data.attr('opened_value');
            var closed = this.data.attr('closed_value');

            var val = vis.states.attr(this.data.oid + '.val');

            if (opened === undefined || opened === '' || opened === null) {
                opened = 1;
                closed = 0;

                if (val === 'true'  || val === true)  val = opened;
                if (val === 'false' || val === false) val = closed;

                val = parseFloat(val) || 0;
                val = (val > closed) ? opened : closed;
            }
            if (this.data.invert_state) {
                if (val == opened) {
                    val = closed;
                } else {
                    val = opened;
                }
            }
            if (val != opened) { %>
                <img style="<%= styles %>" height="100%" src="widgets/jqui-mfd/img/fts_door.png"/>
            <% } else { %>
                <img style="<%= styles %>" height="100%" src="widgets/jqui-mfd/img/fts_door_open.png"/>
            <% } %>
        </div>
    </div>
</script>

<script id="tplMfdGarage"
        type="text/ejs"
        class="vis-tpl"
        data-vis-set="jqui-mfd"
        data-vis-name="val - Garage"
        data-vis-prev='<div id="prev_tplMfdGarage" style="position: relative; text-align: initial;padding: 4px "><div class="vis-widget_prev ui-widget ui-button ui-corner-all ui-state-default" style="height: 76px; width: 76px;"><div class="vis-widget-prev-body"><img style="filter: invert(1); -webkit-filter: invert(1); -moz-filter: invert(1); -o-filter: invert(1); -ms-filter: invert(1);" height="100%" src="widgets/jqui-mfd/img/fts_garage_door_100.png"></div></div></div>'
        data-vis-attrs="oid;invert_icon/checkbox;invert_state/checkbox;asButton[true]/checkbox;"
        data-vis-attrs0="group.values;closed_value;opened_value;"
        >
    <div data-oid="<%= this.data.attr('oid') %>" class="vis-widget <%= this.data.attr('asButton') ? ' ui-widget ui-button ui-corner-all ui-state-default' : '' %> <%= this.data.attr('class') %>" id="<%= this.data.attr('wid') %>" style="height:76px; width:76px; position:absolute" data-min="<%= this.data.attr('closed_value') %>" data-max="<%= this.data.attr('opened_value') %>" <%= (el) -> vis.binds.jqueryui.active(el, this.data.invert_state) %>>
        <div class="vis-widget-body">
            <%
            var styles = "";
            if (this.data.invert_icon === "true" || this.data.invert_icon === true) {
                styles = "filter: invert(1); -webkit-filter: invert(1); -moz-filter: invert(1); -o-filter: invert(1); -ms-filter: invert(1);";
            }

            var opened = this.data.attr('opened_value');
            var closed = this.data.attr('closed_value');

            var val = vis.states.attr(this.data.oid + '.val');

            if (opened === undefined || opened === '' || opened === null) {
                opened = 1;
                closed = 0;

                if (val === 'true'  || val === true)  val = opened;
                if (val === 'false' || val === false) val = closed;

                val = parseFloat(val) || 0;
                val = (val > closed) ? opened : closed;
            }
            if (this.data.invert_state) {
                if (val == opened) {
                    val = closed;
                } else {
                    val = opened;
                }
            }

            if (val != opened) { %>
                <img style="<%= styles %>" height="100%" src="widgets/jqui-mfd/img/fts_garage_door_100.png"/>
            <% } else { %>
                <img style="<%= styles %>" height="100%" src="widgets/jqui-mfd/img/fts_garage_door_10.png"/>
            <% } %>
        </div>
    </div>
</script>

<!--script id="tplMfdHueDimmerDialog"
        type="text/ejs"
        class="vis-tpl"
        data-vis-set="jqui-mfd"
        data-vis-name="hue_ctrl - jqui Dialog HUE_DIMMABLE_LIGHT"
        data-vis-attrs="oid;title;autoclose/checkbox;modal/checkbox;invert_icon/checkbox"
        >
    <%
    var styles = "";
    if (this.data.invert_icon === "true" || this.data.invert_icon === true) {
        styles = "filter: invert(1); -webkit-filter: invert(1); -moz-filter: invert(1); -o-filter: invert(1); -ms-filter: invert(1);";
    }

    if (!localData.metaObjects[this.data.oid] || (localData.metaObjects[this.data.oid].HssType != "HUE_DIMMABLE_PLUG-IN_UNIT" && localData.metaObjects[this.data.oid].HssType != "HUE_DIMMABLE_LIGHT")) {
        console.log("Widget "+this.data.attr('wid')+" error! ID has to be HUE_DIMMABLE_LIGHT/HUE_DIMMABLE_PLUG-IN_UNIT Channel!");
    }

    if (localData.metaObjects[this.data.oid] && localData.metaObjects[this.data.oid].DPs) {
        var hueIDs = {
            STATE: localData.metaObjects[this.data.oid].DPs.STATE || 'nothing_selected',
            LEVEL: localData.metaObjects[this.data.oid].DPs.LEVEL || 'nothing_selected',
        };
    } else {
        var hueIDs = {
            STATE: 'nothing_selected',
            LEVEL: 'nothing_selected',
        };
    }

    %>
    <div data-oid="<%= hueIDs.STATE %>" class="vis-widget <%= this.data.attr('asButton') ? ' ui-widget ui-button ui-corner-all ui-state-default' : '' %> <%= this.data.attr('class') %>" id="<%= this.data.attr('wid') %>" style="width:76px; height:76px; position:absolute" <%= (el) -> vis.binds.jqueryui.classes(el) %>>
    <div id="<%= this.data.attr('wid') %>_body" class="vis-widget-body" style="width:100%; height:100%" <%= (el) -> vis.preloadImages(['widgets/jqui-mfd/img/light_light_dim_100.png','widgets/jqui-mfd/img/light_light_dim_90.png','widgets/jqui-mfd/img/light_light_dim_80.png','widgets/jqui-mfd/img/light_light_dim_70.png','widgets/jqui-mfd/img/light_light_dim_60.png','widgets/jqui-mfd/img/light_light_dim_50.png','widgets/jqui-mfd/img/light_light_dim_40.png','widgets/jqui-mfd/img/light_light_dim_30.png','widgets/jqui-mfd/img/light_light_dim_20.png','widgets/jqui-mfd/img/light_light_dim_10.png','widgets/jqui-mfd/img/light_light_dim.png']); %>>
    <%
    var str = vis.states.attr(hueIDs.LEVEL + '.val');
    var val = (parseFloat(str) + 1) / 255;

    if (val == 1) {
    %>
    <img style="<%= styles %>" width="100%" src="widgets/jqui-mfd/img/light_light_dim_100.png"/>
    <% } else if (val >= 0.9) { %>
    <img style="<%= styles %>" width="100%" src="widgets/jqui-mfd/img/light_light_dim_90.png"/>
    <% } else if (val >= 0.8) { %>
    <img style="<%= styles %>" width="100%" src="widgets/jqui-mfd/img/light_light_dim_80.png"/>
    <% } else if (val >= 0.7) { %>
    <img style="<%= styles %>" width="100%" src="widgets/jqui-mfd/img/light_light_dim_70.png"/>
    <% } else if (val >= 0.6) { %>
    <img style="<%= styles %>" width="100%" src="widgets/jqui-mfd/img/light_light_dim_60.png"/>
    <% } else if (val >= 0.5) { %>
    <img style="<%= styles %>" width="100%" src="widgets/jqui-mfd/img/light_light_dim_50.png"/>
    <% } else if (val >= 0.4) { %>
    <img style="<%= styles %>" width="100%" src="widgets/jqui-mfd/img/light_light_dim_40.png"/>
    <% } else if (val >= 0.3) { %>
    <img style="<%= styles %>" width="100%" src="widgets/jqui-mfd/img/light_light_dim_30.png"/>
    <% } else if (val >= 0.2) { %>
    <img style="<%= styles %>" width="100%" src="widgets/jqui-mfd/img/light_light_dim_20.png"/>
    <% } else if (val >= 0.1) { %>
    <img style="<%= styles %>" width="100%" src="widgets/jqui-mfd/img/light_light_dim_10.png"/>
    <% } else if (val >= 0.01) { %>
    <img style="<%= styles %>" width="100%" src="widgets/jqui-mfd/img/light_light_dim_00.png"/>
    <% } else { %>
    <img style="<%= styles %>" width="100%" src="widgets/jqui-mfd/img/light_light_dim.png"/>
    <% } %>
    </div>
    <div id="<%= this.data.attr('wid') %>_dialog" class="vis-widget-dialog" title="<%== this.data.title || this.data.attr('oid') %>" style="padding-left:20px;">

        <br/>
        <span id="<%= this.data.attr('wid') %>_radio"  data-oid="<%= hueIDs.STATE %>" <%= (el) -> vis.binds.jqueryui.radio(el); %> >
        <input type="radio" id="<%= this.data.attr('wid') %>_radio_off" name="<%= this.data.attr('wid') %>_radio" value="false" checked="checked"/><label for="<%= this.data.attr('wid') %>_radio_off"><%= _('off') %></label>
        <input type="radio" id="<%= this.data.attr('wid') %>_radio_on" name="<%= this.data.attr('wid') %>_radio" value="true"/><label for="<%= this.data.attr('wid') %>_radio_on"><%= _('on') %></label>
        </span>



        <br/><br/>
        Helligkeit
        <div class="sliderJQUI" style="width:90%" id="<%= this.data.attr('wid') %>_slider" data-oid="<%= hueIDs.LEVEL %>" data-hm-wid="<%= this.data.attr('oid-working') %>" <%= (el) -> vis.binds.jqueryui.slider(el, {min:0,max:255,step:1}) %> />


    </div>
    <div class="popup-helper" <%= (el) -> vis.binds.jqueryui.dialog(el,{width:440,height:320,modal:data.attr('modal')},true) %> />
    <div class="popup-helper" <%= (el) -> if (data.attr("autoclose") === 'true' || data.attr("autoclose") === true) { vis.binds.jqueryui.dialogAutoClose(el) } %> />
    </div>
</script>

<script id="tplMfdLivingColorDialog"
        type="text/ejs"
        class="vis-tpl"
        data-vis-set="jqui-mfd"
        data-vis-name="hue_ctrl - jqui Dialog HUE_COLOR_LIGHT"
        data-vis-attrs="oid;title;autoclose/checkbox;modal/checkbox;invert_icon/checkbox" >
    <%
    var styles = "";
    if (this.data.invert_icon === "true" || this.data.invert_icon === true) {
        styles = "filter: invert(1); -webkit-filter: invert(1); -moz-filter: invert(1); -o-filter: invert(1); -ms-filter: invert(1);";
    }

    if (!localData.metaObjects[this.data.oid] || localData.metaObjects[this.data.oid].HssType != "HUE_COLOR_LIGHT") {
        console.log("Widget "+this.data.attr('wid')+" error! ID has to be HUE_COLOR_LIGHT Channel!");
    }

    if (localData.metaObjects[this.data.oid] && localData.metaObjects[this.data.oid].DPs) {
        var hueIDs = {
            STATE: localData.metaObjects[this.data.oid].DPs.STATE || 'nothing_selected',
            LEVEL: localData.metaObjects[this.data.oid].DPs.LEVEL || 'nothing_selected',
            SAT:   localData.metaObjects[this.data.oid].DPs.SAT || 'nothing_selected',
            HUE:   localData.metaObjects[this.data.oid].DPs.HUE || 'nothing_selected',
        };
    } else {
        var hueIDs = {
            STATE: 'nothing_selected',
            LEVEL: 'nothing_selected',
            SAT:   'nothing_selected',
            HUE:   'nothing_selected',
        };
    }
    %>
    <div data-oid="<%= hueIDs.STATE %>" class="vis-widget <%= this.data.attr('asButton') ? ' ui-widget ui-button ui-corner-all ui-state-default' : '' %> <%= this.data.attr('class') %>" id="<%= this.data.attr('wid') %>" style="width:76px; height:76px; position:absolute" <%= (el) -> vis.binds.jqueryui.classes(el) %>>
    <div id="<%= this.data.attr('wid') %>_body" class="vis-widget-body" style="width:100%; height:100%" <%= (el) -> vis.preloadImages(['widgets/jqui-mfd/img/light_light_dim_100.png','widgets/jqui-mfd/img/light_light_dim_90.png','widgets/jqui-mfd/img/light_light_dim_80.png','widgets/jqui-mfd/img/light_light_dim_70.png','widgets/jqui-mfd/img/light_light_dim_60.png','widgets/jqui-mfd/img/light_light_dim_50.png','widgets/jqui-mfd/img/light_light_dim_40.png','widgets/jqui-mfd/img/light_light_dim_30.png','widgets/jqui-mfd/img/light_light_dim_20.png','widgets/jqui-mfd/img/light_light_dim_10.png','widgets/jqui-mfd/img/light_light_dim.png']); %>>
    <%
    var str = vis.states.attr(hueIDs.LEVEL + '.val');
    var val = (parseFloat(str) + 1) / 255;

    if (val == 1) {
    %>
    <img style="<%= styles %>" width="100%" src="widgets/jqui-mfd/img/light_light_dim_100.png"/>
    <% } else if (val >= 0.9) { %>
    <img style="<%= styles %>" width="100%" src="widgets/jqui-mfd/img/light_light_dim_90.png"/>
    <% } else if (val >= 0.8) { %>
    <img style="<%= styles %>" width="100%" src="widgets/jqui-mfd/img/light_light_dim_80.png"/>
    <% } else if (val >= 0.7) { %>
    <img style="<%= styles %>" width="100%" src="widgets/jqui-mfd/img/light_light_dim_70.png"/>
    <% } else if (val >= 0.6) { %>
    <img style="<%= styles %>" width="100%" src="widgets/jqui-mfd/img/light_light_dim_60.png"/>
    <% } else if (val >= 0.5) { %>
    <img style="<%= styles %>" width="100%" src="widgets/jqui-mfd/img/light_light_dim_50.png"/>
    <% } else if (val >= 0.4) { %>
    <img style="<%= styles %>" width="100%" src="widgets/jqui-mfd/img/light_light_dim_40.png"/>
    <% } else if (val >= 0.3) { %>
    <img style="<%= styles %>" width="100%" src="widgets/jqui-mfd/img/light_light_dim_30.png"/>
    <% } else if (val >= 0.2) { %>
    <img style="<%= styles %>" width="100%" src="widgets/jqui-mfd/img/light_light_dim_20.png"/>
    <% } else if (val >= 0.1) { %>
    <img style="<%= styles %>" width="100%" src="widgets/jqui-mfd/img/light_light_dim_10.png"/>
    <% } else if (val >= 0.01) { %>
    <img style="<%= styles %>" width="100%" src="widgets/jqui-mfd/img/light_light_dim_00.png"/>
    <% } else { %>
    <img style="<%= styles %>" width="100%" src="widgets/jqui-mfd/img/light_light_dim.png"/>
    <% } %>
    </div>
    <div id="<%= this.data.attr('wid') %>_dialog" class="vis-widget-dialog" title="<%== this.data.title || this.data.attr('oid') %>" style="padding-left:20px;">

        <br/>
        <span id="<%= this.data.attr('wid') %>_radio"  data-oid="<%= hueIDs.STATE %>" <%= (el) -> vis.binds.jqueryui.radio(el); %> >
        <input type="radio" id="<%= this.data.attr('wid') %>_radio_off" name="<%= this.data.attr('wid') %>_radio" value="false" checked="checked"/><label for="<%= this.data.attr('wid') %>_radio_off"><%= _('off') %></label>
        <input type="radio" id="<%= this.data.attr('wid') %>_radio_on" name="<%= this.data.attr('wid') %>_radio" value="true"/><label for="<%= this.data.attr('wid') %>_radio_on"><%= _('on') %></label>
        </span>



        <br/><br/>
        Helligkeit
        <div class="sliderJQUI" style="width:90%" id="<%= this.data.attr('wid') %>_slider" data-oid="<%= hueIDs.LEVEL %>" data-hm-wid="<%= this.data.attr('oid-working') %>" <%= (el) -> vis.binds.jqueryui.slider(el, {min:0,max:255,step:1}) %> />
        <br/>

        <br/>
        <div class="hue-mode-hue">
            <div class="sliderJQUI hue-slider-hue" style="width:90%" id="<%= this.data.attr('wid') %>_hue_hue_slider" data-oid="<%= hueIDs.HUE %>" data-hm-wid="<%= this.data.attr('oid-working') %>" <%= (el) -> vis.binds.jqueryui.slider(el, {min:0,max:'nothing_selected',step:1}) %> />
            <br/>
            Sättigung
            <div class="sliderJQUI hue-slider-sat" style="width:90%" id="<%= this.data.attr('wid') %>_hue_sat_slider" data-oid="<%= hueIDs.SAT %>" data-hm-wid="<%= this.data.attr('oid-working') %>" <%= (el) -> vis.binds.jqueryui.slider(el, {min:0,max:255,step:1}) %> />
        </div>

    </div>
    <div class="popup-helper" <%= (el) -> vis.binds.jqueryui.dialog(el,{width:440,height:320,modal:data.attr('modal')},true) %> />
    <div class="popup-helper" <%= (el) -> if (data.attr("autoclose") === 'true' || data.attr("autoclose") === true) { vis.binds.jqueryui.dialogAutoClose(el) } %> />
    </div>
</script>

<script id="tplMfdHueDialog"
        type="text/ejs"
        class="vis-tpl"
        data-vis-set="jqui-mfd"
        data-vis-name="hue_ctrl - jqui Dialog HUE_EXTENDED_COLOR_LIGHT"
        data-vis-attrs="oid;title;autoclose/checkbox;modal/checkbox;invert_icon/checkbox"
        >
    <%
    var styles = "";
    if (this.data.invert_icon === "true" || this.data.invert_icon === true) {
        styles = "filter: invert(1); -webkit-filter: invert(1); -moz-filter: invert(1); -o-filter: invert(1); -ms-filter: invert(1);";
    }

    if (!localData.metaObjects[this.data.oid] || localData.metaObjects[this.data.oid].HssType != "HUE_EXTENDED_COLOR_LIGHT") {
        console.log("Widget "+this.data.attr('wid')+" error! ID has to be HUE_EXTENDED_COLOR_LIGHT Channel!");
    }

    if (localData.metaObjects[this.data.oid] && localData.metaObjects[this.data.oid].DPs) {
        var hueIDs = {
            STATE: localData.metaObjects[this.data.oid].DPs.STATE || 'nothing_selected',
            LEVEL: localData.metaObjects[this.data.oid].DPs.LEVEL || 'nothing_selected',
            COLORMODE: localData.metaObjects[this.data.oid].DPs.COLORMODE || 'nothing_selected',
            CT: localData.metaObjects[this.data.oid].DPs.CT || 'nothing_selected',
            SAT: localData.metaObjects[this.data.oid].DPs.SAT || 'nothing_selected',
            HUE: localData.metaObjects[this.data.oid].DPs.HUE || 'nothing_selected',
        };
    } else {
        var hueIDs = {
            STATE: 'nothing_selected',
            LEVEL: 'nothing_selected',
            COLORMODE: 'nothing_selected',
            CT: 'nothing_selected',
            SAT: 'nothing_selected',
            HUE: 'nothing_selected'
        };
    }
    %>
    <div data-oid="<%= hueIDs.STATE %>" class="vis-widget <%= this.data.attr('asButton') ? ' ui-widget ui-button ui-corner-all ui-state-default' : '' %> <%= this.data.attr('class') %>" id="<%= this.data.attr('wid') %>" style="width:76px; height:76px; position:absolute" <%= (el) -> vis.binds.jqueryui.classes(el) %>>
    <div id="<%= this.data.attr('wid') %>_body" class="vis-widget-body" style="width:100%; height:100%" <%= (el) -> vis.preloadImages(['widgets/jqui-mfd/img/light_light_dim_100.png','widgets/jqui-mfd/img/light_light_dim_90.png','widgets/jqui-mfd/img/light_light_dim_80.png','widgets/jqui-mfd/img/light_light_dim_70.png','widgets/jqui-mfd/img/light_light_dim_60.png','widgets/jqui-mfd/img/light_light_dim_50.png','widgets/jqui-mfd/img/light_light_dim_40.png','widgets/jqui-mfd/img/light_light_dim_30.png','widgets/jqui-mfd/img/light_light_dim_20.png','widgets/jqui-mfd/img/light_light_dim_10.png','widgets/jqui-mfd/img/light_light_dim.png']); %>>
    <%
    var str = vis.states.attr(hueIDs.LEVEL + '.val');
    var val = (parseFloat(str) + 1) / 255;

    if (val == 1) {
    %>
    <img style="<%= styles %>" width="100%" src="widgets/jqui-mfd/img/light_light_dim_100.png"/>
    <% } else if (val >= 0.9) { %>
    <img style="<%= styles %>" width="100%" src="widgets/jqui-mfd/img/light_light_dim_90.png"/>
    <% } else if (val >= 0.8) { %>
    <img style="<%= styles %>" width="100%" src="widgets/jqui-mfd/img/light_light_dim_80.png"/>
    <% } else if (val >= 0.7) { %>
    <img style="<%= styles %>" width="100%" src="widgets/jqui-mfd/img/light_light_dim_70.png"/>
    <% } else if (val >= 0.6) { %>
    <img style="<%= styles %>" width="100%" src="widgets/jqui-mfd/img/light_light_dim_60.png"/>
    <% } else if (val >= 0.5) { %>
    <img style="<%= styles %>" width="100%" src="widgets/jqui-mfd/img/light_light_dim_50.png"/>
    <% } else if (val >= 0.4) { %>
    <img style="<%= styles %>" width="100%" src="widgets/jqui-mfd/img/light_light_dim_40.png"/>
    <% } else if (val >= 0.3) { %>
    <img style="<%= styles %>" width="100%" src="widgets/jqui-mfd/img/light_light_dim_30.png"/>
    <% } else if (val >= 0.2) { %>
    <img style="<%= styles %>" width="100%" src="widgets/jqui-mfd/img/light_light_dim_20.png"/>
    <% } else if (val >= 0.1) { %>
    <img style="<%= styles %>" width="100%" src="widgets/jqui-mfd/img/light_light_dim_10.png"/>
    <% } else if (val >= 0.01) { %>
    <img style="<%= styles %>" width="100%" src="widgets/jqui-mfd/img/light_light_dim_00.png"/>
    <% } else { %>
    <img style="<%= styles %>" width="100%" src="widgets/jqui-mfd/img/light_light_dim.png"/>
    <% } %>
    </div>
    <div id="<%= this.data.attr('wid') %>_dialog" class="vis-widget-dialog" title="<%== this.data.title || this.data.attr('oid') %>" style="padding-left:20px;">

        <br/>
        <span id="<%= this.data.attr('wid') %>_radio"  data-oid="<%= hueIDs.STATE %>" <%= (el) -> vis.binds.jqueryui.radio(el); %> >
            <input type="radio" id="<%= this.data.attr('wid') %>_radio_off" name="<%= this.data.attr('wid') %>_radio" value="false" checked="checked"/><label for="<%= this.data.attr('wid') %>_radio_off"><%= _('off') %></label>
            <input type="radio" id="<%= this.data.attr('wid') %>_radio_on" name="<%= this.data.attr('wid') %>_radio" value="true"/><label for="<%= this.data.attr('wid') %>_radio_on"><%= _('on') %></label>
        </span>

        <span style="padding-left: 25px" id="<%= this.data.attr('wid') %>_radio_cm"  data-oid="<%= hueIDs.COLORMODE %>" <%= (el) -> vis.binds.jqueryui.radio(el); %> >
            <input type="radio" id="<%= this.data.attr('wid') %>_radio_cm_ct" name="<%= this.data.attr('wid') %>_radio_cm" value="ct" checked="checked"/><label for="<%= this.data.attr('wid') %>_radio_cm_ct">weiß</label>
            <input type="radio" id="<%= this.data.attr('wid') %>_radio_cm_hs" name="<%= this.data.attr('wid') %>_radio_cm" value="hs"/><label for="<%= this.data.attr('wid') %>_radio_cm_hs">farbe</label>
        </span>

        <br/><br/>
        Helligkeit
        <div class="sliderJQUI" style="width:90%" id="<%= this.data.attr('wid') %>_slider" data-oid="<%= hueIDs.LEVEL %>" data-hm-wid="<%= this.data.attr('oid-working') %>" <%= (el) -> vis.binds.jqueryui.slider(el, {min:0,max:255,step:1}) %> />
        <br/>

        <br/>
        <div class="hue-mode-ct">
            <div class="sliderJQUI hue-slider-ct" style="width:90%" id="<%= this.data.attr('wid') %>_hue_ct_slider" data-oid="<%= hueIDs.CT %>" data-hm-wid="<%= this.data.attr('oid-working') %>" <%= (el) -> vis.binds.jqueryui.slider(el, {min:153,max:500,step:1}) %> />
        </div>
        <div class="hue-mode-hue">
            <div class="sliderJQUI hue-slider-hue" style="width:90%" id="<%= this.data.attr('wid') %>_hue_hue_slider" data-oid="<%= hueIDs.HUE %>" data-hm-wid="<%= this.data.attr('oid-working') %>" <%= (el) -> vis.binds.jqueryui.slider(el, {min:0,max:'nothing_selected',step:1}) %> />
            <br/>
            Sättigung
            <div class="sliderJQUI hue-slider-sat" style="width:90%" id="<%= this.data.attr('wid') %>_hue_sat_slider" data-oid="<%= hueIDs.SAT %>" data-hm-wid="<%= this.data.attr('oid-working') %>" <%= (el) -> vis.binds.jqueryui.slider(el, {min:0,max:255,step:1}) %> />
        </div>

    </div>
    <div class="pupup-helper" <%= (el) -> vis.binds.jqueryui.hueColormode(el, hueIDs.COLORMODE) %> />
    <div class="popup-helper" <%= (el) -> vis.binds.jqueryui.dialog(el,{width:440,height:320,modal:data.attr('modal')},true) %> />
    <div class="popup-helper" <%= (el) -> if (data.attr("autoclose") === 'true' || data.attr("autoclose") === true) { vis.binds.jqueryui.dialogAutoClose(el) } %> />
    </div>
</script-->

<script id="tplMfdCamSnapshot"
        type="text/ejs"
        class="vis-tpl"
        data-vis-set="jqui-mfd"
        data-vis-type="static,camera,dialog"
        data-vis-prev='<div id="prev_tplMfdCamSnapshot" style="position: relative; text-align: initial;padding: 4px "><div class="vis-widget_prev ui-widget ui-button ui-corner-all ui-state-default " style="width: 70px; height: 70px;"> <div class="vis-widget-prev-body"> <img src="widgets/jqui-mfd/img/it_camera.png" style="filter: invert(1); -webkit-filter: invert(1); -moz-filter: invert(1); -o-filter: invert(1); -ms-filter: invert(1); vertical-align:middle;height:100%;"></div></div></div>'
        data-vis-name="Cam/Snapshot - Dialog"
        data-vis-attrs="alt;text;icon/image;invert_icon/checkbox;asButton[true]/checkbox;"
        data-vis-attrs0="group.dialog;url;interval[2000];title;modal/checkbox;dialog_width[640];dialog_height[480]"
        >
    <%
        var styles = "";
        if (this.data.invert_icon === "true" || this.data.invert_icon === true) {
            styles = "filter: invert(1); -webkit-filter: invert(1); -moz-filter: invert(1); -o-filter: invert(1); -ms-filter: invert(1);";
        }

    %>
    <div class="vis-widget <%= this.data.attr('asButton') ? ' ui-widget ui-button ui-corner-all ui-state-default' : '' %> <%== this.data.attr('class') %>" style="width: 76px; height: 76px;" id="<%= this.data.attr('wid') %>" <%= (el) -> vis.binds.jqueryui.classes(el) %>>
        <div id="<%= this.data.attr('wid') %>_body" class="vis-widget-body">
            <img src="<%= this.data.attr('icon') ? this.data.attr('icon') : 'widgets/jqui-mfd/img/it_camera.png' %>" style="<%= styles %> vertical-align:middle;height:100%;" alt="<%== this.data.attr('alt') %>" />
            <%= this.data.attr('text') %>
        </div>
        <div style="overflow-y: hidden !important;" id="<%= this.data.attr('wid') %>_dialog" class="<%= this.data.attr('wid') %>_dialog vis-widget-dialog" title="<%== this.data.attr('title') %>">
            <img id="<%= this.data.wid %>_img" alt="<%= this.data.text %>" style="width:<%= this.data.dialog_width %>px; height:<%= this.data.dialog_height %>px; border:none;" src="<%= this.data.url %>"/>
            <div <%= (el) -> vis.binds.basic.imgRefresh(el, data.attr('url'), data.attr('interval')) %>></div>
        </div>
        <div class="popup-helper" <%= (el) -> vis.binds.jqueryui.dialog(el, {width: data.attr('dialog_width'), height: (parseInt(data.attr('dialog_height'), 10) + 60), modal:data.attr('modal')}, true, true) %> />
    </div>
</script>

<script id="tplValMfdCamSnapshot"
        type="text/ejs"
        class="vis-tpl"
        data-vis-set="jqui-mfd"
        data-vis-type="val,camera,dialog"
        data-vis-prev='<div id="prev_tplValMfdCamSnapshot" style="position: relative; text-align: initial;padding: 4px "><div class="vis-widget_prev ui-widget ui-button ui-corner-all ui-state-default ui-state-active" style="width: 70px; height: 70px;"> <div class="vis-widget-prev-body"> <img src="widgets/jqui-mfd/img/it_camera.png" style="filter: invert(1); -webkit-filter: invert(1); -moz-filter: invert(1); -o-filter: invert(1); -ms-filter: invert(1); vertical-align:middle;height:100%;"></div></div></div>'
        data-vis-name="Cam/Snapshot - Dialog"
        data-vis-attrs="oid;alt;text;icon/image;invert_icon/checkbox;asButton[true]/checkbox;"
        data-vis-attrs0="group.dialog;url;interval[2000];title;modal/checkbox;dialog_width[640];dialog_height[480]"
        >
    <%
        var styles = "";
        if (this.data.invert_icon === "true" || this.data.invert_icon === true) {
            styles = "filter: invert(1); -webkit-filter: invert(1); -moz-filter: invert(1); -o-filter: invert(1); -ms-filter: invert(1);";
        }

    %>
    <div class="vis-widget <%= this.data.attr('asButton') ? ' ui-widget ui-button ui-corner-all ui-state-default' : '' %> <%== this.data.attr('class') %>" style="width: 76px; height: 76px;" id="<%= this.data.attr('wid') %>" <%= (el) -> vis.binds.jqueryui.classes(el) %>>
        <div id="<%= this.data.attr('wid') %>_body" class="vis-widget-body">
            <img src="<%= this.data.attr('icon') ? this.data.attr('icon') : 'widgets/jqui-mfd/img/it_camera.png' %>" style="<%= styles %> vertical-align:middle;height:100%;" alt="<%== this.data.attr('alt') %>" />
            <%= this.data.attr('text') %>
        </div>
        <div style="overflow-y: hidden !important;" id="<%= this.data.attr('wid') %>_dialog" class="<%= this.data.attr('wid') %>_dialog vis-widget-dialog" title="<%== this.data.attr('title') %>">
            <img id="<%= this.data.wid %>_img" alt="<%= this.data.text %>" style="width:<%= this.data.dialog_width %>px; height:<%= this.data.dialog_height %>px; border:none;" src="<%= vis.states.attr(this.data.oid + '.val' )  %>"/>
            <div <%= (el) -> vis.binds.basic.imgRefresh(el, vis.states.attr(data.oid + '.val' ) , data.attr('interval')) %>></div>
        </div>
        <div class="popup-helper" <%= (el) -> vis.binds.jqueryui.dialog(el, {width: data.attr('dialog_width'), height: (parseInt(data.attr('dialog_height'), 10) + 60), modal:data.attr('modal')}, true, true) %> />
    </div>
</script>

<script id="tplMfdCamMjpg"
        type="text/ejs"
        class="vis-tpl"
        data-vis-set="jqui-mfd"
        data-vis-prev='<div id="prev_tplMfdCamMjpg" style="position: relative; text-align: initial;padding: 4px "><div class="vis-widget_prev ui-widget ui-button ui-corner-all ui-state-default" style="width: 70px; height: 70px;"> <div class="vis-widget-prev-body"> <img src="widgets/jqui-mfd/img/it_camera.png" style="filter: invert(1); -webkit-filter: invert(1); -moz-filter: invert(1); -o-filter: invert(1); -ms-filter: invert(1); vertical-align:middle;height:100%;"></div></div></div>'
        data-vis-type="static,camera,dialog"
        data-vis-name="Cam/Video (img) - Dialog"
        data-vis-attrs="alt;text;icon/image;invert_icon/checkbox;asButton[true]/checkbox;"
        data-vis-attrs0="group.dialog;url;title;modal/checkbox;dialog_width[640];dialog_height[480]">
    <%
        var styles = "";
        if (this.data.invert_icon === "true" || this.data.invert_icon === true) {
            styles = "filter: invert(1); -webkit-filter: invert(1); -moz-filter: invert(1); -o-filter: invert(1); -ms-filter: invert(1);";
        }
        var html = '<img id="' + this.data.wid + '_img" alt="' + this.data.text + '" style="width:' + this.data.dialog_width + 'px; height:' + this.data.dialog_height + 'px; border:none;" src="' + this.data.url + '"/>';
    %>
    <div class="vis-widget <%= this.data.attr('asButton') ? ' ui-widget ui-button ui-corner-all ui-state-default' : '' %> <%== this.data.attr('class') %>" style="width: 76px; height: 76px;" id="<%= this.data.attr('wid') %>" <%= (el) -> vis.binds.jqueryui.classes(el) %>>
        <div id="<%= this.data.attr('wid') %>_body" class="vis-widget-body">
            <img src="<%= this.data.attr('icon') ? this.data.attr('icon') : 'widgets/jqui-mfd/img/it_camera.png' %>" style="<%= styles %> vertical-align:middle;height:100%;" alt="<%== this.data.attr('alt') %>" />
            <%= this.data.attr('text') %>
        </div>
        <div>
            <div style="overflow-y: hidden !important;" id="<%= this.data.attr('wid') %>_dialog" class="<%= this.data.attr('wid') %>_dialog vis-widget-dialog" title="<%== this.data.attr('title') %>">
            </div>
            <div <%= (el) -> vis.binds.basic.imgRefresh(el, data.attr('url'), null, true) %>>
            </div>
        </div>
        <div class="popup-helper" <%= (el) -> vis.binds.jqueryui.dialog(el, {width: data.attr('dialog_width'), height: (parseInt(data.attr('dialog_height'), 10) + 60), modal:data.attr('modal')}, false, false, html) %> />
    </div>
</script>

<script id="tplValMfdCamMjpg"
        type="text/ejs"
        class="vis-tpl"
        data-vis-set="jqui-mfd"
        data-vis-type="val,camera,dialog"
        data-vis-prev='<div id="prev_tplValMfdCamMjpg" style="position: relative; text-align: initial;padding: 4px "><div class="vis-widget_prev ui-widget ui-button ui-corner-all ui-state-default ui-state-active" style="width: 70px; height: 70px;"> <div class="vis-widget-prev-body"> <img src="widgets/jqui-mfd/img/it_camera.png" style="filter: invert(1); -webkit-filter: invert(1); -moz-filter: invert(1); -o-filter: invert(1); -ms-filter: invert(1); vertical-align:middle;height:100%;"></div></div></div>'
        data-vis-name="Cam/Video (img) - Dialog"
        data-vis-attrs="oid;alt;icon/image;text;invert_icon/checkbox;asButton[true]/checkbox"
        data-vis-attrs0="group.dialog;url;title;modal/checkbox;dialog_width[640];dialog_height[480]"
        >
    <%
        var styles = "";
        if (this.data.invert_icon === "true" || this.data.invert_icon === true) {
            styles = "filter: invert(1); -webkit-filter: invert(1); -moz-filter: invert(1); -o-filter: invert(1); -ms-filter: invert(1);";
        }
        var html = '<img id="' + this.data.wid + '_img" alt="' + this.data.text + '" style="width:' + this.data.dialog_width + 'px; height:' + this.data.dialog_height + 'px; border:none;" src="' + vis.states.attr(this.data.oid + '.val' ) + '"/>';
    %>
    <div class="vis-widget <%= this.data.attr('asButton') ? ' ui-widget ui-button ui-corner-all ui-state-default' : '' %> <%== this.data.attr('class') %>" style="width: 76px; height: 76px;" id="<%= this.data.attr('wid') %>" <%= (el) -> vis.binds.jqueryui.classes(el) %>>
        <div id="<%= this.data.attr('wid') %>_body" class="vis-widget-body">
            <img src="<%= this.data.attr('icon') ? this.data.attr('icon') : 'widgets/jqui-mfd/img/it_camera.png' %>" style="<%= styles %> vertical-align:middle;height:100%;" alt="<%== this.data.attr('alt') %>" />
            <%= this.data.attr('text') %>
        </div>
        <div>
            <div style="overflow-y: hidden !important;" id="<%= this.data.attr('wid') %>_dialog" class="<%= this.data.attr('wid') %>_dialog vis-widget-dialog" title="<%== this.data.attr('title') %>">
            </div>
            <div <%= (el) -> vis.binds.basic.imgRefresh(el, data.attr('url'), null, true) %>>
            </div>
        </div>
        <div class="popup-helper" <%= (el) -> vis.binds.jqueryui.dialog(el, {width: data.attr('dialog_width'), height: (parseInt(data.attr('dialog_height'), 10) + 60), modal:data.attr('modal')}, false, false, html) %> />
    </div>
</script>

<script id="tplMfdCamVideo"
        type="text/ejs"
        class="vis-tpl"
        data-vis-set="jqui-mfd"
        data-vis-prev='<div id="prev_tplMfdCamVideo" style="position: relative; text-align: initial;padding: 4px "><div class="vis-widget_prev ui-widget ui-button ui-corner-all ui-state-default" style="width: 70px; height: 70px;"> <div class="vis-widget-prev-body"> <img src="widgets/jqui-mfd/img/it_camera.png" style="filter: invert(1); -webkit-filter: invert(1); -moz-filter: invert(1); -o-filter: invert(1); -ms-filter: invert(1); vertical-align:middle;height:100%;"></div></div></div>'
        data-vis-type="static,camera,dialog"
        data-vis-name="Cam/Video (html5) - Dialog"
        data-vis-attrs="alt;text;icon/image;invert_icon/checkbox;asButton[true]/checkbox;use_object/checkbox;"
        data-vis-attrs0="group.dialog;src_url;poster_url;title;modal/checkbox;dialog_width[640];dialog_height[480]"
        >
    <%
        var styles = "";
        if (this.data.invert_icon === "true" || this.data.invert_icon === true) {
            styles = "filter: invert(1); -webkit-filter: invert(1); -moz-filter: invert(1); -o-filter: invert(1); -ms-filter: invert(1);";
        }
        var html = '<' + ((this.data.use_object === 'true' || this.data.use_object === true) ? 'object' : 'video') + ' id="' + this.data.wid + '_video" style="width:' + this.data.dialog_width + 'px; height:' + this.data.dialog_height + 'px; border:none;" src="' + this.data.src_url + '" poster="' + this.data.poster_url + '" autoplay="autoplay"></' + ((this.data.use_object === 'true' || this.data.use_object === true) ? 'object' : 'video') + '>';
    %>
    <div class="vis-widget <%= this.data.attr('asButton') ? ' ui-widget ui-button ui-corner-all ui-state-default' : '' %> <%== this.data.attr('class') %>" style="width: 76px; height: 76px;" id="<%= this.data.attr('wid') %>" <%= (el) -> vis.binds.jqueryui.classes(el) %>>
        <div id="<%= this.data.attr('wid') %>_body" class="vis-widget-body">
            <img src="<%= this.data.attr('icon') ? this.data.attr('icon') : 'widgets/jqui-mfd/img/it_camera.png' %>" style="<%= styles %> vertical-align:middle;height:100%;" alt="<%== this.data.attr('alt') %>" />
            <%= this.data.attr('text') %>
        </div>
        <div style="overflow-y: hidden !important;" id="<%= this.data.attr('wid') %>_dialog" class="<%= this.data.attr('wid') %>_dialog vis-widget-dialog" title="<%== this.data.attr('title') %>">
        </div>
        <div class="popup-helper" <%= (el) -> vis.binds.jqueryui.dialog(el, {width: data.attr('dialog_width'), height: (parseInt(data.attr('dialog_height'), 10) + 60), modal:data.attr('modal')}, false, false, html) %> />
    </div>
</script>

<script id="tplValMfdCamVideo"
        type="text/ejs"
        class="vis-tpl"
        data-vis-set="jqui-mfd"
        data-vis-type="val,camera,dialog"
        data-vis-prev='<div id="prev_tplValMfdCamVideo" style="position: relative; text-align: initial;padding: 4px "><div class="vis-widget_prev ui-widget ui-button ui-corner-all ui-state-default ui-state-active" style="width: 70px; height: 70px;"> <div class="vis-widget-prev-body"> <img src="widgets/jqui-mfd/img/it_camera.png" style="filter: invert(1); -webkit-filter: invert(1); -moz-filter: invert(1); -o-filter: invert(1); -ms-filter: invert(1); vertical-align:middle;height:100%;"></div></div></div>'
        data-vis-name="Cam/Video (html5) - Dialog"
        data-vis-attrs="oid;alt;icon/image;text;invert_icon/checkbox;asButton[true]/checkbox;use_object/checkbox"
        data-vis-attrs0="group.dialog;poster_url;title;modal/checkbox;dialog_width[640];dialog_height[480]"
        >
    <%
        var styles = "";
        if (this.data.invert_icon === "true" || this.data.invert_icon === true) {
            styles = "filter: invert(1); -webkit-filter: invert(1); -moz-filter: invert(1); -o-filter: invert(1); -ms-filter: invert(1);";
        }
        var html = '<' + ((this.data.use_object === 'true' || this.data.use_object === true) ? 'object' : 'video') + ' id="' + this.data.wid + '_video" style="width:' + this.data.dialog_width + 'px; height:' + this.data.dialog_height + 'px; border:none;" src="' + vis.states.attr(this.data.oid + '.val' ) + '" poster="' + this.data.poster_url + '" autoplay="autoplay"></' + ((this.data.use_object === 'true' || this.data.use_object === true) ? 'object' : 'video') + '>';
    %>
    <div class="vis-widget <%= this.data.attr('asButton') ? ' ui-widget ui-button ui-corner-all ui-state-default' : '' %> <%== this.data.attr('class') %>" style="width: 76px; height: 76px;" id="<%= this.data.attr('wid') %>" <%= (el) -> vis.binds.jqueryui.classes(el) %>>
        <div id="<%= this.data.attr('wid') %>_body" class="vis-widget-body">
            <img src="<%= this.data.attr('icon') ? this.data.attr('icon') : 'widgets/jqui-mfd/img/it_camera.png' %>" style="<%= styles %> vertical-align:middle;height:100%;" alt="<%== this.data.attr('alt') %>" />
            <%= this.data.attr('text') %>
        </div>
        <div style="overflow-y: hidden !important;" id="<%= this.data.attr('wid') %>_dialog" class="<%= this.data.attr('wid') %>_dialog vis-widget-dialog" title="<%== this.data.attr('title') %>">
        </div>
        <div class="popup-helper" <%= (el) -> vis.binds.jqueryui.dialog(el, {width: data.attr('dialog_width'), height: (parseInt(data.attr('dialog_height'), 10) + 60), modal:data.attr('modal')}, false, false, html) %> />
    </div>
</script>

<script id="tplMfdCamVideoObject"
    type="text/ejs"
    class="vis-tpl"
    data-vis-set="jqui-mfd"
    data-vis-prev='<div id="prev_tplMfdCamVideoObject" style="position: relative; text-align: initial;padding: 4px "><div class="vis-widget_prev ui-widget ui-button ui-corner-all ui-state-default" style="width: 70px; height: 70px;"> <div class="vis-widget-prev-body"> <img src="widgets/jqui-mfd/img/it_camera.png" style="filter: invert(1); -webkit-filter: invert(1); -moz-filter: invert(1); -o-filter: invert(1); -ms-filter: invert(1); vertical-align:middle;height:100%;"></div></div></div>'
    data-vis-type="static,camera,dialog"
    data-vis-name="Cam/Video (Object) - Dialog"
    data-vis-attrs="alt;text;icon/image;invert_icon/checkbox;asButton[true]/checkbox;"
    data-vis-attrs0="group.dialog;src_url;qtsrc_url;title;modal/checkbox;dialog_width[640];dialog_height[480];type_application[video~quicktime]/auto,video~mpeg,video~mp4,video~ogg,video~quicktime,video~webm,video~x-ms-wmv,video~x-flv;plugin;autoplay[true]"
    >
    <%
        var styles = "";
        if (this.data.invert_icon === "true" || this.data.invert_icon === true) {
            styles = "filter: invert(1); -webkit-filter: invert(1); -moz-filter: invert(1); -o-filter: invert(1); -ms-filter: invert(1);";
        }
        var html = '<object id="' + this.data.wid + '_video" width="' + this.data.dialog_width + 'px" height="'+ this.data.dialog_height + 'px"><embed type="' +this.data.type_application +'"  width="' + this.data.dialog_width + 'px" height="'+ this.data.dialog_height + 'px" src="' + this.data.src_url + '" qtsrc="' + this.data.qtsrc_url + '" autoplay="'+ this.data.autoplay + '" enablejavasript="true" href="javaScript:void(0)" plugin="'+ this.data.plugin + '" ></object>';
    %>
    <div class="vis-widget <%= this.data.attr('asButton') ? ' ui-widget ui-button ui-corner-all ui-state-default' : '' %> <%== this.data.attr('class') %>" style="width: 76px; height: 76px;" id="<%= this.data.attr('wid') %>" <%= (el) -> vis.binds.jqueryui.classes(el) %>>
        <div id="<%= this.data.attr('wid') %>_body" class="vis-widget-body">
            <img src="<%= this.data.attr('icon') ? this.data.attr('icon') : 'widgets/jqui-mfd/img/it_camera.png' %>" style="<%= styles %> vertical-align: middle; height: 100%;" alt="<%== this.data.attr('alt') %>" />
            <%= this.data.attr('text') %>
        </div>
        <div style="overflow-y: hidden !important;" id="<%= this.data.attr('wid') %>_dialog" class="<%= this.data.attr('wid') %>_dialog vis-widget-dialog" title="<%== this.data.attr('title') %>">
        </div>
        <div class="popup-helper" <%= (el) -> vis.binds.jqueryui.dialog(el, {width: data.attr('dialog_width'), height: (parseInt(data.attr('dialog_height'), 10) + 60), modal:data.attr('modal')}, false, false, html) %> />
    </div>
</script>